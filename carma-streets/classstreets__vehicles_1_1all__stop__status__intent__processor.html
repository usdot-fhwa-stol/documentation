<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: streets_vehicles::all_stop_status_intent_processor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classstreets__vehicles_1_1all__stop__status__intent__processor.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classstreets__vehicles_1_1all__stop__status__intent__processor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">streets_vehicles::all_stop_status_intent_processor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Status Intent processor implementation for all stop use case. Updates vehicle states based on the condition that all vehicles must stop before entering a stop sign controlled intersection.  
 <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for streets_vehicles::all_stop_status_intent_processor:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor__inherit__graph.png" border="0" usemap="#astreets__vehicles_1_1all__stop__status__intent__processor_inherit__map" alt="Inheritance graph"/></div>
<map name="astreets__vehicles_1_1all__stop__status__intent__processor_inherit__map" id="astreets__vehicles_1_1all__stop__status__intent__processor_inherit__map">
<area shape="rect" title="Status Intent processor implementation for all stop use case. Updates vehicle states based on the con..." alt="" coords="5,219,205,531"/>
<area shape="rect" href="classstreets__vehicles_1_1signalized__status__intent__processor.html" title=" " alt="" coords="15,579,195,729"/>
<area shape="rect" href="classstreets__vehicles_1_1status__intent__processor.html" title="Abstract Class to allow for customizable processing of status and intent vehicle updates...." alt="" coords="12,5,199,171"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for streets_vehicles::all_stop_status_intent_processor:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor__coll__graph.png" border="0" usemap="#astreets__vehicles_1_1all__stop__status__intent__processor_coll__map" alt="Collaboration graph"/></div>
<map name="astreets__vehicles_1_1all__stop__status__intent__processor_coll__map" id="astreets__vehicles_1_1all__stop__status__intent__processor_coll__map">
<area shape="rect" title="Status Intent processor implementation for all stop use case. Updates vehicle states based on the con..." alt="" coords="147,248,347,531"/>
<area shape="rect" href="classstreets__vehicles_1_1status__intent__processor.html" title="Abstract Class to allow for customizable processing of status and intent vehicle updates...." alt="" coords="5,5,192,171"/>
<area shape="rect" title=" " alt="" coords="217,49,277,127"/>
<area shape="rect" title=" " alt="" coords="363,49,431,127"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0bc8ce9258293c04a798cff18eee398"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#af0bc8ce9258293c04a798cff18eee398">all_stop_status_intent_processor</a> (const double stopping_distance=1.0, const double stopping_speed=0.1, const uint64_t timeout=30000)</td></tr>
<tr class="memdesc:af0bc8ce9258293c04a798cff18eee398"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new all stop status intent processor object.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#af0bc8ce9258293c04a798cff18eee398">More...</a><br /></td></tr>
<tr class="separator:af0bc8ce9258293c04a798cff18eee398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9df0a1a3f5a77fe4fcd0b405bfab0f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ab9df0a1a3f5a77fe4fcd0b405bfab0f4">set_stopping_distance</a> (const double stopping_distance)</td></tr>
<tr class="memdesc:ab9df0a1a3f5a77fe4fcd0b405bfab0f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set stopping_distance stopping condition.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ab9df0a1a3f5a77fe4fcd0b405bfab0f4">More...</a><br /></td></tr>
<tr class="separator:ab9df0a1a3f5a77fe4fcd0b405bfab0f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89822b6c6f045b584f622f7a604b33b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#af89822b6c6f045b584f622f7a604b33b">set_stopping_speed</a> (const double stopping_speed)</td></tr>
<tr class="memdesc:af89822b6c6f045b584f622f7a604b33b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set stopping_speed stopping condition.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#af89822b6c6f045b584f622f7a604b33b">More...</a><br /></td></tr>
<tr class="separator:af89822b6c6f045b584f622f7a604b33b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7308fe8b861031993792d0c95cf82d90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90">from_json</a> (const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const override</td></tr>
<tr class="memdesc:a7308fe8b861031993792d0c95cf82d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process JSON status and intent update and convert it to an streets_vehicle_update.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90">More...</a><br /></td></tr>
<tr class="separator:a7308fe8b861031993792d0c95cf82d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701e67611fa726d7693f82b3302f0324"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a701e67611fa726d7693f82b3302f0324">get_timeout</a> () const override</td></tr>
<tr class="memdesc:a701e67611fa726d7693f82b3302f0324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the timeout in milliseconds. Timeout value controls when updates are no longer considered valid.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a701e67611fa726d7693f82b3302f0324">More...</a><br /></td></tr>
<tr class="separator:a701e67611fa726d7693f82b3302f0324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a1b270d0eced95feb9e5062420a6f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a12a1b270d0eced95feb9e5062420a6f6">set_timeout</a> (const uint64_t timeout) override</td></tr>
<tr class="memdesc:a12a1b270d0eced95feb9e5062420a6f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the timeout in milliseconds Timeout value controls when updates are no longer considered valid.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a12a1b270d0eced95feb9e5062420a6f6">More...</a><br /></td></tr>
<tr class="separator:a12a1b270d0eced95feb9e5062420a6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a141c395b9b3fde39caa20a5433c1c3aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a141c395b9b3fde39caa20a5433c1c3aa">~all_stop_status_intent_processor</a> () override=default</td></tr>
<tr class="memdesc:a141c395b9b3fde39caa20a5433c1c3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the all stop status intent processor object.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a141c395b9b3fde39caa20a5433c1c3aa">More...</a><br /></td></tr>
<tr class="separator:a141c395b9b3fde39caa20a5433c1c3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstreets__vehicles_1_1status__intent__processor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstreets__vehicles_1_1status__intent__processor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstreets__vehicles_1_1status__intent__processor.html">streets_vehicles::status_intent_processor</a></td></tr>
<tr class="memitem:abafa7673c5b8a3d39a33d3d9bd5b12b6 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#abafa7673c5b8a3d39a33d3d9bd5b12b6">process_status_intent</a> (const rapidjson::Document &amp;doc, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:abafa7673c5b8a3d39a33d3d9bd5b12b6 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process JSON status and intent update and convert it to an streets_vehicle_update.  <a href="classstreets__vehicles_1_1status__intent__processor.html#abafa7673c5b8a3d39a33d3d9bd5b12b6">More...</a><br /></td></tr>
<tr class="separator:abafa7673c5b8a3d39a33d3d9bd5b12b6 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aade7f4f98fdf41c0c9d512f6a9494d95 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#aade7f4f98fdf41c0c9d512f6a9494d95">from_json</a> (const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const =0</td></tr>
<tr class="memdesc:aade7f4f98fdf41c0c9d512f6a9494d95 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process JSON status and intent Object and update vehicle.  <a href="classstreets__vehicles_1_1status__intent__processor.html#aade7f4f98fdf41c0c9d512f6a9494d95">More...</a><br /></td></tr>
<tr class="separator:aade7f4f98fdf41c0c9d512f6a9494d95 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f7eca3d48118e9323f869b112a2f20 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#a99f7eca3d48118e9323f869b112a2f20">get_vehicle_id</a> (const std::string &amp;status_intent_msg, rapidjson::Document &amp;doc) const</td></tr>
<tr class="memdesc:a99f7eca3d48118e9323f869b112a2f20 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the vehicle id string from status and intent message.  <a href="classstreets__vehicles_1_1status__intent__processor.html#a99f7eca3d48118e9323f869b112a2f20">More...</a><br /></td></tr>
<tr class="separator:a99f7eca3d48118e9323f869b112a2f20 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59822b56e0589dba350c907f79385e76 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">virtual uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#a59822b56e0589dba350c907f79385e76">get_timeout</a> () const =0</td></tr>
<tr class="memdesc:a59822b56e0589dba350c907f79385e76 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the timeout Any vehicle status and intent updates after this will be considered timed out and any vehicles with timed out updates as their most recent update will be purged from the vehicle list.  <a href="classstreets__vehicles_1_1status__intent__processor.html#a59822b56e0589dba350c907f79385e76">More...</a><br /></td></tr>
<tr class="separator:a59822b56e0589dba350c907f79385e76 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a274ba0955f451100de8e340545538542 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#a274ba0955f451100de8e340545538542">set_timeout</a> (uint64_t timeout)=0</td></tr>
<tr class="memdesc:a274ba0955f451100de8e340545538542 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the timeout in milliseconds for the <a class="el" href="classstreets__vehicles_1_1status__intent__processor.html" title="Abstract Class to allow for customizable processing of status and intent vehicle updates....">status_intent_processor</a>. Any vehicle status and intent updates after this will be considered timed out and any vehicles with timed out updates as their most recent update will be purged from the vehicle list.  <a href="classstreets__vehicles_1_1status__intent__processor.html#a274ba0955f451100de8e340545538542">More...</a><br /></td></tr>
<tr class="separator:a274ba0955f451100de8e340545538542 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18c9308681a12b7b2406da61e538c72 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#ab18c9308681a12b7b2406da61e538c72">~status_intent_processor</a> ()=default</td></tr>
<tr class="memdesc:ab18c9308681a12b7b2406da61e538c72 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the status intent processor object.  <a href="classstreets__vehicles_1_1status__intent__processor.html#ab18c9308681a12b7b2406da61e538c72">More...</a><br /></td></tr>
<tr class="separator:ab18c9308681a12b7b2406da61e538c72 inherit pub_methods_classstreets__vehicles_1_1status__intent__processor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4315db81a214ecf564076d78397cb467"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a4315db81a214ecf564076d78397cb467">read_metadata</a> (const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:a4315db81a214ecf564076d78397cb467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads metadata element in status and intent vehicle update.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a4315db81a214ecf564076d78397cb467">More...</a><br /></td></tr>
<tr class="separator:a4315db81a214ecf564076d78397cb467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecf488ec3917a0ca3ca8ca2c627f24fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc">read_payload</a> (const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:aecf488ec3917a0ca3ca8ca2c627f24fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads payload element in status and intent vehicle update.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc">More...</a><br /></td></tr>
<tr class="separator:aecf488ec3917a0ca3ca8ca2c627f24fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb338e07c0bd7aa48c490d29823dd0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a5fb338e07c0bd7aa48c490d29823dd0d">read_est_path</a> (const rapidjson::GenericArray&lt; true, rapidjson::Value &gt; &amp;json, <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:a5fb338e07c0bd7aa48c490d29823dd0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads estimated path element in status and intent vehicle update.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a5fb338e07c0bd7aa48c490d29823dd0d">More...</a><br /></td></tr>
<tr class="separator:a5fb338e07c0bd7aa48c490d29823dd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a3f6bc8f4d1066c476a6b8d5e8e2f9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9">update_vehicle_state</a> (<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:ae4a3f6bc8f4d1066c476a6b8d5e8e2f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates vehicle state based on previous state and stopping condition.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9">More...</a><br /></td></tr>
<tr class="separator:ae4a3f6bc8f4d1066c476a6b8d5e8e2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6d0b32c2cde092c20061998225df7442"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442">is_vehicle_stopped</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;<a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a>) const</td></tr>
<tr class="memdesc:a6d0b32c2cde092c20061998225df7442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is vehicle considered stopped at stopping line according to stopping conditions.  <a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442">More...</a><br /></td></tr>
<tr class="separator:a6d0b32c2cde092c20061998225df7442"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7acafb46aa506f52816a47e259120b7c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">_stopping_distance</a></td></tr>
<tr class="separator:a7acafb46aa506f52816a47e259120b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db9d9f3c3ff3e7373afeaab4e8872a5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">_stopping_speed</a></td></tr>
<tr class="separator:a0db9d9f3c3ff3e7373afeaab4e8872a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a4f2c264bedd086bd48c8b074e9ffa4"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">_timeout</a></td></tr>
<tr class="separator:a2a4f2c264bedd086bd48c8b074e9ffa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Status Intent processor implementation for all stop use case. Updates vehicle states based on the condition that all vehicles must stop before entering a stop sign controlled intersection. </p>
<dl class="section author"><dt>Author</dt><dd>Paul Bourelly </dd></dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00018">18</a> of file <a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af0bc8ce9258293c04a798cff18eee398" name="af0bc8ce9258293c04a798cff18eee398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0bc8ce9258293c04a798cff18eee398">&#9670;&nbsp;</a></span>all_stop_status_intent_processor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_vehicles::all_stop_status_intent_processor::all_stop_status_intent_processor </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>stopping_distance</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>stopping_speed</em> = <code>0.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>30000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new all stop status intent processor object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stopping_distance</td><td>min distance from stop line in meters to be considered stopped(default = 5 m). </td></tr>
    <tr><td class="paramname">stopping_speed</td><td>min speed in m/s to be considered stopped(default = 0.1 m/s). </td></tr>
    <tr><td class="paramname">timeout</td><td>time interval after which vehicle updates will no longer be considered valid in milliseconds(default = 30s). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00027">27</a> of file <a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                                                                                                                                                  : </div>
<div class="line"><span class="lineno">   28</span>                <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">_stopping_distance</a>(stopping_distance), <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">_stopping_speed</a>(stopping_speed), <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">_timeout</a>(timeout) {</div>
<div class="line"><span class="lineno">   29</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;All stop status and intent processor initialization.&quot;</span>);</div>
<div class="line"><span class="lineno">   30</span>                };</div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a0db9d9f3c3ff3e7373afeaab4e8872a5"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">streets_vehicles::all_stop_status_intent_processor::_stopping_speed</a></div><div class="ttdeci">double _stopping_speed</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8h_source.html#l00100">all_stop_status_intent_processor.h:100</a></div></div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a2a4f2c264bedd086bd48c8b074e9ffa4"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">streets_vehicles::all_stop_status_intent_processor::_timeout</a></div><div class="ttdeci">uint64_t _timeout</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8h_source.html#l00102">all_stop_status_intent_processor.h:102</a></div></div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a7acafb46aa506f52816a47e259120b7c"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">streets_vehicles::all_stop_status_intent_processor::_stopping_distance</a></div><div class="ttdeci">double _stopping_distance</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8h_source.html#l00098">all_stop_status_intent_processor.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a141c395b9b3fde39caa20a5433c1c3aa" name="a141c395b9b3fde39caa20a5433c1c3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a141c395b9b3fde39caa20a5433c1c3aa">&#9670;&nbsp;</a></span>~all_stop_status_intent_processor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_vehicles::all_stop_status_intent_processor::~all_stop_status_intent_processor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the all stop status intent processor object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7308fe8b861031993792d0c95cf82d90" name="a7308fe8b861031993792d0c95cf82d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7308fe8b861031993792d0c95cf82d90">&#9670;&nbsp;</a></span>from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::from_json </td>
          <td>(</td>
          <td class="paramtype">const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process JSON status and intent update and convert it to an streets_vehicle_update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status_intent_msg</td><td>rapidjson::Value JSON status and intent update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>streets_vehicle_update. </dd></dl>

<p>Implements <a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#aade7f4f98fdf41c0c9d512f6a9494d95">streets_vehicles::status_intent_processor</a>.</p>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00006">6</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>                                                                                                                                   {</div>
<div class="line"><span class="lineno">    7</span>        </div>
<div class="line"><span class="lineno">    8</span>        <span class="comment">/* the main function will check whether veh_id is included in the message or not</span></div>
<div class="line"><span class="lineno">    9</span><span class="comment">        *  if it is not included, this function cannot be executed!</span></div>
<div class="line"><span class="lineno">   10</span><span class="comment">        */</span></div>
<div class="line"><span class="lineno">   11</span>        <span class="comment">// Get Meta Data</span></div>
<div class="line"><span class="lineno">   12</span>        <span class="keywordflow">if</span> (json.FindMember(<span class="stringliteral">&quot;metadata&quot;</span>)-&gt;value.IsObject()){</div>
<div class="line"><span class="lineno">   13</span>            rapidjson::GenericObject&lt;true, rapidjson::Value&gt; metadata = json.FindMember(<span class="stringliteral">&quot;metadata&quot;</span>)-&gt;value.GetObject();</div>
<div class="line"><span class="lineno">   14</span>            <span class="keywordflow">if</span> (json.FindMember(<span class="stringliteral">&quot;payload&quot;</span>)-&gt;value.IsObject()){</div>
<div class="line"><span class="lineno">   15</span>                rapidjson::GenericObject&lt;true, rapidjson::Value&gt; payload = json.FindMember(<span class="stringliteral">&quot;payload&quot;</span>)-&gt;value.GetObject();</div>
<div class="line"><span class="lineno">   16</span>                <a class="code hl_function" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a4315db81a214ecf564076d78397cb467">read_metadata</a>( metadata, vehicle );</div>
<div class="line"><span class="lineno">   17</span>                <a class="code hl_function" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc">read_payload</a>( payload, vehicle );  </div>
<div class="line"><span class="lineno">   18</span>                <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;est_paths&quot;</span>)-&gt;value.IsArray()) {</div>
<div class="line"><span class="lineno">   19</span>                    rapidjson::GenericArray&lt;true, rapidjson::Value&gt; est_path = payload.FindMember(<span class="stringliteral">&quot;est_paths&quot;</span>)-&gt;value.GetArray();</div>
<div class="line"><span class="lineno">   20</span>                    <a class="code hl_function" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a5fb338e07c0bd7aa48c490d29823dd0d">read_est_path</a>(est_path, vehicle);</div>
<div class="line"><span class="lineno">   21</span>                }</div>
<div class="line"><span class="lineno">   22</span>                <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   23</span>                    SPDLOG_WARN(<span class="stringliteral">&quot;The \&quot;est_paths\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   24</span>                }</div>
<div class="line"><span class="lineno">   25</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Vehicle Class Vehicle Info Update - timestamp = {0}, vehicle = {1}, lane_id = {2}, state = {3}, speed = {4} m/s, distance = {5} m, access = {6}&quot;</span>, </div>
<div class="line"><span class="lineno">   26</span>                    <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id, <span class="keywordtype">int</span>(<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state), <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_speed, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_distance, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._access);</div>
<div class="line"><span class="lineno">   27</span>            }</div>
<div class="line"><span class="lineno">   28</span>        }  </div>
<div class="line"><span class="lineno">   29</span>    }</div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a4315db81a214ecf564076d78397cb467"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a4315db81a214ecf564076d78397cb467">streets_vehicles::all_stop_status_intent_processor::read_metadata</a></div><div class="ttdeci">void read_metadata(const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, vehicle &amp;vehicle) const</div><div class="ttdoc">Reads metadata element in status and intent vehicle update.</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8cpp_source.html#l00031">all_stop_status_intent_processor.cpp:31</a></div></div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a5fb338e07c0bd7aa48c490d29823dd0d"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a5fb338e07c0bd7aa48c490d29823dd0d">streets_vehicles::all_stop_status_intent_processor::read_est_path</a></div><div class="ttdeci">void read_est_path(const rapidjson::GenericArray&lt; true, rapidjson::Value &gt; &amp;json, vehicle &amp;vehicle) const</div><div class="ttdoc">Reads estimated path element in status and intent vehicle update.</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8cpp_source.html#l00205">all_stop_status_intent_processor.cpp:205</a></div></div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_aecf488ec3917a0ca3ca8ca2c627f24fc"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc">streets_vehicles::all_stop_status_intent_processor::read_payload</a></div><div class="ttdeci">void read_payload(const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;json, vehicle &amp;vehicle) const</div><div class="ttdoc">Reads payload element in status and intent vehicle update.</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8cpp_source.html#l00053">all_stop_status_intent_processor.cpp:53</a></div></div>
<div class="ttc" id="anamespaceintersection__model_html_aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2"><div class="ttname"><a href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">intersection_model::map_lane_type::vehicle</a></div><div class="ttdeci">@ vehicle</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00061">streets_vehicles::vehicle::_access</a>, <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00049">streets_vehicles::vehicle::_cur_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, <a class="el" href="vehicle_8h_source.html#l00079">streets_vehicles::vehicle::_cur_state</a>, <a class="el" href="vehicle_8h_source.html#l00071">streets_vehicles::vehicle::_cur_time</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00205">read_est_path()</a>, <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00031">read_metadata()</a>, and <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00053">read_payload()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90_cgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90_cgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90_cgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90_cgraph">
<area shape="rect" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,85,205,141"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a5fb338e07c0bd7aa48c490d29823dd0d" title="Reads estimated path element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a4315db81a214ecf564076d78397cb467" title="Reads metadata element in status and intent vehicle update." alt="" coords="253,85,453,141"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc" title="Reads payload element in status and intent vehicle update." alt="" coords="253,165,453,221"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="565,60,637,87"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9" title="Updates vehicle state based on previous state and stopping condition." alt="" coords="501,165,701,221"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442" title="Is vehicle considered stopped at stopping line according to stopping conditions." alt="" coords="749,165,949,221"/>
</map>
</div>

</div>
</div>
<a id="a701e67611fa726d7693f82b3302f0324" name="a701e67611fa726d7693f82b3302f0324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701e67611fa726d7693f82b3302f0324">&#9670;&nbsp;</a></span>get_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicles::all_stop_status_intent_processor::get_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the timeout in milliseconds. Timeout value controls when updates are no longer considered valid. </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t timeout value in milliseconds. </dd></dl>

<p>Implements <a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#a59822b56e0589dba350c907f79385e76">streets_vehicles::status_intent_processor</a>.</p>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00273">273</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  273</span>                                                                 {</div>
<div class="line"><span class="lineno">  274</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">_timeout</a>;</div>
<div class="line"><span class="lineno">  275</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00102">_timeout</a>.</p>

</div>
</div>
<a id="a6d0b32c2cde092c20061998225df7442" name="a6d0b32c2cde092c20061998225df7442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d0b32c2cde092c20061998225df7442">&#9670;&nbsp;</a></span>is_vehicle_stopped()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool streets_vehicles::all_stop_status_intent_processor::is_vehicle_stopped </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is vehicle considered stopped at stopping line according to stopping conditions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vehicle</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if considered stopped . </dd>
<dd>
false if not considered stopped. </dd></dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00263">263</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  263</span>                                                                                          {</div>
<div class="line"><span class="lineno">  264</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Stopping condition spd: {0}, dst: {1}; Vehicle condition spd: {2}, dst: {3} .&quot;</span>, </div>
<div class="line"><span class="lineno">  265</span>            <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">_stopping_speed</a>, <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">_stopping_distance</a>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_speed, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_distance);</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_speed &lt;= <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">_stopping_speed</a> &amp;&amp; <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_distance &lt;= <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">_stopping_distance</a>;</div>
<div class="line"><span class="lineno">  267</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00098">_stopping_distance</a>, and <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00100">_stopping_speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00163">update_vehicle_state()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442_icgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442_icgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442_icgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442_icgraph">
<area shape="rect" title="Is vehicle considered stopped at stopping line according to stopping conditions." alt="" coords="749,5,949,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9" title="Updates vehicle state based on previous state and stopping condition." alt="" coords="501,5,701,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc" title="Reads payload element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,5,205,61"/>
</map>
</div>

</div>
</div>
<a id="a5fb338e07c0bd7aa48c490d29823dd0d" name="a5fb338e07c0bd7aa48c490d29823dd0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fb338e07c0bd7aa48c490d29823dd0d">&#9670;&nbsp;</a></span>read_est_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::read_est_path </td>
          <td>(</td>
          <td class="paramtype">const rapidjson::GenericArray&lt; true, rapidjson::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads estimated path element in status and intent vehicle update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">json</td><td>est_path json object </td></tr>
    <tr><td class="paramname">vehicle</td><td>reference to update </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00205">205</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  205</span>                                                                                                                                           {</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>                </div>
<div class="line"><span class="lineno">  208</span>        <span class="comment">/* the first point in the future path is the current point */</span></div>
<div class="line"><span class="lineno">  209</span>        std::vector&lt;future_information&gt; future_info;</div>
<div class="line"><span class="lineno">  210</span>        future_information fi;</div>
<div class="line"><span class="lineno">  211</span>        fi.timestamp = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time;</div>
<div class="line"><span class="lineno">  212</span>        fi.lane_id = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id;</div>
<div class="line"><span class="lineno">  213</span>        fi.distance = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_distance;</div>
<div class="line"><span class="lineno">  214</span>        future_info.push_back(fi);</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">for</span> (rapidjson::SizeType <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; est_path.Size(); ++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>){</div>
<div class="line"><span class="lineno">  216</span>            rapidjson::GenericObject&lt;true, rapidjson::Value&gt; path_point = est_path[<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>].GetObject();</div>
<div class="line"><span class="lineno">  217</span>            <span class="comment">/* adding checks to make sure the necessary data exist in the future point */</span></div>
<div class="line"><span class="lineno">  218</span>            <span class="comment">// Added member end check for Int64 type</span></div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">if</span> (path_point.FindMember(<span class="stringliteral">&quot;ts&quot;</span>) != path_point.MemberEnd() &amp;&amp;</div>
<div class="line"><span class="lineno">  220</span>                path_point.FindMember(<span class="stringliteral">&quot;ts&quot;</span>)-&gt;value.IsUint64() &amp;&amp; </div>
<div class="line"><span class="lineno">  221</span>                path_point.FindMember(<span class="stringliteral">&quot;id&quot;</span>)-&gt;value.IsInt() &amp;&amp; </div>
<div class="line"><span class="lineno">  222</span>                path_point.FindMember(<span class="stringliteral">&quot;ds&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>                <span class="comment">/* adding checks to make sure only valid future points will be saved */</span></div>
<div class="line"><span class="lineno">  225</span>                <span class="keywordflow">if</span> (path_point[<span class="stringliteral">&quot;id&quot;</span>].GetInt() == 0){</div>
<div class="line"><span class="lineno">  226</span>                    SPDLOG_WARN(<span class="stringliteral">&quot;Ignoring incorrect future point with index {0} for vehicle {1}: \&quot;id\&quot; cannot be 0!&quot;</span>, <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id );</div>
<div class="line"><span class="lineno">  227</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  228</span>                }</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path_point[<span class="stringliteral">&quot;ds&quot;</span>].GetDouble() &lt; 0){</div>
<div class="line"><span class="lineno">  230</span>                    SPDLOG_WARN(<span class="stringliteral">&quot;Ignoring incorrect future point with index {0} for vehicle {1}: \&quot;ds\&quot; cannot be negative!&quot;</span>, <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id );</div>
<div class="line"><span class="lineno">  231</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  232</span>                }</div>
<div class="line"><span class="lineno">  233</span>            </div>
<div class="line"><span class="lineno">  234</span>                <span class="comment">/* the future path received from CARMA Platform does not consider the stopping requirement at the stop bar.</span></div>
<div class="line"><span class="lineno">  235</span><span class="comment">                *  therefore, CARMA Streets will force the stopping requirement to the vehicle&#39;s future path.</span></div>
<div class="line"><span class="lineno">  236</span><span class="comment">                *  basically, if the vehicle is an EV, or and RDV without access, if the vehicle lane id in the future path is not the same as the vehicle entry lane id, the scheduling service will ignore the future points.</span></div>
<div class="line"><span class="lineno">  237</span><span class="comment">                * */</span></div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">if</span> (future_info[future_info.size() - 1].distance &gt;= path_point[<span class="stringliteral">&quot;ds&quot;</span>].GetDouble()){</div>
<div class="line"><span class="lineno">  239</span>                    fi = future_information();</div>
<div class="line"><span class="lineno">  240</span>                    <span class="comment">// the unit of timestamp in here is sec with decimal places.</span></div>
<div class="line"><span class="lineno">  241</span>                    fi.timestamp = path_point[<span class="stringliteral">&quot;ts&quot;</span>].GetInt64();</div>
<div class="line"><span class="lineno">  242</span>                    fi.distance = path_point[<span class="stringliteral">&quot;ds&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">  243</span>                    fi.lane_id = path_point[<span class="stringliteral">&quot;id&quot;</span>].GetInt();</div>
<div class="line"><span class="lineno">  244</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;future path {0}: {1}, {2}, {3}, {4}&quot;</span>, <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, fi.lane_id, fi.distance);</div>
<div class="line"><span class="lineno">  245</span>                    future_info.push_back(fi);</div>
<div class="line"><span class="lineno">  246</span>                } </div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  248</span>                    SPDLOG_INFO(<span class="stringliteral">&quot;Vehicle {0}: the lane id of the vehicle in the est_path has changed!&quot;</span>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id);</div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  250</span>                }</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>                </div>
<div class="line"><span class="lineno">  253</span>            }</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;Ignoring incorrect/incomplete future point with index &quot;</span> </div>
<div class="line"><span class="lineno">  256</span>                    + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>) +<span class="stringliteral">&quot; for vehicle &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot;!&quot;</span> );</div>
<div class="line"><span class="lineno">  257</span>            }</div>
<div class="line"><span class="lineno">  258</span>        }</div>
<div class="line"><span class="lineno">  259</span>        </div>
<div class="line"><span class="lineno">  260</span>        <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._future_info = future_info;</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="ttc" id="anamespacesimulate__bsm_html_a29b8e2f01a805057636de5ad54422c21"><div class="ttname"><a href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">simulate_bsm.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00019">simulate_bsm.py:19</a></div></div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00049">streets_vehicles::vehicle::_cur_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00071">streets_vehicles::vehicle::_cur_time</a>, <a class="el" href="vehicle_8h_source.html#l00081">streets_vehicles::vehicle::_future_info</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="vehicle_8h_source.html#l00019">streets_vehicles::future_information::distance</a>, <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>, <a class="el" href="vehicle_8h_source.html#l00017">streets_vehicles::future_information::lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00015">streets_vehicles::future_information::timestamp</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00006">from_json()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_cgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_cgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_cgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_cgraph">
<area shape="rect" title="Reads estimated path element in status and intent vehicle update." alt="" coords="5,5,205,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="253,20,325,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_icgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_icgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_icgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d_icgraph">
<area shape="rect" title="Reads estimated path element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,5,205,61"/>
</map>
</div>

</div>
</div>
<a id="a4315db81a214ecf564076d78397cb467" name="a4315db81a214ecf564076d78397cb467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4315db81a214ecf564076d78397cb467">&#9670;&nbsp;</a></span>read_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::read_metadata </td>
          <td>(</td>
          <td class="paramtype">const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads metadata element in status and intent vehicle update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">json</td><td>metadata json object. </td></tr>
    <tr><td class="paramname">vehicle</td><td>reference to update. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00031">31</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>                                                                                                                                             {</div>
<div class="line"><span class="lineno">   32</span>        <span class="comment">// MemberEnd check required for empty object possibility</span></div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordflow">if</span> ( metadata.FindMember(<span class="stringliteral">&quot;timestamp&quot;</span>) != metadata.MemberEnd() &amp;&amp; metadata.FindMember(<span class="stringliteral">&quot;timestamp&quot;</span>)-&gt;value.IsUint64()) {</div>
<div class="line"><span class="lineno">   34</span>            <span class="comment">// timestamp in milliseconds </span></div>
<div class="line"><span class="lineno">   35</span>            u_int64_t timeout_time = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::system_clock::now().time_since_epoch()).count() - <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">_timeout</a>;</div>
<div class="line"><span class="lineno">   36</span>            u_int64_t cur_time = metadata.FindMember(<span class="stringliteral">&quot;timestamp&quot;</span>)-&gt;value.GetUint64();</div>
<div class="line"><span class="lineno">   37</span>            <span class="keywordflow">if</span> ( timeout_time &gt; cur_time ) {</div>
<div class="line"><span class="lineno">   38</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;timestamp\&quot; &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(cur_time) + <span class="stringliteral">&quot; for update older than &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(timeout_time) + <span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><span class="lineno">   39</span>            }</div>
<div class="line"><span class="lineno">   40</span>            <span class="comment">// convert to seconds.</span></div>
<div class="line"><span class="lineno">   41</span>            <span class="keywordflow">if</span> ( cur_time &gt; <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time) {</div>
<div class="line"><span class="lineno">   42</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time = cur_time;</div>
<div class="line"><span class="lineno">   43</span>            }<span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   44</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;Ignore incoming \&quot;timestamp\&quot; &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(cur_time) + </div>
<div class="line"><span class="lineno">   45</span>                    <span class="stringliteral">&quot; older than stored last update &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time) + <span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><span class="lineno">   46</span>            }</div>
<div class="line"><span class="lineno">   47</span>        }</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   49</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;timestamp\&quot; is missing/incorrect in update!&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>        }</div>
<div class="line"><span class="lineno">   51</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00071">streets_vehicles::vehicle::_cur_time</a>, <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00102">_timeout</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00006">from_json()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_cgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_cgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_cgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_cgraph">
<area shape="rect" title="Reads metadata element in status and intent vehicle update." alt="" coords="5,5,205,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="253,20,325,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_icgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_icgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_icgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467_icgraph">
<area shape="rect" title="Reads metadata element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,5,205,61"/>
</map>
</div>

</div>
</div>
<a id="aecf488ec3917a0ca3ca8ca2c627f24fc" name="aecf488ec3917a0ca3ca8ca2c627f24fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf488ec3917a0ca3ca8ca2c627f24fc">&#9670;&nbsp;</a></span>read_payload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::read_payload </td>
          <td>(</td>
          <td class="paramtype">const rapidjson::GenericObject&lt; true, rapidjson::Value &gt; &amp;&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads payload element in status and intent vehicle update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">json</td><td>payload json object. </td></tr>
    <tr><td class="paramname">vehicle</td><td>reference to update. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00053">53</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                                                                                                                          {</div>
<div class="line"><span class="lineno">   54</span>        </div>
<div class="line"><span class="lineno">   55</span>        <span class="comment">/* this if condition checks whether the vehicle has been seen before or not */</span></div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id == <span class="stringliteral">&quot;&quot;</span>){</div>
<div class="line"><span class="lineno">   57</span>            </div>
<div class="line"><span class="lineno">   58</span>            <span class="keywordflow">if</span> ( payload.FindMember(<span class="stringliteral">&quot;v_id&quot;</span>)-&gt;value.IsString() ) {</div>
<div class="line"><span class="lineno">   59</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id = payload[<span class="stringliteral">&quot;v_id&quot;</span>].GetString();</div>
<div class="line"><span class="lineno">   60</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   61</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;Update is missing \&quot;v_id\&quot;! Cannot be processed!&quot;</span>);</div>
<div class="line"><span class="lineno">   62</span>            }</div>
<div class="line"><span class="lineno">   63</span>            <span class="comment">/* the unit of the received vehicle length from the message is centimeter without decimal places</span></div>
<div class="line"><span class="lineno">   64</span><span class="comment">            *  but the unit of the vehicle length defined in the vehicle class is meter with decimal places. </span></div>
<div class="line"><span class="lineno">   65</span><span class="comment">            *  Therefore, a conversion has been added here.</span></div>
<div class="line"><span class="lineno">   66</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">   67</span>            <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;v_length&quot;</span>)-&gt;value.IsInt()){</div>
<div class="line"><span class="lineno">   68</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._length =(double)payload[<span class="stringliteral">&quot;v_length&quot;</span>].GetInt() / 100;</div>
<div class="line"><span class="lineno">   69</span>            } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   70</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;v_length\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in the received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   71</span>            }</div>
<div class="line"><span class="lineno">   72</span>            </div>
<div class="line"><span class="lineno">   73</span>            <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;min_gap&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">   74</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._min_gap = payload[<span class="stringliteral">&quot;min_gap&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">   75</span>            } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   76</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;min_gap\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   77</span>            }</div>
<div class="line"><span class="lineno">   78</span>            </div>
<div class="line"><span class="lineno">   79</span>            <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;react_t&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">   80</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._reaction_time = payload[<span class="stringliteral">&quot;react_t&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">   81</span>            } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   82</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;react_t\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in the received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   83</span>            }</div>
<div class="line"><span class="lineno">   84</span>            </div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;max_accel&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">   86</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._accel_max = payload[<span class="stringliteral">&quot;max_accel&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">   87</span>            } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   88</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;max_accel\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in the received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   89</span>            }</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>            <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;max_decel&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">   92</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._decel_max = payload[<span class="stringliteral">&quot;max_decel&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">   93</span>            } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   94</span>                <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;max_decel\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in the received update!&quot;</span>);</div>
<div class="line"><span class="lineno">   95</span>            }</div>
<div class="line"><span class="lineno">   96</span>        }</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>            </div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;cur_speed&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">  100</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_speed = payload[<span class="stringliteral">&quot;cur_speed&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">  101</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;cur_speed\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;cur_accel&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">  106</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_accel = payload[<span class="stringliteral">&quot;cur_accel&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">  107</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  108</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;cur_accel\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>        }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;cur_lane_id&quot;</span>)-&gt;value.IsInt()){</div>
<div class="line"><span class="lineno">  112</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id = payload[<span class="stringliteral">&quot;cur_lane_id&quot;</span>].GetInt();</div>
<div class="line"><span class="lineno">  113</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;cur_lane_id\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  115</span>        }</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;cur_ds&quot;</span>)-&gt;value.IsDouble()){</div>
<div class="line"><span class="lineno">  117</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_distance = payload[<span class="stringliteral">&quot;cur_ds&quot;</span>].GetDouble();</div>
<div class="line"><span class="lineno">  118</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  119</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;cur_ds\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  120</span>        }</div>
<div class="line"><span class="lineno">  121</span>            </div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;is_allowed&quot;</span>)-&gt;value.IsBool()){</div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._access = payload[<span class="stringliteral">&quot;is_allowed&quot;</span>].GetBool();</div>
<div class="line"><span class="lineno">  124</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;is_allowed\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;depart_pos&quot;</span>)-&gt;value.IsInt64()){</div>
<div class="line"><span class="lineno">  129</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._departure_position = payload[<span class="stringliteral">&quot;depart_pos&quot;</span>].GetInt64();</div>
<div class="line"><span class="lineno">  130</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;depart_pos\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>        }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;entry_lane_id&quot;</span>)-&gt;value.IsInt() &amp;&amp; payload[<span class="stringliteral">&quot;entry_lane_id&quot;</span>].GetInt() != 0){</div>
<div class="line"><span class="lineno">  136</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id = payload[<span class="stringliteral">&quot;entry_lane_id&quot;</span>].GetInt();</div>
<div class="line"><span class="lineno">  137</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  138</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;entry_lane_id\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  139</span>        }</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;dest_lane_id&quot;</span>)-&gt;value.IsInt() &amp;&amp; payload[<span class="stringliteral">&quot;dest_lane_id&quot;</span>].GetInt() != 0){</div>
<div class="line"><span class="lineno">  142</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._exit_lane_id =payload[<span class="stringliteral">&quot;dest_lane_id&quot;</span>].GetInt();</div>
<div class="line"><span class="lineno">  143</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  144</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;dest_lane_id\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  145</span>        }</div>
<div class="line"><span class="lineno">  146</span>        </div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;link_lane_id&quot;</span>)-&gt;value.IsInt() &amp;&amp; payload[<span class="stringliteral">&quot;link_lane_id&quot;</span>].GetInt() != 0){</div>
<div class="line"><span class="lineno">  148</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._link_id = payload[<span class="stringliteral">&quot;link_lane_id&quot;</span>].GetInt();</div>
<div class="line"><span class="lineno">  149</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;link_lane_id\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>        }</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">if</span> (payload.FindMember(<span class="stringliteral">&quot;direction&quot;</span>)-&gt;value.IsString() ){</div>
<div class="line"><span class="lineno">  154</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._direction = payload[<span class="stringliteral">&quot;direction&quot;</span>].GetString();</div>
<div class="line"><span class="lineno">  155</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  156</span>            <span class="keywordflow">throw</span> status_intent_processing_exception(<span class="stringliteral">&quot;The \&quot;direction\&quot; &quot;</span> + <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id + <span class="stringliteral">&quot; is missing/incorrect in received update!&quot;</span>);</div>
<div class="line"><span class="lineno">  157</span>        }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_function" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9">update_vehicle_state</a>(vehicle);</div>
<div class="line"><span class="lineno">  161</span>    }</div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9">streets_vehicles::all_stop_status_intent_processor::update_vehicle_state</a></div><div class="ttdeci">virtual void update_vehicle_state(vehicle &amp;vehicle) const</div><div class="ttdoc">Updates vehicle state based on previous state and stopping condition.</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8cpp_source.html#l00163">all_stop_status_intent_processor.cpp:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00045">streets_vehicles::vehicle::_accel_max</a>, <a class="el" href="vehicle_8h_source.html#l00061">streets_vehicles::vehicle::_access</a>, <a class="el" href="vehicle_8h_source.html#l00077">streets_vehicles::vehicle::_cur_accel</a>, <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00049">streets_vehicles::vehicle::_cur_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, <a class="el" href="vehicle_8h_source.html#l00047">streets_vehicles::vehicle::_decel_max</a>, <a class="el" href="vehicle_8h_source.html#l00063">streets_vehicles::vehicle::_departure_position</a>, <a class="el" href="vehicle_8h_source.html#l00057">streets_vehicles::vehicle::_direction</a>, <a class="el" href="vehicle_8h_source.html#l00051">streets_vehicles::vehicle::_entry_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00053">streets_vehicles::vehicle::_exit_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="vehicle_8h_source.html#l00039">streets_vehicles::vehicle::_length</a>, <a class="el" href="vehicle_8h_source.html#l00055">streets_vehicles::vehicle::_link_id</a>, <a class="el" href="vehicle_8h_source.html#l00041">streets_vehicles::vehicle::_min_gap</a>, <a class="el" href="vehicle_8h_source.html#l00043">streets_vehicles::vehicle::_reaction_time</a>, and <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00163">update_vehicle_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00006">from_json()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_cgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_cgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_cgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_cgraph">
<area shape="rect" title="Reads payload element in status and intent vehicle update." alt="" coords="5,5,205,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9" title="Updates vehicle state based on previous state and stopping condition." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442" title="Is vehicle considered stopped at stopping line according to stopping conditions." alt="" coords="501,5,701,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_icgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_icgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_icgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc_icgraph">
<area shape="rect" title="Reads payload element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,5,205,61"/>
</map>
</div>

</div>
</div>
<a id="ab9df0a1a3f5a77fe4fcd0b405bfab0f4" name="ab9df0a1a3f5a77fe4fcd0b405bfab0f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9df0a1a3f5a77fe4fcd0b405bfab0f4">&#9670;&nbsp;</a></span>set_stopping_distance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::set_stopping_distance </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>stopping_distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set stopping_distance stopping condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stopping_distance</td><td>max distance from stop line at which vehicle can be considered stopped in meters. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00277">277</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>                                                                                               {</div>
<div class="line"><span class="lineno">  278</span>        <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7acafb46aa506f52816a47e259120b7c">_stopping_distance</a> = stopping_distance;</div>
<div class="line"><span class="lineno">  279</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00098">_stopping_distance</a>.</p>

</div>
</div>
<a id="af89822b6c6f045b584f622f7a604b33b" name="af89822b6c6f045b584f622f7a604b33b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af89822b6c6f045b584f622f7a604b33b">&#9670;&nbsp;</a></span>set_stopping_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::set_stopping_speed </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>stopping_speed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set stopping_speed stopping condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stopping_speed</td><td>max speed at which vehicle can be considered stopped in m/s. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00281">281</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  281</span>                                                                                         {</div>
<div class="line"><span class="lineno">  282</span>        <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a0db9d9f3c3ff3e7373afeaab4e8872a5">_stopping_speed</a> = stopping_speed;</div>
<div class="line"><span class="lineno">  283</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00100">_stopping_speed</a>.</p>

</div>
</div>
<a id="a12a1b270d0eced95feb9e5062420a6f6" name="a12a1b270d0eced95feb9e5062420a6f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a1b270d0eced95feb9e5062420a6f6">&#9670;&nbsp;</a></span>set_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::set_timeout </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the timeout in milliseconds Timeout value controls when updates are no longer considered valid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classstreets__vehicles_1_1status__intent__processor.html#a274ba0955f451100de8e340545538542">streets_vehicles::status_intent_processor</a>.</p>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00269">269</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  269</span>                                                                       {</div>
<div class="line"><span class="lineno">  270</span>        <a class="code hl_variable" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a2a4f2c264bedd086bd48c8b074e9ffa4">_timeout</a> = timeout;</div>
<div class="line"><span class="lineno">  271</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00102">_timeout</a>.</p>

</div>
</div>
<a id="ae4a3f6bc8f4d1066c476a6b8d5e8e2f9" name="ae4a3f6bc8f4d1066c476a6b8d5e8e2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4a3f6bc8f4d1066c476a6b8d5e8e2f9">&#9670;&nbsp;</a></span>update_vehicle_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicles::all_stop_status_intent_processor::update_vehicle_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstreets__vehicles_1_1vehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>vehicle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates vehicle state based on previous state and stopping condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vehicle</td><td>reference to update </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classstreets__vehicles_1_1signalized__status__intent__processor.html#a50ef00017c88c5b111bab425b28de778">streets_vehicles::signalized_status_intent_processor</a>.</p>

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00163">163</a> of file <a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>                                                                                        {</div>
<div class="line"><span class="lineno">  164</span>        SPDLOG_INFO(<span class="stringliteral">&quot;Update vehilce status with all stop status and intent processor.&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span>        </div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca9a116c50d133c8648404081885194300">vehicle_state::ND</a> ){</div>
<div class="line"><span class="lineno">  167</span>            <span class="keywordflow">if</span> ( <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id == <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id ) {</div>
<div class="line"><span class="lineno">  168</span>                <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state = <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">vehicle_state::EV</a> ;</div>
<div class="line"><span class="lineno">  169</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Vehicle {0} state is updated from ND to EV.&quot;</span>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id);    </div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            }</div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  173</span>                SPDLOG_CRITICAL( <span class="stringliteral">&quot;Vehicle with ND (Not Defined) STATE is NOT in entry lane {0} != {1}&quot;</span>,</div>
<div class="line"><span class="lineno">  174</span>                    <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id);</div>
<div class="line"><span class="lineno">  175</span>            }</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        }</div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">// Asssume vehicle is in entry lane if previous state is EV</span></div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">vehicle_state::EV</a> &amp;&amp; <a class="code hl_function" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442">is_vehicle_stopped</a>( vehicle ) ){</div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">if</span> ( <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id != <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id ){</div>
<div class="line"><span class="lineno">  181</span>                SPDLOG_CRITICAL(<span class="stringliteral">&quot;Stopped vehicle with EV (Entering Vehicle) STATE is NOT in entry lane {0} != {1}&quot;</span> ,</div>
<div class="line"><span class="lineno">  182</span>                    <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id );</div>
<div class="line"><span class="lineno">  183</span>            }</div>
<div class="line"><span class="lineno">  184</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state =  <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f">vehicle_state::RDV</a>;</div>
<div class="line"><span class="lineno">  185</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._actual_st = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time;</div>
<div class="line"><span class="lineno">  186</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Vehicle {0} state is updated from EV to RDV.&quot;</span>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id);   </div>
<div class="line"><span class="lineno">  187</span>        }</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f">vehicle_state::RDV</a> &amp;&amp; <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._access ){</div>
<div class="line"><span class="lineno">  189</span>            <span class="keywordflow">if</span> ( <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id != <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id ){</div>
<div class="line"><span class="lineno">  190</span>                SPDLOG_CRITICAL(<span class="stringliteral">&quot;Departing vehicle with RDV (Ready to Depart Vehicle) VEHICLE STATE is NOT in entry lane {0} != {1}&quot;</span> ,</div>
<div class="line"><span class="lineno">  191</span>                    <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._entry_lane_id, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id );</div>
<div class="line"><span class="lineno">  192</span>            }</div>
<div class="line"><span class="lineno">  193</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state = <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">vehicle_state::DV</a>;</div>
<div class="line"><span class="lineno">  194</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._actual_et = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time;</div>
<div class="line"><span class="lineno">  195</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Vehicle {0} state is updated from RDV to DV.&quot;</span>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id);   </div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_lane_id == <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._exit_lane_id &amp;&amp; <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">vehicle_state::DV</a>) {</div>
<div class="line"><span class="lineno">  198</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_state = <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acaa7bdee32cb21f0abbf9f878cb06cfe16">vehicle_state::LV</a>;</div>
<div class="line"><span class="lineno">  199</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._actual_dt = <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._cur_time;</div>
<div class="line"><span class="lineno">  200</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Vehicle {0} state is updated from DV to LV.&quot;</span>, <a class="code hl_enumvalue" href="namespaceintersection__model.html#aa7ffa99ba647ab571c0bbeb2591c40b8a5a76e813d6a0a40548b91acc11557bd2">vehicle</a>._id);    </div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>        }</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="ttc" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_html_a6d0b32c2cde092c20061998225df7442"><div class="ttname"><a href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442">streets_vehicles::all_stop_status_intent_processor::is_vehicle_stopped</a></div><div class="ttdeci">bool is_vehicle_stopped(const vehicle &amp;vehicle) const</div><div class="ttdoc">Is vehicle considered stopped at stopping line according to stopping conditions.</div><div class="ttdef"><b>Definition:</b> <a href="all__stop__status__intent__processor_8cpp_source.html#l00263">all_stop_status_intent_processor.cpp:263</a></div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::vehicle_state::DV</a></div><div class="ttdeci">@ DV</div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a></div><div class="ttdeci">@ EV</div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca9a116c50d133c8648404081885194300"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca9a116c50d133c8648404081885194300">streets_vehicles::vehicle_state::ND</a></div><div class="ttdeci">@ ND</div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405acaa7bdee32cb21f0abbf9f878cb06cfe16"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acaa7bdee32cb21f0abbf9f878cb06cfe16">streets_vehicles::vehicle_state::LV</a></div><div class="ttdeci">@ LV</div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f">streets_vehicles::vehicle_state::RDV</a></div><div class="ttdeci">@ RDV</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00061">streets_vehicles::vehicle::_access</a>, <a class="el" href="vehicle_8h_source.html#l00069">streets_vehicles::vehicle::_actual_dt</a>, <a class="el" href="vehicle_8h_source.html#l00067">streets_vehicles::vehicle::_actual_et</a>, <a class="el" href="vehicle_8h_source.html#l00065">streets_vehicles::vehicle::_actual_st</a>, <a class="el" href="vehicle_8h_source.html#l00049">streets_vehicles::vehicle::_cur_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00079">streets_vehicles::vehicle::_cur_state</a>, <a class="el" href="vehicle_8h_source.html#l00071">streets_vehicles::vehicle::_cur_time</a>, <a class="el" href="vehicle_8h_source.html#l00051">streets_vehicles::vehicle::_entry_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00053">streets_vehicles::vehicle::_exit_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::DV</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00263">is_vehicle_stopped()</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acaa7bdee32cb21f0abbf9f878cb06cfe16">streets_vehicles::LV</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca9a116c50d133c8648404081885194300">streets_vehicles::ND</a>, and <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f">streets_vehicles::RDV</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00053">read_payload()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_cgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_cgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_cgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_cgraph">
<area shape="rect" title="Updates vehicle state based on previous state and stopping condition." alt="" coords="5,5,205,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a6d0b32c2cde092c20061998225df7442" title="Is vehicle considered stopped at stopping line according to stopping conditions." alt="" coords="253,5,453,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_icgraph.png" border="0" usemap="#aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_icgraph" alt=""/></div>
<map name="aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_icgraph" id="aclassstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9_icgraph">
<area shape="rect" title="Updates vehicle state based on previous state and stopping condition." alt="" coords="501,5,701,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#aecf488ec3917a0ca3ca8ca2c627f24fc" title="Reads payload element in status and intent vehicle update." alt="" coords="253,5,453,61"/>
<area shape="rect" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html#a7308fe8b861031993792d0c95cf82d90" title="Process JSON status and intent update and convert it to an streets_vehicle_update." alt="" coords="5,5,205,61"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7acafb46aa506f52816a47e259120b7c" name="a7acafb46aa506f52816a47e259120b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7acafb46aa506f52816a47e259120b7c">&#9670;&nbsp;</a></span>_stopping_distance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicles::all_stop_status_intent_processor::_stopping_distance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00098">98</a> of file <a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00263">is_vehicle_stopped()</a>, and <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00277">set_stopping_distance()</a>.</p>

</div>
</div>
<a id="a0db9d9f3c3ff3e7373afeaab4e8872a5" name="a0db9d9f3c3ff3e7373afeaab4e8872a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db9d9f3c3ff3e7373afeaab4e8872a5">&#9670;&nbsp;</a></span>_stopping_speed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicles::all_stop_status_intent_processor::_stopping_speed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00100">100</a> of file <a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00263">is_vehicle_stopped()</a>, and <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00281">set_stopping_speed()</a>.</p>

</div>
</div>
<a id="a2a4f2c264bedd086bd48c8b074e9ffa4" name="a2a4f2c264bedd086bd48c8b074e9ffa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a4f2c264bedd086bd48c8b074e9ffa4">&#9670;&nbsp;</a></span>_timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicles::all_stop_status_intent_processor::_timeout</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="all__stop__status__intent__processor_8h_source.html#l00102">102</a> of file <a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00273">get_timeout()</a>, <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00031">read_metadata()</a>, and <a class="el" href="all__stop__status__intent__processor_8cpp_source.html#l00269">set_timeout()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>streets_utils/streets_vehicle_list/include/<a class="el" href="all__stop__status__intent__processor_8h_source.html">all_stop_status_intent_processor.h</a></li>
<li>streets_utils/streets_vehicle_list/src/message_processors/<a class="el" href="all__stop__status__intent__processor_8cpp_source.html">all_stop_status_intent_processor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacestreets__vehicles.html">streets_vehicles</a></li><li class="navelem"><a class="el" href="classstreets__vehicles_1_1all__stop__status__intent__processor.html">all_stop_status_intent_processor</a></li>
    <li class="footer">Generated on Thu Oct 19 2023 14:30:04 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
