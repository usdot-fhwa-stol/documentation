<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: traffic_signal_controller_service::tsc_state Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtraffic__signal__controller__service_1_1tsc__state.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtraffic__signal__controller__service_1_1tsc__state-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">traffic_signal_controller_service::tsc_state Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for traffic_signal_controller_service::tsc_state:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state__coll__graph.png" border="0" usemap="#atraffic__signal__controller__service_1_1tsc__state_coll__map" alt="Collaboration graph"/></div>
<map name="atraffic__signal__controller__service_1_1tsc__state_coll__map" id="atraffic__signal__controller__service_1_1tsc__state_coll__map">
<area shape="rect" title=" " alt="" coords="485,233,690,780"/>
<area shape="rect" title=" " alt="" coords="5,5,177,112"/>
<area shape="rect" title=" " alt="" coords="202,5,399,112"/>
<area shape="rect" title=" " alt="" coords="424,13,564,105"/>
<area shape="rect" title=" " alt="" coords="659,20,753,97"/>
<area shape="rect" title=" " alt="" coords="831,20,869,97"/>
<area shape="rect" title=" " alt="" coords="988,5,1155,112"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aedb4290f73cd4cfd58b04e1e05969781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aedb4290f73cd4cfd58b04e1e05969781">tsc_state</a> (std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>)</td></tr>
<tr class="memdesc:aedb4290f73cd4cfd58b04e1e05969781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> class.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#aedb4290f73cd4cfd58b04e1e05969781">More...</a><br /></td></tr>
<tr class="separator:aedb4290f73cd4cfd58b04e1e05969781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27876c0c6172cbb37788cadd97bf6ff3"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a27876c0c6172cbb37788cadd97bf6ff3">get_signal_group_state_map</a> ()</td></tr>
<tr class="memdesc:a27876c0c6172cbb37788cadd97bf6ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return reference to signal group state map.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a27876c0c6172cbb37788cadd97bf6ff3">More...</a><br /></td></tr>
<tr class="separator:a27876c0c6172cbb37788cadd97bf6ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c5b30b02b58f1b0f875c5a2c3eff13"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab8c5b30b02b58f1b0f875c5a2c3eff13">get_signal_group_to_ped_phase_map</a> ()</td></tr>
<tr class="memdesc:ab8c5b30b02b58f1b0f875c5a2c3eff13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of signal group ids to pedestrian phases.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ab8c5b30b02b58f1b0f875c5a2c3eff13">More...</a><br /></td></tr>
<tr class="separator:ab8c5b30b02b58f1b0f875c5a2c3eff13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af1335fd676f86de7fcbd38493d3985"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a9af1335fd676f86de7fcbd38493d3985">get_ped_phase_map</a> ()</td></tr>
<tr class="memdesc:a9af1335fd676f86de7fcbd38493d3985"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of pedestrian phases to signal group ids.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a9af1335fd676f86de7fcbd38493d3985">More...</a><br /></td></tr>
<tr class="separator:a9af1335fd676f86de7fcbd38493d3985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c96f54a5eb802026f93906dc1b77d8"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a40c96f54a5eb802026f93906dc1b77d8">get_vehicle_phase_map</a> ()</td></tr>
<tr class="memdesc:a40c96f54a5eb802026f93906dc1b77d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of pedestrian phases to signal group ids.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a40c96f54a5eb802026f93906dc1b77d8">More...</a><br /></td></tr>
<tr class="separator:a40c96f54a5eb802026f93906dc1b77d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb9d2c0884e53e686dc535df7b00595"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#affb9d2c0884e53e686dc535df7b00595">get_phase_number</a> (const int signal_group_id)</td></tr>
<tr class="memdesc:affb9d2c0884e53e686dc535df7b00595"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the phase number using signal group id.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#affb9d2c0884e53e686dc535df7b00595">More...</a><br /></td></tr>
<tr class="separator:affb9d2c0884e53e686dc535df7b00595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42882c2c84b9decb8ab4d89485a5321f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">get_vehicle_signal_group_id</a> (const int <a class="el" href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a>)</td></tr>
<tr class="memdesc:a42882c2c84b9decb8ab4d89485a5321f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the signal group id using phase number.Only for vehicle phases.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">More...</a><br /></td></tr>
<tr class="separator:a42882c2c84b9decb8ab4d89485a5321f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af051312a2931c0f7db32b3d0439a2e6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b">initialize</a> ()</td></tr>
<tr class="memdesc:af051312a2931c0f7db32b3d0439a2e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> by making SNMP calls to TSC for phase sequence and timing information.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b">More...</a><br /></td></tr>
<tr class="separator:af051312a2931c0f7db32b3d0439a2e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af739a1bdb23638f28315e8680f407fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd">add_future_movement_events</a> (std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt; spat_ptr)</td></tr>
<tr class="memdesc:af739a1bdb23638f28315e8680f407fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates spat with future movement events for vehicle phases.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd">More...</a><br /></td></tr>
<tr class="separator:af739a1bdb23638f28315e8680f407fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b2aa1aff298e094fd02d59b067e4e7"><td class="memItemLeft" align="right" valign="top">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a05b2aa1aff298e094fd02d59b067e4e7">get_tsc_config_state</a> () const</td></tr>
<tr class="memdesc:a05b2aa1aff298e094fd02d59b067e4e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the tsc_config_state.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a05b2aa1aff298e094fd02d59b067e4e7">More...</a><br /></td></tr>
<tr class="separator:a05b2aa1aff298e094fd02d59b067e4e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0848c00c6e083fbb76fc7bf976898869"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a0848c00c6e083fbb76fc7bf976898869">define_tsc_config_state</a> ()</td></tr>
<tr class="memdesc:a0848c00c6e083fbb76fc7bf976898869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates tsc_configuration_state object pointer which is used to forward configuration information required to understand ring and barrier information on the traffic signal controller. This includes signal_group_id, yellow_change duration, red_clearance and concurrent signal groups.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a0848c00c6e083fbb76fc7bf976898869">More...</a><br /></td></tr>
<tr class="separator:a0848c00c6e083fbb76fc7bf976898869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2129cdedb7a828d7d2e529bfd6f9f70a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2129cdedb7a828d7d2e529bfd6f9f70a">get_channels</a> (int max_channels, std::vector&lt; int &gt; &amp;vehicle_channels, std::vector&lt; int &gt; &amp;ped_channels) const</td></tr>
<tr class="memdesc:a2129cdedb7a828d7d2e529bfd6f9f70a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian. Ignores overlap, ped Overlap, queueJump and other (types defined in NTCIP1202 v03) Expects empty input arguments which are filled in by reference.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2129cdedb7a828d7d2e529bfd6f9f70a">More...</a><br /></td></tr>
<tr class="separator:a2129cdedb7a828d7d2e529bfd6f9f70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f035567d2d16a8cb75413845bebb68"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68">get_phases_associated_with_channel</a> (const std::vector&lt; int &gt; &amp;signal_group_ids) const</td></tr>
<tr class="memdesc:a74f035567d2d16a8cb75413845bebb68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a map of phases associated with a vehicle phase and a pedestrian phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68">More...</a><br /></td></tr>
<tr class="separator:a74f035567d2d16a8cb75413845bebb68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216684e69a6518858a3ab9666eb107be"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a216684e69a6518858a3ab9666eb107be">get_active_ring_sequences</a> (int max_rings, std::unordered_map&lt; int, int &gt; &amp;vehicle_phase_2signalgroup_map, int sequence=1) const</td></tr>
<tr class="memdesc:a216684e69a6518858a3ab9666eb107be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multiple sequence plans, consisting of the phase sequence in each ring available in the traffic signal controller. We assume the active sequence plan is sequence number 1 by default.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a216684e69a6518858a3ab9666eb107be">More...</a><br /></td></tr>
<tr class="separator:a216684e69a6518858a3ab9666eb107be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d60c760e272be064a99868814dd164"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a35d60c760e272be064a99868814dd164">map_phase_and_signalgroup</a> (const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;active_ring_sequences, std::unordered_map&lt; int, int &gt; &amp;vehicle_phase_2signalgroup_map, std::unordered_map&lt; int, int &gt; &amp;signal_group_2vehiclephase_map) const</td></tr>
<tr class="memdesc:a35d60c760e272be064a99868814dd164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for mapping vehicle phases and signal groups. Modifies non-const arguments by reference. Signal group map is expected to be passed empty. Vehicle phase map is expected to contain known vehicle phases. These are modified to only contain phases in the active ring sequence.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a35d60c760e272be064a99868814dd164">More...</a><br /></td></tr>
<tr class="separator:a35d60c760e272be064a99868814dd164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">get_max_channels</a> () const</td></tr>
<tr class="memdesc:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting maximum channels for the traffic signal controller.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">More...</a><br /></td></tr>
<tr class="separator:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5466e8ffa2e83e5ccdf5648245ff0ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac5466e8ffa2e83e5ccdf5648245ff0ef">get_max_rings</a> () const</td></tr>
<tr class="memdesc:ac5466e8ffa2e83e5ccdf5648245ff0ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting maximum rings for the traffic signal controller.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ac5466e8ffa2e83e5ccdf5648245ff0ef">More...</a><br /></td></tr>
<tr class="separator:ac5466e8ffa2e83e5ccdf5648245ff0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73acb7d06ec8d69783f369c504a3010c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">get_min_green</a> (int phase_num) const</td></tr>
<tr class="memdesc:a73acb7d06ec8d69783f369c504a3010c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get minimum green time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">More...</a><br /></td></tr>
<tr class="separator:a73acb7d06ec8d69783f369c504a3010c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">get_max_green</a> (int phase_num) const</td></tr>
<tr class="memdesc:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get maximum green time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">More...</a><br /></td></tr>
<tr class="separator:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">get_yellow_duration</a> (int phase_num) const</td></tr>
<tr class="memdesc:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get yellow duration time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">More...</a><br /></td></tr>
<tr class="separator:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5bfca513648fa55566289fe8a9de750"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">get_red_clearance</a> (int phase_num) const</td></tr>
<tr class="memdesc:ae5bfca513648fa55566289fe8a9de750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get red clearance time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">More...</a><br /></td></tr>
<tr class="separator:ae5bfca513648fa55566289fe8a9de750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaee10dcfb57b70be35a81723b21761b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">get_red_duration</a> (int phase_num)</td></tr>
<tr class="memdesc:acaee10dcfb57b70be35a81723b21761b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get red duration for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">More...</a><br /></td></tr>
<tr class="separator:acaee10dcfb57b70be35a81723b21761b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e60542fa6eff6a0071092cd7b736269"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a4e60542fa6eff6a0071092cd7b736269">get_following_phases</a> (int phase_num, const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;active_ring_sequences) const</td></tr>
<tr class="memdesc:a4e60542fa6eff6a0071092cd7b736269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a sequence of phases following the given phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a4e60542fa6eff6a0071092cd7b736269">More...</a><br /></td></tr>
<tr class="separator:a4e60542fa6eff6a0071092cd7b736269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c65fe0f07b33678abb735c5be6715a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a">get_concurrent_signal_groups</a> (int phase_num)</td></tr>
<tr class="memdesc:aa3c65fe0f07b33678abb735c5be6715a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The concurrent phases that the given phase can be green along with.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a">More...</a><br /></td></tr>
<tr class="separator:aa3c65fe0f07b33678abb735c5be6715a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167cb5770186a005c223a92c5dcf207e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">get_following_event</a> (const <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;current_event, uint64_t current_event_end_time, const <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &amp;phase_state) const</td></tr>
<tr class="memdesc:a167cb5770186a005c223a92c5dcf207e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get predicted next movement event given a current event.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">More...</a><br /></td></tr>
<tr class="separator:a167cb5770186a005c223a92c5dcf207e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682e309e0c5cea9e6568d08f0b231701"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a682e309e0c5cea9e6568d08f0b231701">FRIEND_TEST</a> (test_monitor_state, test_get_following_movement_events)</td></tr>
<tr class="separator:a682e309e0c5cea9e6568d08f0b231701"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a32ec176910fce4545704a6153c3407eb"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a></td></tr>
<tr class="separator:a32ec176910fce4545704a6153c3407eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8055041fe1bcfce3e02494a8215586"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a></td></tr>
<tr class="separator:aff8055041fe1bcfce3e02494a8215586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf5cd823f7a8d9e2e031258b7e26c5b6"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a></td></tr>
<tr class="separator:aaf5cd823f7a8d9e2e031258b7e26c5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acadeea8358da8312912ce5d4ee581dc4"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a></td></tr>
<tr class="separator:acadeea8358da8312912ce5d4ee581dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a163436fbfd3bac07db01c6bfc3db10e2"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">ped_phase_2signalgroup_map_</a></td></tr>
<tr class="separator:a163436fbfd3bac07db01c6bfc3db10e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7c1e663e2b2e41e1d3cfb902208add"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a></td></tr>
<tr class="separator:a1f7c1e663e2b2e41e1d3cfb902208add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73756e2d00260dfccd9838cf147bf823"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a></td></tr>
<tr class="separator:a73756e2d00260dfccd9838cf147bf823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2712eeb290c972b3ead1c4ee7e7744"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">required_following_movements_</a> = 3</td></tr>
<tr class="separator:ace2712eeb290c972b3ead1c4ee7e7744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f09fdaac8a6376b65ad18c44459c9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73f09fdaac8a6376b65ad18c44459c9c">HOUR_TO_SECONDS_</a> = 3600</td></tr>
<tr class="separator:a73f09fdaac8a6376b65ad18c44459c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d34ab64b5d3eda6f05a5f3c7622475"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a17d34ab64b5d3eda6f05a5f3c7622475">SECOND_TO_MILLISECONDS_</a> = 1000</td></tr>
<tr class="separator:a17d34ab64b5d3eda6f05a5f3c7622475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d851b4a2f7f7413fd4c7f811a2e699"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a22d851b4a2f7f7413fd4c7f811a2e699">tsc_config_state_ptr_</a></td></tr>
<tr class="memdesc:a22d851b4a2f7f7413fd4c7f811a2e699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to tsc_configuration_state object which is traffic signal controller configuration information obtained from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> worker and broadcast on the carma-streets kafka broker as a JSON message.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a22d851b4a2f7f7413fd4c7f811a2e699">More...</a><br /></td></tr>
<tr class="separator:a22d851b4a2f7f7413fd4c7f811a2e699"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00039">39</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aedb4290f73cd4cfd58b04e1e05969781" name="aedb4290f73cd4cfd58b04e1e05969781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb4290f73cd4cfd58b04e1e05969781">&#9670;&nbsp;</a></span>tsc_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_state::tsc_state </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td>
          <td class="paramname"><em>snmp_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a></td><td>A pointer to an <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> worker with a connection established to a traffic signal controller </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00005">5</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    5</span>                                                               : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>(snmp_client)</div>
<div class="line"><span class="lineno">    6</span>    {</div>
<div class="line"><span class="lineno">    7</span>        </div>
<div class="line"><span class="lineno">    8</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a32ec176910fce4545704a6153c3407eb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">traffic_signal_controller_service::tsc_state::snmp_client_worker_</a></div><div class="ttdeci">std::shared_ptr&lt; snmp_client &gt; snmp_client_worker_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00043">monitor_tsc_state.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af739a1bdb23638f28315e8680f407fdd" name="af739a1bdb23638f28315e8680f407fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af739a1bdb23638f28315e8680f407fdd">&#9670;&nbsp;</a></span>add_future_movement_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::add_future_movement_events </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td>
          <td class="paramname"><em>spat_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates spat with future movement events for vehicle phases. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spat_ptr</td><td>pointer to spat message to update </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if update was successful, false if it failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00152">152</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>    {</div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// Modify spat according to phase configuration</span></div>
<div class="line"><span class="lineno">  155</span>        <span class="comment">// Note: Only first intersection is populated</span></div>
<div class="line"><span class="lineno">  156</span>        <span class="keyword">auto</span> intersection_state = spat_ptr-&gt;get_intersection();</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> movement : intersection_state.states)</div>
<div class="line"><span class="lineno">  158</span>        {</div>
<div class="line"><span class="lineno">  159</span>            <span class="keywordtype">int</span> signal_group_id = movement.signal_group;</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>            <span class="comment">// Assumption here is that the movement states have only one event, since this method adds future events to the list.</span></div>
<div class="line"><span class="lineno">  162</span>            <span class="comment">// Throw exception is list size is great than 1</span></div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">if</span> (movement.state_time_speed.size() &gt; 1)</div>
<div class="line"><span class="lineno">  164</span>            {</div>
<div class="line"><span class="lineno">  165</span>                <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;Event list has more than one events, not usable when adding future movement events. Associated with Signal Group:&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(signal_group_id));</div>
<div class="line"><span class="lineno">  166</span>            }</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>            <span class="comment">// Get movement_state by reference</span></div>
<div class="line"><span class="lineno">  169</span>            <span class="keyword">auto</span>&amp; current_movement = intersection_state.get_movement(signal_group_id);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            <span class="comment">// Get start time as epoch time</span></div>
<div class="line"><span class="lineno">  172</span>            uint64_t start_time = movement.state_time_speed.front().timing.get_epoch_start_time();</div>
<div class="line"><span class="lineno">  173</span>            </div>
<div class="line"><span class="lineno">  174</span>            <span class="comment">// Check if signal_group_id is associated with a vehicle phase : Only vehicle phases mapped to signal_group_states</span></div>
<div class="line"><span class="lineno">  175</span>            signal_group_state phase_state;</div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>.find(signal_group_id) == <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>.end()){</div>
<div class="line"><span class="lineno">  177</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  178</span>            }</div>
<div class="line"><span class="lineno">  179</span>            </div>
<div class="line"><span class="lineno">  180</span>            phase_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>[signal_group_id];</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>            uint64_t current_event_end_time_epoch = 0;</div>
<div class="line"><span class="lineno">  183</span>            <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> current_event = current_movement.state_time_speed.front();</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>            <span class="keywordflow">switch</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>){</div>
<div class="line"><span class="lineno">  186</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a> : <span class="comment">//Red</span></div>
<div class="line"><span class="lineno">  187</span>                    current_event_end_time_epoch = start_time + phase_state.red_duration;</div>
<div class="line"><span class="lineno">  188</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a> : <span class="comment">//Green</span></div>
<div class="line"><span class="lineno">  191</span>                    current_event_end_time_epoch = start_time + phase_state.green_duration;</div>
<div class="line"><span class="lineno">  192</span>                    <span class="keywordflow">break</span>;                                                                </div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a> : <span class="comment">//Yellow</span></div>
<div class="line"><span class="lineno">  195</span>                    current_event_end_time_epoch = start_time + phase_state.yellow_duration;</div>
<div class="line"><span class="lineno">  196</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  199</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: {0}&quot;</span>, <span class="keywordtype">int</span>(current_movement.state_time_speed.front().event_state));</div>
<div class="line"><span class="lineno">  200</span>                    <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<span class="keywordtype">int</span>(current_movement.state_time_speed.front().event_state)));</div>
<div class="line"><span class="lineno">  201</span>            }</div>
<div class="line"><span class="lineno">  202</span>            <span class="comment">// Update end_time for current_event</span></div>
<div class="line"><span class="lineno">  203</span>            current_movement.state_time_speed.front().timing.set_min_end_time(current_event_end_time_epoch);</div>
<div class="line"><span class="lineno">  204</span>            current_movement.state_time_speed.front().timing.set_max_end_time(current_event_end_time_epoch);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">required_following_movements_</a>; ++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>)</div>
<div class="line"><span class="lineno">  207</span>            {</div>
<div class="line"><span class="lineno">  208</span>                <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> next_event = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">get_following_event</a>(current_event, current_event_end_time_epoch, phase_state);</div>
<div class="line"><span class="lineno">  209</span>                <span class="comment">// Set next event to current event</span></div>
<div class="line"><span class="lineno">  210</span>                current_event = next_event;</div>
<div class="line"><span class="lineno">  211</span>                current_event_end_time_epoch = current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#ace57d6d7e92d000560753346277a4e20">get_epoch_min_end_time</a>();</div>
<div class="line"><span class="lineno">  212</span>                <span class="comment">//Add events to list</span></div>
<div class="line"><span class="lineno">  213</span>                current_movement.state_time_speed.push_back(next_event);</div>
<div class="line"><span class="lineno">  214</span>            }</div>
<div class="line"><span class="lineno">  215</span>            </div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span>        spat_ptr-&gt;set_intersection(intersection_state);</div>
<div class="line"><span class="lineno">  218</span>        </div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a167cb5770186a005c223a92c5dcf207e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">traffic_signal_controller_service::tsc_state::get_following_event</a></div><div class="ttdeci">signal_phase_and_timing::movement_event get_following_event(const signal_phase_and_timing::movement_event &amp;current_event, uint64_t current_event_end_time, const signal_group_state &amp;phase_state) const</div><div class="ttdoc">Get predicted next movement event given a current event.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00116">monitor_tsc_state.cpp:116</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ace2712eeb290c972b3ead1c4ee7e7744"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">traffic_signal_controller_service::tsc_state::required_following_movements_</a></div><div class="ttdeci">int required_following_movements_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00063">monitor_tsc_state.h:63</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_aff8055041fe1bcfce3e02494a8215586"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">traffic_signal_controller_service::tsc_state::signal_group_2tsc_state_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, signal_group_state &gt; signal_group_2tsc_state_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00046">monitor_tsc_state.h:46</a></div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a></div><div class="ttdeci">@ stop_and_remain</div><div class="ttdoc">e.g. called 'red light' in US. Driver Action: Stop vehicle at stop line. Do not proceed....</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a></div><div class="ttdeci">@ protected_clearance</div><div class="ttdoc">Often called 'protected yellow' in US Driver Action: Prepare to stop. Proceed if unable,...</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a></div><div class="ttdeci">@ protected_movement_allowed</div><div class="ttdoc">Often called 'protected green' in US Driver Action: Proceed, tossing caution to the wind,...</div></div>
<div class="ttc" id="anamespacesimulate__bsm_html_a29b8e2f01a805057636de5ad54422c21"><div class="ttname"><a href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">simulate_bsm.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00019">simulate_bsm.py:19</a></div></div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a></div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00110">movement_event.h:110</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html_a6250e85c7ca1b039806b6326812648d3"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">signal_phase_and_timing::movement_event::timing</a></div><div class="ttdeci">time_change_details timing</div><div class="ttdoc">Timing data in UTC time stamps for events. This includes state and min/max end times of phase confide...</div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00121">movement_event.h:121</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html_a6915afd2a08ca17039c92830ee633a30"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">signal_phase_and_timing::movement_event::event_state</a></div><div class="ttdeci">movement_phase_state event_state</div><div class="ttdoc">Consisting of Phase state (the basic 11 states) Directional, protected or permissive state.</div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00115">movement_event.h:115</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_ace57d6d7e92d000560753346277a4e20"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#ace57d6d7e92d000560753346277a4e20">signal_phase_and_timing::time_change_details::get_epoch_min_end_time</a></div><div class="ttdeci">uint64_t get_epoch_min_end_time() const</div><div class="ttdoc">Get the epoch timestamp of the min end timestamp.</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8cpp_source.html#l00141">time_change_details.cpp:141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="movement__event_8h_source.html#l00115">signal_phase_and_timing::movement_event::event_state</a>, <a class="el" href="time__change__details_8cpp_source.html#l00141">signal_phase_and_timing::time_change_details::get_epoch_min_end_time()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00116">get_following_event()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00026">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00032">traffic_signal_controller_service::signal_group_state::red_duration</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00063">required_following_movements_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00046">signal_group_2tsc_state_map_</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>, <a class="el" href="movement__event_8h_source.html#l00121">signal_phase_and_timing::movement_event::timing</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00028">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph">
<area shape="rect" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,180,181,236"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#ace57d6d7e92d000560753346277a4e20" title="Get the epoch timestamp of the min end timestamp." alt="" coords="229,28,405,84"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e" title="Get predicted next movement event given a current event." alt="" coords="240,180,395,236"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="501,296,573,323"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a74ace40856526a37410e434bcee7917a" title="Convert current hours of the year and milliseconds of the current hours into epoch timestamp in milli..." alt="" coords="669,5,904,61"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="952,71,1144,113"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="1192,71,1395,113"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="453,56,621,112"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="453,136,621,192"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="453,216,621,272"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="696,101,877,171"/>
</map>
</div>

</div>
</div>
<a id="a0848c00c6e083fbb76fc7bf976898869" name="a0848c00c6e083fbb76fc7bf976898869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0848c00c6e083fbb76fc7bf976898869">&#9670;&nbsp;</a></span>define_tsc_config_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; traffic_signal_controller_service::tsc_state::define_tsc_config_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates tsc_configuration_state object pointer which is used to forward configuration information required to understand ring and barrier information on the traffic signal controller. This includes signal_group_id, yellow_change duration, red_clearance and concurrent signal groups. </p>
<dl class="section return"><dt>Returns</dt><dd>shared ptr to tsc_config state </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00094">94</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>    {   </div>
<div class="line"><span class="lineno">   96</span>        <a class="code hl_struct" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> tsc_config;</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signal_group, state] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>)</div>
<div class="line"><span class="lineno">   98</span>        {</div>
<div class="line"><span class="lineno">   99</span>            <a class="code hl_struct" href="structstreets__tsc__configuration_1_1signal__group__configuration.html">streets_tsc_configuration::signal_group_configuration</a> signal_group_config;</div>
<div class="line"><span class="lineno">  100</span>            signal_group_config.<a class="code hl_variable" href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a642913072ce7767bcee28be231f4dcef">signal_group_id</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(signal_group);</div>
<div class="line"><span class="lineno">  101</span>            signal_group_config.<a class="code hl_variable" href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a14180863918570080854771f0e4a23a1">yellow_change_duration</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(state.yellow_duration);</div>
<div class="line"><span class="lineno">  102</span>            signal_group_config.<a class="code hl_variable" href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a52507616a73ed274012a7d9514b7f015">red_clearance</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(state.red_clearance);</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span> concurrent_signal_group : state.concurrent_signal_groups){</div>
<div class="line"><span class="lineno">  104</span>                signal_group_config.<a class="code hl_variable" href="structstreets__tsc__configuration_1_1signal__group__configuration.html#ab80c11a845d2e0fcc8614cec337ca8d4">concurrent_signal_groups</a>.push_back(<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(concurrent_signal_group));</div>
<div class="line"><span class="lineno">  105</span>            }</div>
<div class="line"><span class="lineno">  106</span>            tsc_config.<a class="code hl_variable" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html#a51dbec4e12efd9a8c834bbedd2dd5952">tsc_config_list</a>.push_back(signal_group_config);</div>
<div class="line"><span class="lineno">  107</span>        }</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">return</span> std::make_shared&lt;streets_tsc_configuration::tsc_configuration_state&gt;(tsc_config);</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1signal__group__configuration_html"><div class="ttname"><a href="structstreets__tsc__configuration_1_1signal__group__configuration.html">streets_tsc_configuration::signal_group_configuration</a></div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00012">tsc_configuration_state.h:13</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1signal__group__configuration_html_a14180863918570080854771f0e4a23a1"><div class="ttname"><a href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a14180863918570080854771f0e4a23a1">streets_tsc_configuration::signal_group_configuration::yellow_change_duration</a></div><div class="ttdeci">uint16_t yellow_change_duration</div><div class="ttdoc">Yellow change duration for the signal_group_id, from the traffic signal controller,...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00022">tsc_configuration_state.h:22</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1signal__group__configuration_html_a52507616a73ed274012a7d9514b7f015"><div class="ttname"><a href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a52507616a73ed274012a7d9514b7f015">streets_tsc_configuration::signal_group_configuration::red_clearance</a></div><div class="ttdeci">uint16_t red_clearance</div><div class="ttdoc">Red Clearance duration for the signal_group_id, from the traffic signal controller....</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00027">tsc_configuration_state.h:27</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1signal__group__configuration_html_a642913072ce7767bcee28be231f4dcef"><div class="ttname"><a href="structstreets__tsc__configuration_1_1signal__group__configuration.html#a642913072ce7767bcee28be231f4dcef">streets_tsc_configuration::signal_group_configuration::signal_group_id</a></div><div class="ttdeci">uint8_t signal_group_id</div><div class="ttdoc">Signal Group ID.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00017">tsc_configuration_state.h:17</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1signal__group__configuration_html_ab80c11a845d2e0fcc8614cec337ca8d4"><div class="ttname"><a href="structstreets__tsc__configuration_1_1signal__group__configuration.html#ab80c11a845d2e0fcc8614cec337ca8d4">streets_tsc_configuration::signal_group_configuration::concurrent_signal_groups</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; concurrent_signal_groups</div><div class="ttdoc">List of signal groups which can be green concurrently with the signal group in message....</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00033">tsc_configuration_state.h:33</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1tsc__configuration__state_html"><div class="ttname"><a href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a></div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00050">tsc_configuration_state.h:51</a></div></div>
<div class="ttc" id="astructstreets__tsc__configuration_1_1tsc__configuration__state_html_a51dbec4e12efd9a8c834bbedd2dd5952"><div class="ttname"><a href="structstreets__tsc__configuration_1_1tsc__configuration__state.html#a51dbec4e12efd9a8c834bbedd2dd5952">streets_tsc_configuration::tsc_configuration_state::tsc_config_list</a></div><div class="ttdeci">std::vector&lt; signal_group_configuration &gt; tsc_config_list</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state_8h_source.html#l00052">tsc_configuration_state.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__configuration__state_8h_source.html#l00033">streets_tsc_configuration::signal_group_configuration::concurrent_signal_groups</a>, <a class="el" href="tsc__configuration__state_8h_source.html#l00027">streets_tsc_configuration::signal_group_configuration::red_clearance</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00046">signal_group_2tsc_state_map_</a>, <a class="el" href="tsc__configuration__state_8h_source.html#l00017">streets_tsc_configuration::signal_group_configuration::signal_group_id</a>, <a class="el" href="tsc__configuration__state_8h_source.html#l00052">streets_tsc_configuration::tsc_configuration_state::tsc_config_list</a>, and <a class="el" href="tsc__configuration__state_8h_source.html#l00022">streets_tsc_configuration::signal_group_configuration::yellow_change_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a0848c00c6e083fbb76fc7bf976898869_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a0848c00c6e083fbb76fc7bf976898869_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a0848c00c6e083fbb76fc7bf976898869_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a0848c00c6e083fbb76fc7bf976898869_icgraph">
<area shape="rect" title="Creates tsc_configuration_state object pointer which is used to forward configuration information req..." alt="" coords="236,5,407,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a682e309e0c5cea9e6568d08f0b231701" name="a682e309e0c5cea9e6568d08f0b231701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682e309e0c5cea9e6568d08f0b231701">&#9670;&nbsp;</a></span>FRIEND_TEST()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_state::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype">test_monitor_state&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_get_following_movement_events&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a216684e69a6518858a3ab9666eb107be" name="a216684e69a6518858a3ab9666eb107be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216684e69a6518858a3ab9666eb107be">&#9670;&nbsp;</a></span>get_active_ring_sequences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt; int &gt; &gt; traffic_signal_controller_service::tsc_state::get_active_ring_sequences </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_rings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicle_phase_2signalgroup_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sequence</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multiple sequence plans, consisting of the phase sequence in each ring available in the traffic signal controller. We assume the active sequence plan is sequence number 1 by default. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_rings</td><td>Maximum number of rings in the traffic signal controller </td></tr>
    <tr><td class="paramname">vehicle_phase_2signalgroup_map</td><td>a map for all vehicle phases and signal groups associated with them </td></tr>
    <tr><td class="paramname">sequence</td><td>The sequence number to check for active rings, defaults to 1 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>List of active rings in the traffic signal controller </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00343">343</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>                                                                                                                                                              {</div>
<div class="line"><span class="lineno">  344</span>        </div>
<div class="line"><span class="lineno">  345</span>        std::vector&lt;std::vector&lt;int&gt;&gt; active_ring_sequences;</div>
<div class="line"><span class="lineno">  346</span>        <span class="comment">// Read sequence data for rings</span></div>
<div class="line"><span class="lineno">  347</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 1 ; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt;= max_rings; ++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>){</div>
<div class="line"><span class="lineno">  350</span>            <span class="keywordtype">int</span> ring_num = <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>;</div>
<div class="line"><span class="lineno">  351</span>            std::vector&lt;int&gt; phase_seq;</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>            std::string phase_seq_oid= <a class="code hl_variable" href="namespacentcip__oids.html#aa886cce34306b7d970f546e495a80480">ntcip_oids::SEQUENCE_DATA</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(sequence) + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(ring_num);</div>
<div class="line"><span class="lineno">  354</span>            </div>
<div class="line"><span class="lineno">  355</span>            snmp_response_obj seq_data;</div>
<div class="line"><span class="lineno">  356</span>            seq_data.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">snmp_response_obj::response_type::STRING</a>;</div>
<div class="line"><span class="lineno">  357</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(phase_seq_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, seq_data);</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>            <span class="comment">//extract phase numbers from strings</span></div>
<div class="line"><span class="lineno">  360</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span> seq_val : seq_data.val_string)</div>
<div class="line"><span class="lineno">  361</span>            {   </div>
<div class="line"><span class="lineno">  362</span>                <span class="keyword">auto</span> phase = int(seq_val);</div>
<div class="line"><span class="lineno">  363</span>                <span class="keywordflow">if</span>(vehicle_phase_2signalgroup_map.find(phase)!= vehicle_phase_2signalgroup_map.end() &amp;&amp; phase != 0 ){</div>
<div class="line"><span class="lineno">  364</span>                    phase_seq.push_back(phase);</div>
<div class="line"><span class="lineno">  365</span>                }</div>
<div class="line"><span class="lineno">  366</span>                </div>
<div class="line"><span class="lineno">  367</span>            }</div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordflow">if</span> (!phase_seq.empty())</div>
<div class="line"><span class="lineno">  369</span>            {</div>
<div class="line"><span class="lineno">  370</span>                active_ring_sequences.push_back(phase_seq);</div>
<div class="line"><span class="lineno">  371</span>            }</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  373</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;No phases found in sequence {0} for ring {1}&quot;</span>, sequence, ring_num);</div>
<div class="line"><span class="lineno">  374</span>            }</div>
<div class="line"><span class="lineno">  375</span>        }</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>        <span class="keywordflow">return</span> active_ring_sequences;</div>
<div class="line"><span class="lineno">  378</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_aa886cce34306b7d970f546e495a80480"><div class="ttname"><a href="namespacentcip__oids.html#aa886cce34306b7d970f546e495a80480">ntcip_oids::SEQUENCE_DATA</a></div><div class="ttdeci">static const std::string SEQUENCE_DATA</div><div class="ttdoc">Each octet is a phase number within the associated ring number. The phase number value shall not exce...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00061">ntcip_oids.h:61</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aa91e53dd22b41ddac648a9b468615b61"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">traffic_signal_controller_service::request_type</a></div><div class="ttdeci">request_type</div><div class="ttdef"><b>Definition:</b> <a href="snmp__client_8h_source.html#l00018">snmp_client.h:19</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::request_type::GET</a></div><div class="ttdeci">@ GET</div></div>
<div class="ttc" id="astructtraffic__signal__controller__service_1_1snmp__response__obj_html_a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949"><div class="ttname"><a href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::response_type::STRING</a></div><div class="ttdeci">@ STRING</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>, <a class="el" href="ntcip__oids_8h_source.html#l00061">ntcip_oids::SEQUENCE_DATA</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::STRING</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00038">traffic_signal_controller_service::snmp_response_obj::val_string</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_cgraph">
<area shape="rect" title="Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multip..." alt="" coords="5,5,168,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="216,20,288,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a216684e69a6518858a3ab9666eb107be_icgraph">
<area shape="rect" title="Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multip..." alt="" coords="236,5,399,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a2129cdedb7a828d7d2e529bfd6f9f70a" name="a2129cdedb7a828d7d2e529bfd6f9f70a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2129cdedb7a828d7d2e529bfd6f9f70a">&#9670;&nbsp;</a></span>get_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::get_channels </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicle_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>ped_channels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian. Ignores overlap, ped Overlap, queueJump and other (types defined in NTCIP1202 v03) Expects empty input arguments which are filled in by reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_channels</td><td>The maximum number of channels in the traffic signal controller. </td></tr>
    <tr><td class="paramname">vehicle_channels</td><td>a vector of active vehicle phases associated with a channel </td></tr>
    <tr><td class="paramname">ped_channels</td><td>a vector of active pedestrian phases associated with a channel </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00302">302</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>                                                                                                                      {</div>
<div class="line"><span class="lineno">  303</span>        </div>
<div class="line"><span class="lineno">  304</span>        <span class="comment">// Loop through channel control types and add channels with vehicle phase to list</span></div>
<div class="line"><span class="lineno">  305</span>        snmp_response_obj control_type;</div>
<div class="line"><span class="lineno">  306</span>        control_type.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  307</span>        </div>
<div class="line"><span class="lineno">  308</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  309</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel_num = 1; channel_num &lt;= max_channels; ++channel_num)</div>
<div class="line"><span class="lineno">  310</span>        {</div>
<div class="line"><span class="lineno">  311</span>            std::string control_type_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a9c039d3da352a48fe04ff8fd43014fec">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(channel_num);</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>            <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(control_type_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, control_type))</div>
<div class="line"><span class="lineno">  314</span>            {</div>
<div class="line"><span class="lineno">  315</span>                <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed to get channel control type&quot;</span>);</div>
<div class="line"><span class="lineno">  316</span>            }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>            <span class="keywordflow">if</span>(control_type.val_int == 2) <span class="comment">// If 2, phase is a vehicle phase</span></div>
<div class="line"><span class="lineno">  319</span>            {</div>
<div class="line"><span class="lineno">  320</span>                vehicle_channels.push_back(channel_num);</div>
<div class="line"><span class="lineno">  321</span>            }</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(control_type.val_int == 3) <span class="comment">//If 3, phase is a pedestrian phase</span></div>
<div class="line"><span class="lineno">  323</span>            {</div>
<div class="line"><span class="lineno">  324</span>                ped_channels.push_back(channel_num);</div>
<div class="line"><span class="lineno">  325</span>            }</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>        }</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">if</span>(vehicle_channels.empty()){</div>
<div class="line"><span class="lineno">  330</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Found no vehicle phases&quot;</span>);</div>
<div class="line"><span class="lineno">  331</span>        }</div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">if</span>(ped_channels.empty()){</div>
<div class="line"><span class="lineno">  333</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Found no ped phases&quot;</span>);</div>
<div class="line"><span class="lineno">  334</span>        }</div>
<div class="line"><span class="lineno">  335</span>        </div>
<div class="line"><span class="lineno">  336</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Number of vehicle phase channels found: {0}&quot;</span>, vehicle_channels.size());</div>
<div class="line"><span class="lineno">  337</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Number of ped phase channels found: {0}&quot;</span>, ped_channels.size());</div>
<div class="line"><span class="lineno">  338</span>        </div>
<div class="line"><span class="lineno">  339</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a9c039d3da352a48fe04ff8fd43014fec"><div class="ttname"><a href="namespacentcip__oids.html#a9c039d3da352a48fe04ff8fd43014fec">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a></div><div class="ttdeci">static const std::string CHANNEL_CONTROL_TYPE_PARAMETER</div><div class="ttdoc">OID for Channel control type: Used with (.channel number) This object defines the channel control typ...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00029">ntcip_oids.h:29</a></div></div>
<div class="ttc" id="astructtraffic__signal__controller__service_1_1snmp__response__obj_html_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c"><div class="ttname"><a href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::response_type::INTEGER</a></div><div class="ttdeci">@ INTEGER</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__oids_8h_source.html#l00029">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_cgraph">
<area shape="rect" title="Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian...." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a2129cdedb7a828d7d2e529bfd6f9f70a_icgraph">
<area shape="rect" title="Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian...." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="aa3c65fe0f07b33678abb735c5be6715a" name="aa3c65fe0f07b33678abb735c5be6715a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c65fe0f07b33678abb735c5be6715a">&#9670;&nbsp;</a></span>get_concurrent_signal_groups()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; traffic_signal_controller_service::tsc_state::get_concurrent_signal_groups </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The concurrent phases that the given phase can be green along with. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_num</td><td>The phase for which the concurrent phases needs to be obtained </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector of phases that may be concurrent with the given phase </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00515">515</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  516</span>    {</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>        std::vector&lt;int&gt; concurrent_signal_groups;</div>
<div class="line"><span class="lineno">  519</span>        std::string concurrent_phases_oid = <a class="code hl_variable" href="namespacentcip__oids.html#aedc3a19c20b2cd545d70616264b5805d">ntcip_oids::PHASE_CONCURRENCY</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>        snmp_response_obj concurrent_phase_data;</div>
<div class="line"><span class="lineno">  522</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  523</span>        concurrent_phase_data.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">snmp_response_obj::response_type::STRING</a>;</div>
<div class="line"><span class="lineno">  524</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(concurrent_phases_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, concurrent_phase_data);</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>        <span class="comment">//extract phase numbers from strings</span></div>
<div class="line"><span class="lineno">  527</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> con_phase :  concurrent_phase_data.val_string)</div>
<div class="line"><span class="lineno">  528</span>        {   <span class="keywordflow">if</span>(con_phase != 0){</div>
<div class="line"><span class="lineno">  529</span>                concurrent_signal_groups.push_back(<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">get_vehicle_signal_group_id</a>(<span class="keywordtype">int</span>(con_phase)));</div>
<div class="line"><span class="lineno">  530</span>            }</div>
<div class="line"><span class="lineno">  531</span>        }</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>        <span class="keywordflow">if</span>(concurrent_signal_groups.empty())</div>
<div class="line"><span class="lineno">  534</span>        {</div>
<div class="line"><span class="lineno">  535</span>            SPDLOG_WARN(<span class="stringliteral">&quot;No concurrent signal groups found for phase {0}&quot;</span>, phase_num);</div>
<div class="line"><span class="lineno">  536</span>        }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">return</span> concurrent_signal_groups;</div>
<div class="line"><span class="lineno">  539</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a42882c2c84b9decb8ab4d89485a5321f"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">traffic_signal_controller_service::tsc_state::get_vehicle_signal_group_id</a></div><div class="ttdeci">int get_vehicle_signal_group_id(const int phase_number)</div><div class="ttdoc">Get the signal group id using phase number.Only for vehicle phases.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00420">monitor_tsc_state.cpp:420</a></div></div>
<div class="ttc" id="anamespacentcip__oids_html_aedc3a19c20b2cd545d70616264b5805d"><div class="ttname"><a href="namespacentcip__oids.html#aedc3a19c20b2cd545d70616264b5805d">ntcip_oids::PHASE_CONCURRENCY</a></div><div class="ttdeci">static const std::string PHASE_CONCURRENCY</div><div class="ttdoc">Each octet contains a phase number that may run concurrently with the associated phase....</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00077">ntcip_oids.h:77</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00420">get_vehicle_signal_group_id()</a>, <a class="el" href="ntcip__oids_8h_source.html#l00077">ntcip_oids::PHASE_CONCURRENCY</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::STRING</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00038">traffic_signal_controller_service::snmp_response_obj::val_string</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_cgraph">
<area shape="rect" title="The concurrent phases that the given phase can be green along with." alt="" coords="5,39,183,95"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f" title="Get the signal group id using phase number.Only for vehicle phases." alt="" coords="231,5,397,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="445,53,517,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa3c65fe0f07b33678abb735c5be6715a_icgraph">
<area shape="rect" title="The concurrent phases that the given phase can be green along with." alt="" coords="236,5,413,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a167cb5770186a005c223a92c5dcf207e" name="a167cb5770186a005c223a92c5dcf207e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a167cb5770186a005c223a92c5dcf207e">&#9670;&nbsp;</a></span>get_following_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> traffic_signal_controller_service::tsc_state::get_following_event </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;&#160;</td>
          <td class="paramname"><em>current_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>current_event_end_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &amp;&#160;</td>
          <td class="paramname"><em>phase_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get predicted next movement event given a current event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_event</td><td>movement_event from the next movement needs to be predicted </td></tr>
    <tr><td class="paramname">current_event_end_time</td><td>End time of the current event in epoch time (milliseconds) </td></tr>
    <tr><td class="paramname">phase_state</td><td><a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> for the phase of which the movement events are a part </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>predicted next movement event </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00116">116</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span>    {</div>
<div class="line"><span class="lineno">  119</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> next_event;</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">switch</span> (current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>){</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>: <span class="comment">//Green</span></div>
<div class="line"><span class="lineno">  122</span>                <span class="comment">// Create next movement - yellow</span></div>
<div class="line"><span class="lineno">  123</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>;</div>
<div class="line"><span class="lineno">  124</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6">set_start_time</a>(current_event_end_time);</div>
<div class="line"><span class="lineno">  125</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68">set_min_end_time</a>(current_event_end_time + phase_state.yellow_duration);</div>
<div class="line"><span class="lineno">  126</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9">set_max_end_time</a>(current_event_end_time + phase_state.yellow_duration);</div>
<div class="line"><span class="lineno">  127</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>: <span class="comment">//Yellow</span></div>
<div class="line"><span class="lineno">  130</span>                <span class="comment">// Create next movement - red</span></div>
<div class="line"><span class="lineno">  131</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>;</div>
<div class="line"><span class="lineno">  132</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6">set_start_time</a>(current_event_end_time); </div>
<div class="line"><span class="lineno">  133</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68">set_min_end_time</a>(current_event_end_time + phase_state.red_duration);</div>
<div class="line"><span class="lineno">  134</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9">set_max_end_time</a>(current_event_end_time + phase_state.red_duration);</div>
<div class="line"><span class="lineno">  135</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>:  <span class="comment">//Red</span></div>
<div class="line"><span class="lineno">  138</span>                <span class="comment">// Create next movement - green</span></div>
<div class="line"><span class="lineno">  139</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>;</div>
<div class="line"><span class="lineno">  140</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6">set_start_time</a>(current_event_end_time);</div>
<div class="line"><span class="lineno">  141</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68">set_min_end_time</a>(current_event_end_time + phase_state.green_duration);</div>
<div class="line"><span class="lineno">  142</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_function" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9">set_max_end_time</a>(current_event_end_time + phase_state.green_duration);</div>
<div class="line"><span class="lineno">  143</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  146</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: {0}&quot;</span>, <span class="keywordtype">int</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>));</div>
<div class="line"><span class="lineno">  147</span>                <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed request for unsupported movement phase type: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<span class="keywordtype">int</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>)));</div>
<div class="line"><span class="lineno">  148</span>        }</div>
<div class="line"><span class="lineno">  149</span>        <span class="keywordflow">return</span> next_event;</div>
<div class="line"><span class="lineno">  150</span>    }</div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_a2db5c3a1b3948f6e6e75ce2ae7311f68"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68">signal_phase_and_timing::time_change_details::set_min_end_time</a></div><div class="ttdeci">void set_min_end_time(uint64_t epoch_time_ms)</div><div class="ttdoc">Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths...</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8cpp_source.html#l00157">time_change_details.cpp:157</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_a2fef256765d3164ba312edf02300b7d9"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9">signal_phase_and_timing::time_change_details::set_max_end_time</a></div><div class="ttdeci">void set_max_end_time(uint64_t epoch_time_ms)</div><div class="ttdoc">Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths...</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8cpp_source.html#l00161">time_change_details.cpp:161</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_aeeff6dd233876204f6758aaf09d532c6"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6">signal_phase_and_timing::time_change_details::set_start_time</a></div><div class="ttdeci">void set_start_time(uint64_t epoch_time_ms)</div><div class="ttdoc">Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o...</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8cpp_source.html#l00153">time_change_details.cpp:153</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="movement__event_8h_source.html#l00115">signal_phase_and_timing::movement_event::event_state</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00026">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00032">traffic_signal_controller_service::signal_group_state::red_duration</a>, <a class="el" href="time__change__details_8cpp_source.html#l00161">signal_phase_and_timing::time_change_details::set_max_end_time()</a>, <a class="el" href="time__change__details_8cpp_source.html#l00157">signal_phase_and_timing::time_change_details::set_min_end_time()</a>, <a class="el" href="time__change__details_8cpp_source.html#l00153">signal_phase_and_timing::time_change_details::set_start_time()</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>, <a class="el" href="movement__event_8h_source.html#l00121">signal_phase_and_timing::movement_event::timing</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00028">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00152">add_future_movement_events()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph">
<area shape="rect" title="Get predicted next movement event given a current event." alt="" coords="5,125,160,181"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="208,5,376,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="208,85,376,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="208,165,376,221"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="256,245,328,272"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="424,78,605,149"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="653,93,845,134"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="893,93,1096,134"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph">
<area shape="rect" title="Get predicted next movement event given a current event." alt="" coords="229,5,384,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,5,181,61"/>
</map>
</div>

</div>
</div>
<a id="a4e60542fa6eff6a0071092cd7b736269" name="a4e60542fa6eff6a0071092cd7b736269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e60542fa6eff6a0071092cd7b736269">&#9670;&nbsp;</a></span>get_following_phases()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; traffic_signal_controller_service::tsc_state::get_following_phases </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>active_ring_sequences</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a sequence of phases following the given phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the sequence needs to be obtained </td></tr>
    <tr><td class="paramname">active_ring_sequences</td><td>The sequence of phases in active rings in the traffic signal controller </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector as a sequence of phases starting from the given phase </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00221">221</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  222</span>    {</div>
<div class="line"><span class="lineno">  223</span>        std::vector&lt;int&gt; sequence;</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> ring : active_ring_sequences)</div>
<div class="line"><span class="lineno">  226</span>        {</div>
<div class="line"><span class="lineno">  227</span>            <span class="keywordflow">for</span> (uint <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; ring.size(); ++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>)</div>
<div class="line"><span class="lineno">  228</span>            {</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">if</span> (ring[<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>] == phase_num)</div>
<div class="line"><span class="lineno">  230</span>                {</div>
<div class="line"><span class="lineno">  231</span>                    sequence.insert(sequence.begin(), ring.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, ring.end());</div>
<div class="line"><span class="lineno">  232</span>                    sequence.insert(sequence.end(), ring.begin(), ring.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>                    <span class="keywordflow">return</span> sequence;</div>
<div class="line"><span class="lineno">  235</span>                }</div>
<div class="line"><span class="lineno">  236</span>            }</div>
<div class="line"><span class="lineno">  237</span>        }</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>        <span class="comment">// No following phase information found</span></div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;No following phases found&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>        </div>
<div class="line"><span class="lineno">  242</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a4e60542fa6eff6a0071092cd7b736269_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a4e60542fa6eff6a0071092cd7b736269_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a4e60542fa6eff6a0071092cd7b736269_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a4e60542fa6eff6a0071092cd7b736269_icgraph">
<area shape="rect" title="Get a sequence of phases following the given phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a2f1d658bc65133d1ba6b4f03d593ffb3" name="a2f1d658bc65133d1ba6b4f03d593ffb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f1d658bc65133d1ba6b4f03d593ffb3">&#9670;&nbsp;</a></span>get_max_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_max_channels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for getting maximum channels for the traffic signal controller. </p>
<dl class="section return"><dt>Returns</dt><dd>number of maximum channels in the traffic signal controller </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00393">393</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  393</span>                                          {</div>
<div class="line"><span class="lineno">  394</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  395</span>        snmp_response_obj max_channels_in_tsc;</div>
<div class="line"><span class="lineno">  396</span>        max_channels_in_tsc.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(<a class="code hl_variable" href="namespacentcip__oids.html#a5e92b2d342b6fa23f9be040041b5d631">ntcip_oids::MAX_CHANNELS</a>, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, max_channels_in_tsc))</div>
<div class="line"><span class="lineno">  399</span>        {</div>
<div class="line"><span class="lineno">  400</span>            <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed to get max channels!&quot;</span>);</div>
<div class="line"><span class="lineno">  401</span>        }</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) max_channels_in_tsc.val_int;</div>
<div class="line"><span class="lineno">  404</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a5e92b2d342b6fa23f9be040041b5d631"><div class="ttname"><a href="namespacentcip__oids.html#a5e92b2d342b6fa23f9be040041b5d631">ntcip_oids::MAX_CHANNELS</a></div><div class="ttdeci">static const std::string MAX_CHANNELS</div><div class="ttdoc">OID for MAX_CHANNELS: The maximum number of channels this TSC supports.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00017">ntcip_oids.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00017">ntcip_oids::MAX_CHANNELS</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph">
<area shape="rect" title="Method for getting maximum channels for the traffic signal controller." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="aa4dbbf6a17e37cbb38a43d4641bf3ec8" name="aa4dbbf6a17e37cbb38a43d4641bf3ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4dbbf6a17e37cbb38a43d4641bf3ec8">&#9670;&nbsp;</a></span>get_max_green()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_max_green </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get maximum green time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the maximum green needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>maximum green time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00447">447</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>    {</div>
<div class="line"><span class="lineno">  449</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>        std::string max_green_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a4affb9d542bfdef8b1a3a2ef06941c7c">ntcip_oids::MAXIMUM_GREEN</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  452</span>        snmp_response_obj max_green;</div>
<div class="line"><span class="lineno">  453</span>        max_green.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  454</span>        </div>
<div class="line"><span class="lineno">  455</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(max_green_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, max_green);</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) max_green.val_int * 1000; <span class="comment">//Convert seconds to milliseconds</span></div>
<div class="line"><span class="lineno">  458</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a4affb9d542bfdef8b1a3a2ef06941c7c"><div class="ttname"><a href="namespacentcip__oids.html#a4affb9d542bfdef8b1a3a2ef06941c7c">ntcip_oids::MAXIMUM_GREEN</a></div><div class="ttdeci">static const std::string MAXIMUM_GREEN</div><div class="ttdoc">This time shall determine the maximum length of time this phase may be held in Green in the absence o...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00049">ntcip_oids.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00049">ntcip_oids::MAXIMUM_GREEN</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph">
<area shape="rect" title="Get maximum green time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph">
<area shape="rect" title="Get maximum green time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="ac5466e8ffa2e83e5ccdf5648245ff0ef" name="ac5466e8ffa2e83e5ccdf5648245ff0ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5466e8ffa2e83e5ccdf5648245ff0ef">&#9670;&nbsp;</a></span>get_max_rings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_max_rings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for getting maximum rings for the traffic signal controller. </p>
<dl class="section return"><dt>Returns</dt><dd>number of maximum rings in the traffic signal controller </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00380">380</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  380</span>                                       {</div>
<div class="line"><span class="lineno">  381</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  382</span>        snmp_response_obj max_rings_in_tsc;</div>
<div class="line"><span class="lineno">  383</span>        max_rings_in_tsc.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(<a class="code hl_variable" href="namespacentcip__oids.html#a0f688c62b46ab34346b42e846c072f06">ntcip_oids::MAX_RINGS</a>, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, max_rings_in_tsc))</div>
<div class="line"><span class="lineno">  386</span>        {</div>
<div class="line"><span class="lineno">  387</span>            <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed to get max rings!&quot;</span>);</div>
<div class="line"><span class="lineno">  388</span>        }</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) max_rings_in_tsc.val_int;</div>
<div class="line"><span class="lineno">  391</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a0f688c62b46ab34346b42e846c072f06"><div class="ttname"><a href="namespacentcip__oids.html#a0f688c62b46ab34346b42e846c072f06">ntcip_oids::MAX_RINGS</a></div><div class="ttdeci">static const std::string MAX_RINGS</div><div class="ttdoc">OID for MAX_RINGS: The maximum number of rings this TSC supports.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00022">ntcip_oids.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00022">ntcip_oids::MAX_RINGS</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ac5466e8ffa2e83e5ccdf5648245ff0ef_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ac5466e8ffa2e83e5ccdf5648245ff0ef_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ac5466e8ffa2e83e5ccdf5648245ff0ef_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ac5466e8ffa2e83e5ccdf5648245ff0ef_icgraph">
<area shape="rect" title="Method for getting maximum rings for the traffic signal controller." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a73acb7d06ec8d69783f369c504a3010c" name="a73acb7d06ec8d69783f369c504a3010c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73acb7d06ec8d69783f369c504a3010c">&#9670;&nbsp;</a></span>get_min_green()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_min_green </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get minimum green time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the min green needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>minimum green time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00434">434</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>    {</div>
<div class="line"><span class="lineno">  436</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  437</span>        std::string min_green_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a90dca09384bbe13e3ee22c4ba9510079">ntcip_oids::MINIMUM_GREEN</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>        snmp_response_obj min_green;</div>
<div class="line"><span class="lineno">  440</span>        min_green.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(min_green_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, min_green);</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) min_green.val_int * 1000; <span class="comment">//Convert seconds to milliseconds</span></div>
<div class="line"><span class="lineno">  445</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a90dca09384bbe13e3ee22c4ba9510079"><div class="ttname"><a href="namespacentcip__oids.html#a90dca09384bbe13e3ee22c4ba9510079">ntcip_oids::MINIMUM_GREEN</a></div><div class="ttdeci">static const std::string MINIMUM_GREEN</div><div class="ttdoc">Phase Minimum Green Parameter: The minimum green parameter in seconds.Used with (....</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00044">ntcip_oids.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00044">ntcip_oids::MINIMUM_GREEN</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph">
<area shape="rect" title="Get minimum green time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph">
<area shape="rect" title="Get minimum green time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a9af1335fd676f86de7fcbd38493d3985" name="a9af1335fd676f86de7fcbd38493d3985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af1335fd676f86de7fcbd38493d3985">&#9670;&nbsp;</a></span>get_ped_phase_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; int, int &gt; &amp; traffic_signal_controller_service::tsc_state::get_ped_phase_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a map of pedestrian phases to signal group ids. </p>
<dl class="section return"><dt>Returns</dt><dd>a map of pedestrian phases to signal group ids </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00541">541</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  542</span>    {</div>
<div class="line"><span class="lineno">  543</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">ped_phase_2signalgroup_map_</a>;</div>
<div class="line"><span class="lineno">  544</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a163436fbfd3bac07db01c6bfc3db10e2"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">traffic_signal_controller_service::tsc_state::ped_phase_2signalgroup_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; ped_phase_2signalgroup_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00055">monitor_tsc_state.h:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00055">ped_phase_2signalgroup_map_</a>.</p>

</div>
</div>
<a id="affb9d2c0884e53e686dc535df7b00595" name="affb9d2c0884e53e686dc535df7b00595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affb9d2c0884e53e686dc535df7b00595">&#9670;&nbsp;</a></span>get_phase_number()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_phase_number </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>signal_group_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the phase number using signal group id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtraffic__signal__controller__service_1_1monitor__states__exception.html" title="Runtime error related to SNMP client used to communicate with Traffic Signal Controller (NTCIP).">monitor_states_exception</a></td><td>if signal group id is less than 1. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00406">406</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  406</span>                                                              {</div>
<div class="line"><span class="lineno">  407</span>        <span class="keywordflow">if</span> (signal_group_id &gt;= 1) {</div>
<div class="line"><span class="lineno">  408</span>            <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>.find(signal_group_id) != <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>.end() ) {</div>
<div class="line"><span class="lineno">  409</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>[signal_group_id];</div>
<div class="line"><span class="lineno">  410</span>            } </div>
<div class="line"><span class="lineno">  411</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  412</span>                <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;No phase number found for signal id &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(signal_group_id) + <span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><span class="lineno">  413</span>            }</div>
<div class="line"><span class="lineno">  414</span>        }</div>
<div class="line"><span class="lineno">  415</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  416</span>            <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;Signal group ids less than 1 are invalid!&quot;</span>);</div>
<div class="line"><span class="lineno">  417</span>        }</div>
<div class="line"><span class="lineno">  418</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_aaf5cd823f7a8d9e2e031258b7e26c5b6"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">traffic_signal_controller_service::tsc_state::signal_group_2vehiclephase_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; signal_group_2vehiclephase_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00049">monitor_tsc_state.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00049">signal_group_2vehiclephase_map_</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_affb9d2c0884e53e686dc535df7b00595_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_affb9d2c0884e53e686dc535df7b00595_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_affb9d2c0884e53e686dc535df7b00595_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_affb9d2c0884e53e686dc535df7b00595_cgraph">
<area shape="rect" title="Get the phase number using signal group id." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>

</div>
</div>
<a id="a74f035567d2d16a8cb75413845bebb68" name="a74f035567d2d16a8cb75413845bebb68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f035567d2d16a8cb75413845bebb68">&#9670;&nbsp;</a></span>get_phases_associated_with_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, int &gt; traffic_signal_controller_service::tsc_state::get_phases_associated_with_channel </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>signal_group_ids</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a map of phases associated with a vehicle phase and a pedestrian phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_ids</td><td>a map of known signal_group_ids/channels for vehicle or pedestrian to the corresponding phases </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a mapping from phases to signal_group ids. Will return empty map if no phases associated with a vehicle or pedestrian are found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00273">273</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  273</span>                                                                                                                        {</div>
<div class="line"><span class="lineno">  274</span>        </div>
<div class="line"><span class="lineno">  275</span>        std::unordered_map&lt;int,int&gt; phases_to_signal_group;</div>
<div class="line"><span class="lineno">  276</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> signal_group : signal_group_ids)</div>
<div class="line"><span class="lineno">  279</span>        {</div>
<div class="line"><span class="lineno">  280</span>            snmp_response_obj phase_num;</div>
<div class="line"><span class="lineno">  281</span>            phase_num.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  282</span>            <span class="comment">// Control source returns the phase associated with the signal group. Channel and signal group id is synonymous according to the NTCIP documentation</span></div>
<div class="line"><span class="lineno">  283</span>            std::string control_source_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#adbf60170a7e456fe10c1b7ef1f84a262">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(signal_group);</div>
<div class="line"><span class="lineno">  284</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(control_source_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, phase_num);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>            <span class="comment">// According to NTCIP 1202 v03 returned value of 0 here would mean a phase is not associated with the signal_group</span></div>
<div class="line"><span class="lineno">  287</span>            <span class="keywordflow">if</span>(phase_num.val_int != 0)</div>
<div class="line"><span class="lineno">  288</span>            {</div>
<div class="line"><span class="lineno">  289</span>                phases_to_signal_group.insert(std::make_pair(phase_num.val_int, signal_group));</div>
<div class="line"><span class="lineno">  290</span>            }</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  292</span>                <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;No phase found associated with signal_group {0}&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(signal_group));</div>
<div class="line"><span class="lineno">  293</span>            }</div>
<div class="line"><span class="lineno">  294</span>            SPDLOG_TRACE(<span class="stringliteral">&quot;Found mapping between signal group: {0} and phase num: {1}&quot;</span>, signal_group , phase_num.val_int );</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>        }</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">return</span> phases_to_signal_group;</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_adbf60170a7e456fe10c1b7ef1f84a262"><div class="ttname"><a href="namespacentcip__oids.html#adbf60170a7e456fe10c1b7ef1f84a262">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a></div><div class="ttdeci">static const std::string CHANNEL_CONTROL_SOURCE_PARAMETER</div><div class="ttdoc">OID for Channel control source: Used with (.channel number) Value 00 = No Control (Not In Use) Value ...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00041">ntcip_oids.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__oids_8h_source.html#l00041">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_cgraph">
<area shape="rect" title="Creates a map of phases associated with a vehicle phase and a pedestrian phase." alt="" coords="5,5,229,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="277,20,349,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a74f035567d2d16a8cb75413845bebb68_icgraph">
<area shape="rect" title="Creates a map of phases associated with a vehicle phase and a pedestrian phase." alt="" coords="236,5,460,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="ae5bfca513648fa55566289fe8a9de750" name="ae5bfca513648fa55566289fe8a9de750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5bfca513648fa55566289fe8a9de750">&#9670;&nbsp;</a></span>get_red_clearance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_red_clearance </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get red clearance time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the red clearance needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>red clearance time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00473">473</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  474</span>    {</div>
<div class="line"><span class="lineno">  475</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> get_request = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  476</span>        std::string red_clearance_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a3ea2c7de3db40c5169671e9c74083bba">ntcip_oids::RED_CLEAR_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>        snmp_response_obj red_clearance;</div>
<div class="line"><span class="lineno">  479</span>        red_clearance.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(red_clearance_oid, get_request, red_clearance);</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) red_clearance.val_int * 100; <span class="comment">//Convert to milliseconds. NTCIP returned value is in tenths of seconds</span></div>
<div class="line"><span class="lineno">  484</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a3ea2c7de3db40c5169671e9c74083bba"><div class="ttname"><a href="namespacentcip__oids.html#a3ea2c7de3db40c5169671e9c74083bba">ntcip_oids::RED_CLEAR_PARAMETER</a></div><div class="ttdeci">static const std::string RED_CLEAR_PARAMETER</div><div class="ttdoc">Following the yellow change interval for each phase, the CU shall provide a red clearance interval wh...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00070">ntcip_oids.h:70</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00070">ntcip_oids::RED_CLEAR_PARAMETER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph">
<area shape="rect" title="Get red clearance time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph">
<area shape="rect" title="Get red clearance time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="acaee10dcfb57b70be35a81723b21761b" name="acaee10dcfb57b70be35a81723b21761b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaee10dcfb57b70be35a81723b21761b">&#9670;&nbsp;</a></span>get_red_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_red_duration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get red duration for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the red duration needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>red duration time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00486">486</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  487</span>    {</div>
<div class="line"><span class="lineno">  488</span>        <span class="comment">//red duration is calculated as red_clearance time for current phase + (green duration + yellow duration + red_clearance) for other phases in sequence</span></div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>        <span class="comment">// Find signal state associated with phase num</span></div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordtype">int</span> current_signal_group;</div>
<div class="line"><span class="lineno">  492</span>        current_signal_group = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">get_vehicle_signal_group_id</a>(phase_num); </div>
<div class="line"><span class="lineno">  493</span>        <span class="keyword">auto</span> current_signal_group_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>[current_signal_group];</div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">// Only add clearance time for current phase</span></div>
<div class="line"><span class="lineno">  495</span>        <span class="keywordtype">int</span> red_duration = current_signal_group_state.red_clearance;</div>
<div class="line"><span class="lineno">  496</span>        </div>
<div class="line"><span class="lineno">  497</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> phase : current_signal_group_state.phase_seq)</div>
<div class="line"><span class="lineno">  498</span>        {</div>
<div class="line"><span class="lineno">  499</span>            <span class="comment">// Find state params for each phase in seq</span></div>
<div class="line"><span class="lineno">  500</span>            <span class="keywordtype">int</span> seq_signal_group;</div>
<div class="line"><span class="lineno">  501</span>            seq_signal_group = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f">get_vehicle_signal_group_id</a>(phase);</div>
<div class="line"><span class="lineno">  502</span>            <span class="keyword">auto</span> seq_signal_group_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>[seq_signal_group];</div>
<div class="line"><span class="lineno">  503</span>            <span class="keywordflow">if</span>(phase == phase_num)</div>
<div class="line"><span class="lineno">  504</span>            {</div>
<div class="line"><span class="lineno">  505</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  506</span>            }</div>
<div class="line"><span class="lineno">  507</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  508</span>                red_duration += seq_signal_group_state.green_duration + seq_signal_group_state.yellow_duration + seq_signal_group_state.red_clearance;</div>
<div class="line"><span class="lineno">  509</span>            }</div>
<div class="line"><span class="lineno">  510</span>        }</div>
<div class="line"><span class="lineno">  511</span>        </div>
<div class="line"><span class="lineno">  512</span>        <span class="keywordflow">return</span> red_duration; </div>
<div class="line"><span class="lineno">  513</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8cpp_source.html#l00420">get_vehicle_signal_group_id()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00046">signal_group_2tsc_state_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph">
<area shape="rect" title="Get red duration for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f" title="Get the signal group id using phase number.Only for vehicle phases." alt="" coords="208,5,375,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="423,20,495,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph">
<area shape="rect" title="Get red duration for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a27876c0c6172cbb37788cadd97bf6ff3" name="a27876c0c6172cbb37788cadd97bf6ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27876c0c6172cbb37788cadd97bf6ff3">&#9670;&nbsp;</a></span>get_signal_group_state_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt; &amp; traffic_signal_controller_service::tsc_state::get_signal_group_state_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return reference to signal group state map. </p>
<dl class="section return"><dt>Returns</dt><dd>std::unordered_map&lt;int, signal_group_state&gt;&amp; </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00551">551</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  552</span>    {</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>;</div>
<div class="line"><span class="lineno">  554</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00046">signal_group_2tsc_state_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00086">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_green()</a>, and <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00204">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_yell_red()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3_icgraph">
<area shape="rect" title="Return reference to signal group state map." alt="" coords="492,49,663,105"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#af3aad7133e6da0308277109a8a104ef0" title="Method to represent the upcoming green, when no desired phase plan is present and the TSC is currentl..." alt="" coords="229,5,444,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#ad06fb1cbc4f3de4eda56c3999bd111d9" title="Method to represent yellow change and red clearance when no desired phase plan is present and the TSC..." alt="" coords="249,86,425,157"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#aa3549e37ef3a3ffe9c0ce7c3c0f24605" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,42,181,113"/>
</map>
</div>

</div>
</div>
<a id="ab8c5b30b02b58f1b0f875c5a2c3eff13" name="ab8c5b30b02b58f1b0f875c5a2c3eff13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c5b30b02b58f1b0f875c5a2c3eff13">&#9670;&nbsp;</a></span>get_signal_group_to_ped_phase_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, int &gt; traffic_signal_controller_service::tsc_state::get_signal_group_to_ped_phase_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a map of signal group ids to pedestrian phases. </p>
<dl class="section return"><dt>Returns</dt><dd>a map of signal group ids to pedestrian phases </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00556">556</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  557</span>    {</div>
<div class="line"><span class="lineno">  558</span>        std::unordered_map&lt;int,int&gt; signal_group_to_ped_phase;</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">ped_phase_2signalgroup_map_</a>.begin(); it != <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">ped_phase_2signalgroup_map_</a>.end();){</div>
<div class="line"><span class="lineno">  561</span>        </div>
<div class="line"><span class="lineno">  562</span>            signal_group_to_ped_phase.insert(std::make_pair(it-&gt;second,it-&gt;first));</div>
<div class="line"><span class="lineno">  563</span>        }</div>
<div class="line"><span class="lineno">  564</span>        </div>
<div class="line"><span class="lineno">  565</span>        <span class="keywordflow">return</span> signal_group_to_ped_phase;</div>
<div class="line"><span class="lineno">  566</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00055">ped_phase_2signalgroup_map_</a>.</p>

</div>
</div>
<a id="a05b2aa1aff298e094fd02d59b067e4e7" name="a05b2aa1aff298e094fd02d59b067e4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b2aa1aff298e094fd02d59b067e4e7">&#9670;&nbsp;</a></span>get_tsc_config_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp; traffic_signal_controller_service::tsc_state::get_tsc_config_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the tsc_config_state. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to the tsc_configuration_state used to forward configuration information required to understand ring and barrier information on the traffic signal controller. This includes signal_group_id, yellow_change duration, red_clearance and concurrent signal groups </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00111">111</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>    {</div>
<div class="line"><span class="lineno">  113</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a22d851b4a2f7f7413fd4c7f811a2e699">tsc_config_state_ptr_</a>;</div>
<div class="line"><span class="lineno">  114</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a22d851b4a2f7f7413fd4c7f811a2e699"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a22d851b4a2f7f7413fd4c7f811a2e699">traffic_signal_controller_service::tsc_state::tsc_config_state_ptr_</a></div><div class="ttdeci">std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; tsc_config_state_ptr_</div><div class="ttdoc">Pointer to tsc_configuration_state object which is traffic signal controller configuration informatio...</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00074">monitor_tsc_state.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00074">tsc_config_state_ptr_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00086">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_green()</a>, and <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00204">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_yell_red()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a05b2aa1aff298e094fd02d59b067e4e7_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a05b2aa1aff298e094fd02d59b067e4e7_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a05b2aa1aff298e094fd02d59b067e4e7_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a05b2aa1aff298e094fd02d59b067e4e7_icgraph">
<area shape="rect" title="Returns a pointer to the tsc_config_state." alt="" coords="492,49,647,105"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#af3aad7133e6da0308277109a8a104ef0" title="Method to represent the upcoming green, when no desired phase plan is present and the TSC is currentl..." alt="" coords="229,5,444,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#ad06fb1cbc4f3de4eda56c3999bd111d9" title="Method to represent yellow change and red clearance when no desired phase plan is present and the TSC..." alt="" coords="249,86,425,157"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#aa3549e37ef3a3ffe9c0ce7c3c0f24605" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,42,181,113"/>
</map>
</div>

</div>
</div>
<a id="a40c96f54a5eb802026f93906dc1b77d8" name="a40c96f54a5eb802026f93906dc1b77d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c96f54a5eb802026f93906dc1b77d8">&#9670;&nbsp;</a></span>get_vehicle_phase_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; int, int &gt; &amp; traffic_signal_controller_service::tsc_state::get_vehicle_phase_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a map of pedestrian phases to signal group ids. </p>
<dl class="section return"><dt>Returns</dt><dd>a map of pedestrian phases to signal group ids </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00546">546</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  547</span>    {</div>
<div class="line"><span class="lineno">  548</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>;</div>
<div class="line"><span class="lineno">  549</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_acadeea8358da8312912ce5d4ee581dc4"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">traffic_signal_controller_service::tsc_state::vehicle_phase_2signalgroup_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; vehicle_phase_2signalgroup_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00052">monitor_tsc_state.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00052">vehicle_phase_2signalgroup_map_</a>.</p>

</div>
</div>
<a id="a42882c2c84b9decb8ab4d89485a5321f" name="a42882c2c84b9decb8ab4d89485a5321f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42882c2c84b9decb8ab4d89485a5321f">&#9670;&nbsp;</a></span>get_vehicle_signal_group_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_vehicle_signal_group_id </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>phase_number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the signal group id using phase number.Only for vehicle phases. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_number</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classtraffic__signal__controller__service_1_1monitor__states__exception.html" title="Runtime error related to SNMP client used to communicate with Traffic Signal Controller (NTCIP).">monitor_states_exception</a></td><td>if phase number is less than 1. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00420">420</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>                                                                      {</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a> &gt;= 1) {</div>
<div class="line"><span class="lineno">  422</span>            <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>.find(<a class="code hl_variable" href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a>) != <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>.end() ) {</div>
<div class="line"><span class="lineno">  423</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>[<a class="code hl_variable" href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a>];</div>
<div class="line"><span class="lineno">  424</span>            } </div>
<div class="line"><span class="lineno">  425</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  426</span>                <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;No signal group id found for phase number &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<a class="code hl_variable" href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a>) + <span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><span class="lineno">  427</span>            }</div>
<div class="line"><span class="lineno">  428</span>        }</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  430</span>            <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;Phase numbers less than 1 are invalid!&quot;</span>);</div>
<div class="line"><span class="lineno">  431</span>        }</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="ttc" id="antcip__1202__ext__phasetime_8h_html_a818606b5263ca9418c2a574097a9503a"><div class="ttname"><a href="ntcip__1202__ext__phasetime_8h.html#a818606b5263ca9418c2a574097a9503a">phase_number</a></div><div class="ttdeci">uint8_t phase_number</div><div class="ttdoc">Phase number (NTCIP) of phase.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__1202__ext__phasetime_8h_source.html#l00001">ntcip_1202_ext_phasetime.h:1</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__1202__ext__phasetime_8h_source.html#l00001">phase_number</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00052">vehicle_phase_2signalgroup_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00086">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00515">get_concurrent_signal_groups()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00486">get_red_duration()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_cgraph">
<area shape="rect" title="Get the signal group id using phase number.Only for vehicle phases." alt="" coords="5,5,172,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="220,20,292,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a42882c2c84b9decb8ab4d89485a5321f_icgraph">
<area shape="rect" title="Get the signal group id using phase number.Only for vehicle phases." alt="" coords="499,93,665,149"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#af3aad7133e6da0308277109a8a104ef0" title="Method to represent the upcoming green, when no desired phase plan is present and the TSC is currentl..." alt="" coords="236,13,451,69"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a" title="The concurrent phases that the given phase can be green along with." alt="" coords="255,93,432,149"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b" title="Get red duration for a phase." alt="" coords="266,173,421,229"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#aa3549e37ef3a3ffe9c0ce7c3c0f24605" title="Update spat movement_event list with desired phase plan information." alt="" coords="9,5,185,76"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,140,188,181"/>
</map>
</div>

</div>
</div>
<a id="ae76cdfcdb7d2cbd8fcf0afef1d0f8925" name="ae76cdfcdb7d2cbd8fcf0afef1d0f8925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">&#9670;&nbsp;</a></span>get_yellow_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_yellow_duration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get yellow duration time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the yellow duration needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>yellow duration time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">460</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  461</span>    {</div>
<div class="line"><span class="lineno">  462</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  463</span>        std::string yellow_duration_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a8af63441377ae9f0975ef2d6dc2c744e">ntcip_oids::YELLOW_CHANGE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>        snmp_response_obj yellow_duration;</div>
<div class="line"><span class="lineno">  466</span>        yellow_duration.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  467</span>        </div>
<div class="line"><span class="lineno">  468</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a> -&gt;process_snmp_request(yellow_duration_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, yellow_duration);</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) yellow_duration.val_int * 100; <span class="comment">//Convert to milliseconds. NTCIP returned value is in tenths of seconds</span></div>
<div class="line"><span class="lineno">  471</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a8af63441377ae9f0975ef2d6dc2c744e"><div class="ttname"><a href="namespacentcip__oids.html#a8af63441377ae9f0975ef2d6dc2c744e">ntcip_oids::YELLOW_CHANGE_PARAMETER</a></div><div class="ttdeci">static const std::string YELLOW_CHANGE_PARAMETER</div><div class="ttdoc">Phase Yellow Change Parameter: Following the green interval of each phase, the CU shall provide a yel...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00054">ntcip_oids.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00043">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>, and <a class="el" href="ntcip__oids_8h_source.html#l00054">ntcip_oids::YELLOW_CHANGE_PARAMETER</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph">
<area shape="rect" title="Get yellow duration time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph">
<area shape="rect" title="Get yellow duration time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="af051312a2931c0f7db32b3d0439a2e6b" name="af051312a2931c0f7db32b3d0439a2e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af051312a2931c0f7db32b3d0439a2e6b">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_state::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> by making SNMP calls to TSC for phase sequence and timing information. </p>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">10</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   10</span>                               {</div>
<div class="line"><span class="lineno">   11</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   12</span>            <span class="comment">// Map signal group ids and phase nums</span></div>
<div class="line"><span class="lineno">   13</span>            <span class="comment">//Get phase number given a signal group id</span></div>
<div class="line"><span class="lineno">   14</span>            </div>
<div class="line"><span class="lineno">   15</span>            <span class="keywordtype">int</span> max_channels_in_tsc = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">get_max_channels</a>();</div>
<div class="line"><span class="lineno">   16</span>            <span class="comment">// Loop through all channels and check which are associated with a vehicle phase and pedestrian phase</span></div>
<div class="line"><span class="lineno">   17</span>            std::vector&lt;int&gt; vehicle_channels; </div>
<div class="line"><span class="lineno">   18</span>            std::vector&lt;int&gt; ped_channels;</div>
<div class="line"><span class="lineno">   19</span>            <span class="comment">// Get channel source for each channel in TSC and allocate to vehicle/ped depending on source type</span></div>
<div class="line"><span class="lineno">   20</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2129cdedb7a828d7d2e529bfd6f9f70a">get_channels</a>(max_channels_in_tsc, vehicle_channels, ped_channels);</div>
<div class="line"><span class="lineno">   21</span>            </div>
<div class="line"><span class="lineno">   22</span>            <span class="comment">// Get Phases associated with vehicle channels and pedestrian channels</span></div>
<div class="line"><span class="lineno">   23</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68">get_phases_associated_with_channel</a>(vehicle_channels);</div>
<div class="line"><span class="lineno">   24</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a163436fbfd3bac07db01c6bfc3db10e2">ped_phase_2signalgroup_map_</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68">get_phases_associated_with_channel</a>(ped_channels);</div>
<div class="line"><span class="lineno">   25</span>            </div>
<div class="line"><span class="lineno">   26</span>            <span class="keywordtype">int</span> max_rings_in_tsc = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac5466e8ffa2e83e5ccdf5648245ff0ef">get_max_rings</a>();</div>
<div class="line"><span class="lineno">   27</span>            <span class="comment">// Get vehicle sequence for active phases. By default in sequence 1</span></div>
<div class="line"><span class="lineno">   28</span>            std::vector&lt;std::vector&lt;int&gt;&gt; active_ring_sequences = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a216684e69a6518858a3ab9666eb107be">get_active_ring_sequences</a>(max_rings_in_tsc, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>);</div>
<div class="line"><span class="lineno">   29</span>            <span class="comment">// Update vehicle phase map to only include phases in active ring sequence. Also construct signal group to vehicle phase map</span></div>
<div class="line"><span class="lineno">   30</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a35d60c760e272be064a99868814dd164">map_phase_and_signalgroup</a>(active_ring_sequences, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#acadeea8358da8312912ce5d4ee581dc4">vehicle_phase_2signalgroup_map_</a>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>            <span class="comment">// Define state for each signal group</span></div>
<div class="line"><span class="lineno">   33</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signal_group, vehicle_phase] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>)</div>
<div class="line"><span class="lineno">   34</span>            {</div>
<div class="line"><span class="lineno">   35</span>                <span class="keywordtype">int</span> phase_num = vehicle_phase;</div>
<div class="line"><span class="lineno">   36</span>                signal_group_state state;</div>
<div class="line"><span class="lineno">   37</span>                state.phase_num = phase_num;</div>
<div class="line"><span class="lineno">   38</span>                state.max_green = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">get_max_green</a>(phase_num);</div>
<div class="line"><span class="lineno">   39</span>                state.min_green = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">get_min_green</a>(phase_num);</div>
<div class="line"><span class="lineno">   40</span>                state.yellow_duration = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">get_yellow_duration</a>(phase_num);</div>
<div class="line"><span class="lineno">   41</span>                <span class="comment">// Define green duration as min/max as decided in configuration</span></div>
<div class="line"><span class="lineno">   42</span>                state.green_duration = state.min_green;</div>
<div class="line"><span class="lineno">   43</span>                state.red_clearance = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">get_red_clearance</a>(phase_num);</div>
<div class="line"><span class="lineno">   44</span>                state.phase_seq = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a4e60542fa6eff6a0071092cd7b736269">get_following_phases</a>(phase_num, active_ring_sequences);</div>
<div class="line"><span class="lineno">   45</span>                state.concurrent_signal_groups = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a">get_concurrent_signal_groups</a>(phase_num);</div>
<div class="line"><span class="lineno">   46</span>                <span class="keyword">auto</span> pair = std::make_pair(signal_group, state);</div>
<div class="line"><span class="lineno">   47</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>.insert(pair);</div>
<div class="line"><span class="lineno">   48</span>            }</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>            <span class="comment">// Loop through states once other state parameters are defined to get the red duration</span></div>
<div class="line"><span class="lineno">   51</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; [signalgroup_id, state] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>)</div>
<div class="line"><span class="lineno">   52</span>            {</div>
<div class="line"><span class="lineno">   53</span>                </div>
<div class="line"><span class="lineno">   54</span>                state.red_duration = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">get_red_duration</a>(state.phase_num);</div>
<div class="line"><span class="lineno">   55</span>            }</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>            <span class="comment">// Define tsc config state - Needed to construct message sent to SO service </span></div>
<div class="line"><span class="lineno">   58</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a22d851b4a2f7f7413fd4c7f811a2e699">tsc_config_state_ptr_</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a0848c00c6e083fbb76fc7bf976898869">define_tsc_config_state</a>();</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>            <span class="comment">// Print signal_group map</span></div>
<div class="line"><span class="lineno">   61</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signalgroup_id, phase] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aaf5cd823f7a8d9e2e031258b7e26c5b6">signal_group_2vehiclephase_map_</a>)</div>
<div class="line"><span class="lineno">   62</span>            {</div>
<div class="line"><span class="lineno">   63</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Signal group id: {0} phase: {1}&quot;</span>, signalgroup_id, phase);</div>
<div class="line"><span class="lineno">   64</span>            }</div>
<div class="line"><span class="lineno">   65</span>            <span class="comment">// Print state map</span></div>
<div class="line"><span class="lineno">   66</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signalgroup_id, state] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#aff8055041fe1bcfce3e02494a8215586">signal_group_2tsc_state_map_</a>)</div>
<div class="line"><span class="lineno">   67</span>            {</div>
<div class="line"><span class="lineno">   68</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Signal group id: {0}&quot;</span>, signalgroup_id);</div>
<div class="line"><span class="lineno">   69</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Phase num: {0}&quot;</span>, state.phase_num);</div>
<div class="line"><span class="lineno">   70</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Max green: {0}&quot;</span>, state.max_green);</div>
<div class="line"><span class="lineno">   71</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Min green: {0}&quot;</span>, state.min_green);</div>
<div class="line"><span class="lineno">   72</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Green Duration: {0}&quot;</span>, state.green_duration);</div>
<div class="line"><span class="lineno">   73</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;yellow duration: {0}&quot;</span>, state.yellow_duration);</div>
<div class="line"><span class="lineno">   74</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Red clearance: {0}&quot;</span>, state.red_clearance);</div>
<div class="line"><span class="lineno">   75</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Red duration: {0}&quot;</span>, state.red_duration);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Phase sequence:&quot;</span>);</div>
<div class="line"><span class="lineno">   78</span>                <span class="keywordflow">for</span>(<span class="keyword">auto</span> phase : state.phase_seq){</div>
<div class="line"><span class="lineno">   79</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;{0}&quot;</span>, phase);</div>
<div class="line"><span class="lineno">   80</span>                }</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Concurrent Signal Groups:&quot;</span>);</div>
<div class="line"><span class="lineno">   83</span>                <span class="keywordflow">for</span>(<span class="keyword">auto</span> signal_group : state.concurrent_signal_groups){</div>
<div class="line"><span class="lineno">   84</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;{0}&quot;</span>, signal_group);</div>
<div class="line"><span class="lineno">   85</span>                }  </div>
<div class="line"><span class="lineno">   86</span>            }</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   88</span>        }<span class="keywordflow">catch</span> ( <span class="keyword">const</span> snmp_client_exception &amp;e ) {</div>
<div class="line"><span class="lineno">   89</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Exception encounters during initialization: \n {0}&quot;</span>,e.what());</div>
<div class="line"><span class="lineno">   90</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   91</span>        }</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a0848c00c6e083fbb76fc7bf976898869"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a0848c00c6e083fbb76fc7bf976898869">traffic_signal_controller_service::tsc_state::define_tsc_config_state</a></div><div class="ttdeci">std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; define_tsc_config_state()</div><div class="ttdoc">Creates tsc_configuration_state object pointer which is used to forward configuration information req...</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00094">monitor_tsc_state.cpp:94</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a2129cdedb7a828d7d2e529bfd6f9f70a"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2129cdedb7a828d7d2e529bfd6f9f70a">traffic_signal_controller_service::tsc_state::get_channels</a></div><div class="ttdeci">void get_channels(int max_channels, std::vector&lt; int &gt; &amp;vehicle_channels, std::vector&lt; int &gt; &amp;ped_channels) const</div><div class="ttdoc">Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian....</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00302">monitor_tsc_state.cpp:302</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a216684e69a6518858a3ab9666eb107be"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a216684e69a6518858a3ab9666eb107be">traffic_signal_controller_service::tsc_state::get_active_ring_sequences</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; get_active_ring_sequences(int max_rings, std::unordered_map&lt; int, int &gt; &amp;vehicle_phase_2signalgroup_map, int sequence=1) const</div><div class="ttdoc">Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multip...</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00343">monitor_tsc_state.cpp:343</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a2f1d658bc65133d1ba6b4f03d593ffb3"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">traffic_signal_controller_service::tsc_state::get_max_channels</a></div><div class="ttdeci">int get_max_channels() const</div><div class="ttdoc">Method for getting maximum channels for the traffic signal controller.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00393">monitor_tsc_state.cpp:393</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a35d60c760e272be064a99868814dd164"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a35d60c760e272be064a99868814dd164">traffic_signal_controller_service::tsc_state::map_phase_and_signalgroup</a></div><div class="ttdeci">void map_phase_and_signalgroup(const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;active_ring_sequences, std::unordered_map&lt; int, int &gt; &amp;vehicle_phase_2signalgroup_map, std::unordered_map&lt; int, int &gt; &amp;signal_group_2vehiclephase_map) const</div><div class="ttdoc">Method for mapping vehicle phases and signal groups. Modifies non-const arguments by reference....</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00244">monitor_tsc_state.cpp:244</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a4e60542fa6eff6a0071092cd7b736269"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a4e60542fa6eff6a0071092cd7b736269">traffic_signal_controller_service::tsc_state::get_following_phases</a></div><div class="ttdeci">std::vector&lt; int &gt; get_following_phases(int phase_num, const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;active_ring_sequences) const</div><div class="ttdoc">Get a sequence of phases following the given phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00221">monitor_tsc_state.cpp:221</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a73acb7d06ec8d69783f369c504a3010c"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">traffic_signal_controller_service::tsc_state::get_min_green</a></div><div class="ttdeci">int get_min_green(int phase_num) const</div><div class="ttdoc">Get minimum green time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00434">monitor_tsc_state.cpp:434</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a74f035567d2d16a8cb75413845bebb68"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68">traffic_signal_controller_service::tsc_state::get_phases_associated_with_channel</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; get_phases_associated_with_channel(const std::vector&lt; int &gt; &amp;signal_group_ids) const</div><div class="ttdoc">Creates a map of phases associated with a vehicle phase and a pedestrian phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00273">monitor_tsc_state.cpp:273</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_aa3c65fe0f07b33678abb735c5be6715a"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a">traffic_signal_controller_service::tsc_state::get_concurrent_signal_groups</a></div><div class="ttdeci">std::vector&lt; int &gt; get_concurrent_signal_groups(int phase_num)</div><div class="ttdoc">The concurrent phases that the given phase can be green along with.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00515">monitor_tsc_state.cpp:515</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_aa4dbbf6a17e37cbb38a43d4641bf3ec8"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">traffic_signal_controller_service::tsc_state::get_max_green</a></div><div class="ttdeci">int get_max_green(int phase_num) const</div><div class="ttdoc">Get maximum green time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00447">monitor_tsc_state.cpp:447</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ac5466e8ffa2e83e5ccdf5648245ff0ef"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ac5466e8ffa2e83e5ccdf5648245ff0ef">traffic_signal_controller_service::tsc_state::get_max_rings</a></div><div class="ttdeci">int get_max_rings() const</div><div class="ttdoc">Method for getting maximum rings for the traffic signal controller.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00380">monitor_tsc_state.cpp:380</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_acaee10dcfb57b70be35a81723b21761b"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">traffic_signal_controller_service::tsc_state::get_red_duration</a></div><div class="ttdeci">int get_red_duration(int phase_num)</div><div class="ttdoc">Get red duration for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00486">monitor_tsc_state.cpp:486</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ae5bfca513648fa55566289fe8a9de750"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">traffic_signal_controller_service::tsc_state::get_red_clearance</a></div><div class="ttdeci">int get_red_clearance(int phase_num) const</div><div class="ttdoc">Get red clearance time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00473">monitor_tsc_state.cpp:473</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">traffic_signal_controller_service::tsc_state::get_yellow_duration</a></div><div class="ttdeci">int get_yellow_duration(int phase_num) const</div><div class="ttdoc">Get yellow duration time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00460">monitor_tsc_state.cpp:460</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00036">traffic_signal_controller_service::signal_group_state::concurrent_signal_groups</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00094">define_tsc_config_state()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00343">get_active_ring_sequences()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00302">get_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00515">get_concurrent_signal_groups()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00221">get_following_phases()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00393">get_max_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00447">get_max_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00380">get_max_rings()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00434">get_min_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00273">get_phases_associated_with_channel()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00473">get_red_clearance()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00486">get_red_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">get_yellow_duration()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00026">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00244">map_phase_and_signalgroup()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00024">traffic_signal_controller_service::signal_group_state::max_green</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00022">traffic_signal_controller_service::signal_group_state::min_green</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00055">ped_phase_2signalgroup_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00020">traffic_signal_controller_service::signal_group_state::phase_num</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00034">traffic_signal_controller_service::signal_group_state::phase_seq</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00030">traffic_signal_controller_service::signal_group_state::red_clearance</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00046">signal_group_2tsc_state_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00049">signal_group_2vehiclephase_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00074">tsc_config_state_ptr_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00052">vehicle_phase_2signalgroup_map_</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00028">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph">
<area shape="rect" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,474,188,515"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a0848c00c6e083fbb76fc7bf976898869" title="Creates tsc_configuration_state object pointer which is used to forward configuration information req..." alt="" coords="239,5,410,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a216684e69a6518858a3ab9666eb107be" title="Method for getting populated rings in sequence (default sequence = 1). Sequence table contains multip..." alt="" coords="492,97,655,153"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2129cdedb7a828d7d2e529bfd6f9f70a" title="Creates vectors of channels (or signal group id) associated with a vehicle phase and a pedestrian...." alt="" coords="496,189,651,245"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa3c65fe0f07b33678abb735c5be6715a" title="The concurrent phases that the given phase can be green along with." alt="" coords="236,187,413,243"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a4e60542fa6eff6a0071092cd7b736269" title="Get a sequence of phases following the given phase." alt="" coords="247,267,402,323"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3" title="Method for getting maximum channels for the traffic signal controller." alt="" coords="247,347,402,403"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8" title="Get maximum green time for a phase." alt="" coords="496,469,651,525"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac5466e8ffa2e83e5ccdf5648245ff0ef" title="Method for getting maximum rings for the traffic signal controller." alt="" coords="247,507,402,563"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c" title="Get minimum green time for a phase." alt="" coords="496,549,651,605"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a74f035567d2d16a8cb75413845bebb68" title="Creates a map of phases associated with a vehicle phase and a pedestrian phase." alt="" coords="461,629,685,685"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750" title="Get red clearance time for a phase." alt="" coords="496,709,651,765"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b" title="Get red duration for a phase." alt="" coords="247,427,402,483"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925" title="Get yellow duration time for a phase." alt="" coords="496,789,651,845"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a35d60c760e272be064a99868814dd164" title="Method for mapping vehicle phases and signal groups. Modifies non&#45;const arguments by reference...." alt="" coords="242,840,407,896"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="733,484,805,511"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a42882c2c84b9decb8ab4d89485a5321f" title="Get the signal group id using phase number.Only for vehicle phases." alt="" coords="490,389,657,445"/>
</map>
</div>

</div>
</div>
<a id="a35d60c760e272be064a99868814dd164" name="a35d60c760e272be064a99868814dd164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d60c760e272be064a99868814dd164">&#9670;&nbsp;</a></span>map_phase_and_signalgroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::map_phase_and_signalgroup </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>active_ring_sequences</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicle_phase_2signalgroup_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>signal_group_2vehiclephase_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for mapping vehicle phases and signal groups. Modifies non-const arguments by reference. Signal group map is expected to be passed empty. Vehicle phase map is expected to contain known vehicle phases. These are modified to only contain phases in the active ring sequence. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">active_ring_sequences</td><td>A list of phases from the traffic signal controller in rows corresponding to the ring number </td></tr>
    <tr><td class="paramname">vehicle_phase_2signalgroup_map</td><td>a map for all vehicle phases and signal groups associated with them </td></tr>
    <tr><td class="paramname">signal_group_2vehiclephase_map</td><td>Mapping from signal groups id to vehicle phases </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00244">244</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>    {</div>
<div class="line"><span class="lineno">  247</span>        <span class="comment">// Loop through all ring sequences and remove vehicle phase entries in map</span></div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = vehicle_phase_2signalgroup_map.begin(); it != vehicle_phase_2signalgroup_map.end();){</div>
<div class="line"><span class="lineno">  249</span>            <span class="keyword">auto</span> phase = it-&gt;first;</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordtype">bool</span> found_phase = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span> ring : active_ring_sequences)</div>
<div class="line"><span class="lineno">  252</span>            {</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">if</span>(std::find(ring.begin(), ring.end(), phase) !=ring.end()){</div>
<div class="line"><span class="lineno">  254</span>                    found_phase = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  255</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  256</span>                }    </div>
<div class="line"><span class="lineno">  257</span>            }</div>
<div class="line"><span class="lineno">  258</span>            </div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">if</span>(!found_phase)</div>
<div class="line"><span class="lineno">  260</span>            {</div>
<div class="line"><span class="lineno">  261</span>                <span class="comment">// if phase not found in active sequence, remove entry</span></div>
<div class="line"><span class="lineno">  262</span>                it = vehicle_phase_2signalgroup_map.erase(it);</div>
<div class="line"><span class="lineno">  263</span>            }</div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  265</span>                <span class="comment">// Add entry to signal to phase map</span></div>
<div class="line"><span class="lineno">  266</span>                signal_group_2vehiclephase_map.insert(std::make_pair(it-&gt;second, it-&gt;first));</div>
<div class="line"><span class="lineno">  267</span>                it++;</div>
<div class="line"><span class="lineno">  268</span>            }</div>
<div class="line"><span class="lineno">  269</span>        }</div>
<div class="line"><span class="lineno">  270</span>        </div>
<div class="line"><span class="lineno">  271</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a35d60c760e272be064a99868814dd164_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a35d60c760e272be064a99868814dd164_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a35d60c760e272be064a99868814dd164_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a35d60c760e272be064a99868814dd164_icgraph">
<area shape="rect" title="Method for mapping vehicle phases and signal groups. Modifies non&#45;const arguments by reference...." alt="" coords="236,5,401,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a73f09fdaac8a6376b65ad18c44459c9c" name="a73f09fdaac8a6376b65ad18c44459c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f09fdaac8a6376b65ad18c44459c9c">&#9670;&nbsp;</a></span>HOUR_TO_SECONDS_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::HOUR_TO_SECONDS_ = 3600</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00066">66</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

</div>
</div>
<a id="a163436fbfd3bac07db01c6bfc3db10e2" name="a163436fbfd3bac07db01c6bfc3db10e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a163436fbfd3bac07db01c6bfc3db10e2">&#9670;&nbsp;</a></span>ped_phase_2signalgroup_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int,int&gt; traffic_signal_controller_service::tsc_state::ped_phase_2signalgroup_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00055">55</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00541">get_ped_phase_map()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00556">get_signal_group_to_ped_phase_map()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="a1f7c1e663e2b2e41e1d3cfb902208add" name="a1f7c1e663e2b2e41e1d3cfb902208add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7c1e663e2b2e41e1d3cfb902208add">&#9670;&nbsp;</a></span>phase_seq_ring1_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; traffic_signal_controller_service::tsc_state::phase_seq_ring1_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00058">58</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

</div>
</div>
<a id="a73756e2d00260dfccd9838cf147bf823" name="a73756e2d00260dfccd9838cf147bf823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73756e2d00260dfccd9838cf147bf823">&#9670;&nbsp;</a></span>phase_seq_ring2_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; traffic_signal_controller_service::tsc_state::phase_seq_ring2_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00060">60</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

</div>
</div>
<a id="ace2712eeb290c972b3ead1c4ee7e7744" name="ace2712eeb290c972b3ead1c4ee7e7744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace2712eeb290c972b3ead1c4ee7e7744">&#9670;&nbsp;</a></span>required_following_movements_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::required_following_movements_ = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00063">63</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00152">add_future_movement_events()</a>.</p>

</div>
</div>
<a id="a17d34ab64b5d3eda6f05a5f3c7622475" name="a17d34ab64b5d3eda6f05a5f3c7622475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d34ab64b5d3eda6f05a5f3c7622475">&#9670;&nbsp;</a></span>SECOND_TO_MILLISECONDS_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::SECOND_TO_MILLISECONDS_ = 1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00067">67</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

</div>
</div>
<a id="aff8055041fe1bcfce3e02494a8215586" name="aff8055041fe1bcfce3e02494a8215586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff8055041fe1bcfce3e02494a8215586">&#9670;&nbsp;</a></span>signal_group_2tsc_state_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a>&gt; traffic_signal_controller_service::tsc_state::signal_group_2tsc_state_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00046">46</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00152">add_future_movement_events()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00094">define_tsc_config_state()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00486">get_red_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00551">get_signal_group_state_map()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="aaf5cd823f7a8d9e2e031258b7e26c5b6" name="aaf5cd823f7a8d9e2e031258b7e26c5b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf5cd823f7a8d9e2e031258b7e26c5b6">&#9670;&nbsp;</a></span>signal_group_2vehiclephase_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, int&gt; traffic_signal_controller_service::tsc_state::signal_group_2vehiclephase_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00049">49</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00406">get_phase_number()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="a32ec176910fce4545704a6153c3407eb" name="a32ec176910fce4545704a6153c3407eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ec176910fce4545704a6153c3407eb">&#9670;&nbsp;</a></span>snmp_client_worker_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>&gt; traffic_signal_controller_service::tsc_state::snmp_client_worker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00043">43</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00343">get_active_ring_sequences()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00302">get_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00515">get_concurrent_signal_groups()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00393">get_max_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00447">get_max_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00380">get_max_rings()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00434">get_min_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00273">get_phases_associated_with_channel()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00473">get_red_clearance()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">get_yellow_duration()</a>.</p>

</div>
</div>
<a id="a22d851b4a2f7f7413fd4c7f811a2e699" name="a22d851b4a2f7f7413fd4c7f811a2e699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d851b4a2f7f7413fd4c7f811a2e699">&#9670;&nbsp;</a></span>tsc_config_state_ptr_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a>&gt; traffic_signal_controller_service::tsc_state::tsc_config_state_ptr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to tsc_configuration_state object which is traffic signal controller configuration information obtained from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> worker and broadcast on the carma-streets kafka broker as a JSON message. </p>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00074">74</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00111">get_tsc_config_state()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="acadeea8358da8312912ce5d4ee581dc4" name="acadeea8358da8312912ce5d4ee581dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acadeea8358da8312912ce5d4ee581dc4">&#9670;&nbsp;</a></span>vehicle_phase_2signalgroup_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int,int&gt; traffic_signal_controller_service::tsc_state::vehicle_phase_2signalgroup_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00052">52</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00546">get_vehicle_phase_map()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00420">get_vehicle_signal_group_id()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tsc_client_service/include/<a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a></li>
<li>tsc_client_service/src/<a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetraffic__signal__controller__service.html">traffic_signal_controller_service</a></li><li class="navelem"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a></li>
    <li class="footer">Generated on Tue Jun 13 2023 18:44:46 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
