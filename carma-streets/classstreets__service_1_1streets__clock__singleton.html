<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: streets_service::streets_clock_singleton Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classstreets__service_1_1streets__clock__singleton.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classstreets__service_1_1streets__clock__singleton-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">streets_service::streets_clock_singleton Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is created by the CARMA Time Library (<a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>) and is a wrapper object that allows for time based operation using chronos system time calls or an external source for time. Its constructor takes a boolean parameter, what when set to true relies on update calls to save and store the current time. When passed false, the CarmaClock object functions exactly as chrono system time calls including now() and sleep() calls, using the system time.  
 <a href="classstreets__service_1_1streets__clock__singleton.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="streets__clock__singleton_8h_source.html">streets_clock_singleton.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for streets_service::streets_clock_singleton:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton__inherit__graph.png" border="0" usemap="#astreets__service_1_1streets__clock__singleton_inherit__map" alt="Inheritance graph"/></div>
<map name="astreets__service_1_1streets__clock__singleton_inherit__map" id="astreets__service_1_1streets__clock__singleton_inherit__map">
<area shape="rect" title="Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is cre..." alt="" coords="19,536,177,687"/>
<area shape="rect" href="classstreets__service_1_1streets__singleton.html" title=" " alt="" coords="5,277,191,487"/>
<area shape="rect" href="classstreets__service_1_1streets__singleton.html" title=" " alt="" coords="19,5,177,200"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for streets_service::streets_clock_singleton:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton__coll__graph.png" border="0" usemap="#astreets__service_1_1streets__clock__singleton_coll__map" alt="Collaboration graph"/></div>
<map name="astreets__service_1_1streets__clock__singleton_coll__map" id="astreets__service_1_1streets__clock__singleton_coll__map">
<area shape="rect" title="Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is cre..." alt="" coords="75,676,232,827"/>
<area shape="rect" href="classstreets__service_1_1streets__singleton.html" title=" " alt="" coords="61,417,246,627"/>
<area shape="rect" href="classstatic_01std_1_1unique__ptr_3_01fwha__stol_1_1lib_1_1time_1_1CarmaClock_01_4.html" title=" " alt="" coords="5,197,165,289"/>
<area shape="rect" href="classstreets__service_1_1streets__singleton.html" title=" " alt="" coords="189,145,347,340"/>
<area shape="rect" title=" " alt="" coords="212,5,324,83"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3817316b869ea2e4e813e1da3a347340"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a3817316b869ea2e4e813e1da3a347340">update</a> (uint64_t time)</td></tr>
<tr class="memdesc:a3817316b869ea2e4e813e1da3a347340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static access to the CarmaClock update method (see <a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>). Updates the current time held by the CarmaClock to the value of the time parameter (in milliseconds).  <a href="classstreets__service_1_1streets__clock__singleton.html#a3817316b869ea2e4e813e1da3a347340">More...</a><br /></td></tr>
<tr class="separator:a3817316b869ea2e4e813e1da3a347340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace444a4a74b0cea211bf89ed89371bae"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">time_in_ms</a> ()</td></tr>
<tr class="memdesc:ace444a4a74b0cea211bf89ed89371bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static access to the CarmaClock timeInMilliseconds method (see <a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>). Returns the epoch time in milliseconds.  <a href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">More...</a><br /></td></tr>
<tr class="separator:ace444a4a74b0cea211bf89ed89371bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bd3e7391e279f8a5dc62d2eb6319fa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">sleep_for</a> (uint64_t ms)</td></tr>
<tr class="memdesc:a56bd3e7391e279f8a5dc62d2eb6319fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the underlying CarmaClock object.  <a href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">More...</a><br /></td></tr>
<tr class="separator:a56bd3e7391e279f8a5dc62d2eb6319fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d1810350146f4f5c0c7aab79c44f3fd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a3d1810350146f4f5c0c7aab79c44f3fd">sleep_until</a> (uint64_t ms)</td></tr>
<tr class="memdesc:a3d1810350146f4f5c0c7aab79c44f3fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep/block calling thread until provided time in milliseconds.  <a href="classstreets__service_1_1streets__clock__singleton.html#a3d1810350146f4f5c0c7aab79c44f3fd">More...</a><br /></td></tr>
<tr class="separator:a3d1810350146f4f5c0c7aab79c44f3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classstreets__service_1_1streets__singleton"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classstreets__service_1_1streets__singleton')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_service::streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</a></td></tr>
<tr class="memitem:a9421907fc5114a7d1077cef450ca5c94 inherit pub_static_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">static fwha_stol::lib::time::CarmaClock &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a> ()</td></tr>
<tr class="separator:a9421907fc5114a7d1077cef450ca5c94 inherit pub_static_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2661e8317c90be8ba5d18b37b5bc3df8 inherit pub_static_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">static fwha_stol::lib::time::CarmaClock &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a2661e8317c90be8ba5d18b37b5bc3df8">create</a> (Args...args)</td></tr>
<tr class="memdesc:a2661e8317c90be8ba5d18b37b5bc3df8 inherit pub_static_methods_classstreets__service_1_1streets__singleton"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to intialize streets_singleton with constructor params ...Args of templated class.  <a href="classstreets__service_1_1streets__singleton.html#a2661e8317c90be8ba5d18b37b5bc3df8">More...</a><br /></td></tr>
<tr class="separator:a2661e8317c90be8ba5d18b37b5bc3df8 inherit pub_static_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a9421907fc5114a7d1077cef450ca5c94"><td class="memItemLeft" align="right" valign="top">static T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a> ()</td></tr>
<tr class="separator:a9421907fc5114a7d1077cef450ca5c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:af9a7fd4fb60a854d24c5ffd1d4ac0141"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html#af9a7fd4fb60a854d24c5ffd1d4ac0141">streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</a></td></tr>
<tr class="separator:af9a7fd4fb60a854d24c5ffd1d4ac0141"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_methods_classstreets__service_1_1streets__singleton"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstreets__service_1_1streets__singleton')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_service::streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</a></td></tr>
<tr class="memitem:a6302b128785d4b06bd2967a630bdeb9a inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a6302b128785d4b06bd2967a630bdeb9a">streets_singleton</a> (const <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;)=delete</td></tr>
<tr class="separator:a6302b128785d4b06bd2967a630bdeb9a inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65fa685bbc556cb5b88994a9908d7abf inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a65fa685bbc556cb5b88994a9908d7abf">streets_singleton</a> (<a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a65fa685bbc556cb5b88994a9908d7abf inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293f3641ccd4c1b5fff429b50bd5db3d inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a293f3641ccd4c1b5fff429b50bd5db3d">operator=</a> (const <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;)=delete</td></tr>
<tr class="separator:a293f3641ccd4c1b5fff429b50bd5db3d inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147ca48b472357f2c1391d508ddbb45c inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a147ca48b472357f2c1391d508ddbb45c">operator=</a> (const <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a147ca48b472357f2c1391d508ddbb45c inherit pub_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classstreets__service_1_1streets__singleton"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstreets__service_1_1streets__singleton')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_service::streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</a></td></tr>
<tr class="memitem:ab837811405aed9659973818cbf0ef4da inherit pro_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#ab837811405aed9659973818cbf0ef4da">streets_singleton</a> ()=default</td></tr>
<tr class="separator:ab837811405aed9659973818cbf0ef4da inherit pro_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b7aab89fb7d3c709b4a83f1ab7e6823 inherit pro_methods_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a1b7aab89fb7d3c709b4a83f1ab7e6823">~streets_singleton</a> ()=default</td></tr>
<tr class="separator:a1b7aab89fb7d3c709b4a83f1ab7e6823 inherit pro_methods_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_classstreets__service_1_1streets__singleton"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_classstreets__service_1_1streets__singleton')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_service::streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</a></td></tr>
<tr class="memitem:a912da0acc934ac4252dacadd4e5d7433 inherit pro_static_attribs_classstreets__service_1_1streets__singleton"><td class="memItemLeft" align="right" valign="top">static std::unique_ptr&lt; fwha_stol::lib::time::CarmaClock &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__singleton.html#a912da0acc934ac4252dacadd4e5d7433">instance</a></td></tr>
<tr class="separator:a912da0acc934ac4252dacadd4e5d7433 inherit pro_static_attribs_classstreets__service_1_1streets__singleton"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is created by the CARMA Time Library (<a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>) and is a wrapper object that allows for time based operation using chronos system time calls or an external source for time. Its constructor takes a boolean parameter, what when set to true relies on update calls to save and store the current time. When passed false, the CarmaClock object functions exactly as chrono system time calls including now() and sleep() calls, using the system time. </p>
<p ><b>NOTE</b> Before attempting to statically access any functionality in this class, call streets_clock_singleton::create(bool simulation_mode) to initialize the clock singleton in simulation mode or real time mode.</p>
<dl class="section author"><dt>Author</dt><dd>Paul Bourelly </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8h_source.html#l00021">21</a> of file <a class="el" href="streets__clock__singleton_8h_source.html">streets_clock_singleton.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9421907fc5114a7d1077cef450ca5c94" name="a9421907fc5114a7d1077cef450ca5c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9421907fc5114a7d1077cef450ca5c94">&#9670;&nbsp;</a></span>get_singleton()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static T &amp; <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_service::streets_singleton</a>&lt; T, Args &gt;::get_singleton </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Method for static singleton instance retrieval </p><dl class="section return"><dt>Returns</dt><dd>T singleton instance </dd></dl>

<p class="reference">Referenced by <a class="el" href="streets__clock__singleton_8cpp_source.html#l00019">sleep_for()</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00026">sleep_until()</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">time_in_ms()</a>, and <a class="el" href="streets__clock__singleton_8cpp_source.html#l00005">update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a9421907fc5114a7d1077cef450ca5c94_icgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a9421907fc5114a7d1077cef450ca5c94_icgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a9421907fc5114a7d1077cef450ca5c94_icgraph" id="aclassstreets__service_1_1streets__clock__singleton_a9421907fc5114a7d1077cef450ca5c94_icgraph">
<area shape="rect" title=" " alt="" coords="1744,735,1947,777"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="1511,150,1689,191"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a3d1810350146f4f5c0c7aab79c44f3fd" title="Sleep/block calling thread until provided time in milliseconds." alt="" coords="1507,767,1693,809"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1504,702,1696,743"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a3817316b869ea2e4e813e1da3a347340" title="Static access to the CarmaClock update method (see https://github.com/usdot&#45;fhwa&#45;stol/carma&#45;time&#45;lib)..." alt="" coords="1518,1111,1682,1153"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#ae1c6b5529f6d39f6baebe028179cb3b2" title="Loop to consume detections from kafka detection consumer. Will terminate if kafka consumer is no long..." alt="" coords="1265,183,1413,239"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="1007,103,1161,159"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a784bcc97ce58546f2d5a172c96ba7e8f" title="Loop to produce sensor data sharing messages from detected_objects. Loop will populate sensor data sh..." alt="" coords="1011,344,1157,400"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e" title="Method to receive traffic signal controller configuration information from the tsc_state and broadcas..." alt="" coords="1001,5,1167,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="1222,103,1455,159"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a9ee2b8ce146ec179703350d609652785" title="Method to start all threads included in the tsc_service." alt="" coords="766,268,913,324"/>
<area shape="rect" href="sensor__data__sharing__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="535,283,586,309"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="751,110,927,151"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="535,117,586,144"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a74ace40856526a37410e434bcee7917a" title="Convert current hours of the year and milliseconds of the current hours into epoch timestamp in milli..." alt="" coords="1221,655,1456,711"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a4fde3ad2fb225f963f411ad66e72066f" title="Convert current mimutes of the year and milliseconds of the current minute into epoch timestamp in mi..." alt="" coords="1245,911,1432,967"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="1248,815,1429,886"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a7f3126c08963787918c8d007255b4193" title="Convert time offset (in tenths of seconds) from current time (NTCIP SPaT timing information units) to..." alt="" coords="1255,735,1423,791"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a49b81dd177ed2ea506fac8f3a9a7b273" title="Method to create SDSM from detected objects." alt="" coords="1265,575,1412,631"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#af3aad7133e6da0308277109a8a104ef0" title="Method to represent the upcoming green, when no desired phase plan is present and the TSC is currentl..." alt="" coords="1231,1343,1446,1399"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#ad06fb1cbc4f3de4eda56c3999bd111d9" title="Method to represent yellow change and red clearance when no desired phase plan is present and the TSC..." alt="" coords="1251,991,1427,1062"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="1261,415,1416,471"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="1007,264,1161,320"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#a72ddbd7f967b05cf79cf5a19fef28561" title="Method to prune the desired phase plan of any entries for which the end time is less than the current..." alt="" coords="1248,1167,1429,1238"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a480dafe7aae5c872f14d1f60c8627636" title="Set timestamp for intersection state based on host machine unix time." alt="" coords="1255,1087,1423,1143"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a5aa5329bedd738f5579cf045975d87a9" title="Set timestamp for intersection state based on NTCIP SPaT UDP message timestamp which is transmitted a..." alt="" coords="1255,1263,1423,1319"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1control__tsc__state.html#acf384a7561b5a9a2a72f4df2f66a630c" title="Method to update the queue of tsc_control." alt="" coords="1249,495,1429,551"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a37e66edff4920b53af3e3a268186f407" title="Get the epoch timestamp of the max end timestamp." alt="" coords="995,429,1173,485"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#ace57d6d7e92d000560753346277a4e20" title="Get the epoch timestamp of the min end timestamp." alt="" coords="751,655,927,711"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#adeca62d30921732346c615faaf64a9ec" title="Get the epoch timestamp of the next end timestamp" alt="" coords="1000,509,1168,565"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a650a958f01c7a1fd2e845c08e27fb88e" title="Get the epoch timestamp of the start timestamp." alt="" coords="1000,589,1168,645"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="473,757,649,813"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a8bc23ba89dd6c079735485173ba6d6d5" title="Get the epoch timestamp of the intersection state timestamp." alt="" coords="1000,1120,1168,1176"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="1000,880,1168,936"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="1000,1040,1168,1096"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#af48143f84b1047346da1d7d571f4511a" title="Set next_time for movement event. Method expects epoch time in milliseconds and converts to tenths of..." alt="" coords="1000,800,1168,856"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="1000,960,1168,1016"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e" title="Get predicted next movement event given a current event." alt="" coords="762,921,917,977"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="732,1005,947,1046"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="437,1029,684,1085"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,964,389,1020"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,1044,389,1100"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,1004,173,1060"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a01285f8060241eec1adbaa0c5e97a1df" title="Method to update movement_state with signal_group_id using ntcip spat data." alt="" coords="1000,720,1168,776"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#adb8a7d8693ba85ab08f3c0e31afe4935" title="Clears old movement event data for all movement_states. Adds one movement_event to the state_time_spe..." alt="" coords="755,735,923,791"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#aa3549e37ef3a3ffe9c0ce7c3c0f24605" title="Update spat movement_event list with desired phase plan information." alt="" coords="996,1201,1172,1271"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a504f1c93ede0e4a77bf104f0a13c502f" title="Method to consume continously consume time sync messages from Kafka topic and update streets_clock_si..." alt="" coords="1257,1423,1420,1479"/>
</map>
</div>

</div>
</div>
<a id="a56bd3e7391e279f8a5dc62d2eb6319fa" name="a56bd3e7391e279f8a5dc62d2eb6319fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56bd3e7391e279f8a5dc62d2eb6319fa">&#9670;&nbsp;</a></span>sleep_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_service::streets_clock_singleton::sleep_for </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the underlying CarmaClock object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>time in milliseconds to sleep for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8cpp_source.html#l00019">19</a> of file <a class="el" href="streets__clock__singleton_8cpp_source.html">streets_clock_singleton.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>                                                        {</div>
<div class="line"><span class="lineno">   20</span>        <span class="keyword">auto</span> &amp;inst = <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a>();</div>
<div class="line"><span class="lineno">   21</span>        inst.wait_for_initialization();</div>
<div class="line"><span class="lineno">   22</span>        <span class="keyword">auto</span> cur_time = inst.nowInMilliseconds();</div>
<div class="line"><span class="lineno">   23</span>        inst.sleep_until(cur_time + ms);</div>
<div class="line"><span class="lineno">   24</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__clock__singleton_html_a9421907fc5114a7d1077cef450ca5c94"><div class="ttname"><a href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">streets_service::streets_clock_singleton::get_singleton</a></div><div class="ttdeci">static T &amp; get_singleton()</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sensor__data__sharing__service_8cpp_source.html#l00087">sensor_data_sharing_service::sds_service::consume_detections()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00316">traffic_signal_controller_service::tsc_service::control_tsc_phases()</a>, <a class="el" href="sensor__data__sharing__service_8cpp_source.html#l00139">sensor_data_sharing_service::sds_service::produce_sdsms()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00257">traffic_signal_controller_service::tsc_service::produce_tsc_config_json()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00339">traffic_signal_controller_service::tsc_service::set_tsc_hold_and_omit_forceoff_call()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_cgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_cgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_cgraph" id="aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_cgraph">
<area shape="rect" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="5,5,184,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="232,5,435,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_icgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_icgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_icgraph" id="aclassstreets__service_1_1streets__clock__singleton_a56bd3e7391e279f8a5dc62d2eb6319fa_icgraph">
<area shape="rect" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="823,158,1001,199"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#ae1c6b5529f6d39f6baebe028179cb3b2" title="Loop to consume detections from kafka detection consumer. Will terminate if kafka consumer is no long..." alt="" coords="584,5,732,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="333,201,488,257"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a784bcc97ce58546f2d5a172c96ba7e8f" title="Loop to produce sensor data sharing messages from detected_objects. Loop will populate sensor data sh..." alt="" coords="585,85,731,141"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e" title="Method to receive traffic signal controller configuration information from the tsc_state and broadcas..." alt="" coords="328,281,493,337"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="541,216,775,272"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a9ee2b8ce146ec179703350d609652785" title="Method to start all threads included in the tsc_service." alt="" coords="337,45,484,101"/>
<area shape="rect" href="sensor__data__sharing__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="167,60,217,87"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,249,280,290"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,256,56,283"/>
</map>
</div>

</div>
</div>
<a id="a3d1810350146f4f5c0c7aab79c44f3fd" name="a3d1810350146f4f5c0c7aab79c44f3fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d1810350146f4f5c0c7aab79c44f3fd">&#9670;&nbsp;</a></span>sleep_until()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_service::streets_clock_singleton::sleep_until </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sleep/block calling thread until provided time in milliseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>time in milliseconds to sleep until. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8cpp_source.html#l00026">26</a> of file <a class="el" href="streets__clock__singleton_8cpp_source.html">streets_clock_singleton.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>                                                         {</div>
<div class="line"><span class="lineno">   27</span>        <span class="keyword">auto</span> &amp;inst = <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a>();</div>
<div class="line"><span class="lineno">   28</span>        inst.wait_for_initialization();</div>
<div class="line"><span class="lineno">   29</span>        inst.sleep_until(ms);</div>
<div class="line"><span class="lineno">   30</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a3d1810350146f4f5c0c7aab79c44f3fd_cgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a3d1810350146f4f5c0c7aab79c44f3fd_cgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a3d1810350146f4f5c0c7aab79c44f3fd_cgraph" id="aclassstreets__service_1_1streets__clock__singleton_a3d1810350146f4f5c0c7aab79c44f3fd_cgraph">
<area shape="rect" title="Sleep/block calling thread until provided time in milliseconds." alt="" coords="5,5,192,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="240,5,443,47"/>
</map>
</div>

</div>
</div>
<a id="ace444a4a74b0cea211bf89ed89371bae" name="ace444a4a74b0cea211bf89ed89371bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace444a4a74b0cea211bf89ed89371bae">&#9670;&nbsp;</a></span>time_in_ms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_service::streets_clock_singleton::time_in_ms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static access to the CarmaClock timeInMilliseconds method (see <a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>). Returns the epoch time in milliseconds. </p>
<dl class="section return"><dt>Returns</dt><dd>In simulation mode this returns the value from the last update call. If update has not been called yet this method will block until the first call to update and then return that value. When not in simulation mode return system epoch time in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">11</a> of file <a class="el" href="streets__clock__singleton_8cpp_source.html">streets_clock_singleton.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   11</span>                                                 {</div>
<div class="line"><span class="lineno">   12</span>        <span class="keyword">auto</span> &amp;inst = <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a>();</div>
<div class="line"><span class="lineno">   13</span>        SPDLOG_TRACE(<span class="stringliteral">&quot;Calling thread is waiting on streets clock initialization.&quot;</span>);</div>
<div class="line"><span class="lineno">   14</span>        inst.wait_for_initialization();</div>
<div class="line"><span class="lineno">   15</span>        SPDLOG_TRACE(<span class="stringliteral">&quot;Thread is released after initialization.&quot;</span>);</div>
<div class="line"><span class="lineno">   16</span>        <span class="keywordflow">return</span> inst.nowInMilliseconds();</div>
<div class="line"><span class="lineno">   17</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sensor__data__sharing__service_8cpp_source.html#l00087">sensor_data_sharing_service::sds_service::consume_detections()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00316">traffic_signal_controller_service::tsc_service::control_tsc_phases()</a>, <a class="el" href="time__change__details_8cpp_source.html#l00101">signal_phase_and_timing::time_change_details::convert_hour_tenth_secs2epoch_ts()</a>, <a class="el" href="intersection__state_8cpp_source.html#l00136">signal_phase_and_timing::intersection_state::convert_min_mills2epoch_ts()</a>, <a class="el" href="time__change__details_8cpp_source.html#l00107">signal_phase_and_timing::time_change_details::convert_msepoch_to_hour_tenth_secs()</a>, <a class="el" href="intersection__state_8cpp_source.html#l00304">signal_phase_and_timing::intersection_state::convert_offset()</a>, <a class="el" href="sensor__data__sharing__service_8cpp_source.html#l00172">sensor_data_sharing_service::sds_service::create_sdsm()</a>, <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00086">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_green()</a>, <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00204">traffic_signal_controller_service::monitor_desired_phase_plan::fix_upcoming_yell_red()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00431">traffic_signal_controller_service::tsc_service::log_spat_latency()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00196">traffic_signal_controller_service::tsc_service::produce_spat_json()</a>, <a class="el" href="monitor__desired__phase__plan_8cpp_source.html#l00232">traffic_signal_controller_service::monitor_desired_phase_plan::prune_expired_greens_from_dpp()</a>, <a class="el" href="intersection__state_8cpp_source.html#l00173">signal_phase_and_timing::intersection_state::set_timestamp_local()</a>, <a class="el" href="intersection__state_8cpp_source.html#l00161">signal_phase_and_timing::intersection_state::set_timestamp_ntcip()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00339">traffic_signal_controller_service::tsc_service::set_tsc_hold_and_omit_forceoff_call()</a>, and <a class="el" href="control__tsc__state_8cpp_source.html#l00012">traffic_signal_controller_service::control_tsc_state::update_tsc_control_queue()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_cgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_cgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_cgraph" id="aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_cgraph">
<area shape="rect" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="5,5,197,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="245,5,448,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_icgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_icgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_icgraph" id="aclassstreets__service_1_1streets__clock__singleton_ace444a4a74b0cea211bf89ed89371bae_icgraph">
<area shape="rect" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1504,677,1696,718"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#ae1c6b5529f6d39f6baebe028179cb3b2" title="Loop to consume detections from kafka detection consumer. Will terminate if kafka consumer is no long..." alt="" coords="1265,5,1413,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="1007,149,1161,205"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a74ace40856526a37410e434bcee7917a" title="Convert current hours of the year and milliseconds of the current hours into epoch timestamp in milli..." alt="" coords="1221,455,1456,511"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a4fde3ad2fb225f963f411ad66e72066f" title="Convert current mimutes of the year and milliseconds of the current minute into epoch timestamp in mi..." alt="" coords="1245,713,1432,769"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="1248,618,1429,689"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a7f3126c08963787918c8d007255b4193" title="Convert time offset (in tenths of seconds) from current time (NTCIP SPaT timing information units) to..." alt="" coords="1255,793,1423,849"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a49b81dd177ed2ea506fac8f3a9a7b273" title="Method to create SDSM from detected objects." alt="" coords="1265,85,1412,141"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#af3aad7133e6da0308277109a8a104ef0" title="Method to represent the upcoming green, when no desired phase plan is present and the TSC is currentl..." alt="" coords="1231,1064,1446,1120"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#ad06fb1cbc4f3de4eda56c3999bd111d9" title="Method to represent yellow change and red clearance when no desired phase plan is present and the TSC..." alt="" coords="1251,874,1427,945"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="1261,360,1416,416"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="1007,229,1161,285"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#a72ddbd7f967b05cf79cf5a19fef28561" title="Method to prune the desired phase plan of any entries for which the end time is less than the current..." alt="" coords="1248,969,1429,1039"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a480dafe7aae5c872f14d1f60c8627636" title="Set timestamp for intersection state based on host machine unix time." alt="" coords="1255,1144,1423,1200"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a5aa5329bedd738f5579cf045975d87a9" title="Set timestamp for intersection state based on NTCIP SPaT UDP message timestamp which is transmitted a..." alt="" coords="1255,1224,1423,1280"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="1222,219,1455,275"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1control__tsc__state.html#acf384a7561b5a9a2a72f4df2f66a630c" title="Method to update the queue of tsc_control." alt="" coords="1249,1304,1429,1360"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a9ee2b8ce146ec179703350d609652785" title="Method to start all threads included in the tsc_service." alt="" coords="766,37,913,93"/>
<area shape="rect" href="sensor__data__sharing__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="535,52,586,79"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="751,197,927,238"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="535,204,586,231"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a37e66edff4920b53af3e3a268186f407" title="Get the epoch timestamp of the max end timestamp." alt="" coords="995,389,1173,445"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#ace57d6d7e92d000560753346277a4e20" title="Get the epoch timestamp of the min end timestamp." alt="" coords="751,487,927,543"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#adeca62d30921732346c615faaf64a9ec" title="Get the epoch timestamp of the next end timestamp" alt="" coords="1000,520,1168,576"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a650a958f01c7a1fd2e845c08e27fb88e" title="Get the epoch timestamp of the start timestamp." alt="" coords="1000,309,1168,365"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="473,584,649,640"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a8bc23ba89dd6c079735485173ba6d6d5" title="Get the epoch timestamp of the intersection state timestamp." alt="" coords="1000,920,1168,976"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2fef256765d3164ba312edf02300b7d9" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="1000,600,1168,656"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="1000,840,1168,896"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#af48143f84b1047346da1d7d571f4511a" title="Set next_time for movement event. Method expects epoch time in milliseconds and converts to tenths of..." alt="" coords="1000,760,1168,816"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="1000,680,1168,736"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e" title="Get predicted next movement event given a current event." alt="" coords="762,640,917,696"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="732,767,947,809"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="437,728,684,784"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,793,389,849"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,713,389,769"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,753,173,809"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a01285f8060241eec1adbaa0c5e97a1df" title="Method to update movement_state with signal_group_id using ntcip spat data." alt="" coords="1000,1000,1168,1056"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#adb8a7d8693ba85ab08f3c0e31afe4935" title="Clears old movement event data for all movement_states. Adds one movement_event to the state_time_spe..." alt="" coords="755,1000,923,1056"/>
<area shape="rect" href="classsensor__data__sharing__service_1_1sds__service.html#a784bcc97ce58546f2d5a172c96ba7e8f" title="Loop to produce sensor data sharing messages from detected_objects. Loop will populate sensor data sh..." alt="" coords="1011,69,1157,125"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html#aa3549e37ef3a3ffe9c0ce7c3c0f24605" title="Update spat movement_event list with desired phase plan information." alt="" coords="996,1081,1172,1151"/>
</map>
</div>

</div>
</div>
<a id="a3817316b869ea2e4e813e1da3a347340" name="a3817316b869ea2e4e813e1da3a347340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3817316b869ea2e4e813e1da3a347340">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_service::streets_clock_singleton::update </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static access to the CarmaClock update method (see <a href="https://github.com/usdot-fhwa-stol/carma-time-lib">https://github.com/usdot-fhwa-stol/carma-time-lib</a>). Updates the current time held by the CarmaClock to the value of the time parameter (in milliseconds). </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_arguement</td><td>if called with CarmaClock not in simulation mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>time to update to in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8cpp_source.html#l00005">5</a> of file <a class="el" href="streets__clock__singleton_8cpp_source.html">streets_clock_singleton.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    5</span>                                                           {</div>
<div class="line"><span class="lineno">    6</span>        <span class="keyword">auto</span> &amp;inst = <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton</a>();</div>
<div class="line"><span class="lineno">    7</span>        inst.update(timestep);</div>
<div class="line"><span class="lineno">    8</span>        SPDLOG_TRACE(<span class="stringliteral">&quot;streets clock is updated to {0}&quot;</span>, timestep);</div>
<div class="line"><span class="lineno">    9</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94">get_singleton()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__service_8cpp_source.html#l00088">streets_service::streets_service::consume_time_sync_message()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_cgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_cgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_cgraph" id="aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_cgraph">
<area shape="rect" title="Static access to the CarmaClock update method (see https://github.com/usdot&#45;fhwa&#45;stol/carma&#45;time&#45;lib)..." alt="" coords="5,5,169,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="217,5,420,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_icgraph.png" border="0" usemap="#aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_icgraph" alt=""/></div>
<map name="aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_icgraph" id="aclassstreets__service_1_1streets__clock__singleton_a3817316b869ea2e4e813e1da3a347340_icgraph">
<area shape="rect" title="Static access to the CarmaClock update method (see https://github.com/usdot&#45;fhwa&#45;stol/carma&#45;time&#45;lib)..." alt="" coords="216,13,380,54"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a504f1c93ede0e4a77bf104f0a13c502f" title="Method to consume continously consume time sync messages from Kafka topic and update streets_clock_si..." alt="" coords="5,5,168,61"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="af9a7fd4fb60a854d24c5ffd1d4ac0141" name="af9a7fd4fb60a854d24c5ffd1d4ac0141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a7fd4fb60a854d24c5ffd1d4ac0141">&#9670;&nbsp;</a></span>streets_singleton&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classstreets__service_1_1streets__singleton.html">streets_singleton</a>&lt; fwha_stol::lib::time::CarmaClock, bool &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="streets__clock__singleton_8h_source.html#l00001">1</a> of file <a class="el" href="streets__clock__singleton_8h_source.html">streets_clock_singleton.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>streets_utils/streets_service_base/include/<a class="el" href="streets__clock__singleton_8h_source.html">streets_clock_singleton.h</a></li>
<li>streets_utils/streets_service_base/src/<a class="el" href="streets__clock__singleton_8cpp_source.html">streets_clock_singleton.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacestreets__service.html">streets_service</a></li><li class="navelem"><a class="el" href="classstreets__service_1_1streets__clock__singleton.html">streets_clock_singleton</a></li>
    <li class="footer">Generated on Wed Aug 21 2024 18:29:55 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
