<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm::collision_detection Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecarma__wm_1_1collision__detection.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">carma_wm::collision_detection Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">MovingObject</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6004c603e70ad2964e784209574662ee"><td class="memItemLeft" align="right" valign="top">typedef boost::geometry::model::point&lt; double, 2, boost::geometry::cs::cartesian &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a></td></tr>
<tr class="separator:a6004c603e70ad2964e784209574662ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3002eac85a8982d9fc6c6e9d16900174"><td class="memItemLeft" align="right" valign="top">typedef boost::geometry::model::polygon&lt; <a class="el" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a3002eac85a8982d9fc6c6e9d16900174">polygon_t</a></td></tr>
<tr class="separator:a3002eac85a8982d9fc6c6e9d16900174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aadabce2a8d7fab3507c4363efe7bed3a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#aadabce2a8d7fab3507c4363efe7bed3a">WorldCollisionDetection</a> (const carma_perception_msgs::msg::RoadwayObstacleList &amp;rwol, const carma_planning_msgs::msg::TrajectoryPlan &amp;tp, const geometry_msgs::msg::Vector3 &amp;size, const geometry_msgs::msg::Twist &amp;velocity)</td></tr>
<tr class="memdesc:aadabce2a8d7fab3507c4363efe7bed3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main collision detection function to be called when needed to check for collision detection of the vehicle with the current trajectory plan and the current world objects.  <a href="namespacecarma__wm_1_1collision__detection.html#aadabce2a8d7fab3507c4363efe7bed3a">More...</a><br /></td></tr>
<tr class="separator:aadabce2a8d7fab3507c4363efe7bed3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6893491eb1249546dee61c0abcddb678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a6893491eb1249546dee61c0abcddb678">ConvertRoadwayObstacleToMovingObject</a> (const carma_perception_msgs::msg::RoadwayObstacle &amp;rwo)</td></tr>
<tr class="memdesc:a6893491eb1249546dee61c0abcddb678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert RodwayObstable object to the <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a>.  <a href="namespacecarma__wm_1_1collision__detection.html#a6893491eb1249546dee61c0abcddb678">More...</a><br /></td></tr>
<tr class="separator:a6893491eb1249546dee61c0abcddb678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b2de50bab5d356ba4e9f0c3f1734742"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a5b2de50bab5d356ba4e9f0c3f1734742">ConvertVehicleToMovingObject</a> (const carma_planning_msgs::msg::TrajectoryPlan &amp;tp, const geometry_msgs::msg::Vector3 &amp;size, const geometry_msgs::msg::Twist &amp;veloctiy)</td></tr>
<tr class="memdesc:a5b2de50bab5d356ba4e9f0c3f1734742"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> for the host vehicle using the veloctiy, size, TrajectoryPlan.  <a href="namespacecarma__wm_1_1collision__detection.html#a5b2de50bab5d356ba4e9f0c3f1734742">More...</a><br /></td></tr>
<tr class="separator:a5b2de50bab5d356ba4e9f0c3f1734742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5a3d3db943a04478fd465cda786fb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8">PredictObjectPosition</a> (<a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;op, __uint64_t target_time)</td></tr>
<tr class="memdesc:a9b5a3d3db943a04478fd465cda786fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">.function is to create a monving object with a polygon that represents area that object is going to allocated until a given time by creating a convex hull around the future polygons  <a href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8">More...</a><br /></td></tr>
<tr class="separator:a9b5a3d3db943a04478fd465cda786fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f119b1433d2e72efa49c08a7abe140d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a8f119b1433d2e72efa49c08a7abe140d">CheckPolygonIntersection</a> (<a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;ob_1, <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;ob_2)</td></tr>
<tr class="memdesc:a8f119b1433d2e72efa49c08a7abe140d"><td class="mdescLeft">&#160;</td><td class="mdescRight">.check Intersection between polygons  <a href="namespacecarma__wm_1_1collision__detection.html#a8f119b1433d2e72efa49c08a7abe140d">More...</a><br /></td></tr>
<tr class="separator:a8f119b1433d2e72efa49c08a7abe140d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a291ab1c292ed67755a59ab02077b5d09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#a291ab1c292ed67755a59ab02077b5d09">DetectCollision</a> (<a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;ob_1, <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;ob_2, __uint64_t target_time)</td></tr>
<tr class="memdesc:a291ab1c292ed67755a59ab02077b5d09"><td class="mdescLeft">&#160;</td><td class="mdescRight">.function is used in WorldCollisionDetection to detection collision between two Moving Object  <a href="namespacecarma__wm_1_1collision__detection.html#a291ab1c292ed67755a59ab02077b5d09">More...</a><br /></td></tr>
<tr class="separator:a291ab1c292ed67755a59ab02077b5d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30d544d29b6fb54721dda21120dfe56"><td class="memTemplParams" colspan="2">template&lt;class P &gt; </td></tr>
<tr class="memitem:ad30d544d29b6fb54721dda21120dfe56"><td class="memTemplItemLeft" align="right" valign="top">P&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1collision__detection.html#ad30d544d29b6fb54721dda21120dfe56">ObjectToBoostPolygon</a> (const geometry_msgs::msg::Pose &amp;pose, const geometry_msgs::msg::Vector3 &amp;size)</td></tr>
<tr class="memdesc:ad30d544d29b6fb54721dda21120dfe56"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to create a polygon representing and object  <a href="namespacecarma__wm_1_1collision__detection.html#ad30d544d29b6fb54721dda21120dfe56">More...</a><br /></td></tr>
<tr class="separator:ad30d544d29b6fb54721dda21120dfe56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a6004c603e70ad2964e784209574662ee" name="a6004c603e70ad2964e784209574662ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6004c603e70ad2964e784209574662ee">&#9670;&nbsp;</a></span>point_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::geometry::model::point&lt;double, 2, boost::geometry::cs::cartesian&gt; <a class="el" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">carma_wm::collision_detection::point_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="collision__detection_8hpp_source.html#l00042">42</a> of file <a class="el" href="collision__detection_8hpp_source.html">collision_detection.hpp</a>.</p>

</div>
</div>
<a id="a3002eac85a8982d9fc6c6e9d16900174" name="a3002eac85a8982d9fc6c6e9d16900174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3002eac85a8982d9fc6c6e9d16900174">&#9670;&nbsp;</a></span>polygon_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::geometry::model::polygon&lt;<a class="el" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a>&gt; <a class="el" href="namespacecarma__wm_1_1collision__detection.html#a3002eac85a8982d9fc6c6e9d16900174">carma_wm::collision_detection::polygon_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="collision__detection_8hpp_source.html#l00043">43</a> of file <a class="el" href="collision__detection_8hpp_source.html">collision_detection.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8f119b1433d2e72efa49c08a7abe140d" name="a8f119b1433d2e72efa49c08a7abe140d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f119b1433d2e72efa49c08a7abe140d">&#9670;&nbsp;</a></span>CheckPolygonIntersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> carma_wm::collision_detection::CheckPolygonIntersection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>ob_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>ob_2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>.check Intersection between polygons </p>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00176">176</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  176</span>                                                                                                                                {    </div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>                std::deque&lt;polygon_t&gt; output;</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>                boost::geometry::intersection(ob_1.object_polygon, ob_2.object_polygon, output); </div>
<div class="line"><span class="lineno">  181</span>                <span class="comment">// std::cout &lt;&lt; boost::geometry::wkt(output) &lt;&lt; std::endl;</span></div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>                <span class="keywordflow">if</span>(output.size() &gt; 0){</div>
<div class="line"><span class="lineno">  184</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  185</span>                }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  188</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="collision__detection_8hpp_source.html#l00047">carma_wm::collision_detection::MovingObject::object_polygon</a>.</p>

<p class="reference">Referenced by <a class="el" href="collision__detection_8cpp_source.html#l00163">DetectCollision()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1collision__detection_a8f119b1433d2e72efa49c08a7abe140d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1collision__detection_a8f119b1433d2e72efa49c08a7abe140d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1collision__detection_a8f119b1433d2e72efa49c08a7abe140d_icgraph" id="anamespacecarma__wm_1_1collision__detection_a8f119b1433d2e72efa49c08a7abe140d_icgraph">
<area shape="rect" title=".check Intersection between polygons" alt="" coords="228,5,467,47"/>
<area shape="rect" href="namespacecarma__wm_1_1collision__detection.html#a291ab1c292ed67755a59ab02077b5d09" title=".function is used in WorldCollisionDetection to detection collision between two Moving Object" alt="" coords="5,5,180,47"/>
</map>
</div>

</div>
</div>
<a id="a6893491eb1249546dee61c0abcddb678" name="a6893491eb1249546dee61c0abcddb678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6893491eb1249546dee61c0abcddb678">&#9670;&nbsp;</a></span>ConvertRoadwayObstacleToMovingObject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> carma_wm::collision_detection::ConvertRoadwayObstacleToMovingObject </td>
          <td>(</td>
          <td class="paramtype">const carma_perception_msgs::msg::RoadwayObstacle &amp;&#160;</td>
          <td class="paramname"><em>rwo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert RodwayObstable object to the <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rwo</td><td>A RoadwayObstacle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00092">92</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   92</span>                                                                                                                                {</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>            <a class="code hl_struct" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> mo;</div>
<div class="line"><span class="lineno">   95</span>            </div>
<div class="line"><span class="lineno">   96</span>            mo.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a832c9bb54668aabc932bc55d3d52f246">object_polygon</a> = ObjectToBoostPolygon&lt;polygon_t&gt;(rwo.object.pose.pose, rwo.object.size);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>            std::tuple &lt;__uint64_t,polygon_t&gt; current_pose(0 , mo.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a832c9bb54668aabc932bc55d3d52f246">object_polygon</a>);</div>
<div class="line"><span class="lineno">   99</span>            mo.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a20f9370d6c38cc1a8990ec4f2f837a9c">fp</a>.push_back(current_pose);</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>            <span class="comment">// Add future polygons for roadway obstacle</span></div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> : rwo.object.predictions){</div>
<div class="line"><span class="lineno">  103</span>                std::tuple &lt;__uint64_t,polygon_t&gt; future_object((<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.header.stamp.sec*1e9 + <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.header.stamp.nanosec) / 1000000, ObjectToBoostPolygon&lt;polygon_t&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.predicted_position, rwo.object.size));</div>
<div class="line"><span class="lineno">  104</span>                </div>
<div class="line"><span class="lineno">  105</span>                mo.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a20f9370d6c38cc1a8990ec4f2f837a9c">fp</a>.push_back(future_object);</div>
<div class="line"><span class="lineno">  106</span>            }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>            mo.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#afd07ee06e65ff1ff402d6407c168a4f4">linear_velocity</a> = rwo.object.velocity.twist.linear;</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">return</span> mo;</div>
<div class="line"><span class="lineno">  111</span>        }</div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1collision__detection_1_1MovingObject_html"><div class="ttname"><a href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">carma_wm::collision_detection::MovingObject</a></div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00046">collision_detection.hpp:46</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1collision__detection_1_1MovingObject_html_a20f9370d6c38cc1a8990ec4f2f837a9c"><div class="ttname"><a href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a20f9370d6c38cc1a8990ec4f2f837a9c">carma_wm::collision_detection::MovingObject::fp</a></div><div class="ttdeci">std::vector&lt; std::tuple&lt; __uint64_t, polygon_t &gt; &gt; fp</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00049">collision_detection.hpp:49</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1collision__detection_1_1MovingObject_html_a832c9bb54668aabc932bc55d3d52f246"><div class="ttname"><a href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a832c9bb54668aabc932bc55d3d52f246">carma_wm::collision_detection::MovingObject::object_polygon</a></div><div class="ttdeci">polygon_t object_polygon</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00047">collision_detection.hpp:47</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1collision__detection_1_1MovingObject_html_afd07ee06e65ff1ff402d6407c168a4f4"><div class="ttname"><a href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#afd07ee06e65ff1ff402d6407c168a4f4">carma_wm::collision_detection::MovingObject::linear_velocity</a></div><div class="ttdeci">geometry_msgs::msg::Vector3 linear_velocity</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00048">collision_detection.hpp:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="collision__detection_8hpp_source.html#l00049">carma_wm::collision_detection::MovingObject::fp</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="collision__detection_8hpp_source.html#l00048">carma_wm::collision_detection::MovingObject::linear_velocity</a>, and <a class="el" href="collision__detection_8hpp_source.html#l00047">carma_wm::collision_detection::MovingObject::object_polygon</a>.</p>

</div>
</div>
<a id="a5b2de50bab5d356ba4e9f0c3f1734742" name="a5b2de50bab5d356ba4e9f0c3f1734742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b2de50bab5d356ba4e9f0c3f1734742">&#9670;&nbsp;</a></span>ConvertVehicleToMovingObject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> carma_wm::collision_detection::ConvertVehicleToMovingObject </td>
          <td>(</td>
          <td class="paramtype">const carma_planning_msgs::msg::TrajectoryPlan &amp;&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Vector3 &amp;&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Twist &amp;&#160;</td>
          <td class="paramname"><em>veloctiy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> for the host vehicle using the veloctiy, size, TrajectoryPlan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The TrajectoryPlan of the host vehicle </td></tr>
    <tr><td class="paramname">size</td><td>The size of the host vehicle defined in meters </td></tr>
    <tr><td class="paramname">veloctiy</td><td>of the host vehicle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00113">113</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>                                                                                                                                                                                                {</div>
<div class="line"><span class="lineno">  114</span>            </div>
<div class="line"><span class="lineno">  115</span>            <a class="code hl_struct" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> v;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>            geometry_msgs::msg::Pose pose;</div>
<div class="line"><span class="lineno">  118</span>            pose.position.x = tp.trajectory_points[0].x;</div>
<div class="line"><span class="lineno">  119</span>            pose.position.y = tp.trajectory_points[0].y;</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>            Eigen::Vector2d vehicle_vector = {tp.trajectory_points[1].x - tp.trajectory_points[0].x , tp.trajectory_points[1].y - tp.trajectory_points[0].y};</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>            Eigen::Vector2d x_axis = {1, 0};</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordtype">double</span> yaw = std::acos(vehicle_vector.dot(x_axis)/(vehicle_vector.norm() * x_axis.norm()));</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>            tf2::Quaternion vehicle_orientation;</div>
<div class="line"><span class="lineno">  128</span>            vehicle_orientation.setRPY(0, 0, yaw);</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>            pose.orientation.x = vehicle_orientation.getX();</div>
<div class="line"><span class="lineno">  131</span>            pose.orientation.y = vehicle_orientation.getY();</div>
<div class="line"><span class="lineno">  132</span>            pose.orientation.z = vehicle_orientation.getZ();</div>
<div class="line"><span class="lineno">  133</span>            pose.orientation.w = vehicle_orientation.getW();</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>            v.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a832c9bb54668aabc932bc55d3d52f246">object_polygon</a> = ObjectToBoostPolygon&lt;polygon_t&gt;(pose, size);</div>
<div class="line"><span class="lineno">  136</span>            v.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#afd07ee06e65ff1ff402d6407c168a4f4">linear_velocity</a> = velocity.linear;</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>            <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>=1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; tp.trajectory_points.size() - 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++){</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>                vehicle_vector = {tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1].x - tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].x , tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>+1].y - tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].y};</div>
<div class="line"><span class="lineno">  141</span>                yaw = std::acos(vehicle_vector.dot(x_axis)/(vehicle_vector.norm() * x_axis.norm()));</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>                tf2::Quaternion orientation;</div>
<div class="line"><span class="lineno">  144</span>                orientation.setRPY(0, 0, yaw);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>                geometry_msgs::msg::Pose trajectory_pose;</div>
<div class="line"><span class="lineno">  147</span>                trajectory_pose.position.x = tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].x;</div>
<div class="line"><span class="lineno">  148</span>                trajectory_pose.position.y = tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].y;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>                trajectory_pose.orientation.x = orientation.getX();</div>
<div class="line"><span class="lineno">  151</span>                trajectory_pose.orientation.y = orientation.getY();</div>
<div class="line"><span class="lineno">  152</span>                trajectory_pose.orientation.z = orientation.getZ();</div>
<div class="line"><span class="lineno">  153</span>                trajectory_pose.orientation.w = orientation.getW();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>                std::tuple &lt;__uint64_t,polygon_t&gt; future_object((tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].target_time.sec*1e9 + tp.trajectory_points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].target_time.nanosec),ObjectToBoostPolygon&lt;polygon_t&gt;(trajectory_pose, size));</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>                v.<a class="code hl_variable" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html#a20f9370d6c38cc1a8990ec4f2f837a9c">fp</a>.push_back(future_object);</div>
<div class="line"><span class="lineno">  158</span>            }</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>            <span class="keywordflow">return</span> v;</div>
<div class="line"><span class="lineno">  161</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="collision__detection_8hpp_source.html#l00049">carma_wm::collision_detection::MovingObject::fp</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="collision__detection_8hpp_source.html#l00048">carma_wm::collision_detection::MovingObject::linear_velocity</a>, and <a class="el" href="collision__detection_8hpp_source.html#l00047">carma_wm::collision_detection::MovingObject::object_polygon</a>.</p>

</div>
</div>
<a id="a291ab1c292ed67755a59ab02077b5d09" name="a291ab1c292ed67755a59ab02077b5d09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a291ab1c292ed67755a59ab02077b5d09">&#9670;&nbsp;</a></span>DetectCollision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> carma_wm::collision_detection::DetectCollision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>ob_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>ob_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__uint64_t&#160;</td>
          <td class="paramname"><em>target_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>.function is used in WorldCollisionDetection to detection collision between two Moving Object </p>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00163">163</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>                                                                                                                                               {            </div>
<div class="line"><span class="lineno">  164</span>            </div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_struct" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> ob_1_after = <a class="code hl_function" href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8">PredictObjectPosition</a>(ob_1,target_time);</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_struct" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> ob_2_after = <a class="code hl_function" href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8">PredictObjectPosition</a>(ob_2,target_time);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="namespacecarma__wm_1_1collision__detection.html#a8f119b1433d2e72efa49c08a7abe140d">CheckPolygonIntersection</a>(ob_1_after, ob_2_after)){</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  171</span>            }</div>
<div class="line"><span class="lineno">  172</span>            </div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  174</span>        }</div>
<div class="ttc" id="anamespacecarma__wm_1_1collision__detection_html_a8f119b1433d2e72efa49c08a7abe140d"><div class="ttname"><a href="namespacecarma__wm_1_1collision__detection.html#a8f119b1433d2e72efa49c08a7abe140d">carma_wm::collision_detection::CheckPolygonIntersection</a></div><div class="ttdeci">bool CheckPolygonIntersection(collision_detection::MovingObject const &amp;ob_1, collision_detection::MovingObject const &amp;ob_2)</div><div class="ttdoc">.check Intersection between polygons</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8cpp_source.html#l00176">collision_detection.cpp:176</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1collision__detection_html_a9b5a3d3db943a04478fd465cda786fb8"><div class="ttname"><a href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8">carma_wm::collision_detection::PredictObjectPosition</a></div><div class="ttdeci">collision_detection::MovingObject PredictObjectPosition(collision_detection::MovingObject const &amp;op, __uint64_t target_time)</div><div class="ttdoc">.function is to create a monving object with a polygon that represents area that object is going to a...</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8cpp_source.html#l00190">collision_detection.cpp:190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="collision__detection_8cpp_source.html#l00176">CheckPolygonIntersection()</a>, and <a class="el" href="collision__detection_8cpp_source.html#l00190">PredictObjectPosition()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1collision__detection_a291ab1c292ed67755a59ab02077b5d09_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1collision__detection_a291ab1c292ed67755a59ab02077b5d09_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1collision__detection_a291ab1c292ed67755a59ab02077b5d09_cgraph" id="anamespacecarma__wm_1_1collision__detection_a291ab1c292ed67755a59ab02077b5d09_cgraph">
<area shape="rect" title=".function is used in WorldCollisionDetection to detection collision between two Moving Object" alt="" coords="5,39,180,80"/>
<area shape="rect" href="namespacecarma__wm_1_1collision__detection.html#a8f119b1433d2e72efa49c08a7abe140d" title=".check Intersection between polygons" alt="" coords="228,5,467,47"/>
<area shape="rect" href="namespacecarma__wm_1_1collision__detection.html#a9b5a3d3db943a04478fd465cda786fb8" title=".function is to create a monving object with a polygon that represents area that object is going to a..." alt="" coords="240,71,455,112"/>
</map>
</div>

</div>
</div>
<a id="ad30d544d29b6fb54721dda21120dfe56" name="ad30d544d29b6fb54721dda21120dfe56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30d544d29b6fb54721dda21120dfe56">&#9670;&nbsp;</a></span>ObjectToBoostPolygon()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class P &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">P carma_wm::collision_detection::ObjectToBoostPolygon </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::Pose &amp;&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Vector3 &amp;&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to create a polygon representing and object </p>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00221">221</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  221</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>            tf2::Transform object_tf;</div>
<div class="line"><span class="lineno">  224</span>            tf2::fromMsg(pose, object_tf);</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordtype">double</span> half_x_bound = size.x / 2;</div>
<div class="line"><span class="lineno">  227</span>            <span class="keywordtype">double</span> half_y_bound = size.y / 2;</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>            <span class="comment">// 4 corners of the object starting with upper left and moving in clockwise direction in pose frame</span></div>
<div class="line"><span class="lineno">  230</span>            tf2::Vector3 obj_p1(half_x_bound, half_y_bound, 0);</div>
<div class="line"><span class="lineno">  231</span>            tf2::Vector3 obj_p2(half_x_bound, -half_y_bound, 0);</div>
<div class="line"><span class="lineno">  232</span>            tf2::Vector3 obj_p3(-half_x_bound, -half_y_bound, 0);</div>
<div class="line"><span class="lineno">  233</span>            tf2::Vector3 obj_p4(-half_x_bound, half_y_bound, 0);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            tf2::Vector3 obj_p1_map = object_tf * obj_p1;</div>
<div class="line"><span class="lineno">  236</span>            tf2::Vector3 obj_p2_map = object_tf * obj_p2;</div>
<div class="line"><span class="lineno">  237</span>            tf2::Vector3 obj_p3_map = object_tf * obj_p3;</div>
<div class="line"><span class="lineno">  238</span>            tf2::Vector3 obj_p4_map = object_tf * obj_p4;</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a> p1(obj_p1_map.getX(), obj_p1_map.getY());</div>
<div class="line"><span class="lineno">  241</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a> p2(obj_p2_map.getX(), obj_p2_map.getY());</div>
<div class="line"><span class="lineno">  242</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a> p3(obj_p3_map.getX(), obj_p3_map.getY());</div>
<div class="line"><span class="lineno">  243</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">point_t</a> p4(obj_p4_map.getX(), obj_p4_map.getY());</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>            P p;</div>
<div class="line"><span class="lineno">  246</span>            p.outer().push_back(p1);</div>
<div class="line"><span class="lineno">  247</span>            p.outer().push_back(p2);</div>
<div class="line"><span class="lineno">  248</span>            p.outer().push_back(p3);</div>
<div class="line"><span class="lineno">  249</span>            p.outer().push_back(p4);</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="ttc" id="anamespacecarma__wm_1_1collision__detection_html_a6004c603e70ad2964e784209574662ee"><div class="ttname"><a href="namespacecarma__wm_1_1collision__detection.html#a6004c603e70ad2964e784209574662ee">carma_wm::collision_detection::point_t</a></div><div class="ttdeci">boost::geometry::model::point&lt; double, 2, boost::geometry::cs::cartesian &gt; point_t</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00042">collision_detection.hpp:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b5a3d3db943a04478fd465cda786fb8" name="a9b5a3d3db943a04478fd465cda786fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5a3d3db943a04478fd465cda786fb8">&#9670;&nbsp;</a></span>PredictObjectPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> carma_wm::collision_detection::PredictObjectPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">collision_detection::MovingObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__uint64_t&#160;</td>
          <td class="paramname"><em>target_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>.function is to create a monving object with a polygon that represents area that object is going to allocated until a given time by creating a convex hull around the future polygons </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>a <a class="el" href="structcarma__wm_1_1collision__detection_1_1MovingObject.html">MovingObject</a> TODO this function can be optimize due the fact that in large target_time returning the entire volum for path will result in false positive. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00190">190</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                                                                                                               {</div>
<div class="line"><span class="lineno">  191</span>            </div>
<div class="line"><span class="lineno">  192</span>            <span class="keywordtype">int</span> union_polygon_size = 0;</div>
<div class="line"><span class="lineno">  193</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> : op.fp){</div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordflow">if</span>( std::get&lt;0&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>) &lt;= target_time) {</div>
<div class="line"><span class="lineno">  195</span>                    union_polygon_size = union_polygon_size + std::get&lt;1&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>).outer().size();</div>
<div class="line"><span class="lineno">  196</span>                }</div>
<div class="line"><span class="lineno">  197</span>            }</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>            std::vector&lt;point_t&gt; union_future_polygon_points;</div>
<div class="line"><span class="lineno">  200</span>            union_future_polygon_points.reserve(union_polygon_size);</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> : op.fp){</div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">if</span>( std::get&lt;0&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>) &lt;= target_time) {</div>
<div class="line"><span class="lineno">  204</span>                    union_future_polygon_points.insert( union_future_polygon_points.end(), std::get&lt;1&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>).outer().begin(), std::get&lt;1&gt;(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>).outer().end());</div>
<div class="line"><span class="lineno">  205</span>                }</div>
<div class="line"><span class="lineno">  206</span>            }</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a3002eac85a8982d9fc6c6e9d16900174">polygon_t</a> union_polygon;  </div>
<div class="line"><span class="lineno">  209</span>            boost::geometry::assign_points(union_polygon, union_future_polygon_points);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_typedef" href="namespacecarma__wm_1_1collision__detection.html#a3002eac85a8982d9fc6c6e9d16900174">polygon_t</a> hull_polygon;</div>
<div class="line"><span class="lineno">  212</span>            boost::geometry::convex_hull(union_polygon, hull_polygon);</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>            std::vector&lt;std::tuple &lt;__uint64_t, collision_detection::polygon_t&gt;&gt; no_future;</div>
<div class="line"><span class="lineno">  215</span>            collision_detection::MovingObject output_object = {hull_polygon, op.linear_velocity, no_future};</div>
<div class="line"><span class="lineno">  216</span>            </div>
<div class="line"><span class="lineno">  217</span>            <span class="keywordflow">return</span> output_object;</div>
<div class="line"><span class="lineno">  218</span>        }</div>
<div class="ttc" id="anamespacecarma__wm_1_1collision__detection_html_a3002eac85a8982d9fc6c6e9d16900174"><div class="ttname"><a href="namespacecarma__wm_1_1collision__detection.html#a3002eac85a8982d9fc6c6e9d16900174">carma_wm::collision_detection::polygon_t</a></div><div class="ttdeci">boost::geometry::model::polygon&lt; point_t &gt; polygon_t</div><div class="ttdef"><b>Definition:</b> <a href="collision__detection_8hpp_source.html#l00043">collision_detection.hpp:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="collision__detection_8hpp_source.html#l00049">carma_wm::collision_detection::MovingObject::fp</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, and <a class="el" href="collision__detection_8hpp_source.html#l00048">carma_wm::collision_detection::MovingObject::linear_velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="collision__detection_8cpp_source.html#l00163">DetectCollision()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1collision__detection_a9b5a3d3db943a04478fd465cda786fb8_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1collision__detection_a9b5a3d3db943a04478fd465cda786fb8_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1collision__detection_a9b5a3d3db943a04478fd465cda786fb8_icgraph" id="anamespacecarma__wm_1_1collision__detection_a9b5a3d3db943a04478fd465cda786fb8_icgraph">
<area shape="rect" title=".function is to create a monving object with a polygon that represents area that object is going to a..." alt="" coords="228,5,443,47"/>
<area shape="rect" href="namespacecarma__wm_1_1collision__detection.html#a291ab1c292ed67755a59ab02077b5d09" title=".function is used in WorldCollisionDetection to detection collision between two Moving Object" alt="" coords="5,5,180,47"/>
</map>
</div>

</div>
</div>
<a id="aadabce2a8d7fab3507c4363efe7bed3a" name="aadabce2a8d7fab3507c4363efe7bed3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadabce2a8d7fab3507c4363efe7bed3a">&#9670;&nbsp;</a></span>WorldCollisionDetection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; carma_wm::collision_detection::WorldCollisionDetection </td>
          <td>(</td>
          <td class="paramtype">const carma_perception_msgs::msg::RoadwayObstacleList &amp;&#160;</td>
          <td class="paramname"><em>rwol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const carma_planning_msgs::msg::TrajectoryPlan &amp;&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Vector3 &amp;&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Twist &amp;&#160;</td>
          <td class="paramname"><em>velocity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main collision detection function to be called when needed to check for collision detection of the vehicle with the current trajectory plan and the current world objects. </p>
<p >Main Function for the CollisionChecking interfacing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The size of the host vehicle defined in meters </td></tr>
    <tr><td class="paramname">rwol</td><td>The list of Roadway Obstacle </td></tr>
    <tr><td class="paramname">tp</td><td>The TrajectoryPlan of the host vehicle </td></tr>
    <tr><td class="paramname">size</td><td>The size of the host vehicle defined in meters </td></tr>
    <tr><td class="paramname">velocity</td><td>of the host vehicle m/s </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of obstacles the provided trajectory plan collides with </dd></dl>

<p class="definition">Definition at line <a class="el" href="collision__detection_8cpp_source.html#l00026">26</a> of file <a class="el" href="collision__detection_8cpp_source.html">collision_detection.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                                                                                                                                                    {</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;WorldCollisionDetection&quot;</span>);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>            std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; rwo_collison;</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> : rwol.roadway_obstacles) {</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.predictions) {</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>                    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> k=0; k &lt; tp.trajectory_points.size(); k++) {</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;in for loop&quot;</span>);</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>                        <span class="keywordtype">double</span> distancex = (tp.trajectory_points[k].x - j.predicted_position.position.x)*(tp.trajectory_points[k].x - j.predicted_position.position.x);</div>
<div class="line"><span class="lineno">   44</span>                        <span class="keywordtype">double</span> distancey = (tp.trajectory_points[k].y - j.predicted_position.position.y)*(tp.trajectory_points[k].y - j.predicted_position.position.y);</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;tp.trajectory_points[k].x&quot;</span>);</div>
<div class="line"><span class="lineno">   47</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), tp.trajectory_points[k].x);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;j.predicted_position.position.x&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), j.predicted_position.position.x);</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;tp.trajectory_points[k].y&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), tp.trajectory_points[k].y);</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), <span class="stringliteral">&quot;j.predicted_position.position.y&quot;</span>);</div>
<div class="line"><span class="lineno">   56</span>                        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::collision_detection&quot;</span>), j.predicted_position.position.y);</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>                        <span class="keywordtype">double</span> calcdistance = sqrt(abs(distancex + distancey));</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>                        rclcpp::Duration diff= rclcpp::Time(j.header.stamp) - rclcpp::Time(tp.trajectory_points[k].target_time);</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>                        <span class="keywordtype">double</span> timediff = diff.seconds();</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>                        <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.size.x - size.x)*(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.size.x - size.x);</div>
<div class="line"><span class="lineno">   66</span>                        <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> = (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.size.y - size.y)*(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.size.y - size.y);</div>
<div class="line"><span class="lineno">   67</span>                        </div>
<div class="line"><span class="lineno">   68</span>                        <span class="keywordtype">double</span> car_t_x = tp.trajectory_points[k].x - tp.trajectory_points[0].x / velocity.linear.x;</div>
<div class="line"><span class="lineno">   69</span>                        <span class="comment">// double car_t_y = tp.trajectory_points[k].y - tp.trajectory_points[0].y/velocity.linear.y;</span></div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>                        <span class="keywordtype">double</span> object_t_x = j.predicted_position.position.x - <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.predictions[0].predicted_position.position.x / <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.object.velocity.twist.linear.x;</div>
<div class="line"><span class="lineno">   72</span>                        <span class="comment">// double object_t_y = j.predicted_position.position.y - i.object.predictions[0].predicted_position.position.y / j.predicted_velocity.linear.y;</span></div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>                        <span class="keywordflow">if</span>(timediff &lt;= 5) {</div>
<div class="line"><span class="lineno">   76</span>                            <span class="keywordflow">if</span>(calcdistance &lt;= sqrt(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>) ) {</div>
<div class="line"><span class="lineno">   77</span>                                rwo_collison.push_back(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>);</div>
<div class="line"><span class="lineno">   78</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   79</span>                            }</div>
<div class="line"><span class="lineno">   80</span>                        }</div>
<div class="line"><span class="lineno">   81</span>                    }</div>
<div class="line"><span class="lineno">   82</span>                }</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>            }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">return</span> rwo_collison;</div>
<div class="line"><span class="lineno">   90</span>        }</div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_a05bdb238bfbf3836fb0aa69c5aa1bb48"><div class="ttname"><a href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">process_traj_logs.y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00129">process_traj_logs.py:129</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_af3ba6144a2d35a4990f1a8d04632a052"><div class="ttname"><a href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">process_traj_logs.x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00128">process_traj_logs.py:128</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="process__traj__logs_8py_source.html#l00128">process_traj_logs::x</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00129">process_traj_logs::y</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecarma__wm.html">carma_wm</a></li><li class="navelem"><a class="el" href="namespacecarma__wm_1_1collision__detection.html">collision_detection</a></li>
    <li class="footer">Generated on Thu Nov 9 2023 16:28:48 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
