<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm_ros2/include/carma_wm_ros2/WMTestLibForGuidance.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('WMTestLibForGuidance_8hpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">WMTestLibForGuidance.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="WMTestLibForGuidance_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">/*</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> * Copyright (C) 2020-2021 LEIDOS.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> *</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * use this file except in compliance with the License. You may obtain a copy of</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> * the License at</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> *</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> *</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> * License for the specific language governing permissions and limitations under</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> * the License.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment"> */</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;gtest/gtest.h&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="CARMAWorldModel_8hpp.html">carma_wm_ros2/CARMAWorldModel.hpp</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;lanelet2_core/geometry/LineString.h&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;lanelet2_traffic_rules/TrafficRulesFactory.h&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;lanelet2_core/Attribute.h&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;carma_perception_msgs/msg/roadway_obstacle.hpp&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;carma_perception_msgs/msg/predicted_state.hpp&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;carma_perception_msgs/msg/connected_vehicle_type.hpp&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;boost/geometry.hpp&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;boost/geometry/geometries/polygon.hpp&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;tf2/LinearMath/Transform.h&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;lanelet2_core/geometry/Polygon.h&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;lanelet2_extension/regulatory_elements/DigitalSpeedLimit.h&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;<a class="code" href="Geometry_8hpp.html">carma_wm_ros2/Geometry.hpp</a>&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;<a class="code" href="MapConformer_8hpp.html">carma_wm_ros2/MapConformer.hpp</a>&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;rclcpp/rclcpp.hpp&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;lanelet2_extension/regulatory_elements/CarmaTrafficSignal.h&gt;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacecarma__wm.html">carma_wm</a></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>{</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="keyword">namespace </span>test</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>{</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="keyword">using namespace </span>lanelet::units::literals;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment">/*</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment"> * Class which is passed into getGuidanceTestMap to configure</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment"> */</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="keyword">struct </span>MapOptions</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>{</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80">   67</a></span>  <span class="keyword">enum class</span> <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80">Obstacle</a> {DEFAULT, NONE};</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188">   68</a></span>  <span class="keyword">enum class</span> <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188">SpeedLimit</a> {DEFAULT, NONE};</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="structcarma__wm_1_1test_1_1MapOptions.html#a986ebde9babc5af3428825e4336aebc4">   69</a></span>  <a class="code hl_function" href="structcarma__wm_1_1test_1_1MapOptions.html#a986ebde9babc5af3428825e4336aebc4">MapOptions</a>(<span class="keywordtype">double</span> lane_width = 3.7, <span class="keywordtype">double</span> lane_length = 25, <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80">Obstacle</a> obstacle =  <a class="code hl_enumvalue" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80a5b39c8b553c821e7cddc6da64b5bd2ee">Obstacle::DEFAULT</a>, <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188">SpeedLimit</a> speed_limit = <a class="code hl_enumvalue" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188a5b39c8b553c821e7cddc6da64b5bd2ee">SpeedLimit::DEFAULT</a>, <span class="keywordtype">int</span> seg_num = 1): </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>                            <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#aa0a3cf861145d946aab0e97faa97b9e2">lane_width_</a>(lane_width), <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a33c40c98d6795b45a6494ccfa79884bb">lane_length_</a>(lane_length), <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a7d9480e4dc456b7d90bc690218c8c689">obstacle_</a>(obstacle), <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a56023dab65434d5e5bb26f0552488290">speed_limit_</a>(speed_limit), <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a816db21005734b8b3ceee1e6f9a8d209">seg_num_</a>(seg_num){}</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  <span class="keywordtype">double</span> <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#aa0a3cf861145d946aab0e97faa97b9e2">lane_width_</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  <span class="keywordtype">double</span> <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a33c40c98d6795b45a6494ccfa79884bb">lane_length_</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80">Obstacle</a> <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a7d9480e4dc456b7d90bc690218c8c689">obstacle_</a> ;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  <a class="code hl_enumeration" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188">SpeedLimit</a> <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a56023dab65434d5e5bb26f0552488290">speed_limit_</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structcarma__wm_1_1test_1_1MapOptions.html#a816db21005734b8b3ceee1e6f9a8d209">seg_num_</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>};</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="keyword">inline</span> lanelet::Point3d <a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">getPoint</a>(<span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>, <span class="keywordtype">double</span> z)</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>{</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="keywordflow">return</span> lanelet::Point3d(lanelet::utils::getId(), <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>, z);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>}</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="keyword">inline</span> lanelet::BasicPoint2d <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a89de5fe0d1d1bc18c2e8bc13824b3ebc">getBasicPoint</a>(<span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>)</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>{</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <span class="keywordflow">return</span> lanelet::utils::to2D(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">getPoint</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>, 0.0)).basicPoint();</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>}</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">inline</span> lanelet::Lanelet <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(lanelet::LineString3d&amp; left_ls, lanelet::LineString3d&amp; right_ls,</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; left_sub_type = lanelet::AttributeValueString::SolidSolid,</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; right_sub_type = lanelet::AttributeValueString::Solid)</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>{</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  left_ls.attributes()[<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">lanelet::AttributeName::Type</a>] = lanelet::AttributeValueString::LineThin;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  left_ls.attributes()[lanelet::AttributeName::Subtype] = left_sub_type;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  right_ls.attributes()[<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">lanelet::AttributeName::Type</a>] = lanelet::AttributeValueString::LineThin;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  right_ls.attributes()[lanelet::AttributeName::Subtype] = right_sub_type;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  lanelet::Lanelet ll;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  ll.setId(lanelet::utils::getId());</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  ll.setLeftBound(left_ls);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  ll.setRightBound(right_ls);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  ll.attributes()[<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">lanelet::AttributeName::Type</a>] = lanelet::AttributeValueString::Lanelet;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  ll.attributes()[lanelet::AttributeName::Subtype] = lanelet::AttributeValueString::Road;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  ll.attributes()[lanelet::AttributeName::Location] = lanelet::AttributeValueString::Urban;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  ll.attributes()[lanelet::AttributeName::OneWay] = <span class="stringliteral">&quot;yes&quot;</span>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  ll.attributes()[lanelet::AttributeName::Dynamic] = <span class="stringliteral">&quot;no&quot;</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="keywordflow">return</span> ll;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>}</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="keyword">inline</span> lanelet::Lanelet <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(std::vector&lt;lanelet::Point3d&gt; left, std::vector&lt;lanelet::Point3d&gt; right,</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; left_sub_type = lanelet::AttributeValueString::SolidSolid,</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; right_sub_type = lanelet::AttributeValueString::Solid)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  lanelet::LineString3d left_ls(lanelet::utils::getId(), left);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  lanelet::LineString3d right_ls(lanelet::utils::getId(), right);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(left_ls, right_ls, left_sub_type, right_sub_type);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>}</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="keyword">inline</span> lanelet::Lanelet <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(lanelet::Id <span class="keywordtype">id</span>, lanelet::LineString3d left_ls, lanelet::LineString3d right_ls,</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; left_sub_type = lanelet::AttributeValueString::SolidSolid,</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; right_sub_type = lanelet::AttributeValueString::Solid)</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>{</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  <span class="keyword">auto</span> ll = <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(left_ls, right_ls, left_sub_type, right_sub_type);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  ll.setId(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="keywordflow">return</span> ll;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>}</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="keyword">inline</span> lanelet::Lanelet <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(lanelet::Id <span class="keywordtype">id</span>, std::vector&lt;lanelet::Point3d&gt; left, std::vector&lt;lanelet::Point3d&gt; right,</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; left_sub_type = lanelet::AttributeValueString::SolidSolid,</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                                   <span class="keyword">const</span> lanelet::Attribute&amp; right_sub_type = lanelet::AttributeValueString::Solid)</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>{</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  <span class="keyword">auto</span> ll = <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(left, right, left_sub_type, right_sub_type);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  ll.setId(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  <span class="keywordflow">return</span> ll;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>}</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="keyword">inline</span> lanelet::LaneletMapPtr <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a89c0e3bfedd0bf9719127896b3fcb06c">buildGuidanceTestMap</a>(<span class="keywordtype">double</span> width, <span class="keywordtype">double</span> length, <span class="keywordtype">int</span> num = 1)</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>{</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  std::vector&lt;lanelet::Lanelet&gt; all_lanelets;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="keywordtype">double</span> step_length = length / num;  <span class="comment">// 26 points in one lanelet&#39;s lanelent</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  std::vector&lt;lanelet::Point3d&gt; pts0;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  std::vector&lt;lanelet::Point3d&gt; pts1;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  std::vector&lt;lanelet::Point3d&gt; pts2;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  std::vector&lt;lanelet::Point3d&gt; pts3;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; num * 4 + 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++)</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    pts0.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">carma_wm::test::getPoint</a>(0.0, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> * step_length, 0));</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  } </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; num * 4 + 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    pts1.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">carma_wm::test::getPoint</a>(1 * width, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> * step_length, 0));</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  } </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; num * 4 + 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++)</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    pts2.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">carma_wm::test::getPoint</a>(2 * width, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> * step_length, 0));</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  } </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; num * 4 + 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++)</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  {</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    pts3.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">carma_wm::test::getPoint</a>(3 * width, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> * step_length, 0));</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  } </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>  lanelet::LineString3d ls00(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts0.begin(), pts0.begin() + num + 1));</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  lanelet::LineString3d ls01(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts0.begin() + num, pts0.begin() + 2 * num + 1));</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  lanelet::LineString3d ls02(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts0.begin() + 2 * num, pts0.begin() + 3 * num + 1)) ;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  lanelet::LineString3d ls03(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts0.begin() + 3 * num, pts0.begin() + 4 * num + 1));</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  lanelet::LineString3d ls10(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts1.begin(), pts1.begin() + num + 1));</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  lanelet::LineString3d ls11(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts1.begin() + num, pts1.begin() + 2 * num + 1));</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  lanelet::LineString3d ls12(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts1.begin() + 2 * num, pts1.begin() + 3 * num + 1));</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  lanelet::LineString3d ls13(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts1.begin() + 3 * num, pts1.begin() + 4 * num + 1));</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  lanelet::LineString3d ls20(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts2.begin(), pts2.begin() + num + 1));</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  lanelet::LineString3d ls21(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts2.begin() + num, pts2.begin() + 2 * num + 1));</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  lanelet::LineString3d ls22(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts2.begin() + 2 * num, pts2.begin() + 3 * num + 1));</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  lanelet::LineString3d ls23(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts2.begin() + 3 * num, pts2.begin() + 4 * num + 1));</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  lanelet::LineString3d ls30(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts3.begin(), pts3.begin() + num + 1));</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  lanelet::LineString3d ls31(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts3.begin() + num, pts3.begin() + 2 * num + 1));</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  lanelet::LineString3d ls32(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts3.begin() + 2 * num, pts3.begin() + 3 * num + 1));</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  lanelet::LineString3d ls33(lanelet::utils::getId(), std::vector&lt;lanelet::Point3d&gt;(pts3.begin() + 3 * num, pts3.begin() + 4 * num + 1));</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1200, ls00,ls10,lanelet::AttributeValueString::Solid, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1201, ls01,ls11,lanelet::AttributeValueString::Solid, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1202, ls02,ls12,lanelet::AttributeValueString::Solid, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1203, ls03,ls13,lanelet::AttributeValueString::Solid, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1210, ls10,ls20,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1211, ls11,ls21,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1212, ls12,ls22,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1213, ls13,ls23,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Dashed));</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1220, ls20,ls30,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Solid));</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1221, ls21,ls31,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Solid));</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1222, ls22,ls32,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Solid));</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  all_lanelets.push_back(<a class="code hl_function" href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">getLanelet</a>(1223, ls23,ls33,lanelet::AttributeValueString::Dashed, lanelet::AttributeValueString::Solid));</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  <span class="comment">// Create basic map and verify that the map and routing graph can be build, but the route remains false   </span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  lanelet::LaneletMapPtr map = lanelet::utils::createMap(all_lanelets, {});</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <span class="keyword">using namespace </span>lanelet::units::literals;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  <a class="code hl_function" href="namespacelanelet_1_1MapConformer.html#a20caaf0f529166126f0f4ea4d80f80d0">lanelet::MapConformer::ensureCompliance</a>(map, 0_mph);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  <span class="keywordflow">return</span> map;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>}</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a79f776b2b6517beadc6559018bbaaef7">addObstacle</a>(<span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>, std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw, std::vector&lt;std::pair&lt;double,double&gt;&gt; pred_coords = {}, </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="keywordtype">int</span> time_step = 100, <span class="keywordtype">double</span> width = 3, <span class="keywordtype">double</span> length = 3)</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>{</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    carma_perception_msgs::msg::RoadwayObstacle rwo;    </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    tf2::Quaternion tf_orientation; </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    tf_orientation.setRPY(0, 0, 1.5708); <span class="comment">// 90 deg</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    rwo.object.pose.pose.position.x = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>;    </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    rwo.object.pose.pose.position.y = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>;    </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    rwo.object.pose.pose.position.z = 0;    </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    rwo.object.pose.pose.orientation.x = tf_orientation.getX(); </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    rwo.object.pose.pose.orientation.y = tf_orientation.getY(); </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    rwo.object.pose.pose.orientation.z = tf_orientation.getZ(); </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    rwo.object.pose.pose.orientation.w = tf_orientation.getW(); </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    rwo.object.size.x = width;  </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    rwo.object.size.y = length; </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    rwo.object.size.z = 1;  </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordtype">int</span> time_stamp = 0;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    std::vector&lt;carma_perception_msgs::msg::PredictedState&gt; pred_states;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> pred : pred_coords)</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        carma_perception_msgs::msg::PredictedState ps;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        time_stamp += (time_step * 1e6);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        ps.header.stamp.nanosec = time_stamp;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        ps.predicted_position.position.x = pred.first;  </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        ps.predicted_position.position.y = pred.second; </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        ps.predicted_position.position.z = 0;   </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        ps.predicted_position.orientation.x = tf_orientation.getX();    </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        ps.predicted_position.orientation.y = tf_orientation.getY();    </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        ps.predicted_position.orientation.z = tf_orientation.getZ();    </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        ps.predicted_position.orientation.w = tf_orientation.getW();    </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        pred_states.push_back(ps);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    rwo.object.predictions = pred_states;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <span class="comment">// populate current and predicted lanelet_id, cross_track, downtracks </span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    rwo = cmw-&gt;toRoadwayObstacle(rwo.object).get();</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; rw_objs = cmw-&gt;getRoadwayObjects();    </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    rw_objs.push_back(rwo); </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    cmw-&gt;setRoadwayObjects(rw_objs);    </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>}</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a79f776b2b6517beadc6559018bbaaef7">addObstacle</a>(<a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a> tp, lanelet::Id lanelet_id, std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw, std::vector&lt;carma_wm::TrackPos&gt; pred_trackpos_list = {}, <span class="keywordtype">int</span> time_step = 100, <span class="keywordtype">double</span> width = 3, <span class="keywordtype">double</span> length = 3)</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>{</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="comment">//TODO: width &amp; length are not used; if there are no plans to use them soon, remove them from param list</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::WMTestLibForGuidance&quot;</span>), <span class="stringliteral">&quot;/// the following args are not used: width = &quot;</span> &lt;&lt; width &lt;&lt; <span class="stringliteral">&quot;, length = &quot;</span> &lt;&lt; length &lt;&lt; <span class="stringliteral">&quot;. Logging to avoid compiler warning.&quot;</span>);</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span> </div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  carma_perception_msgs::msg::RoadwayObstacle rwo;  </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <span class="keywordflow">if</span> (!cmw-&gt;getMap() || cmw-&gt;getMap()-&gt;laneletLayer.size() == 0)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>  }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>  rwo.connected_vehicle_type.type =</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      carma_perception_msgs::msg::ConnectedVehicleType::NOT_CONNECTED;  <span class="comment">// TODO No clear way to determine automation state at this time</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>  </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  <span class="comment">// get id of specified tp lanelet</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  <span class="comment">// it assumes similar shape map with getGuidanceTestMap</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>  <span class="keyword">auto</span> reference_llt = cmw-&gt;getMutableMap()-&gt;laneletLayer.get(lanelet_id);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  lanelet::BasicPoint2d object_center = {(reference_llt.leftBound()[0].x() + reference_llt.rightBound()[0].x())/2 + tp.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>,</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                                        (reference_llt.leftBound()[0].y() + reference_llt.rightBound()[0].y())/2 + tp.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>};    </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>  <span class="keyword">auto</span> nearestLanelet = cmw-&gt;getMap()-&gt;laneletLayer.nearest(object_center, 1)[0]; </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  <span class="keywordflow">if</span> (!boost::geometry::within(object_center, nearestLanelet.polygon2d()))</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>  {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Given trackpos from given lanelet id does land on any lanelet in the map&quot;</span>);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>  }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>  rwo.lanelet_id = nearestLanelet.id();</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>  rwo.down_track = tp.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>  rwo.cross_track = tp.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>  <span class="keywordtype">int</span> time_stamp = 0;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>  std::vector&lt;carma_perception_msgs::msg::PredictedState&gt; pred_states;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> pred_track_pos : pred_trackpos_list)</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>  {</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="comment">// record time intervals</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    carma_perception_msgs::msg::PredictedState ps;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    time_stamp += (time_step * 1e6);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    ps.header.stamp.nanosec = time_stamp;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="keyword">auto</span> ref_llt_pred = cmw-&gt;getMutableMap()-&gt;laneletLayer.get(lanelet_id);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    lanelet::BasicPoint2d object_center_pred = {(ref_llt_pred.leftBound()[0].x() + ref_llt_pred.rightBound()[0].x())/2 + pred_track_pos.crosstrack,</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>                                          (ref_llt_pred.leftBound()[0].y() + ref_llt_pred.rightBound()[0].y())/2 + pred_track_pos.downtrack};    </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="keyword">auto</span> predNearestLanelet = cmw-&gt;getMap()-&gt;laneletLayer.nearest(object_center_pred, 1)[0]; </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="keywordflow">if</span> (!boost::geometry::within(object_center_pred, predNearestLanelet.polygon2d()))</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;WMTestLibForGuidance&quot;</span>),<span class="stringliteral">&quot;Given pred trackpos from given lanelet id does land on any lanelet in the map&quot;</span>);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    rwo.predicted_lanelet_ids.emplace_back(predNearestLanelet.id());</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keyword">auto</span> tp_pred = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a>(predNearestLanelet,object_center_pred);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    rwo.predicted_cross_tracks.emplace_back(tp_pred.crosstrack);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    rwo.predicted_down_tracks.emplace_back(tp_pred.downtrack);</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    pred_states.push_back(ps);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>  }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <span class="comment">// add time intervals</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>  rwo.object.predictions = pred_states;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>  std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; rw_objs = cmw-&gt;getRoadwayObjects();  </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  rw_objs.push_back(rwo);   </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>  cmw-&gt;setRoadwayObjects(rw_objs);  </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>}</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a161831608cb764dd9610422e30d8c042">setSpeedLimit</a> (lanelet::Velocity speed_limit, std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>{</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>  <span class="keywordflow">if</span> (!cmw-&gt;getMap() || cmw-&gt;getMap()-&gt;laneletLayer.size() == 0)</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;setSpeedLimit: Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>  }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>  <span class="comment">// remove all speed limit regulatory element and set the new speed limit</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : cmw-&gt;getMutableMap()-&gt;laneletLayer)</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> regem : llt.regulatoryElements())</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      <span class="keywordflow">if</span> (regem-&gt;attribute(lanelet::AttributeName::Subtype).value().compare(lanelet::DigitalSpeedLimit::RuleName) == 0)</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>      {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        cmw-&gt;getMutableMap()-&gt;remove(llt, regem);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>      }</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    }</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    lanelet::DigitalSpeedLimitPtr sl = std::make_shared&lt;lanelet::DigitalSpeedLimit&gt;(lanelet::DigitalSpeedLimit::buildData(lanelet::utils::getId(), speed_limit, {llt}, {},</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>                                                     { lanelet::Participants::Vehicle }));</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    cmw-&gt;getMutableMap()-&gt;update(llt, sl);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>  }</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>  RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;WMTestLibForGuidance&quot;</span>),<span class="stringliteral">&quot;Set the new speed limit! Value: &quot;</span> &lt;&lt; speed_limit.value());</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>}</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#ae5be99adec8c6e92726dc6fcfac8b083">setRouteByLanelets</a> (std::vector&lt;lanelet::ConstLanelet&gt; lanelets, std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw)</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>{</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>  <span class="comment">// Build routing graph from map   </span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>  <span class="keyword">auto</span> traffic_rules = cmw-&gt;getTrafficRules();</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  lanelet::routing::RoutingGraphUPtr map_graph = lanelet::routing::RoutingGraph::build(*cmw-&gt;getMap(), *traffic_rules.get());</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="comment">// Generate route</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  lanelet::Optional&lt;lanelet::routing::Route&gt; optional_route;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  std::vector&lt;lanelet::ConstLanelet&gt; middle_lanelets;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="keywordflow">if</span> (lanelets.size() &gt; 2)</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  {</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    middle_lanelets = std::vector&lt;lanelet::ConstLanelet&gt;(lanelets.begin() + 1, lanelets.end() - 1);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    optional_route = map_graph-&gt;getRouteVia(lanelets[0], middle_lanelets, lanelets[lanelets.size() - 1]);   </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  }</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lanelets.size() == 2)</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    optional_route = map_graph-&gt;getRoute(lanelets[0], lanelets[1]);</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  }</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="keywordflow">throw</span> lanelet::InvalidInputError(<span class="stringliteral">&quot;Fewer than 2 lanelets have been passed to setRouteByLanelets, which cannot be a valid route&quot;</span>);</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordflow">if</span> (!optional_route)</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="keywordflow">throw</span> lanelet::InvalidInputError(<span class="stringliteral">&quot;There was an error in routing using the given lanelets in setRouteByLanelets&quot;</span>);</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>  }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  lanelet::routing::Route <a class="code hl_namespace" href="namespaceroute.html">route</a> = std::move(*optional_route);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  <a class="code hl_typedef" href="namespacecarma__wm.html#a9b6d5dac89a1f6f595ee54bcfa6a5680">carma_wm::LaneletRoutePtr</a> route_ptr = std::make_shared&lt;lanelet::routing::Route&gt;(std::move(<a class="code hl_namespace" href="namespaceroute.html">route</a>));</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>  cmw-&gt;setRoute(route_ptr);</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;WMTestLibForGuidance&quot;</span>),<span class="stringliteral">&quot;New route has been set successfully!&quot;</span>);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>}</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#aa8c3f2912d186f27c17d5752734d0eb3">setRouteByIds</a> (std::vector&lt;lanelet::Id&gt; lanelet_ids, std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw)</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>{</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  std::vector&lt;lanelet::ConstLanelet&gt; lanelets;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> : lanelet_ids)</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>      lanelets.push_back(cmw-&gt;getMap()-&gt;laneletLayer.get(<span class="keywordtype">id</span>));</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>  <a class="code hl_function" href="namespacecarma__wm_1_1test.html#ae5be99adec8c6e92726dc6fcfac8b083">setRouteByLanelets</a>(lanelets, cmw);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>}</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a35b9f217a1e0bba082c0b71eaf7e3d30">addTrafficLight</a>(std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw, lanelet::Id light_id, std::vector&lt;lanelet::Id&gt; entry_lanelet_ids, std::vector&lt;lanelet::Id&gt; exit_lanelet_ids, </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>std::vector&lt;std::pair&lt;boost::posix_time::ptime, lanelet::CarmaTrafficSignalState&gt;&gt; timing_plan =</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>{</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>  std::make_pair&lt;boost::posix_time::ptime, lanelet::CarmaTrafficSignalState&gt;(lanelet::time::timeFromSec(0), lanelet::CarmaTrafficSignalState::PROTECTED_MOVEMENT_ALLOWED), <span class="comment">// Just ended green</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>  std::make_pair&lt;boost::posix_time::ptime, lanelet::CarmaTrafficSignalState&gt;(lanelet::time::timeFromSec(4.0), lanelet::CarmaTrafficSignalState::PROTECTED_CLEARANCE), <span class="comment">// 4 sec yellow</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>  std::make_pair&lt;boost::posix_time::ptime, lanelet::CarmaTrafficSignalState&gt;(lanelet::time::timeFromSec(24.0), lanelet::CarmaTrafficSignalState::STOP_AND_REMAIN), <span class="comment">// 20 sec red</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>  std::make_pair&lt;boost::posix_time::ptime, lanelet::CarmaTrafficSignalState&gt;(lanelet::time::timeFromSec(44.0), lanelet::CarmaTrafficSignalState::PROTECTED_MOVEMENT_ALLOWED) <span class="comment">// 20 sec green</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>})</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>{</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>  <span class="keywordflow">if</span> (entry_lanelet_ids.size() != exit_lanelet_ids.size())</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided entry and exit lanelets size do not match!&quot;</span>);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>  }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>  lanelet::Lanelets entry_lanelets;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> : entry_lanelet_ids) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="keyword">auto</span> iterator = cmw-&gt;getMutableMap()-&gt;laneletLayer.find(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <span class="keywordflow">if</span> (iterator == cmw-&gt;getMutableMap()-&gt;laneletLayer.end())</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided with lanelet id not in map: &quot;</span> + std::to_string(<span class="keywordtype">id</span>));</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span> </div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    entry_lanelets.push_back(*iterator);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>  lanelet::Lanelets exit_lanelets;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span> </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span> : exit_lanelet_ids) {</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keyword">auto</span> iterator = cmw-&gt;getMutableMap()-&gt;laneletLayer.find(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="keywordflow">if</span> (iterator == cmw-&gt;getMutableMap()-&gt;laneletLayer.end())</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided with lanelet id not in map: &quot;</span> + std::to_string(<span class="keywordtype">id</span>));</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    exit_lanelets.push_back(*iterator);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>  </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>  }</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="comment">// Create stop line at end of owning lanelet</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>  std::vector&lt;lanelet::LineString3d&gt; stop_lines;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt: entry_lanelets)</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>  {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    lanelet::LineString3d virtual_stop_line(lanelet::utils::getId(), { llt.leftBound().back(), llt.rightBound().back() });</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    stop_lines.push_back(virtual_stop_line);</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>  }</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  <span class="comment">// Build traffic light</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>  std::shared_ptr&lt;lanelet::CarmaTrafficSignal&gt; traffic_light(<span class="keyword">new</span> lanelet::CarmaTrafficSignal(lanelet::CarmaTrafficSignal::buildData(light_id, stop_lines, entry_lanelets, exit_lanelets )));</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>  </div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>  <span class="comment">// Set the timing plan</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  traffic_light-&gt;setStates(timing_plan,0);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  <span class="comment">// Ensure map lookup tables are updated</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt: entry_lanelets)</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  {</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    cmw-&gt;getMutableMap()-&gt;update(llt, traffic_light);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>}</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span><span class="keyword">inline</span> std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a8f15f836dede141bcabe292a0f9a1751">getGuidanceTestMap</a>(MapOptions map_options)</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>{</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; cmw = std::make_shared&lt;carma_wm::CARMAWorldModel&gt;();   </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  <span class="comment">// create the semantic map</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <span class="keyword">auto</span> map = <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a89c0e3bfedd0bf9719127896b3fcb06c">buildGuidanceTestMap</a>(map_options.lane_width_, map_options.lane_length_, map_options.seg_num_);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>  <span class="comment">// set the map, with default routingGraph</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>  </div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>  cmw-&gt;setMap(map);</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="comment">// set default route, from 1200 to 1203 (it will automatically pick the shortest)</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>  <a class="code hl_function" href="namespacecarma__wm_1_1test.html#aa8c3f2912d186f27c17d5752734d0eb3">setRouteByIds</a>({1200,1203}, cmw);</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  <span class="comment">// set the obstacle</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  <span class="keywordflow">if</span> (map_options.obstacle_ == <a class="code hl_enumvalue" href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80a5b39c8b553c821e7cddc6da64b5bd2ee">MapOptions::Obstacle::DEFAULT</a>)</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>  {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a79f776b2b6517beadc6559018bbaaef7">addObstacle</a>(1.5*map_options.lane_width_, 2.5*map_options.lane_length_, cmw);  <span class="comment">// lanelet_id at 1212</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>  }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>  <span class="keywordflow">if</span> (map_options.speed_limit_ == <a class="code hl_enumvalue" href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188a5b39c8b553c821e7cddc6da64b5bd2ee">MapOptions::SpeedLimit::DEFAULT</a>)</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a161831608cb764dd9610422e30d8c042">setSpeedLimit</a>(25_mph, cmw);   <span class="comment">// change speed limit of all lanelets in the map to 25mph</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>  <span class="keywordflow">return</span> cmw;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>}</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span><span class="keyword">inline</span> std::shared_ptr&lt;carma_wm::CARMAWorldModel&gt; <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a8f15f836dede141bcabe292a0f9a1751">getGuidanceTestMap</a>()</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>{</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  MapOptions map_options;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1test.html#a8f15f836dede141bcabe292a0f9a1751">getGuidanceTestMap</a>(map_options);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>}</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>}</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="comment">//namespace test</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>} <span class="comment">//namespace carma_wm</span></div>
<div class="ttc" id="aCARMAWorldModel_8hpp_html"><div class="ttname"><a href="CARMAWorldModel_8hpp.html">CARMAWorldModel.hpp</a></div></div>
<div class="ttc" id="aGeometry_8hpp_html"><div class="ttname"><a href="Geometry_8hpp.html">Geometry.hpp</a></div></div>
<div class="ttc" id="aMapConformer_8hpp_html"><div class="ttname"><a href="MapConformer_8hpp.html">MapConformer.hpp</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a></div><div class="ttdoc">Position in a track based coordinate system where the axis are downtrack and crosstrack....</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8h_source.html#l00034">TrackPos.h:35</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a60c766fa11f68e1d8832d79cd2d292c2"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">carma_wm::TrackPos::crosstrack</a></div><div class="ttdeci">double crosstrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8h_source.html#l00038">TrackPos.h:38</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a6ea99bbb9c6a75685ceaaf370d58ea24"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">carma_wm::TrackPos::downtrack</a></div><div class="ttdeci">double downtrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8h_source.html#l00037">TrackPos.h:37</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aebce986f21c117983313292d5e82b50a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a></div><div class="ttdeci">TrackPos trackPos(const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</div><div class="ttdoc">Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide...</div><div class="ttdef"><b>Definition:</b> <a href="src_2Geometry_8cpp_source.html#l00120">Geometry.cpp:120</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a161831608cb764dd9610422e30d8c042"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a161831608cb764dd9610422e30d8c042">carma_wm::test::setSpeedLimit</a></div><div class="ttdeci">void setSpeedLimit(lanelet::Velocity speed_limit, std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; cmw)</div><div class="ttdoc">Sets all lanelets in the map the given speed limit.</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00400">WMTestLibForGuidance.h:400</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a35b9f217a1e0bba082c0b71eaf7e3d30"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a35b9f217a1e0bba082c0b71eaf7e3d30">carma_wm::test::addTrafficLight</a></div><div class="ttdeci">void addTrafficLight(std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; cmw, lanelet::Id light_id, std::vector&lt; lanelet::Id &gt; entry_lanelet_ids, std::vector&lt; lanelet::Id &gt; exit_lanelet_ids, std::vector&lt; std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; timing_plan={ std::make_pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt;(lanelet::time::timeFromSec(0), lanelet::CarmaTrafficSignalState::PROTECTED_MOVEMENT_ALLOWED), std::make_pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt;(lanelet::time::timeFromSec(4.0), lanelet::CarmaTrafficSignalState::PROTECTED_CLEARANCE), std::make_pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt;(lanelet::time::timeFromSec(24.0), lanelet::CarmaTrafficSignalState::STOP_AND_REMAIN), std::make_pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt;(lanelet::time::timeFromSec(44.0), lanelet::CarmaTrafficSignalState::PROTECTED_MOVEMENT_ALLOWED) })</div><div class="ttdoc">Method adds a traffic light to the provided world model instance NOTE: The stop line for the light wi...</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00500">WMTestLibForGuidance.h:500</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a77097e8d97f244908d22ea5050c08a70"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a77097e8d97f244908d22ea5050c08a70">carma_wm::test::getLanelet</a></div><div class="ttdeci">lanelet::Lanelet getLanelet(lanelet::LineString3d &amp;left_ls, lanelet::LineString3d &amp;right_ls, const lanelet::Attribute &amp;left_sub_type=lanelet::AttributeValueString::SolidSolid, const lanelet::Attribute &amp;right_sub_type=lanelet::AttributeValueString::Solid)</div><div class="ttdoc">helper function for quickly creating a lanelet::Lanelet using linestrings. random id is assigned</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00102">WMTestLibForGuidance.h:102</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a79f776b2b6517beadc6559018bbaaef7"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a79f776b2b6517beadc6559018bbaaef7">carma_wm::test::addObstacle</a></div><div class="ttdeci">void addObstacle(double x, double y, std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; cmw, std::vector&lt; std::pair&lt; double, double &gt; &gt; pred_coords={}, int time_step=100, double width=3, double length=3)</div><div class="ttdoc">adds a roadway object at the specified cartesian coords</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00264">WMTestLibForGuidance.h:264</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a89c0e3bfedd0bf9719127896b3fcb06c"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a89c0e3bfedd0bf9719127896b3fcb06c">carma_wm::test::buildGuidanceTestMap</a></div><div class="ttdeci">lanelet::LaneletMapPtr buildGuidanceTestMap(double width, double length, int num=1)</div><div class="ttdoc">helper function for creating lanelet map for getGuidanceTestMap</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00182">WMTestLibForGuidance.h:182</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a89de5fe0d1d1bc18c2e8bc13824b3ebc"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a89de5fe0d1d1bc18c2e8bc13824b3ebc">carma_wm::test::getBasicPoint</a></div><div class="ttdeci">lanelet::BasicPoint2d getBasicPoint(double x, double y)</div><div class="ttdoc">helper function for quickly creating a lanelet::BasicPoint. random id is assigned</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00090">WMTestLibForGuidance.h:90</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_a8f15f836dede141bcabe292a0f9a1751"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#a8f15f836dede141bcabe292a0f9a1751">carma_wm::test::getGuidanceTestMap</a></div><div class="ttdeci">std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; getGuidanceTestMap(MapOptions map_options)</div><div class="ttdoc">Gets the CARMAWorldModel for the guidance test map.</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00567">WMTestLibForGuidance.h:567</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_aa8c3f2912d186f27c17d5752734d0eb3"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#aa8c3f2912d186f27c17d5752734d0eb3">carma_wm::test::setRouteByIds</a></div><div class="ttdeci">void setRouteByIds(std::vector&lt; lanelet::Id &gt; lanelet_ids, std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; cmw)</div><div class="ttdoc">Sets the route by series of lanelets id.</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00474">WMTestLibForGuidance.h:474</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_ae5be99adec8c6e92726dc6fcfac8b083"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#ae5be99adec8c6e92726dc6fcfac8b083">carma_wm::test::setRouteByLanelets</a></div><div class="ttdeci">void setRouteByLanelets(std::vector&lt; lanelet::ConstLanelet &gt; lanelets, std::shared_ptr&lt; carma_wm::CARMAWorldModel &gt; cmw)</div><div class="ttdoc">Sets the route by series of lanelets.</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00431">WMTestLibForGuidance.h:431</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1test_html_afbe68ff3e46a1b21b763246668b9a827"><div class="ttname"><a href="namespacecarma__wm_1_1test.html#afbe68ff3e46a1b21b763246668b9a827">carma_wm::test::getPoint</a></div><div class="ttdeci">lanelet::Point3d getPoint(double x, double y, double z)</div><div class="ttdoc">helper function for quickly creating a lanelet::Point3d. random id is assigned</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00081">WMTestLibForGuidance.h:81</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html"><div class="ttname"><a href="namespacecarma__wm.html">carma_wm</a></div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8h_source.html#l00036">CARMAWorldModel.h:37</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_a9b6d5dac89a1f6f595ee54bcfa6a5680"><div class="ttname"><a href="namespacecarma__wm.html#a9b6d5dac89a1f6f595ee54bcfa6a5680">carma_wm::LaneletRoutePtr</a></div><div class="ttdeci">std::shared_ptr&lt; lanelet::routing::Route &gt; LaneletRoutePtr</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8h_source.html#l00042">WorldModel.h:42</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_html_a20caaf0f529166126f0f4ea4d80f80d0"><div class="ttname"><a href="namespacelanelet_1_1MapConformer.html#a20caaf0f529166126f0f4ea4d80f80d0">lanelet::MapConformer::ensureCompliance</a></div><div class="ttdeci">void ensureCompliance(lanelet::LaneletMapPtr map, lanelet::Velocity config_limit=80_mph)</div><div class="ttdoc">Function modifies an existing map to make a best effort attempt at ensuring the map confroms to the e...</div><div class="ttdef"><b>Definition:</b> <a href="src_2MapConformer_8cpp_source.html#l00550">MapConformer.cpp:550</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_a05bdb238bfbf3836fb0aa69c5aa1bb48"><div class="ttname"><a href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">process_traj_logs.y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00129">process_traj_logs.py:129</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_af3ba6144a2d35a4990f1a8d04632a052"><div class="ttname"><a href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">process_traj_logs.x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00128">process_traj_logs.py:128</a></div></div>
<div class="ttc" id="anamespaceroute_html"><div class="ttname"><a href="namespaceroute.html">route</a></div><div class="ttdef"><b>Definition:</b> <a href="route__config_8hpp_source.html#l00022">route_config.hpp:23</a></div></div>
<div class="ttc" id="arapidjson_8h_html_a1d1cfd8ffb84e947f82999c682b666a7"><div class="ttname"><a href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">Type</a></div><div class="ttdeci">Type</div><div class="ttdoc">Type of JSON value.</div><div class="ttdef"><b>Definition:</b> <a href="rapidjson_8h_source.html#l00616">rapidjson.h:616</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a33c40c98d6795b45a6494ccfa79884bb"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a33c40c98d6795b45a6494ccfa79884bb">carma_wm::test::MapOptions::lane_length_</a></div><div class="ttdeci">double lane_length_</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00070">WMTestLibForGuidance.h:70</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a56023dab65434d5e5bb26f0552488290"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a56023dab65434d5e5bb26f0552488290">carma_wm::test::MapOptions::speed_limit_</a></div><div class="ttdeci">SpeedLimit speed_limit_</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00072">WMTestLibForGuidance.h:72</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a7d9480e4dc456b7d90bc690218c8c689"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a7d9480e4dc456b7d90bc690218c8c689">carma_wm::test::MapOptions::obstacle_</a></div><div class="ttdeci">Obstacle obstacle_</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00071">WMTestLibForGuidance.h:71</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a816db21005734b8b3ceee1e6f9a8d209"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a816db21005734b8b3ceee1e6f9a8d209">carma_wm::test::MapOptions::seg_num_</a></div><div class="ttdeci">int seg_num_</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00073">WMTestLibForGuidance.h:73</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a986ebde9babc5af3428825e4336aebc4"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a986ebde9babc5af3428825e4336aebc4">carma_wm::test::MapOptions::MapOptions</a></div><div class="ttdeci">MapOptions(double lane_width=3.7, double lane_length=25, Obstacle obstacle=Obstacle::DEFAULT, SpeedLimit speed_limit=SpeedLimit::DEFAULT, int seg_num=1)</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8hpp_source.html#l00069">WMTestLibForGuidance.hpp:69</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a9b5829377f76caae88bf80d43c1bc188"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188">carma_wm::test::MapOptions::SpeedLimit</a></div><div class="ttdeci">SpeedLimit</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00066">WMTestLibForGuidance.h:66</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_a9b5829377f76caae88bf80d43c1bc188a5b39c8b553c821e7cddc6da64b5bd2ee"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#a9b5829377f76caae88bf80d43c1bc188a5b39c8b553c821e7cddc6da64b5bd2ee">carma_wm::test::MapOptions::SpeedLimit::DEFAULT</a></div><div class="ttdeci">@ DEFAULT</div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_aa0a3cf861145d946aab0e97faa97b9e2"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#aa0a3cf861145d946aab0e97faa97b9e2">carma_wm::test::MapOptions::lane_width_</a></div><div class="ttdeci">double lane_width_</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00069">WMTestLibForGuidance.h:69</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_acd4055a2e0875730b85540255afa2d80"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80">carma_wm::test::MapOptions::Obstacle</a></div><div class="ttdeci">Obstacle</div><div class="ttdef"><b>Definition:</b> <a href="WMTestLibForGuidance_8h_source.html#l00065">WMTestLibForGuidance.h:65</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1test_1_1MapOptions_html_acd4055a2e0875730b85540255afa2d80a5b39c8b553c821e7cddc6da64b5bd2ee"><div class="ttname"><a href="structcarma__wm_1_1test_1_1MapOptions.html#acd4055a2e0875730b85540255afa2d80a5b39c8b553c821e7cddc6da64b5bd2ee">carma_wm::test::MapOptions::Obstacle::DEFAULT</a></div><div class="ttdeci">@ DEFAULT</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_73e59df62327a001b53069470f2538a9.html">carma_wm_ros2</a></li><li class="navelem"><a class="el" href="dir_3667a9f520c4cc985c185ddd18f274c6.html">include</a></li><li class="navelem"><a class="el" href="dir_5cfa3825aae5ebd4cae4ed543278edcd.html">carma_wm_ros2</a></li><li class="navelem"><a class="el" href="WMTestLibForGuidance_8hpp.html">WMTestLibForGuidance.hpp</a></li>
    <li class="footer">Generated on Fri Oct 14 2022 17:11:42 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
