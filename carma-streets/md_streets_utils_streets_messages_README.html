<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: Streets Messages Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_streets_utils_streets_messages_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Streets Messages Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md111"></a>
Introduction</h1>
<p >This CARMA-Streets library will be the new location for storing both CARMA Streets message data types as well as the logic to serialize and deserialize these messages. Message data types will be stored in directories with the message name as the directory name similar to the current <code>sensor_data_sharing_msg</code>. Then functions will hold the JSON serialization and deserialization logic for each message to seperate concerns between message serialization and message data. </p><blockquote class="doxtable">
<p >&zwj;[!IMPORTANT]\ Currently this library only contains the sensor_data sharing message and the detected objects message, with their JSON serialization logic. Will attempt to part existing and future messages into this library. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md112"></a>
Messages</h1>
<p ><b><a class="el" href="md_streets_utils_streets_messages_SensorDataSharingMessage.html">Sensor Data Sharing Message</a></b> : J3224 Message used for sharing detection level data between vehicles and infrastructure. <b><a class="el" href="md_streets_utils_streets_messages_DetectedObjectsMessage.html">Detected Objects Message</a></b> : Custom Message used for sharing object detection information between sensors and ITS actors </p>
<h1><a class="anchor" id="autotoc_md113"></a>
Serialization and Deserialization</h1>
<p >CARMA Streets messages are currently all using JSON for serialization for sending via a Apache Kafka broker. To parse or write the JSON we are currently using the <a href="https://github.com/Tencent/rapidjson">rapidjson library</a>. In addition, we have implemented some helper functions to parse optional fields from JSON using the <a href="https://en.cppreference.com/w/cpp/utility/optional">std::optional</a> class template implemented in our <a href="https://github.com/usdot-fhwa-stol/carma-streets/tree/develop/streets_utils/json_utils">json_utils library</a>.</p>
<h1><a class="anchor" id="autotoc_md114"></a>
Some future planned improvements to this library include:</h1>
<ul>
<li>Porting existing CARMA Streets message JSON serialization/deserialization into library functions and out of message data type definitions</li>
<li>introduce "compile time inheritance" for serialization and deserialization to improve ease of use (<a href="https://github.com/usdot-fhwa-stol/carma-streets/issues/356">https://github.com/usdot-fhwa-stol/carma-streets/issues/356</a>)</li>
</ul>
<blockquote class="doxtable">
<p >&zwj;[!IMPORTANT]\ This is an improvement but also a deviation from how messages were previously processed in which message data types were couple to serialization. To remove this coupling new library will separate message data types from functions that serialize/deserialize them. This provides multiple benefits. By separating the logic the serialization logic from the message data types this improves maintainability by allowing us to potentially change serialization without any direct impact on message types or logic using message data. It also reduces the number of packages dependent on external libraries related to serialization like rapidjson. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md115"></a>
Installation</h1>
<p >This library includes a CMake install target that will attempt to install this library, including CMake configuration files under the following general path:</p>
<p ><code><a class="el" href="namespacestreets__utils.html">streets_utils</a>\streets_messages_lib</code></p>
<p >Header files will be installed in the CMake default include directory</p>
<p ><code>include\<a class="el" href="namespacestreets__utils.html">streets_utils</a>\streets_messages_lib\</code></p>
<p >CMake configuration files will be installed under CMake default install directory</p>
<p ><code>cmake\streets_messages_lib\</code></p>
<p >And the library binary will be installed under the CMake default Library directory</p>
<p ><code>lib\<a class="el" href="namespacestreets__utils.html">streets_utils</a>\</code></p>
<h1><a class="anchor" id="autotoc_md116"></a>
Using Library</h1>
<p >To incorporate this library into a CARMA Streets Service simply install the library using <code>make install</code> and then use the CMake <code>find_package(streets_messages REQUIRED)</code> call to find the install package. To link this library include the streets utils namespace as follows: </p><div class="fragment"><div class="line">target_link_libraries(&lt;targetname&gt; PUBLIC streets_utils::streets_messages)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 18 2023 18:39:41 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
