<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm::geometry Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecarma__wm_1_1geometry.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">carma_wm::geometry Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>geometry namespace contains utility geometry functions which do not require the map or route provided by an active world model  
<a href="namespacecarma__wm_1_1geometry.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aebce986f21c117983313292d5e82b50a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a> (const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</td></tr>
<tr class="memdesc:aebce986f21c117983313292d5e82b50a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided point relative to the centerline of the provided lanelet. Positive crosstrack will be to the right. Points occuring before the segment will have negative downtrack. See the matchSegment function for a description of the edge cases associated with the max_crosstrack parameter.  <a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">More...</a><br /></td></tr>
<tr class="separator:aebce986f21c117983313292d5e82b50a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05616ac1d3b4773665beb74bd495af2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a05616ac1d3b4773665beb74bd495af2c">trackPos</a> (const lanelet::BasicPoint2d &amp;p, const lanelet::BasicPoint2d &amp;seg_start, const lanelet::BasicPoint2d &amp;seg_end)</td></tr>
<tr class="memdesc:a05616ac1d3b4773665beb74bd495af2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the track position of a point relative to a line segment defined by two other points. Positive crosstrack will be to the right. Points occuring before the segment will have negative downtrack.  <a href="namespacecarma__wm_1_1geometry.html#a05616ac1d3b4773665beb74bd495af2c">More...</a><br /></td></tr>
<tr class="separator:a05616ac1d3b4773665beb74bd495af2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab675b2b8862a2ba9c139a8b5b353b846"><td class="memItemLeft" align="right" valign="top">std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, lanelet::BasicSegment2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">matchSegment</a> (const lanelet::BasicPoint2d &amp;p, const lanelet::BasicLineString2d &amp;line_string)</td></tr>
<tr class="memdesc:ab675b2b8862a2ba9c139a8b5b353b846"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the provided point along the linestring and the segment of the line string which the provided point should be considered in.  <a href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">More...</a><br /></td></tr>
<tr class="separator:ab675b2b8862a2ba9c139a8b5b353b846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bae0fef2b76bda05a8ba1f1382f027d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a> (const lanelet::BasicLineString2d &amp;centerline_points)</td></tr>
<tr class="memdesc:a2bae0fef2b76bda05a8ba1f1382f027d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of local (computed by discrete derivative) curvatures for the input centerlines. The list of returned curvatures matches 1-to-1 with with list of points in the input centerlines.  <a href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">More...</a><br /></td></tr>
<tr class="separator:a2bae0fef2b76bda05a8ba1f1382f027d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48da315ebfff807cc0b248261fc542a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ab48da315ebfff807cc0b248261fc542a">local_curvatures</a> (const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;centerline_points)</td></tr>
<tr class="separator:ab48da315ebfff807cc0b248261fc542a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc2b19933ed189b32a03d8462e69d46"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46">local_curvatures</a> (const std::vector&lt; lanelet::ConstLanelet &gt; &amp;lanelets)</td></tr>
<tr class="memdesc:aafc2b19933ed189b32a03d8462e69d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized overload of the centerline local_curvatures method but for lanelets.  <a href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46">More...</a><br /></td></tr>
<tr class="separator:aafc2b19933ed189b32a03d8462e69d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d5ca280140dce2bf7bcfb78bdfd55d"><td class="memItemLeft" align="right" valign="top">lanelet::BasicLineString2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">concatenate_line_strings</a> (const lanelet::BasicLineString2d &amp;l1, const lanelet::BasicLineString2d &amp;l2)</td></tr>
<tr class="memdesc:ae7d5ca280140dce2bf7bcfb78bdfd55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to concatenate 2 linestrings together and return the result. Neither LineString is modified in this function.  <a href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">More...</a><br /></td></tr>
<tr class="separator:ae7d5ca280140dce2bf7bcfb78bdfd55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8e11194693e77d9be753dd84d15524"><td class="memItemLeft" align="right" valign="top">lanelet::BasicLineString2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">concatenate_lanelets</a> (const std::vector&lt; lanelet::ConstLanelet &gt; &amp;lanelets)</td></tr>
<tr class="memdesc:adb8e11194693e77d9be753dd84d15524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to a list of lanelets together and return the result. Neither LineString is modified in this function.  <a href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">More...</a><br /></td></tr>
<tr class="separator:adb8e11194693e77d9be753dd84d15524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0b6f2362a5ebbf0d5dcb3b7ff78619"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::Vector2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a> (const lanelet::BasicLineString2d &amp;data)</td></tr>
<tr class="memdesc:aef0b6f2362a5ebbf0d5dcb3b7ff78619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use finite differences methods to compute the derivative of the input data set with respect to index Compute the finite differences using the forward finite difference for the first point, centered finite differences for the middle points and backwards finite difference for the final point. This will result in the middle points being a better approximation of the actual derivative than the endpoints.  <a href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">More...</a><br /></td></tr>
<tr class="separator:aef0b6f2362a5ebbf0d5dcb3b7ff78619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a097ad38dcc748e54bb065a9f77b1ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::Vector2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a0a097ad38dcc748e54bb065a9f77b1ae">compute_finite_differences</a> (const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;data)</td></tr>
<tr class="separator:a0a097ad38dcc748e54bb065a9f77b1ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527def551d1300fdb8d1b47230b50b18"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a527def551d1300fdb8d1b47230b50b18">compute_finite_differences</a> (const std::vector&lt; double &gt; &amp;data)</td></tr>
<tr class="memdesc:a527def551d1300fdb8d1b47230b50b18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use finite differences methods to compute the derivative of the input data set with respect to index Compute the finite differences using the forward finite difference for the first point, centered finite differences for the middle points and backwards finite difference for the final point. This will result in the middle points being a better approximation of the actual derivative than the endpoints.  <a href="namespacecarma__wm_1_1geometry.html#a527def551d1300fdb8d1b47230b50b18">More...</a><br /></td></tr>
<tr class="separator:a527def551d1300fdb8d1b47230b50b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6704d3b310afef54189310c11300c4fc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::Vector2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a6704d3b310afef54189310c11300c4fc">compute_finite_differences</a> (const std::vector&lt; Eigen::Vector2d &gt; &amp;x, const std::vector&lt; double &gt; &amp;y)</td></tr>
<tr class="memdesc:a6704d3b310afef54189310c11300c4fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use finite differences methods to compute the derivative of the input data set with respect to the second paramter.  <a href="namespacecarma__wm_1_1geometry.html#a6704d3b310afef54189310c11300c4fc">More...</a><br /></td></tr>
<tr class="separator:a6704d3b310afef54189310c11300c4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1c6b7f1e33569b45074e4e5bbeff1d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">compute_arc_lengths</a> (const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;data)</td></tr>
<tr class="memdesc:adf1c6b7f1e33569b45074e4e5bbeff1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the arc length at each point around the curve.  <a href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">More...</a><br /></td></tr>
<tr class="separator:adf1c6b7f1e33569b45074e4e5bbeff1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8613e0408964a148aef8cb034fa1b1ce"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a8613e0408964a148aef8cb034fa1b1ce">compute_arc_lengths</a> (const lanelet::BasicLineString2d &amp;data)</td></tr>
<tr class="memdesc:a8613e0408964a148aef8cb034fa1b1ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the arc length at each point around the curve.  <a href="namespacecarma__wm_1_1geometry.html#a8613e0408964a148aef8cb034fa1b1ce">More...</a><br /></td></tr>
<tr class="separator:a8613e0408964a148aef8cb034fa1b1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc48b810ba18270fcc21674b55922f0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a> (const Eigen::Vector2d &amp;<a class="el" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>, const Eigen::Vector2d &amp;b)</td></tr>
<tr class="memdesc:a9bc48b810ba18270fcc21674b55922f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the Euclidean distance between the two points.  <a href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">More...</a><br /></td></tr>
<tr class="separator:a9bc48b810ba18270fcc21674b55922f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bddbee1116988543192b2f235a692c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Eigen::Vector2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">normalize_vectors</a> (const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</td></tr>
<tr class="memdesc:a56bddbee1116988543192b2f235a692c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize the vectors in the input list such that their magnitudes = 1.  <a href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">More...</a><br /></td></tr>
<tr class="separator:a56bddbee1116988543192b2f235a692c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad31f5a6dcbee8828814d406384635f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">compute_magnitude_of_vectors</a> (const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</td></tr>
<tr class="memdesc:afad31f5a6dcbee8828814d406384635f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the magnitude of each vector in the input list.  <a href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">More...</a><br /></td></tr>
<tr class="separator:afad31f5a6dcbee8828814d406384635f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa3d6346b083b5fd1b7c699fab5bb5a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#aeaa3d6346b083b5fd1b7c699fab5bb5a">computeCurvature</a> (const lanelet::BasicPoint2d &amp;p1, const lanelet::BasicPoint2d &amp;p2, const lanelet::BasicPoint2d &amp;p3)</td></tr>
<tr class="memdesc:aeaa3d6346b083b5fd1b7c699fab5bb5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for computing curvature from 3 points.  <a href="namespacecarma__wm_1_1geometry.html#aeaa3d6346b083b5fd1b7c699fab5bb5a">More...</a><br /></td></tr>
<tr class="separator:aeaa3d6346b083b5fd1b7c699fab5bb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c966bd5e6ed00ea0b1a70e93cd0d4a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">safeAcos</a> (double x)</td></tr>
<tr class="memdesc:a50c966bd5e6ed00ea0b1a70e93cd0d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">acos method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to prevent issues with floating point approximations. The user should still make sure the input data is expected to be within the [-1, 1] range for this method to give accurate results.  <a href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">More...</a><br /></td></tr>
<tr class="separator:a50c966bd5e6ed00ea0b1a70e93cd0d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab233f090920664b21fafd83065a77b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#abab233f090920664b21fafd83065a77b">safeAsin</a> (double x)</td></tr>
<tr class="memdesc:abab233f090920664b21fafd83065a77b"><td class="mdescLeft">&#160;</td><td class="mdescRight">asin method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to prevent issues with floating point approximations. The user should still make sure the input data is expected to be within the [-1, 1] range for this method to give accurate results.  <a href="namespacecarma__wm_1_1geometry.html#abab233f090920664b21fafd83065a77b">More...</a><br /></td></tr>
<tr class="separator:abab233f090920664b21fafd83065a77b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab7ba4e773f03d6cfc09492742c6b7b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">getAngleBetweenVectors</a> (const Eigen::Vector2d &amp;vec1, const Eigen::Vector2d &amp;vec2)</td></tr>
<tr class="memdesc:abab7ba4e773f03d6cfc09492742c6b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the angle between two vectors.  <a href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">More...</a><br /></td></tr>
<tr class="separator:abab7ba4e773f03d6cfc09492742c6b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7db96beb74c526d4b502265e7c1e82"><td class="memItemLeft" align="right" valign="top">lanelet::BasicPolygon2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">objectToMapPolygon</a> (const geometry_msgs::msg::Pose &amp;pose, const geometry_msgs::msg::Vector3 &amp;size)</td></tr>
<tr class="memdesc:a1f7db96beb74c526d4b502265e7c1e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of that object would be if viewed from the same frame as the pose is defined relative to.  <a href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">More...</a><br /></td></tr>
<tr class="separator:a1f7db96beb74c526d4b502265e7c1e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ddfa96008060a7c10c2bbd08a5739d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">rpyFromQuaternion</a> (const tf2::Quaternion &amp;q, double &amp;roll, double &amp;pitch, double &amp;yaw)</td></tr>
<tr class="memdesc:a31ddfa96008060a7c10c2bbd08a5739d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract extrinsic roll-pitch-yaw from quaternion.  <a href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">More...</a><br /></td></tr>
<tr class="separator:a31ddfa96008060a7c10c2bbd08a5739d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33b80c2f327d0293d7bdb9b4503a1cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a33b80c2f327d0293d7bdb9b4503a1cd5">rpyFromQuaternion</a> (const geometry_msgs::msg::Quaternion &amp;q_msg, double &amp;roll, double &amp;pitch, double &amp;yaw)</td></tr>
<tr class="memdesc:a33b80c2f327d0293d7bdb9b4503a1cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract extrinsic roll-pitch-yaw from quaternion.  <a href="namespacecarma__wm_1_1geometry.html#a33b80c2f327d0293d7bdb9b4503a1cd5">More...</a><br /></td></tr>
<tr class="separator:a33b80c2f327d0293d7bdb9b4503a1cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a3ee0bf06f85a6e7a8b5097251da2b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">compute_tangent_orientations</a> (const lanelet::BasicLineString2d &amp;centerline)</td></tr>
<tr class="memdesc:ad8a3ee0bf06f85a6e7a8b5097251da2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute an approximate orientation for the vehicle at each point along the provided centerline.  <a href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">More...</a><br /></td></tr>
<tr class="separator:ad8a3ee0bf06f85a6e7a8b5097251da2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c83b095273261648f894b27c2af5b7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a99c83b095273261648f894b27c2af5b7">compute_tangent_orientations</a> (const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;centerline)</td></tr>
<tr class="separator:a99c83b095273261648f894b27c2af5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51c08f5f937a6aa72b7490eeabed211"><td class="memItemLeft" align="right" valign="top">Eigen::Isometry2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ab51c08f5f937a6aa72b7490eeabed211">build2dEigenTransform</a> (const Eigen::Vector2d &amp;position, const Eigen::Rotation2Dd &amp;rotation)</td></tr>
<tr class="memdesc:ab51c08f5f937a6aa72b7490eeabed211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a 2D Eigen coordinate frame transform with not applied scaling (only translation and rotation) based on the provided position and rotation parameters.  <a href="namespacecarma__wm_1_1geometry.html#ab51c08f5f937a6aa72b7490eeabed211">More...</a><br /></td></tr>
<tr class="separator:ab51c08f5f937a6aa72b7490eeabed211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a021ce676d4f65c79ee147ca433a0db0a"><td class="memItemLeft" align="right" valign="top">Eigen::Isometry3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">build3dEigenTransform</a> (const Eigen::Vector3d &amp;position, const Eigen::Quaterniond &amp;rotation)</td></tr>
<tr class="memdesc:a021ce676d4f65c79ee147ca433a0db0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a 3D Eigen coordinate frame transform with not applied scaling (only translation and rotation) based on the provided position and rotation parameters.  <a href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">More...</a><br /></td></tr>
<tr class="separator:a021ce676d4f65c79ee147ca433a0db0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb61db7c8cef6d70093927f8f824cfc"><td class="memItemLeft" align="right" valign="top">Eigen::Isometry3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a7eb61db7c8cef6d70093927f8f824cfc">build3dEigenTransform</a> (const Eigen::Vector3d &amp;position, const Eigen::AngleAxisd &amp;rotation)</td></tr>
<tr class="separator:a7eb61db7c8cef6d70093927f8f824cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f156f9d93ac8bd84fa6663b1efa5db4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">point_to_point_yaw</a> (const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</td></tr>
<tr class="memdesc:a6f156f9d93ac8bd84fa6663b1efa5db4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the 2d orientation of the vector from the provided start point to end point.  <a href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">More...</a><br /></td></tr>
<tr class="separator:a6f156f9d93ac8bd84fa6663b1efa5db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906a93ecedb3430179178f7b44d0b2e8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">circular_arc_curvature</a> (const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</td></tr>
<tr class="memdesc:a906a93ecedb3430179178f7b44d0b2e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the curvature of a circular arc that passes through the two provided points. If the two points lie on a curve then larger distances between them will result in less accurate, but also less noisy curvature calculations.  <a href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">More...</a><br /></td></tr>
<tr class="separator:a906a93ecedb3430179178f7b44d0b2e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec227caee1708506f7fec3561538ef38"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38">local_circular_arc_curvatures</a> (const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;points, <a class="el" href="classint.html">int</a> lookahead)</td></tr>
<tr class="memdesc:aec227caee1708506f7fec3561538ef38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the curvature of each point in the provided list by calling circular_arc_curvature using that point and the point at index current point index + lookahead. In this way the curvature of a path is effectively low pass filtered by the size of the lookahead value.  <a href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38">More...</a><br /></td></tr>
<tr class="separator:aec227caee1708506f7fec3561538ef38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a06818149f7430fee80e295ef04548"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">selectFirstSegment</a> (const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;first_seg_trackPos, const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;second_seg_trackPos, double first_seg_length, double second_seg_length)</td></tr>
<tr class="memdesc:ae0a06818149f7430fee80e295ef04548"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to identify whether to select the preceeding or succeeding segment of a linstring point that is nearest an external point when trying to find the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the external point. Of the 3 points comprising the 2 segment linestirng the external point must be closest to the midpoint for this function to be valid.  <a href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">More...</a><br /></td></tr>
<tr class="separator:ae0a06818149f7430fee80e295ef04548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adebf4a245f31404e822133b23e061ed3"><td class="memTemplParams" colspan="2">template&lt;class P , class A &gt; </td></tr>
<tr class="memitem:adebf4a245f31404e822133b23e061ed3"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a> (const std::vector&lt; P, A &gt; &amp;centerline_points)</td></tr>
<tr class="separator:adebf4a245f31404e822133b23e061ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8af6cd9c27d35849c12959ab9f1b9c3"><td class="memTemplParams" colspan="2">template&lt;class P , class A &gt; </td></tr>
<tr class="memitem:ae8af6cd9c27d35849c12959ab9f1b9c3"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; Eigen::Vector2d &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a> (const std::vector&lt; P, A &gt; &amp;data)</td></tr>
<tr class="separator:ae8af6cd9c27d35849c12959ab9f1b9c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e12c2971926486d1447e44e978f8d4d"><td class="memTemplParams" colspan="2">template&lt;class P , class A &gt; </td></tr>
<tr class="memitem:a4e12c2971926486d1447e44e978f8d4d"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a> (const std::vector&lt; P, A &gt; &amp;data)</td></tr>
<tr class="separator:a4e12c2971926486d1447e44e978f8d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a126f739493756f0eb84183ea22912b93"><td class="memTemplParams" colspan="2">template&lt;class P , class A &gt; </td></tr>
<tr class="memitem:a126f739493756f0eb84183ea22912b93"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a> (const std::vector&lt; P, A &gt; &amp;centerline)</td></tr>
<tr class="separator:a126f739493756f0eb84183ea22912b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2d95e2615fd8cbd681414e997bb513aa"><td class="memItemLeft" align="right" valign="top">constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">SPATIAL_EPSILON_M</a> = 0.05</td></tr>
<tr class="separator:a2d95e2615fd8cbd681414e997bb513aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >geometry namespace contains utility geometry functions which do not require the map or route provided by an active world model </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab51c08f5f937a6aa72b7490eeabed211" name="ab51c08f5f937a6aa72b7490eeabed211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab51c08f5f937a6aa72b7490eeabed211">&#9670;&nbsp;</a></span>build2dEigenTransform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Isometry2d carma_wm::geometry::build2dEigenTransform </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Rotation2Dd &amp;&#160;</td>
          <td class="paramname"><em>rotation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a 2D Eigen coordinate frame transform with not applied scaling (only translation and rotation) based on the provided position and rotation parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The origin of the child coordinate frame in the parent frame </td></tr>
    <tr><td class="paramname">rotation</td><td>The rotation of the child coordinate frame in the parent frame</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 2D transformation which is defined such that given a parent frame F and a child frame C, A point P_c in child frame C can be converted to the parent frame using the returned transform T_f_c Therefore P_f = T_f_c * P_c </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00570">570</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  570</span>                                                                                                       {</div>
<div class="line"><span class="lineno">  571</span>  Eigen::Vector2d scale(1.0, 1.0);</div>
<div class="line"><span class="lineno">  572</span>  Eigen::Isometry2d tf;</div>
<div class="line"><span class="lineno">  573</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><span class="lineno">  574</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="basic__autonomy_8cpp_source.html#l00623">basic_autonomy::waypoint_generation::compute_heading_frame()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ab51c08f5f937a6aa72b7490eeabed211_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ab51c08f5f937a6aa72b7490eeabed211_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ab51c08f5f937a6aa72b7490eeabed211_icgraph" id="anamespacecarma__wm_1_1geometry_ab51c08f5f937a6aa72b7490eeabed211_icgraph">
<area shape="rect" title="Builds a 2D Eigen coordinate frame transform with not applied scaling (only translation and rotation)..." alt="" coords="291,5,451,47"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#ada2ee63b890bfa23d67a17cf61dd0129" title="Returns a 2D coordinate frame which is located at p1 and oriented so p2 lies on the +X axis." alt="" coords="5,5,243,47"/>
</map>
</div>

</div>
</div>
<a id="a7eb61db7c8cef6d70093927f8f824cfc" name="a7eb61db7c8cef6d70093927f8f824cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb61db7c8cef6d70093927f8f824cfc">&#9670;&nbsp;</a></span>build3dEigenTransform() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Isometry3d carma_wm::geometry::build3dEigenTransform </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::AngleAxisd &amp;&#160;</td>
          <td class="paramname"><em>rotation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00582">582</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  582</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  583</span>  Eigen::Vector3d scale(1.0, 1.0, 1.0);</div>
<div class="line"><span class="lineno">  584</span>  Eigen::Isometry3d tf;</div>
<div class="line"><span class="lineno">  585</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><span class="lineno">  586</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a021ce676d4f65c79ee147ca433a0db0a" name="a021ce676d4f65c79ee147ca433a0db0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a021ce676d4f65c79ee147ca433a0db0a">&#9670;&nbsp;</a></span>build3dEigenTransform() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Isometry3d carma_wm::geometry::build3dEigenTransform </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Quaterniond &amp;&#160;</td>
          <td class="paramname"><em>rotation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a 3D Eigen coordinate frame transform with not applied scaling (only translation and rotation) based on the provided position and rotation parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The origin of the child coordinate frame in the parent frame </td></tr>
    <tr><td class="paramname">rotation</td><td>The rotation of the child coordinate frame in the parent frame</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 3D transformation which is defined such that given a parent frame F and a child frame C, A point P_c in child frame C can be converted to the parent frame using the returned transform T_f_c Therefore P_f = T_f_c * P_c </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00576">576</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  576</span>                                                                                                       {</div>
<div class="line"><span class="lineno">  577</span>  Eigen::Vector3d scale(1.0, 1.0, 1.0);</div>
<div class="line"><span class="lineno">  578</span>  Eigen::Isometry3d tf;</div>
<div class="line"><span class="lineno">  579</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><span class="lineno">  580</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a906a93ecedb3430179178f7b44d0b2e8" name="a906a93ecedb3430179178f7b44d0b2e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906a93ecedb3430179178f7b44d0b2e8">&#9670;&nbsp;</a></span>circular_arc_curvature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::circular_arc_curvature </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>cur_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>next_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the curvature of a circular arc that passes through the two provided points. If the two points lie on a curve then larger distances between them will result in less accurate, but also less noisy curvature calculations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur_point</td><td>The first point </td></tr>
    <tr><td class="paramname">next_point</td><td>The second point</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The curvature of the circular arc that passes through both points. Curvature is always positive. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00596">596</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  597</span>{</div>
<div class="line"><span class="lineno">  598</span>  <span class="keywordtype">double</span> dist = sqrt(pow(cur_point[0] - next_point[0], 2) + pow(cur_point[1] - next_point[1], 2));</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>  <span class="keywordtype">double</span> angle = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">point_to_point_yaw</a>(cur_point, next_point);</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordtype">double</span> r = 0.5 * (dist / std::sin(angle));</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>  <span class="keywordtype">double</span> max_curvature = 100000;</div>
<div class="line"><span class="lineno">  605</span>  <span class="keywordtype">double</span> curvature = std::min(1 / r, max_curvature);</div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span>  <span class="keywordflow">return</span> curvature;</div>
<div class="line"><span class="lineno">  608</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a6f156f9d93ac8bd84fa6663b1efa5db4"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">carma_wm::geometry::point_to_point_yaw</a></div><div class="ttdeci">double point_to_point_yaw(const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</div><div class="ttdoc">Computes the 2d orientation of the vector from the provided start point to end point.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00588">Geometry.cpp:588</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00588">point_to_point_yaw()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00610">local_circular_arc_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_cgraph" id="anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_cgraph">
<area shape="rect" title="Computes the curvature of a circular arc that passes through the two provided points...." alt="" coords="5,5,161,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4" title="Computes the 2d orientation of the vector from the provided start point to end point." alt="" coords="209,5,355,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_icgraph" id="anamespacecarma__wm_1_1geometry_a906a93ecedb3430179178f7b44d0b2e8_icgraph">
<area shape="rect" title="Computes the curvature of a circular arc that passes through the two provided points...." alt="" coords="199,13,355,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38" title="Computes the curvature of each point in the provided list by calling circular_arc_curvature using tha..." alt="" coords="5,5,151,61"/>
</map>
</div>

</div>
</div>
<a id="a8613e0408964a148aef8cb034fa1b1ce" name="a8613e0408964a148aef8cb034fa1b1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8613e0408964a148aef8cb034fa1b1ce">&#9670;&nbsp;</a></span>compute_arc_lengths() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_arc_lengths </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the arc length at each point around the curve. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00493">493</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  493</span>                                                          {</div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><span class="lineno">  495</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a4e12c2971926486d1447e44e978f8d4d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">carma_wm::geometry::compute_templated_arc_lengths</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_templated_arc_lengths(const std::vector&lt; P, A &gt; &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00475">Geometry.cpp:475</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ac70c24fdb487f1aed5b846490501b5f1"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">process_traj_logs.data</a></div><div class="ttdeci">list data</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00041">process_traj_logs.py:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00475">compute_templated_arc_lengths()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a8613e0408964a148aef8cb034fa1b1ce_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a8613e0408964a148aef8cb034fa1b1ce_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a8613e0408964a148aef8cb034fa1b1ce_cgraph" id="anamespacecarma__wm_1_1geometry_a8613e0408964a148aef8cb034fa1b1ce_cgraph">
<area shape="rect" title="Compute the arc length at each point around the curve." alt="" coords="5,13,157,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="205,5,351,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="399,5,544,61"/>
</map>
</div>

</div>
</div>
<a id="adf1c6b7f1e33569b45074e4e5bbeff1d" name="adf1c6b7f1e33569b45074e4e5bbeff1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf1c6b7f1e33569b45074e4e5bbeff1d">&#9670;&nbsp;</a></span>compute_arc_lengths() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_arc_lengths </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the arc length at each point around the curve. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00498">498</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>{</div>
<div class="line"><span class="lineno">  500</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><span class="lineno">  501</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00475">compute_templated_arc_lengths()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>.</p>

<p class="reference">Referenced by <a class="el" href="basic__autonomy_8cpp_source.html#l01112">basic_autonomy::waypoint_generation::compose_lanechange_trajectory_from_path()</a>, <a class="el" href="basic__autonomy_8cpp_source.html#l00853">basic_autonomy::waypoint_generation::compose_lanefollow_trajectory_from_path()</a>, <a class="el" href="stop__controlled__intersection__tactical__plugin_8cpp_source.html#l00477">stop_controlled_intersection_tactical_plugin::StopControlledIntersectionTacticalPlugin::compose_trajectory_from_centerline()</a>, <a class="el" href="basic__autonomy_8cpp_source.html#l00631">basic_autonomy::waypoint_generation::constrain_to_time_boundary()</a>, <a class="el" href="basic__autonomy_8cpp_source.html#l00470">basic_autonomy::waypoint_generation::resample_linestring_pair_to_same_size()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_cgraph" id="anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_cgraph">
<area shape="rect" title="Compute the arc length at each point around the curve." alt="" coords="5,13,157,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="205,5,351,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="399,5,544,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_icgraph" id="anamespacecarma__wm_1_1geometry_adf1c6b7f1e33569b45074e4e5bbeff1d_icgraph">
<area shape="rect" title="Compute the arc length at each point around the curve." alt="" coords="1643,236,1795,278"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a741942c16ca54212b9adf3ddc2eea66d" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="515,26,736,82"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#ad633c0c515eae2b1752ad96031e01ef8" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="1118,222,1331,278"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ae4ee772170429ec26c32ceec68f3c22f" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="1109,319,1340,390"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#af509efce135492493e13c9bb86329dcd" title="Reduces the input points to only those points that fit within the provided time boundary." alt="" coords="1405,261,1578,317"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a19cf5cf882789e1e9ed3e92d0105a8de" title="Resamples a pair of basicpoint2d lines to get lines of same number of points." alt="" coords="1388,121,1595,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="1398,403,1585,444"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="260,32,467,88"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,32,212,88"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="280,116,447,172"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="275,205,451,261"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="784,288,1061,344"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ab0bf4a699bff521ffe56736d78880926" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="821,368,1024,439"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a2219ab96db87781023137bdb45af1ea2" title="Creates a vector of lane change points using parameters defined." alt="" coords="1123,113,1327,169"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#af992a6cbbdafd6e86d73976a65164e94" title="Converts a set of requested LANE_CHANGE maneuvers to point speed limit pairs." alt="" coords="829,106,1016,162"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#acdcd3bb44d31aa6405b30f151ea35ae4" title="Creates geometry profile to return a point speed pair struct for LANE FOLLOW and LANE CHANGE maneuver..." alt="" coords="530,106,721,162"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="1152,446,1297,487"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="850,463,995,504"/>
</map>
</div>

</div>
</div>
<a id="a9bc48b810ba18270fcc21674b55922f0" name="a9bc48b810ba18270fcc21674b55922f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc48b810ba18270fcc21674b55922f0">&#9670;&nbsp;</a></span>compute_euclidean_distance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::compute_euclidean_distance </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the Euclidean distance between the two points. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00504">504</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  505</span>{</div>
<div class="line"><span class="lineno">  506</span>  <span class="keywordflow">return</span> std::sqrt(std::pow(b[0] - <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>[0], 2) + std::pow(b[1] - <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>[1], 2));</div>
<div class="line"><span class="lineno">  507</span>}</div>
<div class="ttc" id="apointer_8h_html_aeeddce917cf130d62c370b8f216026dd"><div class="ttname"><a href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a></div><div class="ttdeci">const GenericPointer&lt; typename T::ValueType &gt; T2 T::AllocatorType &amp; a</div><div class="ttdef"><b>Definition:</b> <a href="pointer_8h_source.html#l01121">pointer.h:1121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="pointer_8h_source.html#l01121">a</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00475">compute_templated_arc_lengths()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00373">concatenate_line_strings()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a9bc48b810ba18270fcc21674b55922f0_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a9bc48b810ba18270fcc21674b55922f0_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a9bc48b810ba18270fcc21674b55922f0_icgraph" id="anamespacecarma__wm_1_1geometry_a9bc48b810ba18270fcc21674b55922f0_icgraph">
<area shape="rect" title="Compute the Euclidean distance between the two points." alt="" coords="1404,41,1549,97"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="1197,5,1343,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d" title="Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo..." alt="" coords="1184,85,1356,126"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a8613e0408964a148aef8cb034fa1b1ce" title="Compute the arc length at each point around the curve." alt="" coords="962,13,1114,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524" title="Helper function to a list of lanelets together and return the result. Neither LineString is modified ..." alt="" coords="963,81,1113,122"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#aa3500af9146c0d9c80cb1b4101be01e5" title="Converts a set of requested LANE_FOLLOWING maneuvers to point speed limit pairs." alt="" coords="940,145,1136,201"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="666,81,811,122"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#acdcd3bb44d31aa6405b30f151ea35ae4" title="Creates geometry profile to return a point speed pair struct for LANE FOLLOW and LANE CHANGE maneuver..." alt="" coords="643,145,834,201"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#afee417a4310729540055e6c6f35eeccf" title="Creates geometry profile to return a point speed pair struct for INTERSECTION_TRANSIT maneuver types ..." alt="" coords="585,225,892,281"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="295,25,502,81"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="315,105,482,161"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="311,185,487,241"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,25,212,81"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="260,265,537,321"/>
</map>
</div>

</div>
</div>
<a id="aef0b6f2362a5ebbf0d5dcb3b7ff78619" name="aef0b6f2362a5ebbf0d5dcb3b7ff78619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef0b6f2362a5ebbf0d5dcb3b7ff78619">&#9670;&nbsp;</a></span>compute_finite_differences() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::Vector2d &gt; carma_wm::geometry::compute_finite_differences </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use finite differences methods to compute the derivative of the input data set with respect to index Compute the finite differences using the forward finite difference for the first point, centered finite differences for the middle points and backwards finite difference for the final point. This will result in the middle points being a better approximation of the actual derivative than the endpoints. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The data to differentiate over </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector containing the point-by-point derivatives in the same indices as the input data </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00419">419</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>{</div>
<div class="line"><span class="lineno">  421</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><span class="lineno">  422</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae8af6cd9c27d35849c12959ab9f1b9c3"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">carma_wm::geometry::compute_templated_finite_differences</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; compute_templated_finite_differences(const std::vector&lt; P, A &gt; &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00391">Geometry.cpp:391</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00391">compute_templated_finite_differences()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_cgraph" id="anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_cgraph">
<area shape="rect" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="5,13,188,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="236,5,381,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_icgraph" id="anamespacecarma__wm_1_1geometry_aef0b6f2362a5ebbf0d5dcb3b7ff78619_icgraph">
<area shape="rect" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="627,5,809,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="392,5,579,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,5,151,47"/>
</map>
</div>

</div>
</div>
<a id="a527def551d1300fdb8d1b47230b50b18" name="a527def551d1300fdb8d1b47230b50b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527def551d1300fdb8d1b47230b50b18">&#9670;&nbsp;</a></span>compute_finite_differences() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_finite_differences </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use finite differences methods to compute the derivative of the input data set with respect to index Compute the finite differences using the forward finite difference for the first point, centered finite differences for the middle points and backwards finite difference for the final point. This will result in the middle points being a better approximation of the actual derivative than the endpoints. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The data to differentiate over </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector containing the point-by-point derivatives in the same indices as the input data </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00429">429</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  430</span>{</div>
<div class="line"><span class="lineno">  431</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><span class="lineno">  432</span>  <span class="keywordtype">double</span> diff;</div>
<div class="line"><span class="lineno">  433</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><span class="lineno">  436</span>      diff = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>];</div>
<div class="line"><span class="lineno">  437</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size() - 1) {</div>
<div class="line"><span class="lineno">  438</span>      diff = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1];</div>
<div class="line"><span class="lineno">  439</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  440</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/2.0;</div>
<div class="line"><span class="lineno">  441</span>    }</div>
<div class="line"><span class="lineno">  442</span>    </div>
<div class="line"><span class="lineno">  443</span>    out.push_back(diff);</div>
<div class="line"><span class="lineno">  444</span>  }</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  447</span>}</div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>, and <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>.</p>

</div>
</div>
<a id="a6704d3b310afef54189310c11300c4fc" name="a6704d3b310afef54189310c11300c4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6704d3b310afef54189310c11300c4fc">&#9670;&nbsp;</a></span>compute_finite_differences() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::Vector2d &gt; carma_wm::geometry::compute_finite_differences </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; Eigen::Vector2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use finite differences methods to compute the derivative of the input data set with respect to the second paramter. </p>
<p >Input x and y must be the same length. Compute the finite differences using the forward finite difference for the first point, centered finite differences for the middle points and backwards finite difference for the final point. This will result in the middle points being a better approximation of the actual derivative than the endpoints.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The x value of the derivative dx/dy </td></tr>
    <tr><td class="paramname">y</td><td>The y value of the derivative dx/dy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector containing the point-by-point derivatives in the same indices as the input data </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00450">450</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  451</span>{</div>
<div class="line"><span class="lineno">  452</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size() != <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>.size()) {</div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Attempting to differentiate two unequal sized lists!&quot;</span>);</div>
<div class="line"><span class="lineno">  454</span>  }</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><span class="lineno">  457</span>  Eigen::Vector2d diff;</div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><span class="lineno">  460</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><span class="lineno">  461</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size() - 1) {</div>
<div class="line"><span class="lineno">  462</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><span class="lineno">  463</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  464</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span>    </div>
<div class="line"><span class="lineno">  467</span>    out.push_back(diff);</div>
<div class="line"><span class="lineno">  468</span>  }</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  471</span>}</div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_a05bdb238bfbf3836fb0aa69c5aa1bb48"><div class="ttname"><a href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">process_traj_logs.y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00129">process_traj_logs.py:129</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_af3ba6144a2d35a4990f1a8d04632a052"><div class="ttname"><a href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">process_traj_logs.x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00128">process_traj_logs.py:128</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="process__traj__logs_8py_source.html#l00128">process_traj_logs::x</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00129">process_traj_logs::y</a>.</p>

</div>
</div>
<a id="a0a097ad38dcc748e54bb065a9f77b1ae" name="a0a097ad38dcc748e54bb065a9f77b1ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a097ad38dcc748e54bb065a9f77b1ae">&#9670;&nbsp;</a></span>compute_finite_differences() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::Vector2d &gt; carma_wm::geometry::compute_finite_differences </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00424">424</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  424</span>                                                                                                {</div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><span class="lineno">  426</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00391">compute_templated_finite_differences()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a0a097ad38dcc748e54bb065a9f77b1ae_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a0a097ad38dcc748e54bb065a9f77b1ae_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a0a097ad38dcc748e54bb065a9f77b1ae_cgraph" id="anamespacecarma__wm_1_1geometry_a0a097ad38dcc748e54bb065a9f77b1ae_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,188,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="236,5,381,61"/>
</map>
</div>

</div>
</div>
<a id="afad31f5a6dcbee8828814d406384635f" name="afad31f5a6dcbee8828814d406384635f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad31f5a6dcbee8828814d406384635f">&#9670;&nbsp;</a></span>compute_magnitude_of_vectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_magnitude_of_vectors </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; Eigen::Vector2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>vectors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the magnitude of each vector in the input list. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00520">520</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  521</span>{</div>
<div class="line"><span class="lineno">  522</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> vec : vectors) {</div>
<div class="line"><span class="lineno">  524</span>    out.push_back(vec.norm());</div>
<div class="line"><span class="lineno">  525</span>  }</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  528</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_afad31f5a6dcbee8828814d406384635f_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_afad31f5a6dcbee8828814d406384635f_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_afad31f5a6dcbee8828814d406384635f_icgraph" id="anamespacecarma__wm_1_1geometry_afad31f5a6dcbee8828814d406384635f_icgraph">
<area shape="rect" title="Compute the magnitude of each vector in the input list." alt="" coords="627,5,772,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="392,13,579,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="199,13,344,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,13,151,54"/>
</map>
</div>

</div>
</div>
<a id="ad8a3ee0bf06f85a6e7a8b5097251da2b" name="ad8a3ee0bf06f85a6e7a8b5097251da2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a3ee0bf06f85a6e7a8b5097251da2b">&#9670;&nbsp;</a></span>compute_tangent_orientations() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_tangent_orientations </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>centerline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute an approximate orientation for the vehicle at each point along the provided centerline. </p>
<p >!</p>
<p >Uses the tangent vectors along the centerline to estimate vehicle pose in the yaw dimension. Roll and pitch are not considered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">centerline</td><td>centerline represented as BasicLinestring2d to compute the orientation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of doubles representing the yaw value in radians the same frame as the provided centerline. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00559">559</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  560</span>{</div>
<div class="line"><span class="lineno">  561</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a>(centerline);</div>
<div class="line"><span class="lineno">  562</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a126f739493756f0eb84183ea22912b93"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">carma_wm::geometry::compute_templated_tangent_orientations</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_templated_tangent_orientations(const std::vector&lt; P, A &gt; &amp;centerline)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00532">Geometry.cpp:532</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00532">compute_templated_tangent_orientations()</a>.</p>

<p class="reference">Referenced by <a class="el" href="basic__autonomy_8cpp_source.html#l01112">basic_autonomy::waypoint_generation::compose_lanechange_trajectory_from_path()</a>, <a class="el" href="basic__autonomy_8cpp_source.html#l00853">basic_autonomy::waypoint_generation::compose_lanefollow_trajectory_from_path()</a>, <a class="el" href="stop__controlled__intersection__tactical__plugin_8cpp_source.html#l00477">stop_controlled_intersection_tactical_plugin::StopControlledIntersectionTacticalPlugin::compose_trajectory_from_centerline()</a>, and <a class="el" href="stop__and__wait__plugin_8cpp_source.html#l00233">stop_and_wait_plugin::StopandWait::compose_trajectory_from_centerline()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_cgraph" id="anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_cgraph">
<area shape="rect" title="Compute an approximate orientation for the vehicle at each point along the provided centerline." alt="" coords="5,13,208,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93" title=" " alt="" coords="256,5,403,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="451,5,596,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_icgraph" id="anamespacecarma__wm_1_1geometry_ad8a3ee0bf06f85a6e7a8b5097251da2b_icgraph">
<area shape="rect" title="Compute an approximate orientation for the vehicle at each point along the provided centerline." alt="" coords="864,235,1067,277"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a741942c16ca54212b9adf3ddc2eea66d" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="590,51,811,107"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#ad633c0c515eae2b1752ad96031e01ef8" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="594,175,807,231"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ae4ee772170429ec26c32ceec68f3c22f" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="585,265,816,335"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#ad80a802e059ba3e8a458eb53c0093a0b" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="611,377,790,433"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="295,5,502,61"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,5,212,61"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="315,85,482,141"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="311,165,487,221"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="260,245,537,301"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ab0bf4a699bff521ffe56736d78880926" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="297,326,500,397"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#aacfe3c82e0d7cc47a27c67f7b9f4b83e" title="Service callback for trajectory planning." alt="" coords="292,421,505,462"/>
</map>
</div>

</div>
</div>
<a id="a99c83b095273261648f894b27c2af5b7" name="a99c83b095273261648f894b27c2af5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c83b095273261648f894b27c2af5b7">&#9670;&nbsp;</a></span>compute_tangent_orientations() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_tangent_orientations </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>centerline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00565">565</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  566</span>{</div>
<div class="line"><span class="lineno">  567</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a>(centerline);</div>
<div class="line"><span class="lineno">  568</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00532">compute_templated_tangent_orientations()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a99c83b095273261648f894b27c2af5b7_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a99c83b095273261648f894b27c2af5b7_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a99c83b095273261648f894b27c2af5b7_cgraph" id="anamespacecarma__wm_1_1geometry_a99c83b095273261648f894b27c2af5b7_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,208,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93" title=" " alt="" coords="256,5,403,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="451,5,596,61"/>
</map>
</div>

</div>
</div>
<a id="a4e12c2971926486d1447e44e978f8d4d" name="a4e12c2971926486d1447e44e978f8d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e12c2971926486d1447e44e978f8d4d">&#9670;&nbsp;</a></span>compute_templated_arc_lengths()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class P , class A &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_templated_arc_lengths </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; P, A &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00475">475</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>                                                           {</div>
<div class="line"><span class="lineno">  476</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><span class="lineno">  477</span>  <span class="keywordtype">double</span> total = 0;</div>
<div class="line"><span class="lineno">  478</span>  <span class="keywordtype">double</span> diff = 0;</div>
<div class="line"><span class="lineno">  479</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> =  0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><span class="lineno">  480</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><span class="lineno">  481</span>      out.push_back(0);</div>
<div class="line"><span class="lineno">  482</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  483</span>      diff = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1], <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><span class="lineno">  484</span>      total += diff;</div>
<div class="line"><span class="lineno">  485</span>      out.push_back(total);</div>
<div class="line"><span class="lineno">  486</span>    }</div>
<div class="line"><span class="lineno">  487</span>  }</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  490</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a9bc48b810ba18270fcc21674b55922f0"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">carma_wm::geometry::compute_euclidean_distance</a></div><div class="ttdeci">double compute_euclidean_distance(const Eigen::Vector2d &amp;a, const Eigen::Vector2d &amp;b)</div><div class="ttdoc">Compute the Euclidean distance between the two points.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00504">Geometry.cpp:504</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00504">compute_euclidean_distance()</a>, <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>, and <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00493">compute_arc_lengths()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_cgraph" id="anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,151,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="199,5,344,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_icgraph" id="anamespacecarma__wm_1_1geometry_a4e12c2971926486d1447e44e978f8d4d_icgraph">
<area shape="rect" title=" " alt="" coords="205,5,351,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a8613e0408964a148aef8cb034fa1b1ce" title="Compute the arc length at each point around the curve." alt="" coords="5,13,157,54"/>
</map>
</div>

</div>
</div>
<a id="ae8af6cd9c27d35849c12959ab9f1b9c3" name="ae8af6cd9c27d35849c12959ab9f1b9c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8af6cd9c27d35849c12959ab9f1b9c3">&#9670;&nbsp;</a></span>compute_templated_finite_differences()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class P , class A &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::Vector2d &gt; carma_wm::geometry::compute_templated_finite_differences </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; P, A &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00391">391</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  392</span>{</div>
<div class="line"><span class="lineno">  393</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><span class="lineno">  394</span>  Eigen::Vector2d diff;</div>
<div class="line"><span class="lineno">  395</span>  Eigen::Vector2d vec_i_plus_1;</div>
<div class="line"><span class="lineno">  396</span>  Eigen::Vector2d vec_i_minus_1;</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><span class="lineno">  400</span>      <span class="comment">// Compute forward derivative</span></div>
<div class="line"><span class="lineno">  401</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><span class="lineno">  402</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size() - 1) {</div>
<div class="line"><span class="lineno">  403</span>      <span class="comment">// Compute backward derivative</span></div>
<div class="line"><span class="lineno">  404</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><span class="lineno">  405</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  406</span>      <span class="comment">// Else, compute centered derivative</span></div>
<div class="line"><span class="lineno">  407</span>      vec_i_plus_1 = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1];</div>
<div class="line"><span class="lineno">  408</span>      vec_i_minus_1 = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1];</div>
<div class="line"><span class="lineno">  409</span>      diff = (vec_i_plus_1 - vec_i_minus_1)/2.0;</div>
<div class="line"><span class="lineno">  410</span>    }</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>    out.push_back(diff);</div>
<div class="line"><span class="lineno">  413</span>  }</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  416</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__traj__logs_8py_source.html#l00041">process_traj_logs::data</a>, and <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00419">compute_finite_differences()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00532">compute_templated_tangent_orientations()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ae8af6cd9c27d35849c12959ab9f1b9c3_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ae8af6cd9c27d35849c12959ab9f1b9c3_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ae8af6cd9c27d35849c12959ab9f1b9c3_icgraph" id="anamespacecarma__wm_1_1geometry_ae8af6cd9c27d35849c12959ab9f1b9c3_icgraph">
<area shape="rect" title=" " alt="" coords="1345,154,1491,210"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="1115,105,1297,147"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93" title=" " alt="" coords="1133,190,1279,246"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="872,65,1059,107"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="628,25,773,67"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="326,5,471,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b" title="Compute an approximate orientation for the vehicle at each point along the provided centerline." alt="" coords="864,237,1067,279"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a741942c16ca54212b9adf3ddc2eea66d" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="590,110,811,166"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#ad633c0c515eae2b1752ad96031e01ef8" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="594,230,807,286"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ae4ee772170429ec26c32ceec68f3c22f" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="585,328,816,399"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#ad80a802e059ba3e8a458eb53c0093a0b" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="611,459,790,515"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="295,70,502,126"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,70,212,126"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="315,150,482,206"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="311,230,487,286"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="260,310,537,366"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ab0bf4a699bff521ffe56736d78880926" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="297,391,500,461"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#aacfe3c82e0d7cc47a27c67f7b9f4b83e" title="Service callback for trajectory planning." alt="" coords="292,485,505,527"/>
</map>
</div>

</div>
</div>
<a id="a126f739493756f0eb84183ea22912b93" name="a126f739493756f0eb84183ea22912b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a126f739493756f0eb84183ea22912b93">&#9670;&nbsp;</a></span>compute_templated_tangent_orientations()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class P , class A &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::compute_templated_tangent_orientations </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; P, A &gt; &amp;&#160;</td>
          <td class="paramname"><em>centerline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00532">532</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  533</span>{</div>
<div class="line"><span class="lineno">  534</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><span class="lineno">  535</span>  <span class="keywordflow">if</span> (centerline.empty())</div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>  std::vector&lt;Eigen::Vector2d&gt; tangents = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">carma_wm::geometry::compute_templated_finite_differences</a>(centerline);</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> tangent : tangents)</div>
<div class="line"><span class="lineno">  541</span>  {</div>
<div class="line"><span class="lineno">  542</span>    geometry_msgs::msg::Quaternion q;</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    <span class="comment">// Derive angle by cos theta = (u . v)/(||u| * ||v||)</span></div>
<div class="line"><span class="lineno">  545</span>    <span class="keywordtype">double</span> yaw = 0;</div>
<div class="line"><span class="lineno">  546</span>    <span class="keywordtype">double</span> norm = tangent.norm();</div>
<div class="line"><span class="lineno">  547</span>    <span class="keywordflow">if</span> (norm != 0.0) {</div>
<div class="line"><span class="lineno">  548</span>      <span class="keyword">auto</span> normalized_tanged = tangent / norm;</div>
<div class="line"><span class="lineno">  549</span>      yaw = atan2(normalized_tanged[1], normalized_tanged[0]);</div>
<div class="line"><span class="lineno">  550</span>    }</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    out.push_back(yaw);</div>
<div class="line"><span class="lineno">  553</span>  }</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  556</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00391">compute_templated_finite_differences()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00559">compute_tangent_orientations()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_cgraph" id="anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,152,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="200,5,345,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_icgraph" id="anamespacecarma__wm_1_1geometry_a126f739493756f0eb84183ea22912b93_icgraph">
<area shape="rect" title=" " alt="" coords="1115,228,1261,284"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b" title="Compute an approximate orientation for the vehicle at each point along the provided centerline." alt="" coords="864,235,1067,277"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#a741942c16ca54212b9adf3ddc2eea66d" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="590,51,811,107"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#ad633c0c515eae2b1752ad96031e01ef8" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="594,175,807,231"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ae4ee772170429ec26c32ceec68f3c22f" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="585,265,816,335"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#ad80a802e059ba3e8a458eb53c0093a0b" title="Method converts a list of lanelet centerline points and current vehicle state into a usable list of t..." alt="" coords="611,377,790,433"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="295,5,502,61"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,5,212,61"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="315,85,482,141"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="311,165,487,221"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="260,245,537,301"/>
<area shape="rect" href="classstop__controlled__intersection__tactical__plugin_1_1StopControlledIntersectionTacticalPlugin.html#ab0bf4a699bff521ffe56736d78880926" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="297,326,500,397"/>
<area shape="rect" href="classstop__and__wait__plugin_1_1StopandWait.html#aacfe3c82e0d7cc47a27c67f7b9f4b83e" title="Service callback for trajectory planning." alt="" coords="292,421,505,462"/>
</map>
</div>

</div>
</div>
<a id="aeaa3d6346b083b5fd1b7c699fab5bb5a" name="aeaa3d6346b083b5fd1b7c699fab5bb5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa3d6346b083b5fd1b7c699fab5bb5a">&#9670;&nbsp;</a></span>computeCurvature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::computeCurvature </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>p2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>p3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for computing curvature from 3 points. </p>
<p >This function is a direct copy of the function by the same name found in the lanelet2_validation package which was not exposed for use The original function can be found here <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_validation/src/validators/CurvatureTooBig.cpp">https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_validation/src/validators/CurvatureTooBig.cpp</a> The source function is copyrighted under BSD 3-Clause "New" or "Revised" License a copy of that notice has been included with this package</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p1</td><td>The first point </td></tr>
    <tr><td class="paramname">p2</td><td>The second point </td></tr>
    <tr><td class="paramname">p3</td><td>The third point</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The computed curvature in 1/m units. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00276">276</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  278</span>{</div>
<div class="line"><span class="lineno">  279</span>  <span class="keyword">auto</span> dp = 0.5 * (p3 - p1);</div>
<div class="line"><span class="lineno">  280</span>  <span class="keyword">auto</span> ddp = p3 - 2.0 * p2 + p1;</div>
<div class="line"><span class="lineno">  281</span>  <span class="keyword">auto</span> denom = std::pow(dp.x() * dp.x() + dp.y() * dp.y(), 3.0 / 2.0);</div>
<div class="line"><span class="lineno">  282</span>  <span class="keywordflow">if</span> (std::fabs(denom) &lt; 1e-20)</div>
<div class="line"><span class="lineno">  283</span>  {</div>
<div class="line"><span class="lineno">  284</span>    denom = 1e-20;</div>
<div class="line"><span class="lineno">  285</span>  }</div>
<div class="line"><span class="lineno">  286</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>((ddp.y() * dp.x() - dp.y() * ddp.x()) / denom);</div>
<div class="line"><span class="lineno">  287</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb8e11194693e77d9be753dd84d15524" name="adb8e11194693e77d9be753dd84d15524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8e11194693e77d9be753dd84d15524">&#9670;&nbsp;</a></span>concatenate_lanelets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::BasicLineString2d carma_wm::geometry::concatenate_lanelets </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::ConstLanelet &gt; &amp;&#160;</td>
          <td class="paramname"><em>lanelets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to a list of lanelets together and return the result. Neither LineString is modified in this function. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00316">316</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>{</div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span> (lanelets.empty()) {</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> lanelet::BasicLineString2d();</div>
<div class="line"><span class="lineno">  320</span>  }</div>
<div class="line"><span class="lineno">  321</span>  lanelet::BasicLineString2d centerline_points = lanelets[0].centerline2d().basicLineString();</div>
<div class="line"><span class="lineno">  322</span>  lanelet::BasicLineString2d new_points;</div>
<div class="line"><span class="lineno">  323</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; lanelets.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><span class="lineno">  324</span>    new_points = lanelets[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].centerline2d().basicLineString();</div>
<div class="line"><span class="lineno">  325</span>    centerline_points = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">concatenate_line_strings</a>(centerline_points, new_points);</div>
<div class="line"><span class="lineno">  326</span>  }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>  <span class="keywordflow">return</span> centerline_points;</div>
<div class="line"><span class="lineno">  329</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae7d5ca280140dce2bf7bcfb78bdfd55d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">carma_wm::geometry::concatenate_line_strings</a></div><div class="ttdeci">lanelet::BasicLineString2d concatenate_line_strings(const lanelet::BasicLineString2d &amp;l1, const lanelet::BasicLineString2d &amp;l2)</div><div class="ttdoc">Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00373">Geometry.cpp:373</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00373">concatenate_line_strings()</a>, and <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00368">local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_cgraph" id="anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_cgraph">
<area shape="rect" title="Helper function to a list of lanelets together and return the result. Neither LineString is modified ..." alt="" coords="5,13,156,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d" title="Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo..." alt="" coords="204,13,376,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="424,5,569,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_icgraph" id="anamespacecarma__wm_1_1geometry_adb8e11194693e77d9be753dd84d15524_icgraph">
<area shape="rect" title="Helper function to a list of lanelets together and return the result. Neither LineString is modified ..." alt="" coords="199,5,349,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,5,151,47"/>
</map>
</div>

</div>
</div>
<a id="ae7d5ca280140dce2bf7bcfb78bdfd55d" name="ae7d5ca280140dce2bf7bcfb78bdfd55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d5ca280140dce2bf7bcfb78bdfd55d">&#9670;&nbsp;</a></span>concatenate_line_strings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::BasicLineString2d carma_wm::geometry::concatenate_line_strings </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>l1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>l2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to concatenate 2 linestrings together and return the result. Neither LineString is modified in this function. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00373">373</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  375</span>{</div>
<div class="line"><span class="lineno">  376</span>  lanelet::BasicLineString2d out;</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>  <span class="keywordtype">int</span> start_offset = 0;</div>
<div class="line"><span class="lineno">  379</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.empty() &amp;&amp; !b.empty() &amp;&amp; <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a>(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.back(), b.front()) &lt; <a class="code hl_variable" href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">SPATIAL_EPSILON_M</a>) {</div>
<div class="line"><span class="lineno">  380</span>    start_offset = 1;</div>
<div class="line"><span class="lineno">  381</span>  }</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>  out.insert(out.end(), <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.begin(), <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.end());</div>
<div class="line"><span class="lineno">  384</span>  out.insert(out.end(), b.begin() + start_offset, b.end());</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  387</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a2d95e2615fd8cbd681414e997bb513aa"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">carma_wm::geometry::SPATIAL_EPSILON_M</a></div><div class="ttdeci">constexpr double SPATIAL_EPSILON_M</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00028">Geometry.cpp:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="pointer_8h_source.html#l01121">a</a>, <a class="el" href="Geometry_8cpp_source.html#l00504">compute_euclidean_distance()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00028">SPATIAL_EPSILON_M</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00316">concatenate_lanelets()</a>, and <a class="el" href="basic__autonomy_8cpp_source.html#l00068">basic_autonomy::waypoint_generation::create_lanefollow_geometry()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_cgraph" id="anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_cgraph">
<area shape="rect" title="Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo..." alt="" coords="5,13,177,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="225,5,371,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_icgraph" id="anamespacecarma__wm_1_1geometry_ae7d5ca280140dce2bf7bcfb78bdfd55d_icgraph">
<area shape="rect" title="Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo..." alt="" coords="1184,97,1356,138"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524" title="Helper function to a list of lanelets together and return the result. Neither LineString is modified ..." alt="" coords="963,61,1113,102"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#aa3500af9146c0d9c80cb1b4101be01e5" title="Converts a set of requested LANE_FOLLOWING maneuvers to point speed limit pairs." alt="" coords="940,125,1136,181"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="666,61,811,102"/>
<area shape="rect" href="namespacebasic__autonomy_1_1waypoint__generation.html#acdcd3bb44d31aa6405b30f151ea35ae4" title="Creates geometry profile to return a point speed pair struct for LANE FOLLOW and LANE CHANGE maneuver..." alt="" coords="643,125,834,181"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#afee417a4310729540055e6c6f35eeccf" title="Creates geometry profile to return a point speed pair struct for INTERSECTION_TRANSIT maneuver types ..." alt="" coords="585,205,892,261"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a5f0c14a409d58d6b1750c38c6bf1b34a" title="Creates a vector of Trajectory Points from maneuver information in trajectory request." alt="" coords="295,5,502,61"/>
<area shape="rect" href="classinlanecruising__plugin_1_1InLaneCruisingPlugin.html#a60f695c3ed54c99c6a2dcfaf77ae55e2" title="Service callback for trajectory planning." alt="" coords="315,85,482,141"/>
<area shape="rect" href="classplatooning__tactical__plugin_1_1PlatooningTacticalPlugin.html#aee3afe082ccd5ab937dbb1c49f9e21ff" title="Service callback for trajectory planning." alt="" coords="311,165,487,221"/>
<area shape="rect" href="classcooperative__lanechange_1_1CooperativeLaneChangePlugin.html#a8913539d8614e509910af225e18bc809" title="Extending class provided callback which should return a planned trajectory based on the provided traj..." alt="" coords="5,5,212,61"/>
<area shape="rect" href="classlight__controlled__intersection__tactical__plugin_1_1LightControlledIntersectionTacticalPlugin.html#a124f95825dfb2728fefa245e6a0e1db7" title="Function to process the light controlled intersection tactical plugin service call for trajectory pla..." alt="" coords="260,245,537,301"/>
</map>
</div>

</div>
</div>
<a id="abab7ba4e773f03d6cfc09492742c6b7b" name="abab7ba4e773f03d6cfc09492742c6b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab7ba4e773f03d6cfc09492742c6b7b">&#9670;&nbsp;</a></span>getAngleBetweenVectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::getAngleBetweenVectors </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>vec1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>vec2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the angle between two vectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vec1</td><td>the first vector </td></tr>
    <tr><td class="paramname">vec2</td><td>the second vector</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The angle in rad between the two vectors </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00065">65</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>{</div>
<div class="line"><span class="lineno">   67</span>  <span class="keywordtype">double</span> vec1Mag = vec1.norm();</div>
<div class="line"><span class="lineno">   68</span>  <span class="keywordtype">double</span> vec2Mag = vec2.norm();</div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">if</span> (vec1Mag == 0.0 || vec2Mag == 0.0)</div>
<div class="line"><span class="lineno">   70</span>  {</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   72</span>  }</div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">safeAcos</a>(vec1.dot(vec2) / (vec1Mag * vec2Mag));</div>
<div class="line"><span class="lineno">   74</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a50c966bd5e6ed00ea0b1a70e93cd0d4a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">carma_wm::geometry::safeAcos</a></div><div class="ttdeci">double safeAcos(double x)</div><div class="ttdoc">acos method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to preve...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00034">Geometry.cpp:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00034">safeAcos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="WorldModelUtils_8cpp_source.html#l00117">carma_wm::query::getAffectedLaneletOrAreas()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00076">trackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_cgraph" id="anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_cgraph">
<area shape="rect" title="Calculates the angle between two vectors." alt="" coords="5,5,180,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="228,5,373,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_icgraph" id="anamespacecarma__wm_1_1geometry_abab7ba4e773f03d6cfc09492742c6b7b_icgraph">
<area shape="rect" title="Calculates the angle between two vectors." alt="" coords="1343,71,1517,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="1100,37,1295,79"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a05616ac1d3b4773665beb74bd495af2c" title="Return the track position of a point relative to a line segment defined by two other points...." alt="" coords="1125,103,1270,144"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="833,5,1052,47"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a1327952ca44a5e817b0498f93f6143ac" title="Gets the affected lanelet or areas based on the points in local frame." alt="" coords="837,71,1048,112"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="523,5,785,47"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#af0e373523dc84a409331d01b62d2fce0" title="Fills geofence object from TrafficControlMessageV01 ROS Msg." alt="" coords="549,71,759,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a649174a7a7270df95532cad5131bf4cb" title="Adds a geofence to the current map and publishes the ROS msg." alt="" coords="264,71,475,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a95cb7c60682d7b455a8624534ad94706" title="Constructor." alt="" coords="5,71,216,112"/>
</map>
</div>

</div>
</div>
<a id="aec227caee1708506f7fec3561538ef38" name="aec227caee1708506f7fec3561538ef38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec227caee1708506f7fec3561538ef38">&#9670;&nbsp;</a></span>local_circular_arc_curvatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::local_circular_arc_curvatures </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>lookahead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the curvature of each point in the provided list by calling circular_arc_curvature using that point and the point at index current point index + lookahead. In this way the curvature of a path is effectively low pass filtered by the size of the lookahead value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">points</td><td>The points to compute the curvature for </td></tr>
    <tr><td class="paramname">lookahead</td><td>The lookahead index distance to use for computing the curvature at each point</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of computed curvatures that has size equal to points.size() </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00610">610</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  610</span>                                                                                                             {</div>
<div class="line"><span class="lineno">  611</span>  std::vector&lt;double&gt; curvatures;</div>
<div class="line"><span class="lineno">  612</span>  curvatures.reserve(points.size());</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>  <span class="keywordflow">if</span> (lookahead &lt;= 0) {</div>
<div class="line"><span class="lineno">  615</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;local_circular_arc_curvatures lookahead must be greater than 0&quot;</span>);</div>
<div class="line"><span class="lineno">  616</span>  }</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>  <span class="keywordflow">if</span> (points.empty()) {</div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><span class="lineno">  620</span>  }</div>
<div class="line"><span class="lineno">  621</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (points.size() == 1) {</div>
<div class="line"><span class="lineno">  622</span>    curvatures.push_back(0.0);</div>
<div class="line"><span class="lineno">  623</span>    <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><span class="lineno">  624</span>  }</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; points.size() - 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><span class="lineno">  627</span>  {</div>
<div class="line"><span class="lineno">  628</span>    <span class="keywordtype">size_t</span> next_point_index = <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + lookahead;</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">if</span> (next_point_index &gt;= points.size()) {</div>
<div class="line"><span class="lineno">  630</span>      next_point_index = points.size() - 1;</div>
<div class="line"><span class="lineno">  631</span>    }</div>
<div class="line"><span class="lineno">  632</span>    <span class="keywordtype">double</span> cur = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">circular_arc_curvature</a>(points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>], points[next_point_index]);</div>
<div class="line"><span class="lineno">  633</span>    curvatures.push_back(fabs(cur));</div>
<div class="line"><span class="lineno">  634</span>  }</div>
<div class="line"><span class="lineno">  635</span>  curvatures.push_back(curvatures.back());</div>
<div class="line"><span class="lineno">  636</span>  <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><span class="lineno">  637</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a906a93ecedb3430179178f7b44d0b2e8"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">carma_wm::geometry::circular_arc_curvature</a></div><div class="ttdeci">double circular_arc_curvature(const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</div><div class="ttdoc">Computes the curvature of a circular arc that passes through the two provided points....</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00596">Geometry.cpp:596</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00596">circular_arc_curvature()</a>, and <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aec227caee1708506f7fec3561538ef38_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aec227caee1708506f7fec3561538ef38_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aec227caee1708506f7fec3561538ef38_cgraph" id="anamespacecarma__wm_1_1geometry_aec227caee1708506f7fec3561538ef38_cgraph">
<area shape="rect" title="Computes the curvature of each point in the provided list by calling circular_arc_curvature using tha..." alt="" coords="5,5,151,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8" title="Computes the curvature of a circular arc that passes through the two provided points...." alt="" coords="199,13,355,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4" title="Computes the 2d orientation of the vector from the provided start point to end point." alt="" coords="403,13,548,54"/>
</map>
</div>

</div>
</div>
<a id="a2bae0fef2b76bda05a8ba1f1382f027d" name="a2bae0fef2b76bda05a8ba1f1382f027d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bae0fef2b76bda05a8ba1f1382f027d">&#9670;&nbsp;</a></span>local_curvatures() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::local_curvatures </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>centerline_points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of local (computed by discrete derivative) curvatures for the input centerlines. The list of returned curvatures matches 1-to-1 with with list of points in the input centerlines. </p>
<p >The numerical accuracy of this method is greatly increased by using larger collections of points as inputs as the first 2 and final 2 points in the list must be computed using alternative differentiation methods from all the others resulting in greater error. It is also important for this function to yield useful results that all points in the input lanelet's centerline are actually on the centerline of the lanelet (i.e. none to minimal linear interpolation of points) as this results in "flat" spots on an otherwise smooth curve that causes 0 curvature to be computed.</p>
<p >NOTE: The accuracy of this method is very susceptable to input noise. Consider using local_circular_arc_curvatures for calculations using noisy data</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">centerline_points</td><td>The list of points to compute curvatures for</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If one of the provided lanelets cannot have its centerline computed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of continuous centerline segments and their respective curvatures </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00356">356</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  357</span>{</div>
<div class="line"><span class="lineno">  358</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a>(centerline_points);</div>
<div class="line"><span class="lineno">  359</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adebf4a245f31404e822133b23e061ed3"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">carma_wm::geometry::templated_local_curvatures</a></div><div class="ttdeci">std::vector&lt; double &gt; templated_local_curvatures(const std::vector&lt; P, A &gt; &amp;centerline_points)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00333">Geometry.cpp:333</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00368">local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_cgraph" id="anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_cgraph">
<area shape="rect" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="5,125,151,166"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="199,125,385,166"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d" title="Compute the arc length at each point around the curve." alt="" coords="449,17,601,58"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="433,89,616,130"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f" title="Compute the magnitude of each vector in the input list." alt="" coords="452,153,597,209"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c" title="Normalize the vectors in the input list such that their magnitudes = 1." alt="" coords="452,233,597,274"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="664,5,809,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="857,5,1003,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="664,85,809,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_icgraph" id="anamespacecarma__wm_1_1geometry_a2bae0fef2b76bda05a8ba1f1382f027d_icgraph">
<area shape="rect" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,5,151,47"/>
</map>
</div>

</div>
</div>
<a id="ab48da315ebfff807cc0b248261fc542a" name="ab48da315ebfff807cc0b248261fc542a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab48da315ebfff807cc0b248261fc542a">&#9670;&nbsp;</a></span>local_curvatures() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::local_curvatures </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>centerline_points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00362">362</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  363</span>{</div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a>(centerline_points);</div>
<div class="line"><span class="lineno">  365</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ab48da315ebfff807cc0b248261fc542a_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ab48da315ebfff807cc0b248261fc542a_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ab48da315ebfff807cc0b248261fc542a_cgraph" id="anamespacecarma__wm_1_1geometry_ab48da315ebfff807cc0b248261fc542a_cgraph">
<area shape="rect" title=" " alt="" coords="5,125,151,166"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="199,125,385,166"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d" title="Compute the arc length at each point around the curve." alt="" coords="449,17,601,58"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="433,89,616,130"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f" title="Compute the magnitude of each vector in the input list." alt="" coords="452,153,597,209"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c" title="Normalize the vectors in the input list such that their magnitudes = 1." alt="" coords="452,233,597,274"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="664,5,809,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="857,5,1003,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="664,85,809,141"/>
</map>
</div>

</div>
</div>
<a id="aafc2b19933ed189b32a03d8462e69d46" name="aafc2b19933ed189b32a03d8462e69d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc2b19933ed189b32a03d8462e69d46">&#9670;&nbsp;</a></span>local_curvatures() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::local_curvatures </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; lanelet::ConstLanelet &gt; &amp;&#160;</td>
          <td class="paramname"><em>lanelets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specialized overload of the centerline local_curvatures method but for lanelets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lanelets</td><td>The list of points to compute curvatures for</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If one of the provided lanelets cannot have its centerline computed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00368">368</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  368</span>                                                                 {</div>
<div class="line"><span class="lineno">  369</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a>(<a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">concatenate_lanelets</a>(lanelets));</div>
<div class="line"><span class="lineno">  370</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a2bae0fef2b76bda05a8ba1f1382f027d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">carma_wm::geometry::local_curvatures</a></div><div class="ttdeci">std::vector&lt; double &gt; local_curvatures(const lanelet::BasicLineString2d &amp;centerline_points)</div><div class="ttdoc">Returns a list of local (computed by discrete derivative) curvatures for the input centerlines....</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00356">Geometry.cpp:356</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adb8e11194693e77d9be753dd84d15524"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">carma_wm::geometry::concatenate_lanelets</a></div><div class="ttdeci">lanelet::BasicLineString2d concatenate_lanelets(const std::vector&lt; lanelet::ConstLanelet &gt; &amp;lanelets)</div><div class="ttdoc">Helper function to a list of lanelets together and return the result. Neither LineString is modified ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00316">Geometry.cpp:316</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00316">concatenate_lanelets()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00356">local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aafc2b19933ed189b32a03d8462e69d46_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aafc2b19933ed189b32a03d8462e69d46_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aafc2b19933ed189b32a03d8462e69d46_cgraph" id="anamespacecarma__wm_1_1geometry_aafc2b19933ed189b32a03d8462e69d46_cgraph">
<area shape="rect" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,78,151,119"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524" title="Helper function to a list of lanelets together and return the result. Neither LineString is modified ..." alt="" coords="199,45,349,86"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="201,110,347,151"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d" title="Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo..." alt="" coords="405,13,577,54"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="1056,5,1201,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="397,110,584,151"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d" title="Compute the arc length at each point around the curve." alt="" coords="647,45,799,86"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="632,110,815,151"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f" title="Compute the magnitude of each vector in the input list." alt="" coords="651,175,796,231"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c" title="Normalize the vectors in the input list such that their magnitudes = 1." alt="" coords="651,254,796,295"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="863,37,1008,93"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="863,117,1008,173"/>
</map>
</div>

</div>
</div>
<a id="ab675b2b8862a2ba9c139a8b5b353b846" name="ab675b2b8862a2ba9c139a8b5b353b846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab675b2b8862a2ba9c139a8b5b353b846">&#9670;&nbsp;</a></span>matchSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, lanelet::BasicSegment2d &gt; carma_wm::geometry::matchSegment </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicLineString2d &amp;&#160;</td>
          <td class="paramname"><em>line_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the provided point along the linestring and the segment of the line string which the provided point should be considered in. </p>
<p >This function iterates over the provided linestring from front to back. First the nearest vertex point on the linestring to the external point is found Once the nearest point has been found next step is to determine which segment it should go with using the following rules. If the minimum point is the first point then use the first segment If the minimum point is the last point then use the last segment If the minimum point is within the downtrack bounds of one segment but not the other then use the one it is within If the minimum point is within the downtrack bounds of both segments then use the one with the smallest crosstrack distance If the minimum point is within the downtrack bounds of both segments and has exactly equal crosstrack bounds with each segment then use the first one</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>The 2d point to match with a segment </td></tr>
    <tr><td class="paramname">line_string</td><td>The line_string to match against</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if line string contains only one point</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An std::tuple where the first element is the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the point and the second element is the matched segment </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00187">187</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  189</span>{</div>
<div class="line"><span class="lineno">  190</span>  <span class="keywordflow">if</span> (line_string.size() &lt; 2)</div>
<div class="line"><span class="lineno">  191</span>  {</div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided with linestring containing fewer than 2 points&quot;</span>);</div>
<div class="line"><span class="lineno">  193</span>  }</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>  lanelet::BasicSegment2d best_segment =</div>
<div class="line"><span class="lineno">  196</span>      std::make_pair(line_string[0], line_string[1]);  <span class="comment">// Default to starting segment if no match is found</span></div>
<div class="line"><span class="lineno">  197</span>  <span class="keyword">auto</span> point_2d = lanelet::utils::to2D(p);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>  <span class="keywordtype">double</span> min_distance = lanelet::geometry::distance2d(point_2d, line_string[0]);</div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordtype">size_t</span> best_point_index = 0;</div>
<div class="line"><span class="lineno">  201</span>  <span class="keywordtype">double</span> best_accumulated_length = 0;</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordtype">double</span> best_last_accumulated_length = 0;</div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordtype">double</span> best_seg_length = 0;</div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordtype">double</span> best_last_seg_length = 0;</div>
<div class="line"><span class="lineno">  205</span>  <span class="keywordtype">double</span> last_seg_length = 0;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <span class="keywordtype">double</span> accumulated_length = 0;</div>
<div class="line"><span class="lineno">  208</span>  <span class="keywordtype">double</span> last_accumulated_length = 0;</div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; line_string.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><span class="lineno">  210</span>  {  <span class="comment">// Iterate over line string to find nearest point</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordtype">double</span> seg_length = 0;</div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; line_string.size() - 1)</div>
<div class="line"><span class="lineno">  213</span>    {</div>
<div class="line"><span class="lineno">  214</span>      seg_length = lanelet::geometry::distance2d(line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>], line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1]);  <span class="comment">// Compute segment length</span></div>
<div class="line"><span class="lineno">  215</span>    }</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordtype">double</span> distance = lanelet::geometry::distance2d(p, line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);  <span class="comment">// Compute from current point to external point</span></div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span> (distance &lt; min_distance)</div>
<div class="line"><span class="lineno">  219</span>    {  <span class="comment">// If this distance is below minimum discovered so far then update minimum</span></div>
<div class="line"><span class="lineno">  220</span>      min_distance = distance;</div>
<div class="line"><span class="lineno">  221</span>      best_point_index = <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>;</div>
<div class="line"><span class="lineno">  222</span>      best_accumulated_length = accumulated_length;</div>
<div class="line"><span class="lineno">  223</span>      best_last_accumulated_length = last_accumulated_length;  <span class="comment">// Record accumulated lengths to each segment</span></div>
<div class="line"><span class="lineno">  224</span>      best_seg_length = seg_length;</div>
<div class="line"><span class="lineno">  225</span>      best_last_seg_length = last_seg_length;</div>
<div class="line"><span class="lineno">  226</span>    }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    last_accumulated_length = accumulated_length;  <span class="comment">// Update accumulated lenths</span></div>
<div class="line"><span class="lineno">  229</span>    accumulated_length += seg_length;</div>
<div class="line"><span class="lineno">  230</span>    last_seg_length = seg_length;</div>
<div class="line"><span class="lineno">  231</span>  }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>  <span class="comment">// Minimum point has been found next step is to determine which segment it should go with using the following rules.</span></div>
<div class="line"><span class="lineno">  234</span>  <span class="comment">// If the minimum point is the first point then use the first segment</span></div>
<div class="line"><span class="lineno">  235</span>  <span class="comment">// If the minimum point is the last point then use the last segment</span></div>
<div class="line"><span class="lineno">  236</span>  <span class="comment">// If the minimum point is within the downtrack bounds of one segment but not the other then use the one it is within</span></div>
<div class="line"><span class="lineno">  237</span>  <span class="comment">// If the minimum point is within the downtrack bounds of both segments then use the one with the smallest crosstrack</span></div>
<div class="line"><span class="lineno">  238</span>  <span class="comment">// distance If the minimum point is within the downtrack bounds of both segments and has exactly equal crosstrack</span></div>
<div class="line"><span class="lineno">  239</span>  <span class="comment">// bounds with each segment then use the first one</span></div>
<div class="line"><span class="lineno">  240</span>  TrackPos best_pos(0, 0);</div>
<div class="line"><span class="lineno">  241</span>  <span class="keywordflow">if</span> (best_point_index == 0)</div>
<div class="line"><span class="lineno">  242</span>  {</div>
<div class="line"><span class="lineno">  243</span>    best_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[0], line_string[1]);</div>
<div class="line"><span class="lineno">  244</span>    best_segment = std::make_pair(line_string[0], line_string[1]);</div>
<div class="line"><span class="lineno">  245</span>  }</div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (best_point_index == line_string.size() - 1)</div>
<div class="line"><span class="lineno">  247</span>  {</div>
<div class="line"><span class="lineno">  248</span>    best_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[line_string.size() - 2], line_string[line_string.size() - 1]);</div>
<div class="line"><span class="lineno">  249</span>    best_pos.downtrack += best_last_accumulated_length;</div>
<div class="line"><span class="lineno">  250</span>    best_segment = std::make_pair(line_string[line_string.size() - 2], line_string[line_string.size() - 1]);</div>
<div class="line"><span class="lineno">  251</span>  }</div>
<div class="line"><span class="lineno">  252</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  253</span>  {</div>
<div class="line"><span class="lineno">  254</span>    TrackPos first_seg_trackPos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[best_point_index - 1], line_string[best_point_index]);</div>
<div class="line"><span class="lineno">  255</span>    TrackPos second_seg_trackPos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[best_point_index], line_string[best_point_index + 1]);</div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">selectFirstSegment</a>(first_seg_trackPos, second_seg_trackPos, best_last_seg_length, best_seg_length))</div>
<div class="line"><span class="lineno">  257</span>    {</div>
<div class="line"><span class="lineno">  258</span>      best_pos = first_seg_trackPos;</div>
<div class="line"><span class="lineno">  259</span>      best_pos.downtrack += best_last_accumulated_length;</div>
<div class="line"><span class="lineno">  260</span>      best_segment = std::make_pair(line_string[best_point_index - 1], line_string[best_point_index]);</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  263</span>    {</div>
<div class="line"><span class="lineno">  264</span>      best_pos = second_seg_trackPos;</div>
<div class="line"><span class="lineno">  265</span>      best_pos.downtrack += best_accumulated_length;</div>
<div class="line"><span class="lineno">  266</span>      best_segment = std::make_pair(line_string[best_point_index], line_string[best_point_index + 1]);</div>
<div class="line"><span class="lineno">  267</span>    }</div>
<div class="line"><span class="lineno">  268</span>  }</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>  <span class="comment">// couldn&#39;t find a matching segment, so use the first segment within the downtrack range of.</span></div>
<div class="line"><span class="lineno">  271</span>  <span class="comment">// Or the starting segment assuming we are before the route</span></div>
<div class="line"><span class="lineno">  272</span>  <span class="keywordflow">return</span> std::make_tuple(best_pos, best_segment);</div>
<div class="line"><span class="lineno">  273</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae0a06818149f7430fee80e295ef04548"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">carma_wm::geometry::selectFirstSegment</a></div><div class="ttdeci">bool selectFirstSegment(const TrackPos &amp;first_seg_trackPos, const TrackPos &amp;second_seg_trackPos, double first_seg_length, double second_seg_length)</div><div class="ttdoc">Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00156">Geometry.cpp:156</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aebce986f21c117983313292d5e82b50a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a></div><div class="ttdeci">TrackPos trackPos(const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</div><div class="ttdoc">Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00120">Geometry.cpp:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="Geometry_8cpp_source.html#l00156">selectFirstSegment()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00120">trackPos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">carma_wm::CARMAWorldModel::routeTrackPos()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00120">trackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_cgraph" id="anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_cgraph">
<area shape="rect" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="5,71,151,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="199,71,344,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_icgraph" id="anamespacecarma__wm_1_1geometry_ab675b2b8862a2ba9c139a8b5b353b846_icgraph">
<area shape="rect" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="1812,267,1957,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a561bd30d0274bb605a7b7dd54b16b037" title="Returns the TrackPos, computed in 2d, of the provided point relative to the current route." alt="" coords="1361,5,1568,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="1619,267,1764,308"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c" title="Callback for the front bumper pose transform." alt="" coords="1370,71,1559,112"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b" title="composeRouteMarkerMsg is a function to generate route rviz markers" alt="" coords="1370,136,1559,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a35a706cbbb3b04dc4dfc3eea40ececcc" title="Returns the route distance (downtrack or crosstrack in meters) to the nearest active geofence lanelet..." alt="" coords="1359,201,1570,243"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="1367,267,1562,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="1361,332,1568,373"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9fb50939b2ae576d2eb7fcfc42fcdc22" title="Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This fu..." alt="" coords="1359,431,1571,472"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a264607b6ec5b20d8971f8dc14a4b1825" title="Split given lanelet&#39;s adjacent, OPPOSITE lanelet with same proportion as the given point&#39;s downtrack ..." alt="" coords="1096,528,1307,569"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a883734808f44db2778371ce3fbeecdd3" title="Split given lanelet with same proportion as the given points&#39; downtrack relative to the lanelet...." alt="" coords="1359,548,1570,589"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="1361,613,1568,655"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28" title="Spin callback which will be called frequently based on spin rate." alt="" coords="1107,5,1296,47"/>
<area shape="rect" href="classroute_1_1Route.html#a738074e042da30c623a1c0e80d019913" title=" " alt="" coords="845,5,980,47"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a" title="Set_active_route service callback. User can select a route to start following by calling this service..." alt="" coords="1107,71,1296,112"/>
<area shape="rect" href="classroute_1_1Route.html#a5f6b00da6b8e1cd9238b9d60457276c8" title=" " alt="" coords="845,71,980,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7c4ca5d0774ffa2aa06fbf0f979b02b0" title="Returns a message indicating whether or not the vehicle is inside of an active geofence lanelet." alt="" coords="1096,136,1307,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7269b37f5fcdbc502122c980fa814387" title=" " alt="" coords="807,136,1018,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcasterNode.html#ab0c14f6d7e30870755a4dcf6b228de82" title=" " alt="" coords="523,136,733,177"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="1092,201,1311,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a1327952ca44a5e817b0498f93f6143ac" title="Gets the affected lanelet or areas based on the points in local frame." alt="" coords="1096,267,1307,308"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="781,201,1044,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#af0e373523dc84a409331d01b62d2fce0" title="Fills geofence object from TrafficControlMessageV01 ROS Msg." alt="" coords="523,408,733,449"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a649174a7a7270df95532cad5131bf4cb" title="Adds a geofence to the current map and publishes the ROS msg." alt="" coords="264,465,475,507"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a95cb7c60682d7b455a8624534ad94706" title="Constructor." alt="" coords="5,465,216,507"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="1098,332,1305,373"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="1098,397,1305,439"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8566f612a10ecd787f2f18490648bed4" title="(non&#45;const version) Given the cartesian point on the map, tries to get the opposite direction lanelet..." alt="" coords="1095,463,1307,504"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a12708b289f7f3d8f10c6dc749bf14d65" title="Create workzone geofence. Create diagonal lanelets and a lanelet that houses opposing lane&#39;s trafficl..." alt="" coords="807,521,1018,563"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a5ae3f2086831ebd932e19b2bdfd76405" title="Creates a single workzone geofence (in the vector) that includes all additional lanelets (housing tra..." alt="" coords="523,521,733,563"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#adc221f65f0b99586fc8c2ffc97c5feea" title="Preprocess for workzone area. Parallel_llts will have front_parallel and back_parallel lanelets that ..." alt="" coords="807,587,1018,628"/>
</map>
</div>

</div>
</div>
<a id="a56bddbee1116988543192b2f235a692c" name="a56bddbee1116988543192b2f235a692c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56bddbee1116988543192b2f235a692c">&#9670;&nbsp;</a></span>normalize_vectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Eigen::Vector2d &gt; carma_wm::geometry::normalize_vectors </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; Eigen::Vector2d &gt; &amp;&#160;</td>
          <td class="paramname"><em>vectors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalize the vectors in the input list such that their magnitudes = 1. </p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00510">510</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  511</span>{</div>
<div class="line"><span class="lineno">  512</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><span class="lineno">  513</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> vec : vectors) {</div>
<div class="line"><span class="lineno">  514</span>    out.push_back(vec.normalized());</div>
<div class="line"><span class="lineno">  515</span>  }</div>
<div class="line"><span class="lineno">  516</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><span class="lineno">  517</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00333">templated_local_curvatures()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a56bddbee1116988543192b2f235a692c_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a56bddbee1116988543192b2f235a692c_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a56bddbee1116988543192b2f235a692c_icgraph" id="anamespacecarma__wm_1_1geometry_a56bddbee1116988543192b2f235a692c_icgraph">
<area shape="rect" title="Normalize the vectors in the input list such that their magnitudes = 1." alt="" coords="627,5,772,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3" title=" " alt="" coords="392,5,579,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,5,151,47"/>
</map>
</div>

</div>
</div>
<a id="a1f7db96beb74c526d4b502265e7c1e82" name="a1f7db96beb74c526d4b502265e7c1e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7db96beb74c526d4b502265e7c1e82">&#9670;&nbsp;</a></span>objectToMapPolygon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::BasicPolygon2d carma_wm::geometry::objectToMapPolygon </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::Pose &amp;&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Vector3 &amp;&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of that object would be if viewed from the same frame as the pose is defined relative to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>the pose of an external object </td></tr>
    <tr><td class="paramname">size</td><td>The size vector of an external object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A polygon of 4 points describing the object aligned bounds starting with the upper left point in the object frame and moving clockwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00289">289</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>  tf2::Transform object_tf;</div>
<div class="line"><span class="lineno">  292</span>  tf2::fromMsg(pose, object_tf);</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>  <span class="keywordtype">double</span> half_x_bound = size.x / 2;</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordtype">double</span> half_y_bound = size.y / 2;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>  <span class="comment">// 4 corners of the object starting with upper left and moving in clockwise direction in pose frame</span></div>
<div class="line"><span class="lineno">  298</span>  tf2::Vector3 obj_p1(half_x_bound, half_y_bound, 0);</div>
<div class="line"><span class="lineno">  299</span>  tf2::Vector3 obj_p2(half_x_bound, -half_y_bound, 0);</div>
<div class="line"><span class="lineno">  300</span>  tf2::Vector3 obj_p3(-half_x_bound, -half_y_bound, 0);</div>
<div class="line"><span class="lineno">  301</span>  tf2::Vector3 obj_p4(-half_x_bound, half_y_bound, 0);</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>  tf2::Vector3 obj_p1_map = object_tf * obj_p1;</div>
<div class="line"><span class="lineno">  304</span>  tf2::Vector3 obj_p2_map = object_tf * obj_p2;</div>
<div class="line"><span class="lineno">  305</span>  tf2::Vector3 obj_p3_map = object_tf * obj_p3;</div>
<div class="line"><span class="lineno">  306</span>  tf2::Vector3 obj_p4_map = object_tf * obj_p4;</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>  lanelet::BasicPoint2d p1(obj_p1_map.getX(), obj_p1_map.getY());</div>
<div class="line"><span class="lineno">  309</span>  lanelet::BasicPoint2d p2(obj_p2_map.getX(), obj_p2_map.getY());</div>
<div class="line"><span class="lineno">  310</span>  lanelet::BasicPoint2d p3(obj_p3_map.getX(), obj_p3_map.getY());</div>
<div class="line"><span class="lineno">  311</span>  lanelet::BasicPoint2d p4(obj_p4_map.getX(), obj_p4_map.getY());</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>  <span class="keywordflow">return</span> { p1, p2, p3, p4 };</div>
<div class="line"><span class="lineno">  314</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00950">carma_wm::CARMAWorldModel::distToNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">carma_wm::CARMAWorldModel::getInLaneObjects()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00927">carma_wm::CARMAWorldModel::getIntersectingLanelet()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00794">carma_wm::CARMAWorldModel::toRoadwayObstacle()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a1f7db96beb74c526d4b502265e7c1e82_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a1f7db96beb74c526d4b502265e7c1e82_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a1f7db96beb74c526d4b502265e7c1e82_icgraph" id="anamespacecarma__wm_1_1geometry_a1f7db96beb74c526d4b502265e7c1e82_icgraph">
<area shape="rect" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="769,97,919,139"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a131c9d5adca779c9efd7601f1dcfef5b" title="Gets Cartesian distance to the closest object on the same lane as the given point." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="515,64,721,105"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808" title="Gets the a lanelet the object is currently on determined by its position on the semantic map...." alt="" coords="515,129,721,171"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="260,161,467,203"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,71,467,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="5,39,212,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="5,104,212,145"/>
</map>
</div>

</div>
</div>
<a id="a6f156f9d93ac8bd84fa6663b1efa5db4" name="a6f156f9d93ac8bd84fa6663b1efa5db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f156f9d93ac8bd84fa6663b1efa5db4">&#9670;&nbsp;</a></span>point_to_point_yaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::point_to_point_yaw </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>cur_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>next_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the 2d orientation of the vector from the provided start point to end point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur_point</td><td>The start point of the orientation vector. Units m </td></tr>
    <tr><td class="paramname">next_point</td><td>The end point of the orientation vector. Units m</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The rotation of the vector around the +Z axis in radians </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00588">588</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  589</span>{</div>
<div class="line"><span class="lineno">  590</span>  <span class="keywordtype">double</span> dx = next_point[0] - cur_point[0];</div>
<div class="line"><span class="lineno">  591</span>  <span class="keywordtype">double</span> dy = next_point[1] - cur_point[1];</div>
<div class="line"><span class="lineno">  592</span>  <span class="keywordtype">double</span> yaw = atan2(dy, dx);</div>
<div class="line"><span class="lineno">  593</span>  <span class="keywordflow">return</span> yaw;</div>
<div class="line"><span class="lineno">  594</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00596">circular_arc_curvature()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">carma_wm::CARMAWorldModel::pointFromRouteTrackPos()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a6f156f9d93ac8bd84fa6663b1efa5db4_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a6f156f9d93ac8bd84fa6663b1efa5db4_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a6f156f9d93ac8bd84fa6663b1efa5db4_icgraph" id="anamespacecarma__wm_1_1geometry_a6f156f9d93ac8bd84fa6663b1efa5db4_icgraph">
<area shape="rect" title="Computes the 2d orientation of the vector from the provided start point to end point." alt="" coords="515,50,660,91"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8" title="Computes the curvature of a circular arc that passes through the two provided points...." alt="" coords="285,15,441,57"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087" title="Converts a route track position into a map frame cartesian point." alt="" coords="260,82,467,123"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38" title="Computes the curvature of each point in the provided list by calling circular_arc_curvature using tha..." alt="" coords="36,5,181,61"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#af091e77668f082aaafea367836118dc9" title="Samples the route centerline between the provided downtracks with the provided step size...." alt="" coords="5,85,212,126"/>
</map>
</div>

</div>
</div>
<a id="a33b80c2f327d0293d7bdb9b4503a1cd5" name="a33b80c2f327d0293d7bdb9b4503a1cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33b80c2f327d0293d7bdb9b4503a1cd5">&#9670;&nbsp;</a></span>rpyFromQuaternion() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::geometry::rpyFromQuaternion </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::Quaternion &amp;&#160;</td>
          <td class="paramname"><em>q_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>roll</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract extrinsic roll-pitch-yaw from quaternion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The quaternion message to convert </td></tr>
    <tr><td class="paramname">roll</td><td>The output variable for roll units will be radians </td></tr>
    <tr><td class="paramname">pitch</td><td>The output variable for pitch units will be radians </td></tr>
    <tr><td class="paramname">yaw</td><td>The output variable for yaw units will be radians </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00058">58</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span>  tf2::Quaternion quat;</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="namespacemotion__computation_1_1conversion.html#a9884e63460f3d5f5e2b755354984dc29">tf2::convert</a>(q_msg, quat);</div>
<div class="line"><span class="lineno">   62</span>  <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">rpyFromQuaternion</a>(quat, roll, pitch, yaw);</div>
<div class="line"><span class="lineno">   63</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a31ddfa96008060a7c10c2bbd08a5739d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">carma_wm::geometry::rpyFromQuaternion</a></div><div class="ttdeci">void rpyFromQuaternion(const tf2::Quaternion &amp;q, double &amp;roll, double &amp;pitch, double &amp;yaw)</div><div class="ttdoc">Extract extrinsic roll-pitch-yaw from quaternion.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00052">Geometry.cpp:52</a></div></div>
<div class="ttc" id="anamespacemotion__computation_1_1conversion_html_a9884e63460f3d5f5e2b755354984dc29"><div class="ttname"><a href="namespacemotion__computation_1_1conversion.html#a9884e63460f3d5f5e2b755354984dc29">motion_computation::conversion::convert</a></div><div class="ttdeci">void convert(const carma_v2x_msgs::msg::PSM &amp;in_msg, carma_perception_msgs::msg::ExternalObject &amp;out_msg, const std::string &amp;map_frame_id, double pred_period, double pred_step_size, const lanelet::projection::LocalFrameProjector &amp;map_projector, const tf2::Quaternion &amp;ned_in_map_rotation, rclcpp::node_interfaces::NodeClockInterface::SharedPtr node_clock)</div><div class="ttdef"><b>Definition:</b> <a href="psm__to__external__object__convertor_8cpp_source.html#l00038">psm_to_external_object_convertor.cpp:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="psm__to__external__object__convertor_8cpp_source.html#l00038">motion_computation::conversion::convert()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00052">rpyFromQuaternion()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a33b80c2f327d0293d7bdb9b4503a1cd5_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a33b80c2f327d0293d7bdb9b4503a1cd5_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a33b80c2f327d0293d7bdb9b4503a1cd5_cgraph" id="anamespacecarma__wm_1_1geometry_a33b80c2f327d0293d7bdb9b4503a1cd5_cgraph">
<area shape="rect" title="Extract extrinsic roll&#45;pitch&#45;yaw from quaternion." alt="" coords="5,206,151,247"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion.html#a9884e63460f3d5f5e2b755354984dc29" title=" " alt="" coords="201,173,341,214"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d" title="Extract extrinsic roll&#45;pitch&#45;yaw from quaternion." alt="" coords="199,238,344,279"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion_1_1impl.html#adcf6c7b8fa415af10c0cc489388fce40" title=" " alt="" coords="437,5,577,61"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion_1_1impl.html#a50c675cb23fd3a743226b22287b32945" title=" " alt="" coords="438,85,577,141"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion_1_1impl.html#a7cf9dd84c4528278ce20562def3047c3" title=" " alt="" coords="392,165,623,221"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion_1_1impl.html#ae5e3a18881b54fc666c13199ea6c7073" title=" " alt="" coords="423,245,592,301"/>
<area shape="rect" href="namespacemotion__computation_1_1conversion_1_1impl.html#a48389a44ecd9e272dbbcdebea32601fb" title=" " alt="" coords="411,325,603,381"/>
<area shape="rect" href="namespacecovariance__helper.html#af38530465ec3a2a40b4e9be14032f65e" title="Transform the covariance matrix of a PoseWithCovariance message to a new frame." alt="" coords="671,93,813,134"/>
</map>
</div>

</div>
</div>
<a id="a31ddfa96008060a7c10c2bbd08a5739d" name="a31ddfa96008060a7c10c2bbd08a5739d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31ddfa96008060a7c10c2bbd08a5739d">&#9670;&nbsp;</a></span>rpyFromQuaternion() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::geometry::rpyFromQuaternion </td>
          <td>(</td>
          <td class="paramtype">const tf2::Quaternion &amp;&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>roll</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>yaw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract extrinsic roll-pitch-yaw from quaternion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The quaternion to convert </td></tr>
    <tr><td class="paramname">roll</td><td>The output variable for roll units will be radians </td></tr>
    <tr><td class="paramname">pitch</td><td>The output variable for pitch units will be radians </td></tr>
    <tr><td class="paramname">yaw</td><td>The output variable for yaw units will be radians </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00052">52</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{</div>
<div class="line"><span class="lineno">   54</span>  tf2::Matrix3x3 mat(q);</div>
<div class="line"><span class="lineno">   55</span>  mat.getRPY(roll, pitch, yaw);</div>
<div class="line"><span class="lineno">   56</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="plan__delegator_8cpp_source.html#l00414">plan_delegator::PlanDelegator::composePlanTrajectoryRequest()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00058">rpyFromQuaternion()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a31ddfa96008060a7c10c2bbd08a5739d_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a31ddfa96008060a7c10c2bbd08a5739d_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a31ddfa96008060a7c10c2bbd08a5739d_icgraph" id="anamespacecarma__wm_1_1geometry_a31ddfa96008060a7c10c2bbd08a5739d_icgraph">
<area shape="rect" title="Extract extrinsic roll&#45;pitch&#45;yaw from quaternion." alt="" coords="989,39,1135,80"/>
<area shape="rect" href="classplan__delegator_1_1PlanDelegator.html#a3e82a12902dd3a6c2db17f3012d39574" title="Generate new PlanTrajecory service request based on current planning progress." alt="" coords="729,5,941,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a33b80c2f327d0293d7bdb9b4503a1cd5" title="Extract extrinsic roll&#45;pitch&#45;yaw from quaternion." alt="" coords="763,71,908,112"/>
<area shape="rect" href="classplan__delegator_1_1PlanDelegator.html#a0babf1d5408fbfec9390821497935d1c" title="Plan trajectory based on latest maneuver plan via ROS service call to plugins." alt="" coords="488,5,681,47"/>
<area shape="rect" href="classplan__delegator_1_1PlanDelegator.html#a00a1a0c219bb3ba739e0cf7603105e75" title="Callback function for triggering trajectory planning." alt="" coords="247,5,440,47"/>
<area shape="rect" href="classplan__delegator_1_1PlanDelegator.html#a2048a07d71d63108e83eb7fb5c7ca475" title=" " alt="" coords="5,5,199,47"/>
</map>
</div>

</div>
</div>
<a id="a50c966bd5e6ed00ea0b1a70e93cd0d4a" name="a50c966bd5e6ed00ea0b1a70e93cd0d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c966bd5e6ed00ea0b1a70e93cd0d4a">&#9670;&nbsp;</a></span>safeAcos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::safeAcos </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>acos method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to prevent issues with floating point approximations. The user should still make sure the input data is expected to be within the [-1, 1] range for this method to give accurate results. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The angle in radians</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The arc cosine of x </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00034">34</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>{</div>
<div class="line"><span class="lineno">   36</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &lt; -1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = -1.0 ;</div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &gt; 1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = 1.0 ;</div>
<div class="line"><span class="lineno">   38</span>  <span class="keywordflow">return</span> std::acos(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>) ;</div>
<div class="line"><span class="lineno">   39</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__traj__logs_8py_source.html#l00128">process_traj_logs::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00065">getAngleBetweenVectors()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a50c966bd5e6ed00ea0b1a70e93cd0d4a_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a50c966bd5e6ed00ea0b1a70e93cd0d4a_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a50c966bd5e6ed00ea0b1a70e93cd0d4a_icgraph" id="anamespacecarma__wm_1_1geometry_a50c966bd5e6ed00ea0b1a70e93cd0d4a_icgraph">
<area shape="rect" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="1565,71,1711,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="1343,71,1517,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="1100,37,1295,79"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a05616ac1d3b4773665beb74bd495af2c" title="Return the track position of a point relative to a line segment defined by two other points...." alt="" coords="1125,103,1270,144"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="833,5,1052,47"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a1327952ca44a5e817b0498f93f6143ac" title="Gets the affected lanelet or areas based on the points in local frame." alt="" coords="837,71,1048,112"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="523,5,785,47"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#af0e373523dc84a409331d01b62d2fce0" title="Fills geofence object from TrafficControlMessageV01 ROS Msg." alt="" coords="549,71,759,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a649174a7a7270df95532cad5131bf4cb" title="Adds a geofence to the current map and publishes the ROS msg." alt="" coords="264,71,475,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a95cb7c60682d7b455a8624534ad94706" title="Constructor." alt="" coords="5,71,216,112"/>
</map>
</div>

</div>
</div>
<a id="abab233f090920664b21fafd83065a77b" name="abab233f090920664b21fafd83065a77b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab233f090920664b21fafd83065a77b">&#9670;&nbsp;</a></span>safeAsin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::geometry::safeAsin </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>asin method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to prevent issues with floating point approximations. The user should still make sure the input data is expected to be within the [-1, 1] range for this method to give accurate results. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The angle in radians</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The arc sine of x </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00045">45</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>{</div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &lt; -1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = -1.0 ;</div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &gt; 1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = 1.0 ;</div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordflow">return</span> std::asin(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>) ;</div>
<div class="line"><span class="lineno">   50</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="process__traj__logs_8py_source.html#l00128">process_traj_logs::x</a>.</p>

</div>
</div>
<a id="ae0a06818149f7430fee80e295ef04548" name="ae0a06818149f7430fee80e295ef04548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a06818149f7430fee80e295ef04548">&#9670;&nbsp;</a></span>selectFirstSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> carma_wm::geometry::selectFirstSegment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;&#160;</td>
          <td class="paramname"><em>first_seg_trackPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;&#160;</td>
          <td class="paramname"><em>second_seg_trackPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>first_seg_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>second_seg_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to identify whether to select the preceeding or succeeding segment of a linstring point that is nearest an external point when trying to find the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the external point. Of the 3 points comprising the 2 segment linestirng the external point must be closest to the midpoint for this function to be valid. </p>
<p >ASSUMPTION: Of the 3 points comprising the 2 segment linestirng the external point is closest to the midpoint</p>
<p >Meant to be called in the matchSegment method. Logic is as follows If the external point is within the downtrack bounds of one segment but not the other then use the one it is within If the external point is within the downtrack bounds of both segments then use the one with the smallest crosstrack distance If the external point is within the downtrack bounds of both segments and has exactly equal crosstrack bounds with each segment then use the preceeding segment If the external point is outside the downtrack bounds of both segments then assign to the first segment as it will always have positive downtrack in this case while the second segment will always have negative downtrack</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first_seg_trackPos</td><td>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the external point relative to the preceeding segment </td></tr>
    <tr><td class="paramname">second_seg_trackPos</td><td>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the succeeding segment </td></tr>
    <tr><td class="paramname">first_seg_length</td><td>The length of the preceeding segment </td></tr>
    <tr><td class="paramname">second_seg_length</td><td>The length of the succeeding segment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the preceeding segment is the better choice. False if the succeeding segment is the better choice. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00156">156</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>{</div>
<div class="line"><span class="lineno">  159</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> first_seg_in_downtrack =</div>
<div class="line"><span class="lineno">  160</span>      (0 &lt;= first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &amp;&amp; first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &lt; first_seg_length);</div>
<div class="line"><span class="lineno">  161</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> second_seg_in_downtrack =</div>
<div class="line"><span class="lineno">  162</span>      (0 &lt;= second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &amp;&amp; second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &lt; second_seg_length);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordflow">if</span> (first_seg_in_downtrack &amp;&amp; !second_seg_in_downtrack)</div>
<div class="line"><span class="lineno">  165</span>  {  <span class="comment">// If in the first segment but not the last segment</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// First segment is better</span></div>
<div class="line"><span class="lineno">  168</span>  }</div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (second_seg_in_downtrack &amp;&amp; !first_seg_in_downtrack)</div>
<div class="line"><span class="lineno">  170</span>  {</div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Second segment is better</span></div>
<div class="line"><span class="lineno">  172</span>  }</div>
<div class="line"><span class="lineno">  173</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (first_seg_in_downtrack &amp;&amp; second_seg_in_downtrack)</div>
<div class="line"><span class="lineno">  174</span>  {</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">return</span> first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a> &lt;=</div>
<div class="line"><span class="lineno">  176</span>           second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>;  <span class="comment">// Pick the first segment if the crosstrack values are equal or the first</span></div>
<div class="line"><span class="lineno">  177</span>                                            <span class="comment">// segment is closer</span></div>
<div class="line"><span class="lineno">  178</span>  }</div>
<div class="line"><span class="lineno">  179</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  180</span>  {  <span class="comment">// Point lies outside the downtrack bounds of both segments (Remember According to function contract the nearest</span></div>
<div class="line"><span class="lineno">  181</span>     <span class="comment">// point to external point is the midpoint of the two segments)</span></div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Choose first segment as it will always have positive downtrack in this case while the second</span></div>
<div class="line"><span class="lineno">  183</span>                  <span class="comment">// segment will always have negative downtrack</span></div>
<div class="line"><span class="lineno">  184</span>  }</div>
<div class="line"><span class="lineno">  185</span>}</div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a60c766fa11f68e1d8832d79cd2d292c2"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">carma_wm::TrackPos::crosstrack</a></div><div class="ttdeci">double crosstrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00038">TrackPos.hpp:38</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a6ea99bbb9c6a75685ceaaf370d58ea24"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">carma_wm::TrackPos::downtrack</a></div><div class="ttdeci">double downtrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00037">TrackPos.hpp:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00038">carma_wm::TrackPos::crosstrack</a>, and <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00187">matchSegment()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_ae0a06818149f7430fee80e295ef04548_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_ae0a06818149f7430fee80e295ef04548_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_ae0a06818149f7430fee80e295ef04548_icgraph" id="anamespacecarma__wm_1_1geometry_ae0a06818149f7430fee80e295ef04548_icgraph">
<area shape="rect" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="2005,267,2151,308"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="1812,267,1957,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a561bd30d0274bb605a7b7dd54b16b037" title="Returns the TrackPos, computed in 2d, of the provided point relative to the current route." alt="" coords="1361,5,1568,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="1619,267,1764,308"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c" title="Callback for the front bumper pose transform." alt="" coords="1370,71,1559,112"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b" title="composeRouteMarkerMsg is a function to generate route rviz markers" alt="" coords="1370,136,1559,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a35a706cbbb3b04dc4dfc3eea40ececcc" title="Returns the route distance (downtrack or crosstrack in meters) to the nearest active geofence lanelet..." alt="" coords="1359,201,1570,243"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="1367,267,1562,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="1361,332,1568,373"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9fb50939b2ae576d2eb7fcfc42fcdc22" title="Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This fu..." alt="" coords="1359,431,1571,472"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a264607b6ec5b20d8971f8dc14a4b1825" title="Split given lanelet&#39;s adjacent, OPPOSITE lanelet with same proportion as the given point&#39;s downtrack ..." alt="" coords="1096,528,1307,569"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a883734808f44db2778371ce3fbeecdd3" title="Split given lanelet with same proportion as the given points&#39; downtrack relative to the lanelet...." alt="" coords="1359,548,1570,589"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="1361,613,1568,655"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28" title="Spin callback which will be called frequently based on spin rate." alt="" coords="1107,5,1296,47"/>
<area shape="rect" href="classroute_1_1Route.html#a738074e042da30c623a1c0e80d019913" title=" " alt="" coords="845,5,980,47"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a" title="Set_active_route service callback. User can select a route to start following by calling this service..." alt="" coords="1107,71,1296,112"/>
<area shape="rect" href="classroute_1_1Route.html#a5f6b00da6b8e1cd9238b9d60457276c8" title=" " alt="" coords="845,71,980,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7c4ca5d0774ffa2aa06fbf0f979b02b0" title="Returns a message indicating whether or not the vehicle is inside of an active geofence lanelet." alt="" coords="1096,136,1307,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7269b37f5fcdbc502122c980fa814387" title=" " alt="" coords="807,136,1018,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcasterNode.html#ab0c14f6d7e30870755a4dcf6b228de82" title=" " alt="" coords="523,136,733,177"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="1092,201,1311,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a1327952ca44a5e817b0498f93f6143ac" title="Gets the affected lanelet or areas based on the points in local frame." alt="" coords="1096,267,1307,308"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="781,201,1044,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#af0e373523dc84a409331d01b62d2fce0" title="Fills geofence object from TrafficControlMessageV01 ROS Msg." alt="" coords="523,408,733,449"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a649174a7a7270df95532cad5131bf4cb" title="Adds a geofence to the current map and publishes the ROS msg." alt="" coords="264,465,475,507"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a95cb7c60682d7b455a8624534ad94706" title="Constructor." alt="" coords="5,465,216,507"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="1098,332,1305,373"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="1098,397,1305,439"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8566f612a10ecd787f2f18490648bed4" title="(non&#45;const version) Given the cartesian point on the map, tries to get the opposite direction lanelet..." alt="" coords="1095,463,1307,504"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a12708b289f7f3d8f10c6dc749bf14d65" title="Create workzone geofence. Create diagonal lanelets and a lanelet that houses opposing lane&#39;s trafficl..." alt="" coords="807,521,1018,563"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a5ae3f2086831ebd932e19b2bdfd76405" title="Creates a single workzone geofence (in the vector) that includes all additional lanelets (housing tra..." alt="" coords="523,521,733,563"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#adc221f65f0b99586fc8c2ffc97c5feea" title="Preprocess for workzone area. Parallel_llts will have front_parallel and back_parallel lanelets that ..." alt="" coords="807,587,1018,628"/>
</map>
</div>

</div>
</div>
<a id="adebf4a245f31404e822133b23e061ed3" name="adebf4a245f31404e822133b23e061ed3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adebf4a245f31404e822133b23e061ed3">&#9670;&nbsp;</a></span>templated_local_curvatures()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class P , class A &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; carma_wm::geometry::templated_local_curvatures </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; P, A &gt; &amp;&#160;</td>
          <td class="paramname"><em>centerline_points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00333">333</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  334</span>{</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>  <span class="keywordflow">if</span> (centerline_points.empty()) {</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;No points in centerline for curvature calculation&quot;</span>);</div>
<div class="line"><span class="lineno">  338</span>  }</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>  std::vector&lt;Eigen::Vector2d&gt; spatial_derivative = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(centerline_points);</div>
<div class="line"><span class="lineno">  341</span>  std::vector&lt;Eigen::Vector2d&gt; normalized_tangent_vectors = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">normalize_vectors</a>(spatial_derivative);</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>  std::vector&lt;double&gt; arc_lengths = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">compute_arc_lengths</a>(centerline_points);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>  std::vector&lt;Eigen::Vector2d&gt; tangent_derivative = </div>
<div class="line"><span class="lineno">  346</span>    <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(</div>
<div class="line"><span class="lineno">  347</span>      normalized_tangent_vectors, </div>
<div class="line"><span class="lineno">  348</span>      arc_lengths);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>  std::vector&lt;double&gt; curvature = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">compute_magnitude_of_vectors</a>(tangent_derivative);</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>  <span class="keywordflow">return</span> curvature;</div>
<div class="line"><span class="lineno">  353</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a56bddbee1116988543192b2f235a692c"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">carma_wm::geometry::normalize_vectors</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; normalize_vectors(const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</div><div class="ttdoc">Normalize the vectors in the input list such that their magnitudes = 1.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00510">Geometry.cpp:510</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adf1c6b7f1e33569b45074e4e5bbeff1d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">carma_wm::geometry::compute_arc_lengths</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_arc_lengths(const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;data)</div><div class="ttdoc">Compute the arc length at each point around the curve.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00498">Geometry.cpp:498</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aef0b6f2362a5ebbf0d5dcb3b7ff78619"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">carma_wm::geometry::compute_finite_differences</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; compute_finite_differences(const lanelet::BasicLineString2d &amp;data)</div><div class="ttdoc">Use finite differences methods to compute the derivative of the input data set with respect to index ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00419">Geometry.cpp:419</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_afad31f5a6dcbee8828814d406384635f"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">carma_wm::geometry::compute_magnitude_of_vectors</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_magnitude_of_vectors(const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</div><div class="ttdoc">Compute the magnitude of each vector in the input list.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00520">Geometry.cpp:520</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00498">compute_arc_lengths()</a>, <a class="el" href="Geometry_8cpp_source.html#l00419">compute_finite_differences()</a>, <a class="el" href="Geometry_8cpp_source.html#l00520">compute_magnitude_of_vectors()</a>, and <a class="el" href="Geometry_8cpp_source.html#l00510">normalize_vectors()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00356">local_curvatures()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_cgraph" id="anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_cgraph">
<area shape="rect" title=" " alt="" coords="5,125,192,166"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d" title="Compute the arc length at each point around the curve." alt="" coords="255,17,407,58"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619" title="Use finite differences methods to compute the derivative of the input data set with respect to index ..." alt="" coords="240,89,423,130"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f" title="Compute the magnitude of each vector in the input list." alt="" coords="259,153,404,209"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c" title="Normalize the vectors in the input list such that their magnitudes = 1." alt="" coords="259,233,404,274"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d" title=" " alt="" coords="471,5,616,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0" title="Compute the Euclidean distance between the two points." alt="" coords="664,5,809,61"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3" title=" " alt="" coords="471,85,616,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_icgraph" id="anamespacecarma__wm_1_1geometry_adebf4a245f31404e822133b23e061ed3_icgraph">
<area shape="rect" title=" " alt="" coords="392,5,579,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d" title="Returns a list of local (computed by discrete derivative) curvatures for the input centerlines...." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46" title="Specialized overload of the centerline local_curvatures method but for lanelets." alt="" coords="5,5,151,47"/>
</map>
</div>

</div>
</div>
<a id="a05616ac1d3b4773665beb74bd495af2c" name="a05616ac1d3b4773665beb74bd495af2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05616ac1d3b4773665beb74bd495af2c">&#9670;&nbsp;</a></span>trackPos() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> carma_wm::geometry::trackPos </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>seg_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>seg_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the track position of a point relative to a line segment defined by two other points. Positive crosstrack will be to the right. Points occuring before the segment will have negative downtrack. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The point to find the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of </td></tr>
    <tr><td class="paramname">seg_start</td><td>The starting point of a line segment </td></tr>
    <tr><td class="paramname">seg_end</td><td>The ending point of a line segment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of point p relative to the line defined by seg_start and seg_end </dd></dl>
<p >Calculate the sign of the crosstrack distance by projecting the points to 2d d = (p_x - s_x)(e_y - s_y) - (p_y - s_y)(e_x - s_x) Equivalent to d = (start_to_p.x * start_to_end.y) - (start_to_p.y * start_to_end.x)</p>
<p >Code below based on math equation described at <a href="https://math.stackexchange.com/questions/274712/calculate-on-which-side-of-a-straight-line-is-a-given-point-located">https://math.stackexchange.com/questions/274712/calculate-on-which-side-of-a-straight-line-is-a-given-point-located</a> Question asked by user Ritvars (<a href="https://math.stackexchange.com/users/56723/ritvars">https://math.stackexchange.com/users/56723/ritvars</a>) and answered by user Shard (<a href="https://math.stackexchange.com/users/55608/shard">https://math.stackexchange.com/users/55608/shard</a>) Attribution here is in line with Stack Overflow's Attribution policy cc-by-sa found here: <a href="https://stackoverflow.blog/2009/06/25/attribution-required/">https://stackoverflow.blog/2009/06/25/attribution-required/</a></p>
<p >Calculate the sign of the crosstrack distance by projecting the points to 2d d = (p_x - s_x)(e_y - s_y) - (p_y - s_y)(e_x - s_x) Equivalent to d = (start_to_p.x * start_to_end.y) - (start_to_p.y * start_to_end.x)</p>
<p >Code below based on math equation described at <a href="https://math.stackexchange.com/questions/274712/calculate-on-which-side-of-a-straight-line-is-a-given-point-located">https://math.stackexchange.com/questions/274712/calculate-on-which-side-of-a-straight-line-is-a-given-point-located</a> Question asked by user Ritvars (<a href="https://math.stackexchange.com/users/56723/ritvars">https://math.stackexchange.com/users/56723/ritvars</a>) and answered by user Shard (<a href="https://math.stackexchange.com/users/55608/shard">https://math.stackexchange.com/users/55608/shard</a>) Attribution here is in line with Stack Overflow's Attribution policy cc-by-sa found here: <a href="https://stackoverflow.blog/2009/06/25/attribution-required/">https://stackoverflow.blog/2009/06/25/attribution-required/</a></p>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00076">76</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span>  Eigen::Vector2d vec_to_p(p);</div>
<div class="line"><span class="lineno">   80</span>  Eigen::Vector2d vec_to_start(seg_start);</div>
<div class="line"><span class="lineno">   81</span>  Eigen::Vector2d vec_to_end(seg_end);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>  <span class="comment">// Get vector from start to external point</span></div>
<div class="line"><span class="lineno">   84</span>  Eigen::Vector2d start_to_p = vec_to_p - vec_to_start;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>  <span class="comment">// Get vector from start to end point</span></div>
<div class="line"><span class="lineno">   87</span>  Eigen::Vector2d start_to_end = vec_to_end - vec_to_start;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>  <span class="comment">// Get angle between both vectors</span></div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordtype">double</span> interior_angle = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">getAngleBetweenVectors</a>(start_to_p, start_to_end);</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>  <span class="comment">// Calculate downtrack distance</span></div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordtype">double</span> start_to_p_mag = start_to_p.norm();</div>
<div class="line"><span class="lineno">   94</span>  <span class="keywordtype">double</span> downtrack_dist = start_to_p_mag * std::cos(interior_angle);</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordtype">double</span> d = (start_to_p[0] * start_to_end[1]) - (start_to_p[1] * start_to_end[0]);</div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordtype">double</span> sign = d &gt;= 0 ? 1.0 : -1.0;  <span class="comment">// If d is positive then the point is to the right if it is negative the point is</span></div>
<div class="line"><span class="lineno">  113</span>                                      <span class="comment">// to the left</span></div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>  <span class="keywordtype">double</span> crosstrack = start_to_p_mag * std::sin(interior_angle) * sign;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>(downtrack_dist, crosstrack);</div>
<div class="line"><span class="lineno">  118</span>}</div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a></div><div class="ttdoc">Position in a track based coordinate system where the axis are downtrack and crosstrack....</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00034">TrackPos.hpp:35</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_abab7ba4e773f03d6cfc09492742c6b7b"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">carma_wm::geometry::getAngleBetweenVectors</a></div><div class="ttdeci">double getAngleBetweenVectors(const Eigen::Vector2d &amp;vec1, const Eigen::Vector2d &amp;vec2)</div><div class="ttdoc">Calculates the angle between two vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00065">Geometry.cpp:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00065">getAngleBetweenVectors()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_a05616ac1d3b4773665beb74bd495af2c_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_a05616ac1d3b4773665beb74bd495af2c_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_a05616ac1d3b4773665beb74bd495af2c_cgraph" id="anamespacecarma__wm_1_1geometry_a05616ac1d3b4773665beb74bd495af2c_cgraph">
<area shape="rect" title="Return the track position of a point relative to a line segment defined by two other points...." alt="" coords="5,5,151,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="199,5,373,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="421,5,567,47"/>
</map>
</div>

</div>
</div>
<a id="aebce986f21c117983313292d5e82b50a" name="aebce986f21c117983313292d5e82b50a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebce986f21c117983313292d5e82b50a">&#9670;&nbsp;</a></span>trackPos() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> carma_wm::geometry::trackPos </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstLanelet &amp;&#160;</td>
          <td class="paramname"><em>lanelet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided point relative to the centerline of the provided lanelet. Positive crosstrack will be to the right. Points occuring before the segment will have negative downtrack. See the matchSegment function for a description of the edge cases associated with the max_crosstrack parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lanelet</td><td>The lanelet whose centerline will serve as the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> reference line </td></tr>
    <tr><td class="paramname">point</td><td>The lanelet2 point which will have its distance computed </td></tr>
    <tr><td class="paramname">max_crosstrack</td><td>The maximum crosstrack distance allowed for a perfect centerline segment match. See the matchSegment function for details</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If the lanelet centerline cannot be found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the point relative to the lanelet centerline </dd></dl>

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00120">120</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>{</div>
<div class="line"><span class="lineno">  122</span>  <span class="keyword">auto</span> center_line = lanelet::utils::to2D(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.centerline());</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">if</span> (center_line.numSegments() &lt; 1)</div>
<div class="line"><span class="lineno">  125</span>  {</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided lanelet has invalid centerline containing no points&quot;</span>);</div>
<div class="line"><span class="lineno">  127</span>  }</div>
<div class="line"><span class="lineno">  128</span>  <span class="keyword">auto</span> tuple = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">matchSegment</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, center_line.basicLineString());</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">return</span> std::get&lt;0&gt;(tuple);</div>
<div class="line"><span class="lineno">  131</span>}</div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ab675b2b8862a2ba9c139a8b5b353b846"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">carma_wm::geometry::matchSegment</a></div><div class="ttdeci">std::tuple&lt; TrackPos, lanelet::BasicSegment2d &gt; matchSegment(const lanelet::BasicPoint2d &amp;p, const lanelet::BasicLineString2d &amp;line_string)</div><div class="ttdoc">Get the TrackPos of the provided point along the linestring and the segment of the line string which ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00187">Geometry.cpp:187</a></div></div>
<div class="ttc" id="anamespacelanelet_html"><div class="ttname"><a href="namespacelanelet.html">lanelet</a></div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8hpp_source.html#l00038">MapConformer.hpp:39</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ab81a05c3d1d100117b6781d7dedf8a29"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">process_traj_logs.point</a></div><div class="ttdeci">point</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00126">process_traj_logs.py:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00187">matchSegment()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00126">process_traj_logs::point</a>.</p>

<p class="reference">Referenced by <a class="el" href="route__generator__worker_8cpp_source.html#l00494">route::RouteGeneratorWorker::bumperPoseCb()</a>, <a class="el" href="route__generator__worker_8cpp_source.html#l00384">route::RouteGeneratorWorker::composeRouteMarkerMsg()</a>, <a class="el" href="WMBroadcaster_8cpp_source.html#l01868">carma_wm_ctrl::WMBroadcaster::distToNearestActiveGeofence()</a>, <a class="el" href="WorldModelUtils_8cpp_source.html#l00117">carma_wm::query::getAffectedLaneletOrAreas()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">carma_wm::CARMAWorldModel::getNearestObjInLane()</a>, <a class="el" href="Geometry_8cpp_source.html#l00187">matchSegment()</a>, <a class="el" href="WorldModelUtils_8cpp_source.html#l00079">carma_wm::query::nonConnectedAdjacentLeft()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">carma_wm::CARMAWorldModel::routeTrackPos()</a>, <a class="el" href="WMBroadcaster_8cpp_source.html#l00755">carma_wm_ctrl::WMBroadcaster::splitLaneletWithPoint()</a>, <a class="el" href="WMBroadcaster_8cpp_source.html#l00776">carma_wm_ctrl::WMBroadcaster::splitOppositeLaneletWithPoint()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00794">carma_wm::CARMAWorldModel::toRoadwayObstacle()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_cgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_cgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_cgraph" id="anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_cgraph">
<area shape="rect" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="5,5,151,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="199,5,344,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="392,5,537,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_icgraph.png" border="0" usemap="#anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_icgraph" alt=""/></div>
<map name="anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_icgraph" id="anamespacecarma__wm_1_1geometry_aebce986f21c117983313292d5e82b50a_icgraph">
<area shape="rect" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="1619,405,1764,447"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c" title="Callback for the front bumper pose transform." alt="" coords="1370,5,1559,47"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b" title="composeRouteMarkerMsg is a function to generate route rviz markers" alt="" coords="1370,71,1559,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a35a706cbbb3b04dc4dfc3eea40ececcc" title="Returns the route distance (downtrack or crosstrack in meters) to the nearest active geofence lanelet..." alt="" coords="1359,168,1570,209"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="1367,267,1562,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="1361,340,1568,381"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="1392,405,1537,447"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a561bd30d0274bb605a7b7dd54b16b037" title="Returns the TrackPos, computed in 2d, of the provided point relative to the current route." alt="" coords="1098,463,1305,504"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9fb50939b2ae576d2eb7fcfc42fcdc22" title="Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This fu..." alt="" coords="1359,525,1571,567"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a264607b6ec5b20d8971f8dc14a4b1825" title="Split given lanelet&#39;s adjacent, OPPOSITE lanelet with same proportion as the given point&#39;s downtrack ..." alt="" coords="1096,593,1307,635"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a883734808f44db2778371ce3fbeecdd3" title="Split given lanelet with same proportion as the given points&#39; downtrack relative to the lanelet...." alt="" coords="1359,643,1570,684"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="1361,708,1568,749"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28" title="Spin callback which will be called frequently based on spin rate." alt="" coords="1107,5,1296,47"/>
<area shape="rect" href="classroute_1_1Route.html#a738074e042da30c623a1c0e80d019913" title=" " alt="" coords="845,5,980,47"/>
<area shape="rect" href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a" title="Set_active_route service callback. User can select a route to start following by calling this service..." alt="" coords="1107,71,1296,112"/>
<area shape="rect" href="classroute_1_1Route.html#a5f6b00da6b8e1cd9238b9d60457276c8" title=" " alt="" coords="845,71,980,112"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7c4ca5d0774ffa2aa06fbf0f979b02b0" title="Returns a message indicating whether or not the vehicle is inside of an active geofence lanelet." alt="" coords="1096,136,1307,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a7269b37f5fcdbc502122c980fa814387" title=" " alt="" coords="807,136,1018,177"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcasterNode.html#ab0c14f6d7e30870755a4dcf6b228de82" title=" " alt="" coords="523,136,733,177"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="1092,201,1311,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a1327952ca44a5e817b0498f93f6143ac" title="Gets the affected lanelet or areas based on the points in local frame." alt="" coords="1096,267,1307,308"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="781,201,1044,243"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#af0e373523dc84a409331d01b62d2fce0" title="Fills geofence object from TrafficControlMessageV01 ROS Msg." alt="" coords="523,457,733,499"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a649174a7a7270df95532cad5131bf4cb" title="Adds a geofence to the current map and publishes the ROS msg." alt="" coords="264,523,475,564"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a95cb7c60682d7b455a8624534ad94706" title="Constructor." alt="" coords="5,523,216,564"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="1098,332,1305,373"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="1098,397,1305,439"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8566f612a10ecd787f2f18490648bed4" title="(non&#45;const version) Given the cartesian point on the map, tries to get the opposite direction lanelet..." alt="" coords="1095,528,1307,569"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a12708b289f7f3d8f10c6dc749bf14d65" title="Create workzone geofence. Create diagonal lanelets and a lanelet that houses opposing lane&#39;s trafficl..." alt="" coords="807,587,1018,628"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#a5ae3f2086831ebd932e19b2bdfd76405" title="Creates a single workzone geofence (in the vector) that includes all additional lanelets (housing tra..." alt="" coords="523,587,733,628"/>
<area shape="rect" href="classcarma__wm__ctrl_1_1WMBroadcaster.html#adc221f65f0b99586fc8c2ffc97c5feea" title="Preprocess for workzone area. Parallel_llts will have front_parallel and back_parallel lanelets that ..." alt="" coords="807,652,1018,693"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2d95e2615fd8cbd681414e997bb513aa" name="a2d95e2615fd8cbd681414e997bb513aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d95e2615fd8cbd681414e997bb513aa">&#9670;&nbsp;</a></span>SPATIAL_EPSILON_M</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double carma_wm::geometry::SPATIAL_EPSILON_M = 0.05</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Geometry_8cpp_source.html#l00028">28</a> of file <a class="el" href="Geometry_8cpp_source.html">Geometry.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Geometry_8cpp_source.html#l00373">concatenate_line_strings()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecarma__wm.html">carma_wm</a></li><li class="navelem"><a class="el" href="namespacecarma__wm_1_1geometry.html">geometry</a></li>
    <li class="footer">Generated on Thu Feb 1 2024 17:56:56 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
