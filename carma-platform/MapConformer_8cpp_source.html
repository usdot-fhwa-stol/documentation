<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm/src/MapConformer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('MapConformer_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MapConformer.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="MapConformer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (C) 2020-2021 LEIDOS.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * use this file except in compliance with the License. You may obtain a copy of</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * the License at</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> *</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> * License for the specific language governing permissions and limitations under</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> * the License.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> */</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;rclcpp/rclcpp.hpp&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="WorldModel_8hpp.html">carma_wm/WorldModel.hpp</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;lanelet2_core/Attribute.h&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;lanelet2_core/utility/Units.h&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;boost/algorithm/string.hpp&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;<a class="code" href="MapConformer_8hpp.html">carma_wm/MapConformer.hpp</a>&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacelanelet.html">lanelet</a></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>{</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">namespace </span>MapConformer</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>{</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html">   35</a></span><span class="keyword">namespace</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>{  <span class="comment">// Private namespace</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">// Enum defining types of lane change</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">   38</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>{</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  <a class="code hl_enumvalue" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a7b75dfc7b1f858ecd4b3083ae3e2595c">ToRight</a>,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  <a class="code hl_enumvalue" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a62915910963ecbbf57ce72b91185f77e">ToLeft</a>,</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  <a class="code hl_enumvalue" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a130c5b3473c57faa76e2a1c54e26f88e">Both</a>,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  <a class="code hl_enumvalue" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a6adf97f83acf6453d4a6a4b1070f3754">None</a></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>};</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">// List of supported participants. Should exactly match elements of lanelet::Participants struct</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">   47</a></span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">PARTICIPANT_COUNT</a> = 12;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a954a08872015000aad35dace38e258d8">   48</a></span><span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a954a08872015000aad35dace38e258d8">participant_types</a>[<a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">PARTICIPANT_COUNT</a>] = { lanelet::Participants::Vehicle,  <span class="comment">//</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>                                                               lanelet::Participants::VehicleBus,</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                                                               lanelet::Participants::VehicleCar,</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                                                               lanelet::Participants::VehicleCarElectric,</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>                                                               lanelet::Participants::VehicleCarCombustion,</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>                                                               lanelet::Participants::VehicleTruck,</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>                                                               lanelet::Participants::VehicleMotorcycle,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                                                               lanelet::Participants::VehicleTaxi,</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>                                                               lanelet::Participants::VehicleEmergency,</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                                                               lanelet::Participants::Pedestrian,  <span class="comment">//</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>                                                               lanelet::Participants::Bicycle,     <span class="comment">//</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>                                                               lanelet::Participants::Train };</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a01b13b2659da99328b90f3d9ef8a332a">   66</a></span>std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt; <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a01b13b2659da99328b90f3d9ef8a332a">getAllGermanTrafficRules</a>()</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>{</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt; german_traffic_rules_set;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  german_traffic_rules_set.reserve(<a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">PARTICIPANT_COUNT</a>);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">PARTICIPANT_COUNT</a>; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// This loop is designed to identify the set of currently supported participants for german traffic rules</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// Using exceptions as logic like this is not usually a good practice, but since this is an operation performed only</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// at startup on a small number of elements efficiency should not be an issue</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keywordflow">try</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>      lanelet::traffic_rules::TrafficRulesUPtr traffic_rules =</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>          lanelet::traffic_rules::TrafficRulesFactory::create(lanelet::Locations::Germany, <a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a954a08872015000aad35dace38e258d8">participant_types</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>      german_traffic_rules_set.emplace_back(std::move(traffic_rules));</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    }</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> lanelet::InvalidInputError&amp; e)</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    {</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>      <span class="comment">// Ignore participants which there is no generic rules for</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>      RCLCPP_INFO_STREAM ( rclcpp::get_logger(<span class="stringliteral">&quot;MapConformer&quot;</span>), <span class="stringliteral">&quot;Ignoring participant: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a954a08872015000aad35dace38e258d8">participant_types</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] &lt;&lt;  <span class="stringliteral">&quot;, which there is no generic rule for...&quot;</span>);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  }</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <span class="keywordflow">return</span> german_traffic_rules_set;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>}</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Map, <span class="keyword">typename</span> Key, <span class="keyword">typename</span> Value&gt;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">  109</a></span><a class="code hl_class" href="classGenericValue.html">Value</a> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">getMapOrDefault</a>(<span class="keyword">const</span> Map&amp; map, Key key, <a class="code hl_class" href="classGenericValue.html">Value</a> defaultVal)</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>{</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  <span class="keyword">auto</span> elem = map.find(key);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  <span class="keywordflow">if</span> (elem == map.end())</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordflow">return</span> defaultVal;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keywordflow">return</span> elem-&gt;second;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ac65728eb2e5688331a88d9dd20ac75a3">  134</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ac65728eb2e5688331a88d9dd20ac75a3">startswith</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keyword">const</span> std::string&amp; substr)</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>{</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  <span class="keywordflow">return</span> str.compare(0, substr.size(), substr) == 0;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>}</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">  155</a></span><a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">getChangeType</a>(<span class="keyword">const</span> std::string&amp; type, <span class="keyword">const</span> std::string&amp; subtype, <span class="keyword">const</span> std::string&amp; participant)</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>{</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <span class="keyword">using </span>LaneChangeMap = std::map&lt;std::pair&lt;std::string, std::string&gt;, <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a>&gt;;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  <span class="keyword">const</span> <span class="keyword">static</span> LaneChangeMap VehicleChangeType{</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    { { AttributeValueString::LineThin, AttributeValueString::Dashed }, LaneChangeType::Both },</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    { { AttributeValueString::LineThick, AttributeValueString::Dashed }, LaneChangeType::Both },</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    { { AttributeValueString::LineThin, AttributeValueString::DashedSolid }, LaneChangeType::ToRight },</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    { { AttributeValueString::LineThick, AttributeValueString::DashedSolid }, LaneChangeType::ToRight },</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    { { AttributeValueString::LineThin, AttributeValueString::SolidDashed }, LaneChangeType::ToLeft },</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    { { AttributeValueString::LineThick, AttributeValueString::SolidDashed }, LaneChangeType::ToLeft }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  };</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  <span class="keyword">const</span> <span class="keyword">static</span> LaneChangeMap PedestrianChangeType{ { { AttributeValueString::Curbstone, AttributeValueString::Low },</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                                                     LaneChangeType::Both } };</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ac65728eb2e5688331a88d9dd20ac75a3">startswith</a>(participant, Participants::Vehicle))</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">getMapOrDefault</a>(VehicleChangeType, std::make_pair(type, subtype), LaneChangeType::None);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  }</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  <span class="keywordflow">if</span> (participant == Participants::Pedestrian)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">getMapOrDefault</a>(PedestrianChangeType, std::make_pair(type, subtype), LaneChangeType::None);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="keywordflow">if</span> (participant == Participants::Bicycle)</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keyword">auto</span> asVehicle = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">getMapOrDefault</a>(VehicleChangeType, std::make_pair(type, subtype), LaneChangeType::None);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">if</span> (asVehicle != LaneChangeType::None)</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>      <span class="keywordflow">return</span> asVehicle;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    }</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">getMapOrDefault</a>(PedestrianChangeType, std::make_pair(type, subtype), LaneChangeType::None);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  <span class="keywordflow">return</span> LaneChangeType::None;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>}</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">  198</a></span>PassingControlLinePtr <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">buildControlLine</a>(LineString3d&amp; bound, <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a> type, <span class="keyword">const</span> std::string&amp; participant)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>{</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="keywordflow">if</span> (bound.inverted())</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>      <span class="keywordflow">case</span> LaneChangeType::ToRight:</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            PassingControlLine::buildData(lanelet::utils::getId(), { bound.invert() }, {}, { participant })));</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>      <span class="keywordflow">case</span> LaneChangeType::ToLeft:</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            PassingControlLine::buildData(lanelet::utils::getId(), { bound.invert() }, { participant }, {})));</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>      <span class="keywordflow">case</span> LaneChangeType::Both:</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(PassingControlLine::buildData(</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            lanelet::utils::getId(), { bound.invert() }, { participant }, { participant })));</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>      <span class="keywordflow">default</span>:  <span class="comment">// LaneChangeType::None</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            <span class="keyword">new</span> PassingControlLine(PassingControlLine::buildData(lanelet::utils::getId(), { bound.invert() }, {}, {})));</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  }</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    {</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      <span class="keywordflow">case</span> LaneChangeType::ToRight:</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            PassingControlLine::buildData(lanelet::utils::getId(), { bound }, { participant }, {})));</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>      <span class="keywordflow">case</span> LaneChangeType::ToLeft:</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>            PassingControlLine::buildData(lanelet::utils::getId(), { bound }, {}, { participant })));</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      <span class="keywordflow">case</span> LaneChangeType::Both:</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(<span class="keyword">new</span> PassingControlLine(</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>            PassingControlLine::buildData(lanelet::utils::getId(), { bound }, { participant }, { participant })));</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>      <span class="keywordflow">default</span>:  <span class="comment">// LaneChangeType::None</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keywordflow">return</span> std::shared_ptr&lt;PassingControlLine&gt;(</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="keyword">new</span> PassingControlLine(PassingControlLine::buildData(lanelet::utils::getId(), { bound }, {}, {})));</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  }</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>}</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a9d5c773535e4c74cbf409ed04b18106e">  245</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">addInferredAccessRule</a>(Lanelet&amp; <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, lanelet::LaneletMapPtr map,</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                           <span class="keyword">const</span> std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt;&amp; default_traffic_rules)</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>{</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="keyword">auto</span> access_rules = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.regulatoryElementsAs&lt;RegionAccessRule&gt;();</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  <span class="comment">// If the lanelet does not have an access rule then add one based on the generic traffic rules</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <span class="keywordflow">if</span> (access_rules.size() == 0)</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  {  <span class="comment">// No access rule detected so add one</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">// We want to check for all participants which are currently supported</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    std::vector&lt;std::string&gt; allowed_participants;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rules : default_traffic_rules)</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>      <span class="keywordflow">if</span> (rules-&gt;canPass(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>))</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>      {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        allowed_participants.emplace_back(rules-&gt;participant());</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    std::shared_ptr&lt;RegionAccessRule&gt; rar(<span class="keyword">new</span> RegionAccessRule(</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        RegionAccessRule::buildData(lanelet::utils::getId(), { <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a> }, {}, allowed_participants)));</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(rar);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    map-&gt;add(rar);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>}</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">  278</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">addInferredAccessRule</a>(Area&amp; area, lanelet::LaneletMapPtr map,</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                           <span class="keyword">const</span> std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt;&amp; default_traffic_rules)</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>{</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  <span class="keyword">auto</span> access_rules = area.regulatoryElementsAs&lt;RegionAccessRule&gt;();</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <span class="comment">// If the lanelet does not have an access rule then add one based on the generic traffic rules</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>  <span class="keywordflow">if</span> (access_rules.size() == 0)</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  {  <span class="comment">// No access rule detected so add one</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">// We want to check for all participants which are currently supported</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    std::vector&lt;std::string&gt; allowed_participants;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rules : default_traffic_rules)</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>      <span class="keywordflow">if</span> (rules-&gt;canPass(area))</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>      {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        allowed_participants.emplace_back(rules-&gt;participant());</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>      }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    }</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    std::shared_ptr&lt;RegionAccessRule&gt; rar(</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keyword">new</span> RegionAccessRule(RegionAccessRule::buildData(lanelet::utils::getId(), {}, { area }, allowed_participants)));</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    area.addRegulatoryElement(rar);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    map-&gt;add(rar);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>}</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a26bbd7e32c3bfa1cf61b96126a167534">  310</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">addInferredPassingControlLine</a>(Lanelet&amp; <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, lanelet::LaneletMapPtr map)</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>{</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="comment">// Since this class is only designed to add passing control lines based on lane changes</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <span class="comment">// we will always assume the participant is a vehicle</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>  std::string participant(lanelet::Participants::Vehicle);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  LineString3d left_bound = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.leftBound();</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  LineString3d right_bound = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.rightBound();</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="comment">// Determine possibility of lane change for left and right bounds</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a> left_type = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">getChangeType</a>(left_bound.attribute(<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">AttributeName::Type</a>).value(),</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                                           left_bound.attribute(AttributeName::Subtype).value(), participant);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a> right_type = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">getChangeType</a>(right_bound.attribute(<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">AttributeName::Type</a>).value(),</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                                            right_bound.attribute(AttributeName::Subtype).value(), participant);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  <span class="keyword">auto</span> local_control_lines = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.regulatoryElementsAs&lt;PassingControlLine&gt;();</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <span class="keywordtype">bool</span> foundLeft = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  <span class="keywordtype">bool</span> foundRight = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  <span class="comment">// Iterate over all regulatory elements in the map to determine if there is an existing regulation for this</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="comment">// lanelet&#39;s bounds</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> reg_elem : map-&gt;regulatoryElementLayer)</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="keywordflow">if</span> (reg_elem-&gt;attribute(AttributeName::Subtype).value() != PassingControlLine::RuleName)</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    }</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="keyword">auto</span> <a class="code hl_namespace" href="namespacepcl.html">pcl</a> = std::static_pointer_cast&lt;PassingControlLine&gt;(reg_elem);</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> sub_line : <a class="code hl_namespace" href="namespacepcl.html">pcl</a>-&gt;controlLine())</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>      <span class="keywordtype">bool</span> shouldAdd = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>      </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>      <span class="keywordflow">if</span> (left_bound.id() == sub_line.id() &amp;&amp; !foundLeft)</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>      {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        foundLeft = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        shouldAdd = !lanelet::utils::contains(local_control_lines, <a class="code hl_namespace" href="namespacepcl.html">pcl</a>);</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>      }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (right_bound.id() == sub_line.id() &amp;&amp; !foundRight)</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>      {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        foundRight = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        shouldAdd = !lanelet::utils::contains(local_control_lines, <a class="code hl_namespace" href="namespacepcl.html">pcl</a>);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>      }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>      <span class="comment">// Check if our lanelet contains this control line</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>      <span class="comment">// If it does not then add it</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>      <span class="keywordflow">if</span> (shouldAdd)</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>      {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(<a class="code hl_namespace" href="namespacepcl.html">pcl</a>);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>      }</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    }</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>  }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  <span class="comment">// If no existing regulation was found for this lanelet&#39;s right or left bound then create a new one and add it to</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>  <span class="comment">// the lanelet and the map</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>  <span class="keywordflow">if</span> (!foundLeft)</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>  {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    PassingControlLinePtr pcl_left = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">buildControlLine</a>(left_bound, left_type, participant);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(pcl_left);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    map-&gt;add(pcl_left);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  }</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keywordflow">if</span> (!foundRight)</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    PassingControlLinePtr pcl_right = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">buildControlLine</a>(right_bound, right_type, participant);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(pcl_right);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    map-&gt;add(pcl_right);</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>  }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>}</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">  386</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">addInferredPassingControlLine</a>(Area&amp; area, lanelet::LaneletMapPtr map)</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>{</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>  <span class="comment">// Since this class is only designed to add passing control lines based on lane changes</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <span class="comment">// we will always assume the participant is a vehicle</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  std::string participant(lanelet::Participants::Vehicle);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>  LineStrings3d outerBounds = area.outerBound();</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>  <span class="keyword">auto</span> local_control_lines = area.regulatoryElementsAs&lt;PassingControlLine&gt;();</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  std::vector&lt;size_t&gt; found_indices;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="comment">// Iterate over all regulatory elements in the map to determine if there is an existing regulation for this area&#39;s</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  <span class="comment">// bounds</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> reg_elem : map-&gt;regulatoryElementLayer)</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="keywordflow">if</span> (reg_elem-&gt;attribute(AttributeName::Subtype).value() == PassingControlLine::RuleName)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>      <span class="keyword">auto</span> <a class="code hl_namespace" href="namespacepcl.html">pcl</a> = std::static_pointer_cast&lt;PassingControlLine&gt;(reg_elem);</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> sub_line : <a class="code hl_namespace" href="namespacepcl.html">pcl</a>-&gt;controlLine())</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>      {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> sub_bound : outerBounds)</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>          <span class="keywordflow">if</span> (sub_bound.id() == sub_line.id())</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>          {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            found_indices.push_back(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>);</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>            <span class="comment">// If an existing regulation applies to this area&#39;s bounds then add it to the area</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <span class="keywordtype">bool</span> alreadyAdded = lanelet::utils::contains(local_control_lines, <a class="code hl_namespace" href="namespacepcl.html">pcl</a>);</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <span class="keywordflow">if</span> (!alreadyAdded)</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>              area.addRegulatoryElement(<a class="code hl_namespace" href="namespacepcl.html">pcl</a>);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>            }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>          }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>      }</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    }</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>  }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  <span class="comment">// For all the bounds which did not have an existing regulation create a new one</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> sub_bound : outerBounds)</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>  {</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="keywordflow">if</span> (lanelet::utils::contains(found_indices, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>))</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>      <span class="keywordflow">continue</span>;  <span class="comment">// Continue if this sub_bound is already accounted for</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    }</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <a class="code hl_enumeration" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">LaneChangeType</a> change_type = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">getChangeType</a>(sub_bound.attribute(<a class="code hl_enumeration" href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">AttributeName::Type</a>).value(),</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                                               sub_bound.attribute(AttributeName::Subtype).value(), participant);</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    PassingControlLinePtr control_line = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">buildControlLine</a>(sub_bound, change_type, participant);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    area.addRegulatoryElement(control_line);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    map-&gt;add(control_line);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  }</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>}</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4319f59405930feb81d5313eefde3a2c">  452</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4319f59405930feb81d5313eefde3a2c">addInferredDirectionOfTravel</a>(Lanelet&amp; <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, lanelet::LaneletMapPtr map,</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                                  <span class="keyword">const</span> std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt;&amp; default_traffic_rules)</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>{</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  <span class="keyword">auto</span> direction_of_travel = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.regulatoryElementsAs&lt;DirectionOfTravel&gt;();</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="comment">// If the lanelet does not have an access rule then add one based on the generic traffic rules</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  <span class="keywordflow">if</span> (direction_of_travel.size() == 0)</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  {  <span class="comment">// No direction detected so need to check if one is required</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="comment">// We want to check for all participants which are currently supported</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    std::vector&lt;std::string&gt; allowed_participants;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rules : default_traffic_rules)</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>      <span class="keywordflow">if</span> (!rules-&gt;isOneWay(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>))</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>      {  <span class="comment">// Check if this lanelet is not oneway</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        allowed_participants.emplace_back(rules-&gt;participant());</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>      }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="keywordflow">if</span> (allowed_participants.size() &gt; 0)</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    {  <span class="comment">// Only add bi-directional regulations</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>      std::shared_ptr&lt;DirectionOfTravel&gt; rar(<span class="keyword">new</span> DirectionOfTravel(DirectionOfTravel::buildData(</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>          lanelet::utils::getId(), { <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a> }, DirectionOfTravel::BiDirectional, allowed_participants)));</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>      <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(rar);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>      map-&gt;add(rar);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>}</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span> </div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a76a04caafb69f81d7f16c58060b3644f">  481</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a76a04caafb69f81d7f16c58060b3644f">addValidSpeedLimit</a>(Lanelet&amp; <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, lanelet::LaneletMapPtr map, lanelet::Velocity config_limit,</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="keyword">const</span> std::vector&lt;lanelet::traffic_rules::TrafficRulesUPtr&gt;&amp; default_traffic_rules )</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>{</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  lanelet::Velocity max_speed;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="keyword">auto</span> speed_limit = <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.regulatoryElementsAs&lt;DigitalSpeedLimit&gt;();</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>     <span class="keywordflow">if</span>(config_limit &lt; 80_mph &amp;&amp; config_limit &gt; 0_mph)<span class="comment">//Accounting for the configured speed limit, input zero when not in use</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>      {  </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        max_speed = config_limit;</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>      }</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>      {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        max_speed = 80_mph;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>      }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>      </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="comment">// If the lanelet does not have a digital speed limit then add one with the maximum value of 80</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    std::vector&lt;std::string&gt; allowed_participants;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>     <span class="comment">//Maximum speed limit is 80</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>   </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="keywordflow">if</span> (speed_limit.empty())<span class="comment">//If there is no assigned speed limit value</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>         <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rules : default_traffic_rules)</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>         {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>            <span class="keywordflow">if</span> (rules-&gt;canPass(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>))</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>             {</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>              allowed_participants.emplace_back(rules-&gt;participant());</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>             }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>     <span class="keywordflow">if</span> (!allowed_participants.empty())</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>     {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>      <span class="keyword">auto</span> rar = std::make_shared&lt;DigitalSpeedLimit&gt;(DigitalSpeedLimit::buildData(lanelet::utils::getId(), max_speed, {<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>},</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>      {}, allowed_participants));</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>      <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(rar);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>      map-&gt;add(rar);<span class="comment">//Add DigitalSpeedLimit data to the map</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>     }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  }</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>  <span class="keywordflow">else</span>  <span class="comment">//If the speed limit value already exists </span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>      <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rules : default_traffic_rules)</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>         {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <span class="keywordflow">if</span> (rules-&gt;canPass(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>))</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>             {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>              allowed_participants.emplace_back(rules-&gt;participant());</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>             }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    <span class="keywordflow">if</span>(speed_limit.back().get()-&gt;speed_limit_ &gt; max_speed)<span class="comment">//Check that speed limit value does not exceed the maximum value</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>      RCLCPP_DEBUG_STREAM( rclcpp::get_logger(<span class="stringliteral">&quot;lanelet::MapConformer&quot;</span>), <span class="stringliteral">&quot;Invalid speed limit value. Value reset to maximum speed limit.&quot;</span>);</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>      <span class="keyword">auto</span> rar = std::make_shared&lt;DigitalSpeedLimit&gt;(DigitalSpeedLimit::buildData(lanelet::utils::getId(), max_speed, {<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>},</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>      {}, allowed_participants));</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>      <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.removeRegulatoryElement(speed_limit.back());</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>      <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.addRegulatoryElement(rar);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>      map-&gt;update(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, rar);<span class="comment">//Add DigitalSpeedLimit data to the map</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>      RCLCPP_INFO_STREAM( rclcpp::get_logger(<span class="stringliteral">&quot;lanelet::MapConformer&quot;</span>), <span class="stringliteral">&quot;Number of Regulatory Elements: &quot;</span>&lt;&lt; map-&gt;regulatoryElementLayer.size());</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span> </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span> </div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>  }</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>}</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno"><a class="line" href="namespacelanelet_1_1MapConformer.html#a20caaf0f529166126f0f4ea4d80f80d0">  550</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacelanelet_1_1MapConformer.html#a20caaf0f529166126f0f4ea4d80f80d0">ensureCompliance</a>(lanelet::LaneletMapPtr map, lanelet::Velocity config_limit)</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>{</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  <span class="keyword">auto</span> default_traffic_rules = <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a01b13b2659da99328b90f3d9ef8a332a">getAllGermanTrafficRules</a>();  <span class="comment">// Use german traffic rules as default as they most closely</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                                                            <span class="comment">// match the generic traffic rules</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  <span class="comment">// Handle lanelets</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a> : map-&gt;laneletLayer)</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  {</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">addInferredAccessRule</a>(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, map, default_traffic_rules);</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">addInferredPassingControlLine</a>(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, map);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4319f59405930feb81d5313eefde3a2c">addInferredDirectionOfTravel</a>(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, map, default_traffic_rules);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a76a04caafb69f81d7f16c58060b3644f">addValidSpeedLimit</a>(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, map, config_limit, default_traffic_rules);<span class="comment">// 0_mph can be changed with the config_limit</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>  <span class="comment">// Handle areas</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> area : map-&gt;areaLayer)</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">addInferredAccessRule</a>(area, map, default_traffic_rules);</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <a class="code hl_function" href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">addInferredPassingControlLine</a>(area, map);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>}</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>}  <span class="comment">// namespace MapConformer</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>}  <span class="comment">// namespace lanelet</span></div>
<div class="ttc" id="aMapConformer_8hpp_html"><div class="ttname"><a href="MapConformer_8hpp.html">MapConformer.hpp</a></div></div>
<div class="ttc" id="aWorldModel_8hpp_html"><div class="ttname"><a href="WorldModel_8hpp.html">WorldModel.hpp</a></div></div>
<div class="ttc" id="aclassGenericValue_html"><div class="ttname"><a href="classGenericValue.html">GenericValue</a></div><div class="ttdoc">Represents a JSON value. Use Value for UTF8 encoding and default allocator.</div><div class="ttdef"><b>Definition:</b> <a href="document_8h_source.html#l00551">document.h:551</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a01b13b2659da99328b90f3d9ef8a332a"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a01b13b2659da99328b90f3d9ef8a332a">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::getAllGermanTrafficRules</a></div><div class="ttdeci">std::vector&lt; lanelet::traffic_rules::TrafficRulesUPtr &gt; getAllGermanTrafficRules()</div><div class="ttdoc">Helper function to return the set of all german traffic rules which are currently implemented.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00066">MapConformer.cpp:66</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a20f16cf50f446f986b716c00d71c6e86"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a20f16cf50f446f986b716c00d71c6e86">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::buildControlLine</a></div><div class="ttdeci">PassingControlLinePtr buildControlLine(LineString3d &amp;bound, const LaneChangeType type, const std::string &amp;participant)</div><div class="ttdoc">Helper function constructs a PassingControlLine based off the provided bound and lane change type.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00198">MapConformer.cpp:198</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a3dcd4f6f6ba91a1012f1200d38bc16af"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a3dcd4f6f6ba91a1012f1200d38bc16af">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::getChangeType</a></div><div class="ttdeci">LaneChangeType getChangeType(const std::string &amp;type, const std::string &amp;subtype, const std::string &amp;participant)</div><div class="ttdoc">Helper function to determine the type of lane change implicitly allowed by the markings on the road.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00155">MapConformer.cpp:155</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a4319f59405930feb81d5313eefde3a2c"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4319f59405930feb81d5313eefde3a2c">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::addInferredDirectionOfTravel</a></div><div class="ttdeci">void addInferredDirectionOfTravel(Lanelet &amp;lanelet, lanelet::LaneletMapPtr map, const std::vector&lt; lanelet::traffic_rules::TrafficRulesUPtr &gt; &amp;default_traffic_rules)</div><div class="ttdoc">Generate DirectionOfTravel from the inferred regulations in the provided map and lanelet Only adds a ...</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00452">MapConformer.cpp:452</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a4f35e817fd47cb295c1c9e3e5671caad"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a4f35e817fd47cb295c1c9e3e5671caad">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::PARTICIPANT_COUNT</a></div><div class="ttdeci">constexpr size_t PARTICIPANT_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00047">MapConformer.cpp:47</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a76a04caafb69f81d7f16c58060b3644f"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a76a04caafb69f81d7f16c58060b3644f">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::addValidSpeedLimit</a></div><div class="ttdeci">void addValidSpeedLimit(Lanelet &amp;lanelet, lanelet::LaneletMapPtr map, lanelet::Velocity config_limit, const std::vector&lt; lanelet::traffic_rules::TrafficRulesUPtr &gt; &amp;default_traffic_rules)</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00481">MapConformer.cpp:481</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a954a08872015000aad35dace38e258d8"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a954a08872015000aad35dace38e258d8">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::participant_types</a></div><div class="ttdeci">constexpr const char * participant_types[PARTICIPANT_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00048">MapConformer.cpp:48</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_a977838b10c0e695c774107fd26c335f7"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#a977838b10c0e695c774107fd26c335f7">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::addInferredPassingControlLine</a></div><div class="ttdeci">void addInferredPassingControlLine(Area &amp;area, lanelet::LaneletMapPtr map)</div><div class="ttdoc">Generate PassingControlLines from the inferred regulations in the provided map and area.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00386">MapConformer.cpp:386</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ab35f87a726141bcdebae6fa19a7f0820"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::LaneChangeType</a></div><div class="ttdeci">LaneChangeType</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00038">MapConformer.cpp:39</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ab35f87a726141bcdebae6fa19a7f0820a130c5b3473c57faa76e2a1c54e26f88e"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a130c5b3473c57faa76e2a1c54e26f88e">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::LaneChangeType::Both</a></div><div class="ttdeci">@ Both</div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ab35f87a726141bcdebae6fa19a7f0820a62915910963ecbbf57ce72b91185f77e"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a62915910963ecbbf57ce72b91185f77e">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::LaneChangeType::ToLeft</a></div><div class="ttdeci">@ ToLeft</div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ab35f87a726141bcdebae6fa19a7f0820a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a6adf97f83acf6453d4a6a4b1070f3754">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::LaneChangeType::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ab35f87a726141bcdebae6fa19a7f0820a7b75dfc7b1f858ecd4b3083ae3e2595c"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ab35f87a726141bcdebae6fa19a7f0820a7b75dfc7b1f858ecd4b3083ae3e2595c">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::LaneChangeType::ToRight</a></div><div class="ttdeci">@ ToRight</div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ac65728eb2e5688331a88d9dd20ac75a3"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ac65728eb2e5688331a88d9dd20ac75a3">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::startswith</a></div><div class="ttdeci">bool startswith(const std::string &amp;str, const std::string &amp;substr)</div><div class="ttdoc">Helper function to check if a string starts with another string.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00134">MapConformer.cpp:134</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ae5cd14f5d9ebf27510d794f22e61e887"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae5cd14f5d9ebf27510d794f22e61e887">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::getMapOrDefault</a></div><div class="ttdeci">Value getMapOrDefault(const Map &amp;map, Key key, Value defaultVal)</div><div class="ttdoc">Helper function to get a value from a map or return a default value when key is not present.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00109">MapConformer.cpp:109</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03_html_ae80c94af49478480f8b4795333455307"><div class="ttname"><a href="namespacelanelet_1_1MapConformer_1_1anonymous__namespace_02MapConformer_8cpp_03.html#ae80c94af49478480f8b4795333455307">lanelet::MapConformer::anonymous_namespace{MapConformer.cpp}::addInferredAccessRule</a></div><div class="ttdeci">void addInferredAccessRule(Area &amp;area, lanelet::LaneletMapPtr map, const std::vector&lt; lanelet::traffic_rules::TrafficRulesUPtr &gt; &amp;default_traffic_rules)</div><div class="ttdoc">Generate RegionAccessRules from the inferred regulations in the provided map and area.</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00278">MapConformer.cpp:278</a></div></div>
<div class="ttc" id="anamespacelanelet_1_1MapConformer_html_a20caaf0f529166126f0f4ea4d80f80d0"><div class="ttname"><a href="namespacelanelet_1_1MapConformer.html#a20caaf0f529166126f0f4ea4d80f80d0">lanelet::MapConformer::ensureCompliance</a></div><div class="ttdeci">void ensureCompliance(lanelet::LaneletMapPtr map, lanelet::Velocity config_limit=80_mph)</div><div class="ttdoc">Function modifies an existing map to make a best effort attempt at ensuring the map confroms to the e...</div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8cpp_source.html#l00550">MapConformer.cpp:550</a></div></div>
<div class="ttc" id="anamespacelanelet_html"><div class="ttname"><a href="namespacelanelet.html">lanelet</a></div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8hpp_source.html#l00038">MapConformer.hpp:39</a></div></div>
<div class="ttc" id="anamespacepcl_html"><div class="ttname"><a href="namespacepcl.html">pcl</a></div><div class="ttdef"><b>Definition:</b> <a href="functor__filter_8h_source.html#l00024">functor_filter.h:24</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="arapidjson_8h_html_a1d1cfd8ffb84e947f82999c682b666a7"><div class="ttname"><a href="rapidjson_8h.html#a1d1cfd8ffb84e947f82999c682b666a7">Type</a></div><div class="ttdeci">Type</div><div class="ttdoc">Type of JSON value.</div><div class="ttdef"><b>Definition:</b> <a href="rapidjson_8h_source.html#l00616">rapidjson.h:616</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_063394ac95ddab6826ca68be56e39eae.html">carma_wm</a></li><li class="navelem"><a class="el" href="dir_bed7bb81c6bc1fae1bac689cbf6acc02.html">src</a></li><li class="navelem"><a class="el" href="MapConformer_8cpp.html">MapConformer.cpp</a></li>
    <li class="footer">Generated on Thu May 2 2024 15:52:32 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
