<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: Bag Processor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_engineering_tools_BagProcessor_READMe.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Bag Processor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Automated Script to process bag files </p><pre class="fragment">Some notes: 

This script, process_bags.bash, can be run within the folder of the vehicle. This script depends on process_one_bag.bash, which depends on topics.txt, meaning all three must be in the same directory. Please make sure that there exist bag files within each subdirectory. This means that the bag file must be within its corresponding subdirectory. 

To omit certain topics from being processed, you can comment it out by putting # before the line in topics.txt.

For example:    

    #/carma/drivers/srx_can/can/brake_position &gt; brake_position.csv
    /carma/drivers/srx_can/can/speed &gt; can_speed.csv
    /carma/drivers/srx_controller/controller/cmd_speed &gt; cmd_speed.csv
    #/carma/drivers/srx_objects/f_lrr/sensor/objects &gt; front_radar.csv
    #/carma/guidance/outgoing_mobility_operation &gt; outgoing_mobility_operation.csv
    /carma/guidance/outgoing_mobility_path &gt; outgoing_mobility_path.csv
    /carma/guidance/outgoing_mobility_request &gt; outgoing_mobility_request.csv
    #/carma/guidance/outgoing_mobility_response &gt; outgoing_mobility_response.csv
    #/carma/guidance/plugins/controlling_plugins &gt; controlling_plugin.csv
    #/carma/message/incoming_bsm &gt; incoming_bsm.csv
    #/carma/message/incoming_mobility_operation &gt; incoming_mobility_operation.csv
    #/carma/message/incoming_mobility_request &gt; incoming_mobility_request.csv
    #/carma/message/incoming_mobility_response &gt; incoming_mobility_response.csv
    #/carma/message/incoming_mobility_path &gt; incoming_mobility_path.csv
    #/carma/sensor_fusion/filtered/heading &gt; heading.csv
    #/carma/sensor_fusion/filtered/velocity &gt; velocity.csv
    #/carma/sensor_fusion/filtered/nav_sat_fix &gt; nav_sat_fix.csv
    #/carma/sensor_fusion/filtered/acceleration &gt; acceleration.csv


Would only process can_speed, cmd_speed, outgoing_mobility_path, and outgoing_mobility_request as topics


To call the script:

    bash ./process_bags.bash &lt;date_of_test&gt; OPT&lt;number_of_seconds_filter&gt; OPT&lt;rate_of_bag_play&gt;

    For Example:
        If the date that the test was conducted is June 27, 2018, then it should be denoted as 20180627
        The second argument will be an optional argument that takes in a number that will exclude processsing any log files with a duration less than it. The default value will be 0.
        The third argument will be an optional argument that takes in a number that will determine the rate at which is a rosbag is played back. This is to give more control as large files require smaller values in order to be stable. The default value will be 5.

    The processed files will be placed in a newly created directory and will be denoted VEHICLE_DATEOFTEST

    So the directory will look something like this if process_bags.bash was run inside the white directory

    TO26_I95_Logs_6_27_18
    --Black
    --Green
    --Grey
    --Silver
    --White_20180627 &lt;-- resulting directory
    --White
    ----process_bags.bash
    ----process_one_bag
    ----topics.txt
    ----20180627-071715
    ------_2018-06-27-07-17-16.bag
    ----20180627-100653
    ------_2018-06-27-10-06-55.bag
    ----20180627-104003
    ------_2018-06-27-10-40-05.bag
    ----20180627-104809
    ------_2018-06-27-10-48-10.bag
    ----20180627-111624
    ------_2018-06-27-11-16-25.bag
    ----20180627-123800
    ------_2018-06-27-12-38-01.bag
    ----20180627-132041
    ------_2018-06-27-13-20-42.bag
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 16 2024 14:44:19 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
