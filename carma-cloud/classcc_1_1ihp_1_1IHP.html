<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-cloud: cc.ihp.IHP Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-cloud<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMAcloud provides some of the infrastructure components for CARMA. It enables users to define geofences, rules of practice, replay storms to test weather-related rules of practice, as well as monitor CARMA-enabled vehicles and the messages and controls exchanged with them.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classcc_1_1ihp_1_1IHP.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pac-methods">Package Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classcc_1_1ihp_1_1IHP-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cc.ihp.IHP Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for cc.ihp.IHP:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP__inherit__graph.png" border="0" usemap="#acc_8ihp_8IHP_inherit__map" alt="Inheritance graph"/></div>
<map name="acc_8ihp_8IHP_inherit__map" id="acc_8ihp_8IHP_inherit__map">
<area shape="rect" title=" " alt="" coords="5,131,180,780"/>
<area shape="rect" title=" " alt="" coords="49,5,137,83"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for cc.ihp.IHP:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP__coll__graph.png" border="0" usemap="#acc_8ihp_8IHP_coll__map" alt="Collaboration graph"/></div>
<map name="acc_8ihp_8IHP_coll__map" id="acc_8ihp_8IHP_coll__map">
<area shape="rect" title=" " alt="" coords="587,403,762,729"/>
<area shape="rect" title=" " alt="" coords="5,145,93,223"/>
<area shape="rect" title=" " alt="" coords="117,145,173,223"/>
<area shape="rect" title=" " alt="" coords="215,145,270,223"/>
<area shape="rect" title=" " alt="" coords="295,145,473,223"/>
<area shape="rect" title=" " alt="" coords="347,5,421,83"/>
<area shape="rect" title=" " alt="" coords="498,145,537,223"/>
<area shape="rect" title=" " alt="" coords="561,145,743,223"/>
<area shape="rect" title=" " alt="" coords="713,5,791,83"/>
<area shape="rect" title=" " alt="" coords="767,145,937,223"/>
<area shape="rect" title=" " alt="" coords="962,145,1025,223"/>
<area shape="rect" title=" " alt="" coords="1049,145,1095,223"/>
<area shape="rect" title=" " alt="" coords="1123,145,1173,223"/>
<area shape="rect" title=" " alt="" coords="1197,145,1285,223"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab461640a85ee9016e1c07553fb8d097d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#ab461640a85ee9016e1c07553fb8d097d">init</a> (ServletConfig oConfig)  throws ServletException 	</td></tr>
<tr class="separator:ab461640a85ee9016e1c07553fb8d097d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eebc83215ec2952080c469a00e4b08f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f">readCorridors</a> (String sFile)</td></tr>
<tr class="separator:a6eebc83215ec2952080c469a00e4b08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f148b5dc823238497194c5e996fa1d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6">readDetectors</a> ()  throws IOException 	</td></tr>
<tr class="separator:a8f148b5dc823238497194c5e996fa1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50026b144f9ab2a3593e780806b071de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de">execute</a> ()</td></tr>
<tr class="separator:a50026b144f9ab2a3593e780806b071de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af568702fccfef19e70ab6cb7936ccdbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd">doPost</a> (HttpServletRequest oReq, HttpServletResponse oRes)  throws IOException, ServletException 	</td></tr>
<tr class="separator:af568702fccfef19e70ab6cb7936ccdbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pac-methods" name="pac-methods"></a>
Package Functions</h2></td></tr>
<tr class="memitem:ac58d0e0175b5c9ce7b4d338a7fc204e3"><td class="memItemLeft" align="right" valign="top">ArrayList&lt; <a class="el" href="classcc_1_1ctrl_1_1TrafCtrl.html">TrafCtrl</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3">generateSpeedControls</a> (ArrayList&lt; <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> &gt; oCorridors, HashMap&lt; String, Double &gt; oParameters, boolean bSimulation)  throws IOException 	</td></tr>
<tr class="separator:ac58d0e0175b5c9ce7b4d338a7fc204e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a64de9b18e67b14bdb4516e1feda41144"><td class="memItemLeft" align="right" valign="top">HashMap&lt; String, Double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144">readParameters</a> ()</td></tr>
<tr class="separator:a64de9b18e67b14bdb4516e1feda41144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195876f1a935eac7fb98bed19d5eb59d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a195876f1a935eac7fb98bed19d5eb59d">getParameters</a> (JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a195876f1a935eac7fb98bed19d5eb59d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af698769072a0f5b9fe15ae50cecaf490"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#af698769072a0f5b9fe15ae50cecaf490">saveParameters</a> (HttpServletRequest oReq, JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:af698769072a0f5b9fe15ae50cecaf490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9abd1b1ebb3f4c7f0c0d845c4321329f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a9abd1b1ebb3f4c7f0c0d845c4321329f">status</a> (<a class="el" href="classcc_1_1ws_1_1Session.html">Session</a> oSession, JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a9abd1b1ebb3f4c7f0c0d845c4321329f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659feda7d6a5fd3fc978ec7e9d273190"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190">startSim</a> (JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a659feda7d6a5fd3fc978ec7e9d273190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a145d5aa03ac4c0d32de2dad078acdcc6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a145d5aa03ac4c0d32de2dad078acdcc6">stopSim</a> (JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a145d5aa03ac4c0d32de2dad078acdcc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa494fa5af146512063b20c73fd58f19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#afa494fa5af146512063b20c73fd58f19">saveGeo</a> (HttpServletRequest oReq)  throws Exception 	</td></tr>
<tr class="separator:afa494fa5af146512063b20c73fd58f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d9d0fbe4f5d4975b252c711df169b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a50d9d0fbe4f5d4975b252c711df169b9">getGeo</a> (JSONObject oResponse)</td></tr>
<tr class="separator:a50d9d0fbe4f5d4975b252c711df169b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef6b6bbe4cdbe133249c632ac05cca10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#aef6b6bbe4cdbe133249c632ac05cca10">updateDetectors</a> (HttpServletRequest oReq)  throws Exception 	</td></tr>
<tr class="separator:aef6b6bbe4cdbe133249c632ac05cca10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5143b92c262e56a7b4348fb51a92b5cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a5143b92c262e56a7b4348fb51a92b5cf">getDetectors</a> (JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a5143b92c262e56a7b4348fb51a92b5cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464bed6c7a6cd63932ede045f0e4351e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e">getFiles</a> (JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:a464bed6c7a6cd63932ede045f0e4351e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff07b202b4230e767c7f46b8b4c52afb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#aff07b202b4230e767c7f46b8b4c52afb">getFile</a> (HttpServletRequest oReq, JSONObject oResponse)  throws Exception 	</td></tr>
<tr class="separator:aff07b202b4230e767c7f46b8b4c52afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a97a1cca655c3f95cc7a0e964fbf51960"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">m_sEndpoint</a></td></tr>
<tr class="separator:a97a1cca655c3f95cc7a0e964fbf51960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd638512f6ae4592bbad9a99be1c228"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> = null</td></tr>
<tr class="separator:abdd638512f6ae4592bbad9a99be1c228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc741379533dce6503927a1a269ffee0"><td class="memItemLeft" align="right" valign="top">final ArrayList&lt; <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a> = new ArrayList()</td></tr>
<tr class="separator:acc741379533dce6503927a1a269ffee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeab69bb94e16bd0fa29ad05ff82c51a"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a></td></tr>
<tr class="separator:aaeab69bb94e16bd0fa29ad05ff82c51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef324811ee219cef60571c5cc2dd3466"><td class="memItemLeft" align="right" valign="top">final String[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a> = new String[]{&quot;space_factor&quot;, &quot;ratio_reduced_speed&quot;, &quot;consecutive_time_interval_trigger&quot;, &quot;time_interval&quot;, &quot;maximal_gap&quot;, &quot;baseline_flow&quot;}</td></tr>
<tr class="separator:aef324811ee219cef60571c5cc2dd3466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8e25bb2b00de20ec98bb9df2a8c395"><td class="memItemLeft" align="right" valign="top">final String[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a5e8e25bb2b00de20ec98bb9df2a8c395">STATUS_MSGS</a> = new String[]{&quot;Error&quot;, &quot;Invalid subsegment definitions&quot;, &quot;Ready to run&quot;, &quot;Running&quot;}</td></tr>
<tr class="separator:a5e8e25bb2b00de20ec98bb9df2a8c395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ac68d649991daa8ceb0af86001450a"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#ac9ac68d649991daa8ceb0af86001450a">ERROR</a> = 0</td></tr>
<tr class="separator:ac9ac68d649991daa8ceb0af86001450a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d3371b2c992d8b693f979040cb586de"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a6d3371b2c992d8b693f979040cb586de">INVALIDCORRIDOR</a> = 1</td></tr>
<tr class="separator:a6d3371b2c992d8b693f979040cb586de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2bb252be0d37801652ba0baf07d4603"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#af2bb252be0d37801652ba0baf07d4603">READY</a> = 2</td></tr>
<tr class="separator:af2bb252be0d37801652ba0baf07d4603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132d9293093a70f10b74b5b356248ed5"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a132d9293093a70f10b74b5b356248ed5">RUNNING</a> = 3</td></tr>
<tr class="separator:a132d9293093a70f10b74b5b356248ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908db8842d991813ca685294651b2ed2"><td class="memItemLeft" align="right" valign="top">final HashMap&lt; String, Double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a> = new HashMap()</td></tr>
<tr class="separator:a908db8842d991813ca685294651b2ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88209f141a18562620447b900f492b69"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a88209f141a18562620447b900f492b69">m_nLastControls</a> = 0</td></tr>
<tr class="separator:a88209f141a18562620447b900f492b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad0b1dc18eb22d52d454492e843cc85"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#afad0b1dc18eb22d52d454492e843cc85">m_lLastRun</a> = 0</td></tr>
<tr class="separator:afad0b1dc18eb22d52d454492e843cc85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af52a0361f1516b914fa68d1325da2d6b"><td class="memItemLeft" align="right" valign="top">final HashMap&lt; String, Long &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a> = new HashMap()</td></tr>
<tr class="separator:af52a0361f1516b914fa68d1325da2d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d00a4c59ec7ed407089154da1796d3e"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a5d00a4c59ec7ed407089154da1796d3e">m_sCurrentUser</a></td></tr>
<tr class="separator:a5d00a4c59ec7ed407089154da1796d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455cdf9fa508499c24bc917da94f66bf"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a></td></tr>
<tr class="separator:a455cdf9fa508499c24bc917da94f66bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c324fd88c29d9e5ad872850070e81b"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a></td></tr>
<tr class="separator:af1c324fd88c29d9e5ad872850070e81b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dafea702122d7b79b517d48daa2c6a1"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a></td></tr>
<tr class="separator:a3dafea702122d7b79b517d48daa2c6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2118834ef88722231d82c1257eaa27a"><td class="memItemLeft" align="right" valign="top">final Lock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a> = new ReentrantLock()</td></tr>
<tr class="separator:ae2118834ef88722231d82c1257eaa27a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b70695596737ce9e4cdc0054f793cbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a> = 0</td></tr>
<tr class="separator:a2b70695596737ce9e4cdc0054f793cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522c3062fcd99b0f9b48d89828a64c08"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a522c3062fcd99b0f9b48d89828a64c08">m_sCurrentFile</a> = null</td></tr>
<tr class="separator:a522c3062fcd99b0f9b48d89828a64c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0788d7074218e07d1b7f6554c9eaa134"><td class="memItemLeft" align="right" valign="top">JSONArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a0788d7074218e07d1b7f6554c9eaa134">m_oCurrentDetectors</a> = null</td></tr>
<tr class="separator:a0788d7074218e07d1b7f6554c9eaa134"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a4bcb8a244100ece52b3ed002c8125d32"><td class="memItemLeft" align="right" valign="top">static final Logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a> = LogManager.getLogger(IHP.class)</td></tr>
<tr class="separator:a4bcb8a244100ece52b3ed002c8125d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>aaron.cherney </dd></dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00067">67</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af568702fccfef19e70ab6cb7936ccdbd" name="af568702fccfef19e70ab6cb7936ccdbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af568702fccfef19e70ab6cb7936ccdbd">&#9670;&nbsp;</a></span>doPost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cc.ihp.IHP.doPost </td>
          <td>(</td>
          <td class="paramtype">HttpServletRequest&#160;</td>
          <td class="paramname"><em>oReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HttpServletResponse&#160;</td>
          <td class="paramname"><em>oRes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException, ServletException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Parses and processes the HTTP requests from the IHP2 Web Application</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oReq</td><td>object that contains all of the HTTP request information </td></tr>
    <tr><td class="paramname">oRes</td><td>object used to set the HTTP response </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
    <tr><td class="paramname">ServletException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00466">466</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  468</span>    {</div>
<div class="line"><span class="lineno">  469</span>        Session oSession = SessMgr.getSession(oReq);</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">if</span> (oSession == <span class="keyword">null</span>) <span class="comment">// request must contain a valid session token</span></div>
<div class="line"><span class="lineno">  471</span>        {</div>
<div class="line"><span class="lineno">  472</span>            oRes.sendError(HttpServletResponse.SC_UNAUTHORIZED);</div>
<div class="line"><span class="lineno">  473</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  474</span>        }</div>
<div class="line"><span class="lineno">  475</span>        String[] sUriParts = oReq.getRequestURI().split(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><span class="lineno">  476</span>        String sMethod = sUriParts[sUriParts.length - 1]; <span class="comment">// determine what type of request is made</span></div>
<div class="line"><span class="lineno">  477</span>        oRes.setContentType(<span class="stringliteral">&quot;application/json&quot;</span>); <span class="comment">// all responses are json</span></div>
<div class="line"><span class="lineno">  478</span>        JSONObject oResponse = <span class="keyword">new</span> JSONObject();</div>
<div class="line"><span class="lineno">  479</span>        oResponse.put(<span class="stringliteral">&quot;error&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  480</span>        <span class="keywordtype">int</span> nStatus;</div>
<div class="line"><span class="lineno">  481</span>        <span class="keywordflow">try</span> <span class="comment">// call the correct method depending on the request</span></div>
<div class="line"><span class="lineno">  482</span>        {</div>
<div class="line"><span class="lineno">  483</span>            <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;getParameters&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  484</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a195876f1a935eac7fb98bed19d5eb59d">getParameters</a>(oResponse);</div>
<div class="line"><span class="lineno">  485</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;status&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  486</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a9abd1b1ebb3f4c7f0c0d845c4321329f">status</a>(oSession, oResponse);</div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;saveParameters&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  488</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#af698769072a0f5b9fe15ae50cecaf490">saveParameters</a>(oReq, oResponse);</div>
<div class="line"><span class="lineno">  489</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;start&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  490</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190">startSim</a>(oResponse);</div>
<div class="line"><span class="lineno">  491</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;stop&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  492</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a145d5aa03ac4c0d32de2dad078acdcc6">stopSim</a>(oResponse);</div>
<div class="line"><span class="lineno">  493</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;saveGeo&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  494</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#afa494fa5af146512063b20c73fd58f19">saveGeo</a>(oReq);</div>
<div class="line"><span class="lineno">  495</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;getGeo&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  496</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a50d9d0fbe4f5d4975b252c711df169b9">getGeo</a>(oResponse);</div>
<div class="line"><span class="lineno">  497</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;updateDetectors&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  498</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#aef6b6bbe4cdbe133249c632ac05cca10">updateDetectors</a>(oReq);</div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;getDetectors&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  500</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a5143b92c262e56a7b4348fb51a92b5cf">getDetectors</a>(oResponse);</div>
<div class="line"><span class="lineno">  501</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;getFiles&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  502</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e">getFiles</a>(oResponse);</div>
<div class="line"><span class="lineno">  503</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sMethod.compareTo(<span class="stringliteral">&quot;getFile&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  504</span>                nStatus = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#aff07b202b4230e767c7f46b8b4c52afb">getFile</a>(oReq, oResponse);</div>
<div class="line"><span class="lineno">  505</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  506</span>                nStatus = HttpServletResponse.SC_UNAUTHORIZED;</div>
<div class="line"><span class="lineno">  507</span>            </div>
<div class="line"><span class="lineno">  508</span>            oRes.setStatus(nStatus);</div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordflow">try</span> (PrintWriter oOut = oRes.getWriter()) <span class="comment">// always write the JSON response</span></div>
<div class="line"><span class="lineno">  510</span>            {</div>
<div class="line"><span class="lineno">  511</span>                oResponse.write(oOut);</div>
<div class="line"><span class="lineno">  512</span>            }</div>
<div class="line"><span class="lineno">  513</span>            <span class="keywordflow">catch</span> (IOException oInner)</div>
<div class="line"><span class="lineno">  514</span>            {</div>
<div class="line"><span class="lineno">  515</span>                oRes.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);</div>
<div class="line"><span class="lineno">  516</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(<span class="stringliteral">&quot;Failed to write response for &quot;</span> + sMethod);</div>
<div class="line"><span class="lineno">  517</span>            }</div>
<div class="line"><span class="lineno">  518</span>        }</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">catch</span> (Exception oEx)</div>
<div class="line"><span class="lineno">  520</span>        {</div>
<div class="line"><span class="lineno">  521</span>            oRes.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);</div>
<div class="line"><span class="lineno">  522</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(oEx.getMessage() + <span class="stringliteral">&quot; during &quot;</span> + sMethod);</div>
<div class="line"><span class="lineno">  523</span>            String sErr = oResponse.getString(<span class="stringliteral">&quot;error&quot;</span>);</div>
<div class="line"><span class="lineno">  524</span>            oResponse.put(<span class="stringliteral">&quot;error&quot;</span>, sErr);</div>
<div class="line"><span class="lineno">  525</span>            <span class="keywordflow">try</span> (PrintWriter oOut = oRes.getWriter()) <span class="comment">// write error messages to the JSON response</span></div>
<div class="line"><span class="lineno">  526</span>            {</div>
<div class="line"><span class="lineno">  527</span>                oResponse.write(oOut);</div>
<div class="line"><span class="lineno">  528</span>            }</div>
<div class="line"><span class="lineno">  529</span>        }</div>
<div class="line"><span class="lineno">  530</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a145d5aa03ac4c0d32de2dad078acdcc6"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a145d5aa03ac4c0d32de2dad078acdcc6">cc.ihp.IHP.stopSim</a></div><div class="ttdeci">int stopSim(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00725">IHP.java:725</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a195876f1a935eac7fb98bed19d5eb59d"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a195876f1a935eac7fb98bed19d5eb59d">cc.ihp.IHP.getParameters</a></div><div class="ttdeci">int getParameters(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00539">IHP.java:539</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a464bed6c7a6cd63932ede045f0e4351e"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e">cc.ihp.IHP.getFiles</a></div><div class="ttdeci">int getFiles(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00907">IHP.java:907</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a4bcb8a244100ece52b3ed002c8125d32"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">cc.ihp.IHP.LOGGER</a></div><div class="ttdeci">static final Logger LOGGER</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00128">IHP.java:128</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a50d9d0fbe4f5d4975b252c711df169b9"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a50d9d0fbe4f5d4975b252c711df169b9">cc.ihp.IHP.getGeo</a></div><div class="ttdeci">int getGeo(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00797">IHP.java:797</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a5143b92c262e56a7b4348fb51a92b5cf"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a5143b92c262e56a7b4348fb51a92b5cf">cc.ihp.IHP.getDetectors</a></div><div class="ttdeci">int getDetectors(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00871">IHP.java:871</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a659feda7d6a5fd3fc978ec7e9d273190"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190">cc.ihp.IHP.startSim</a></div><div class="ttdeci">int startSim(JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00672">IHP.java:672</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a9abd1b1ebb3f4c7f0c0d845c4321329f"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a9abd1b1ebb3f4c7f0c0d845c4321329f">cc.ihp.IHP.status</a></div><div class="ttdeci">int status(Session oSession, JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00608">IHP.java:608</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_aef6b6bbe4cdbe133249c632ac05cca10"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#aef6b6bbe4cdbe133249c632ac05cca10">cc.ihp.IHP.updateDetectors</a></div><div class="ttdeci">int updateDetectors(HttpServletRequest oReq)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00842">IHP.java:842</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_af698769072a0f5b9fe15ae50cecaf490"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#af698769072a0f5b9fe15ae50cecaf490">cc.ihp.IHP.saveParameters</a></div><div class="ttdeci">int saveParameters(HttpServletRequest oReq, JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00563">IHP.java:563</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_afa494fa5af146512063b20c73fd58f19"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#afa494fa5af146512063b20c73fd58f19">cc.ihp.IHP.saveGeo</a></div><div class="ttdeci">int saveGeo(HttpServletRequest oReq)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00750">IHP.java:750</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_aff07b202b4230e767c7f46b8b4c52afb"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#aff07b202b4230e767c7f46b8b4c52afb">cc.ihp.IHP.getFile</a></div><div class="ttdeci">int getFile(HttpServletRequest oReq, JSONObject oResponse)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00949">IHP.java:949</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00871">cc.ihp.IHP.getDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00949">cc.ihp.IHP.getFile()</a>, <a class="el" href="IHP_8java_source.html#l00907">cc.ihp.IHP.getFiles()</a>, <a class="el" href="IHP_8java_source.html#l00797">cc.ihp.IHP.getGeo()</a>, <a class="el" href="IHP_8java_source.html#l00539">cc.ihp.IHP.getParameters()</a>, <a class="el" href="SessMgr_8java_source.html#l00033">cc.ws.SessMgr.getSession()</a>, <a class="el" href="IHP_8java_source.html#l00128">cc.ihp.IHP.LOGGER</a>, <a class="el" href="IHP_8java_source.html#l00750">cc.ihp.IHP.saveGeo()</a>, <a class="el" href="IHP_8java_source.html#l00563">cc.ihp.IHP.saveParameters()</a>, <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>, <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>, <a class="el" href="IHP_8java_source.html#l00725">cc.ihp.IHP.stopSim()</a>, and <a class="el" href="IHP_8java_source.html#l00842">cc.ihp.IHP.updateDetectors()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_af568702fccfef19e70ab6cb7936ccdbd_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_af568702fccfef19e70ab6cb7936ccdbd_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_af568702fccfef19e70ab6cb7936ccdbd_cgraph" id="aclasscc_1_1ihp_1_1IHP_af568702fccfef19e70ab6cb7936ccdbd_cgraph">
<area shape="rect" title=" " alt="" coords="5,520,132,547"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a5143b92c262e56a7b4348fb51a92b5cf" title=" " alt="" coords="191,242,349,268"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#aff07b202b4230e767c7f46b8b4c52afb" title=" " alt="" coords="208,292,332,319"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e" title=" " alt="" coords="433,292,563,319"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50d9d0fbe4f5d4975b252c711df169b9" title=" " alt="" coords="207,444,333,471"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a195876f1a935eac7fb98bed19d5eb59d" title=" " alt="" coords="413,1311,583,1338"/>
<area shape="rect" href="classcc_1_1ws_1_1SessMgr.html#a7b682eaadda0463058bf36e230b2492d" title=" " alt="" coords="181,671,359,698"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#afa494fa5af146512063b20c73fd58f19" title=" " alt="" coords="201,722,339,748"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af698769072a0f5b9fe15ae50cecaf490" title=" " alt="" coords="180,772,360,799"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190" title=" " alt="" coords="203,546,337,572"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a9abd1b1ebb3f4c7f0c0d845c4321329f" title=" " alt="" coords="209,394,331,420"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a145d5aa03ac4c0d32de2dad078acdcc6" title=" " alt="" coords="203,823,337,850"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#aef6b6bbe4cdbe133249c632ac05cca10" title=" " alt="" coords="408,520,588,547"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a110fa0469db86b2624796b54066ebb75" title=" " alt="" coords="1649,2120,1788,2147"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0d0f478813f5ef4a2c4e8bd2efa3d7c1" title=" " alt="" coords="409,343,587,370"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a7ab072eb95484c4ece6ade0bde61b18c" title=" " alt="" coords="411,394,585,420"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144" title=" " alt="" coords="636,1976,813,2003"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f" title=" " alt="" coords="417,2027,579,2054"/>
<area shape="rect" href="classcc_1_1ihp_1_1Corridor.html#ace377f38df88b0ec9df17aa5930e9b9d" title=" " alt="" coords="661,2027,789,2054"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de" title=" " alt="" coords="433,575,563,602"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3" title=" " alt="" coords="883,428,1055,469"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6" title=" " alt="" coords="641,547,808,574"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a407342aae592fd466d9679f1697089f6" title=" " alt="" coords="637,1910,812,1952"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a1b3d7b9b4c1c85647dbd9361a997f499" title=" " alt="" coords="636,598,813,640"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ad2b0be731525bf78dfd53f928929348f" title=" " alt="" coords="1659,4155,1779,4182"/>
<area shape="rect" href="classcc_1_1util_1_1MathUtil.html#a68ef402505ae8abc4065f8673422b5fc" title=" " alt="" coords="1140,1450,1312,1476"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="1158,623,1294,650"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ac238b5e5777edad2526561c2eeb26064" title=" " alt="" coords="1142,4474,1310,4500"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a492b8381a1eb62aee9eaeb81888a83de" title=" " alt="" coords="1381,800,1565,827"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrl.html#ada6cc53215b6f0c03f48c857ed62be43" title=" " alt="" coords="1159,1348,1293,1375"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#aabe972c17d1057379e7914a2e34a6693" title=" " alt="" coords="1617,427,1820,454"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="1145,572,1307,599"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a5b6a1769051751efefd777ee310fe893" title=" " alt="" coords="1135,303,1317,330"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a0e6a43a63d8127a8bd1ebe1536e5b7a7" title=" " alt="" coords="1137,55,1315,82"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a8e3d97064f85859c1eab5be32d496284" title=" " alt="" coords="1144,106,1308,148"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a9ea08b43e7884424f8836100eaf4d1c9" title=" " alt="" coords="1143,172,1309,213"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a897385b9eaa9258399b9b84c7f4843ca" title=" " alt="" coords="1139,354,1313,396"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#a28dcd177ce710068183b63672dd8d34e" title=" " alt="" coords="1148,237,1304,278"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ae89dc313e8c10f8b29067356277ff3d6" title=" " alt="" coords="1868,4155,2056,4182"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="1376,623,1569,650"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="1385,572,1561,599"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a0b8cea038af220c1d98cebf7a5f333c2" title=" " alt="" coords="1391,4256,1554,4297"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#af509524ed51a0b33daf14ca461f5e376" title=" " alt="" coords="1901,3194,2023,3220"/>
<area shape="rect" href="classcc_1_1util_1_1Text.html#a9b7dd03037c22c2cc0ca511d6623e800" title=" " alt="" coords="1395,1372,1550,1399"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0f6f5813f72ec98f00726f03f62270ac" title=" " alt="" coords="1869,427,2055,454"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12dfd03cde8e76b757d0ba535186d43a" title=" " alt="" coords="1385,289,1560,330"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a1c0c9d4ac165094c323436e2047b759e" title=" " alt="" coords="1389,354,1557,396"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12287382f28763590928f95ed9c81ae4" title=" " alt="" coords="1623,899,1814,926"/>
<area shape="rect" href="classcc_1_1ihp_1_1Subsegment.html#ae6f2310b45ad493ed89cdfa899587a7a" title=" " alt="" coords="881,506,1056,548"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#a5311ecb90c7a2c76ba389b73edb07f68" title=" " alt="" coords="871,3725,1066,3766"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcDirection.html#a2ec255b2924b3769686d615cc40737c9" title=" " alt="" coords="866,1493,1071,1534"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcHeadway.html#a9ded9290ba708640872d6985fc1da2d0" title=" " alt="" coords="865,1122,1073,1164"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxPlatoonSize.html#adf5e6c93936b9ecb4bcb2039f191e501" title=" " alt="" coords="877,2008,1060,2049"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxSpeed.html#a0450e7bec9885dc65deb73e94948c953" title=" " alt="" coords="861,920,1076,961"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMinPlatoonHdwy.html#a8dabeb194d55e3d3c9c8320bd70055ac" title=" " alt="" coords="879,1942,1059,1984"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcOpening.html#aa19c1962e66bce0648242b17ba4326df" title=" " alt="" coords="867,3821,1070,3862"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcSignal.html#aacc879e9e19a1196f2ab7842284c7e1a" title=" " alt="" coords="873,2421,1064,2462"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcStop.html#af6a3568aabe0108378de6716ac9b4ce7" title=" " alt="" coords="878,2218,1059,2260"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcYield.html#a6f1c18261612249c3bee86e622c2f10e" title=" " alt="" coords="877,1877,1060,1918"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#a5b63948c276949d4139e1bdfab69d92f" title=" " alt="" coords="867,3060,1071,3101"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosing.html#a0a2895a21230e25c0314f2c7ca3e7a1b" title=" " alt="" coords="870,3948,1067,3989"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#af056a1a6f4aca407a3101ac8f7d160f2" title=" " alt="" coords="1155,4088,1297,4129"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ad077e6e88ca11094a491a0502e0a833b" title=" " alt="" coords="1405,3143,1540,3170"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#adcb4de9f0f37f923b411c37de2815bbb" title=" " alt="" coords="1389,1653,1556,1694"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a3d855f5ea45b8c4e2d77a77639db7e45" title=" " alt="" coords="1144,3464,1308,3505"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a4fd6d36df99db8a6bcf94abb77108277" title=" " alt="" coords="1407,2903,1538,2930"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a1cb80b67268e839445ca6a8ac0f99c03" title=" " alt="" coords="1395,3350,1551,3376"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#acad5fecf938895e2a9ea81e76654e85d" title=" " alt="" coords="1389,2196,1556,2237"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#ae63fac7675e20daf42f530a246c4fe67" title=" " alt="" coords="1129,4205,1323,4246"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ae7a37f571f3a1efcc1adac19e25cb759" title=" " alt="" coords="1145,4372,1307,4399"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdLayer.html#a9fb7834ce4bf8cb6b44f00e5c2b6f7c5" title=" " alt="" coords="1143,2479,1309,2506"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a238d4c0d1ded2a27a6fd924d52ddced4" title=" " alt="" coords="1143,2008,1309,2049"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#abdb33a4fe3fa85788b064a17123cd97e" title=" " alt="" coords="1401,2261,1545,2302"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2241ff39ed721c330abdc7c1b9d90f44" title=" " alt="" coords="1631,2008,1806,2049"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a7e92758a1d96179668521360b1524949" title=" " alt="" coords="1650,3143,1787,3170"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a8f7846336ea8bf156adc5b5ed88e26fb" title=" " alt="" coords="1660,2903,1777,2930"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ab7436ca83ec17988aa62142389c52016" title=" " alt="" coords="1383,2627,1562,2654"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ac068d66888fb0e7b24c88b05de0805c6" title=" " alt="" coords="1635,2620,1803,2661"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a6d70755c859d1efe5124fea98214ab2e" title=" " alt="" coords="1136,1232,1316,1273"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2a4afbdc4d7858a1a792faa33175a916" title=" " alt="" coords="1141,1079,1311,1106"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#ad2943e3db00285f11fb4ca0587663b0c" title=" " alt="" coords="1148,2682,1304,2724"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#aaf9deb249e1bac3a264c792b06d88fb3" title=" " alt="" coords="1380,3299,1565,3326"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#a4bb2c0bd3ab70e2fe09654e21cbeb872" title=" " alt="" coords="1152,2976,1300,3017"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#aa4833293f5e96db8a411445665111806" title=" " alt="" coords="1124,3245,1328,3286"/>
</map>
</div>

</div>
</div>
<a id="a50026b144f9ab2a3593e780806b071de" name="a50026b144f9ab2a3593e780806b071de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50026b144f9ab2a3593e780806b071de">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cc.ihp.IHP.execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Main execution of the Speed Harmonization Algorithm. If there is a configured endpoint, it tries to use data from that source. Otherwise the data in the detector json file is used. </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00354">354</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>    {</div>
<div class="line"><span class="lineno">  356</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.tryLock()) <span class="comment">// lock for async requests, if lock is already acquired don&#39;t execute</span></div>
<div class="line"><span class="lineno">  357</span>        {</div>
<div class="line"><span class="lineno">  358</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  359</span>            {</div>
<div class="line"><span class="lineno">  360</span>                <span class="keywordflow">for</span> (Corridor oCorridor : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>) <span class="comment">// for each subsegment reset data values to be filled in from data source or detectors.json</span></div>
<div class="line"><span class="lineno">  361</span>                    <span class="keywordflow">for</span> (Subsegment oSubsegment : oCorridor)</div>
<div class="line"><span class="lineno">  362</span>                        oSubsegment.reset();</div>
<div class="line"><span class="lineno">  363</span>                </div>
<div class="line"><span class="lineno">  364</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">m_sEndpoint</a> != <span class="keyword">null</span>) <span class="comment">// if the endpoint is defined, attempt to connect to it and get data</span></div>
<div class="line"><span class="lineno">  365</span>                {</div>
<div class="line"><span class="lineno">  366</span>                    URL oUrl = <span class="keyword">new</span> URL(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">m_sEndpoint</a>);</div>
<div class="line"><span class="lineno">  367</span>                    URLConnection oConn = oUrl.openConnection();</div>
<div class="line"><span class="lineno">  368</span>                    oConn.setReadTimeout(30000);</div>
<div class="line"><span class="lineno">  369</span>                    oConn.setConnectTimeout(10000);</div>
<div class="line"><span class="lineno">  370</span>                    <span class="keywordflow">try</span> (BufferedInputStream oIn = <span class="keyword">new</span> BufferedInputStream(oConn.getInputStream()))</div>
<div class="line"><span class="lineno">  371</span>                    {</div>
<div class="line"><span class="lineno">  372</span>                        IHPResponse oResponse = <span class="keyword">new</span> IHPResponse(oIn, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>);</div>
<div class="line"><span class="lineno">  373</span>                    }</div>
<div class="line"><span class="lineno">  374</span>                }</div>
<div class="line"><span class="lineno">  375</span>                <span class="keywordflow">else</span> <span class="comment">// if there is not an endpoint, read the detector file that contains simulated data</span></div>
<div class="line"><span class="lineno">  376</span>                {</div>
<div class="line"><span class="lineno">  377</span>                    <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6">readDetectors</a>();</div>
<div class="line"><span class="lineno">  378</span>                }</div>
<div class="line"><span class="lineno">  379</span>                </div>
<div class="line"><span class="lineno">  380</span>                ArrayList&lt;TrafCtrl&gt; oCtrls = <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3">generateSpeedControls</a>(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>, <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144">readParameters</a>(), <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">m_sEndpoint</a> == <span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  381</span>                ArrayList&lt;int[]&gt; nTiles = <span class="keyword">new</span> ArrayList();</div>
<div class="line"><span class="lineno">  382</span>                <span class="keywordflow">for</span> (TrafCtrl oCtrl : oCtrls)</div>
<div class="line"><span class="lineno">  383</span>                {</div>
<div class="line"><span class="lineno">  384</span>                    oCtrl.write(ProcCtrl.g_sTrafCtrlDir, ProcCtrl.g_dExplodeStep, ProcCtrl.g_nDefaultZoom, ProcCtrl.IHP2); <span class="comment">// save the new traffic controls</span></div>
<div class="line"><span class="lineno">  385</span>                    ProcCtrl.updateTiles(nTiles, oCtrl.m_oFullGeo.m_oTiles); <span class="comment">// determine which tiles they will be in</span></div>
<div class="line"><span class="lineno">  386</span>                }</div>
<div class="line"><span class="lineno">  387</span>                ProcCtrl.renderCtrls(<span class="stringliteral">&quot;maxspeed&quot;</span>, oCtrls, nTiles); <span class="comment">// add the rendered view of the control to the correct tiles</span></div>
<div class="line"><span class="lineno">  388</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#afad0b1dc18eb22d52d454492e843cc85">m_lLastRun</a> = System.currentTimeMillis(); <span class="comment">// update status variables</span></div>
<div class="line"><span class="lineno">  389</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a88209f141a18562620447b900f492b69">m_nLastControls</a> = oCtrls.size();</div>
<div class="line"><span class="lineno">  390</span>            }</div>
<div class="line"><span class="lineno">  391</span>            <span class="keywordflow">catch</span> (Exception oEx)</div>
<div class="line"><span class="lineno">  392</span>            {</div>
<div class="line"><span class="lineno">  393</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(oEx, oEx);</div>
<div class="line"><span class="lineno">  394</span>            }</div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  396</span>            {</div>
<div class="line"><span class="lineno">  397</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  398</span>            }</div>
<div class="line"><span class="lineno">  399</span>        }</div>
<div class="line"><span class="lineno">  400</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a64de9b18e67b14bdb4516e1feda41144"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144">cc.ihp.IHP.readParameters</a></div><div class="ttdeci">HashMap&lt; String, Double &gt; readParameters()</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00407">IHP.java:407</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a88209f141a18562620447b900f492b69"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a88209f141a18562620447b900f492b69">cc.ihp.IHP.m_nLastControls</a></div><div class="ttdeci">int m_nLastControls</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00133">IHP.java:133</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a8f148b5dc823238497194c5e996fa1d6"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6">cc.ihp.IHP.readDetectors</a></div><div class="ttdeci">void readDetectors()</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00309">IHP.java:309</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a97a1cca655c3f95cc7a0e964fbf51960"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">cc.ihp.IHP.m_sEndpoint</a></div><div class="ttdeci">String m_sEndpoint</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00073">IHP.java:73</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_ac58d0e0175b5c9ce7b4d338a7fc204e3"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3">cc.ihp.IHP.generateSpeedControls</a></div><div class="ttdeci">ArrayList&lt; TrafCtrl &gt; generateSpeedControls(ArrayList&lt; Corridor &gt; oCorridors, HashMap&lt; String, Double &gt; oParameters, boolean bSimulation)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00979">IHP.java:979</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_acc741379533dce6503927a1a269ffee0"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">cc.ihp.IHP.m_oCorridors</a></div><div class="ttdeci">final ArrayList&lt; Corridor &gt; m_oCorridors</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00083">IHP.java:83</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_ae2118834ef88722231d82c1257eaa27a"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">cc.ihp.IHP.LOCK</a></div><div class="ttdeci">final Lock LOCK</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00168">IHP.java:168</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_afad0b1dc18eb22d52d454492e843cc85"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#afad0b1dc18eb22d52d454492e843cc85">cc.ihp.IHP.m_lLastRun</a></div><div class="ttdeci">long m_lLastRun</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00138">IHP.java:138</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ProcCtrl_8java_source.html#l00043">cc.ctrl.proc.ProcCtrl.g_dExplodeStep</a>, <a class="el" href="ProcCtrl_8java_source.html#l00047">cc.ctrl.proc.ProcCtrl.g_nDefaultZoom</a>, <a class="el" href="ProcCtrl_8java_source.html#l00044">cc.ctrl.proc.ProcCtrl.g_sTrafCtrlDir</a>, <a class="el" href="IHP_8java_source.html#l00979">cc.ihp.IHP.generateSpeedControls()</a>, <a class="el" href="ProcCtrl_8java_source.html#l00050">cc.ctrl.proc.ProcCtrl.IHP2</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00128">cc.ihp.IHP.LOGGER</a>, <a class="el" href="IHP_8java_source.html#l00138">cc.ihp.IHP.m_lLastRun</a>, <a class="el" href="IHP_8java_source.html#l00133">cc.ihp.IHP.m_nLastControls</a>, <a class="el" href="IHP_8java_source.html#l00083">cc.ihp.IHP.m_oCorridors</a>, <a class="el" href="IHP_8java_source.html#l00073">cc.ihp.IHP.m_sEndpoint</a>, <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>, <a class="el" href="ProcCtrl_8java_source.html#l00318">cc.ctrl.proc.ProcCtrl.renderCtrls()</a>, and <a class="el" href="ProcCtrl_8java_source.html#l00129">cc.ctrl.proc.ProcCtrl.updateTiles()</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_cgraph" id="aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_cgraph">
<area shape="rect" title=" " alt="" coords="5,2211,136,2238"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3" title=" " alt="" coords="431,436,603,477"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6" title=" " alt="" coords="433,1381,600,1407"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144" title=" " alt="" coords="184,2211,361,2238"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a407342aae592fd466d9679f1697089f6" title=" " alt="" coords="185,2955,360,2996"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a1b3d7b9b4c1c85647dbd9361a997f499" title=" " alt="" coords="184,3020,361,3061"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ad2b0be731525bf78dfd53f928929348f" title=" " alt="" coords="1207,1406,1327,1433"/>
<area shape="rect" href="classcc_1_1util_1_1MathUtil.html#a68ef402505ae8abc4065f8673422b5fc" title=" " alt="" coords="688,2618,860,2645"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="706,1254,842,1281"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ac238b5e5777edad2526561c2eeb26064" title=" " alt="" coords="690,1558,858,1585"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a492b8381a1eb62aee9eaeb81888a83de" title=" " alt="" coords="929,2205,1113,2231"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrl.html#ada6cc53215b6f0c03f48c857ed62be43" title=" " alt="" coords="707,523,841,550"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#aabe972c17d1057379e7914a2e34a6693" title=" " alt="" coords="1165,394,1368,421"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="693,1507,855,1534"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a5b6a1769051751efefd777ee310fe893" title=" " alt="" coords="683,122,865,149"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a0e6a43a63d8127a8bd1ebe1536e5b7a7" title=" " alt="" coords="685,173,863,199"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a110fa0469db86b2624796b54066ebb75" title=" " alt="" coords="1197,2433,1336,2459"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a8e3d97064f85859c1eab5be32d496284" title=" " alt="" coords="692,224,856,265"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a9ea08b43e7884424f8836100eaf4d1c9" title=" " alt="" coords="691,289,857,331"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a897385b9eaa9258399b9b84c7f4843ca" title=" " alt="" coords="687,407,861,448"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#a28dcd177ce710068183b63672dd8d34e" title=" " alt="" coords="696,5,852,47"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ae89dc313e8c10f8b29067356277ff3d6" title=" " alt="" coords="1416,1406,1604,1433"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="924,1203,1117,1230"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="933,1254,1109,1281"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a0b8cea038af220c1d98cebf7a5f333c2" title=" " alt="" coords="939,1676,1102,1717"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#af509524ed51a0b33daf14ca461f5e376" title=" " alt="" coords="1449,2509,1571,2535"/>
<area shape="rect" href="classcc_1_1util_1_1Text.html#a9b7dd03037c22c2cc0ca511d6623e800" title=" " alt="" coords="943,574,1098,601"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0f6f5813f72ec98f00726f03f62270ac" title=" " alt="" coords="1417,394,1603,421"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12dfd03cde8e76b757d0ba535186d43a" title=" " alt="" coords="933,433,1108,475"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a1c0c9d4ac165094c323436e2047b759e" title=" " alt="" coords="937,368,1105,409"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12287382f28763590928f95ed9c81ae4" title=" " alt="" coords="1171,1035,1362,1062"/>
<area shape="rect" href="classcc_1_1ihp_1_1Subsegment.html#ae6f2310b45ad493ed89cdfa899587a7a" title=" " alt="" coords="687,969,861,1011"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#a5311ecb90c7a2c76ba389b73edb07f68" title=" " alt="" coords="419,2147,614,2188"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcDirection.html#a2ec255b2924b3769686d615cc40737c9" title=" " alt="" coords="414,3075,619,3116"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcHeadway.html#a9ded9290ba708640872d6985fc1da2d0" title=" " alt="" coords="413,2915,621,2956"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxPlatoonSize.html#adf5e6c93936b9ecb4bcb2039f191e501" title=" " alt="" coords="425,3163,608,3204"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxSpeed.html#a0450e7bec9885dc65deb73e94948c953" title=" " alt="" coords="409,2611,624,2652"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMinPlatoonHdwy.html#a8dabeb194d55e3d3c9c8320bd70055ac" title=" " alt="" coords="427,3272,607,3313"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcOpening.html#aa19c1962e66bce0648242b17ba4326df" title=" " alt="" coords="415,2059,618,2100"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcSignal.html#aacc879e9e19a1196f2ab7842284c7e1a" title=" " alt="" coords="421,3909,612,3951"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcStop.html#af6a3568aabe0108378de6716ac9b4ce7" title=" " alt="" coords="426,3656,607,3697"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcYield.html#a6f1c18261612249c3bee86e622c2f10e" title=" " alt="" coords="425,4280,608,4321"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#a5b63948c276949d4139e1bdfab69d92f" title=" " alt="" coords="415,1116,619,1157"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosing.html#a0a2895a21230e25c0314f2c7ca3e7a1b" title=" " alt="" coords="418,2995,615,3036"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#af056a1a6f4aca407a3101ac8f7d160f2" title=" " alt="" coords="703,1928,845,1969"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ad077e6e88ca11094a491a0502e0a833b" title=" " alt="" coords="953,3374,1088,3401"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#adcb4de9f0f37f923b411c37de2815bbb" title=" " alt="" coords="937,3188,1104,3229"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a3d855f5ea45b8c4e2d77a77639db7e45" title=" " alt="" coords="692,2147,856,2188"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a4fd6d36df99db8a6bcf94abb77108277" title=" " alt="" coords="955,3137,1086,3163"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a1cb80b67268e839445ca6a8ac0f99c03" title=" " alt="" coords="943,1601,1099,1627"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#acad5fecf938895e2a9ea81e76654e85d" title=" " alt="" coords="937,3284,1104,3325"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#ae63fac7675e20daf42f530a246c4fe67" title=" " alt="" coords="677,1863,871,1904"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ae7a37f571f3a1efcc1adac19e25cb759" title=" " alt="" coords="693,1761,855,1787"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdLayer.html#a9fb7834ce4bf8cb6b44f00e5c2b6f7c5" title=" " alt="" coords="691,2922,857,2949"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a238d4c0d1ded2a27a6fd924d52ddced4" title=" " alt="" coords="691,3293,857,3335"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#abdb33a4fe3fa85788b064a17123cd97e" title=" " alt="" coords="949,3071,1093,3112"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2241ff39ed721c330abdc7c1b9d90f44" title=" " alt="" coords="1179,3441,1354,3483"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a7e92758a1d96179668521360b1524949" title=" " alt="" coords="1198,3366,1335,3393"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a8f7846336ea8bf156adc5b5ed88e26fb" title=" " alt="" coords="1208,3137,1325,3163"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ab7436ca83ec17988aa62142389c52016" title=" " alt="" coords="931,2567,1110,2594"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ac068d66888fb0e7b24c88b05de0805c6" title=" " alt="" coords="1183,2501,1351,2543"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a6d70755c859d1efe5124fea98214ab2e" title=" " alt="" coords="684,3075,864,3116"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2a4afbdc4d7858a1a792faa33175a916" title=" " alt="" coords="689,2770,859,2797"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#ad2943e3db00285f11fb4ca0587663b0c" title=" " alt="" coords="696,4069,852,4111"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#aaf9deb249e1bac3a264c792b06d88fb3" title=" " alt="" coords="928,899,1113,926"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#a4bb2c0bd3ab70e2fe09654e21cbeb872" title=" " alt="" coords="700,700,848,741"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#aa4833293f5e96db8a411445665111806" title=" " alt="" coords="672,1087,876,1128"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_icgraph" id="aclasscc_1_1ihp_1_1IHP_a50026b144f9ab2a3593e780806b071de_icgraph">
<area shape="rect" title=" " alt="" coords="363,5,493,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190" title=" " alt="" coords="180,5,315,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="ac58d0e0175b5c9ce7b4d338a7fc204e3" name="ac58d0e0175b5c9ce7b4d338a7fc204e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac58d0e0175b5c9ce7b4d338a7fc204e3">&#9670;&nbsp;</a></span>generateSpeedControls()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ArrayList&lt; <a class="el" href="classcc_1_1ctrl_1_1TrafCtrl.html">TrafCtrl</a> &gt; cc.ihp.IHP.generateSpeedControls </td>
          <td>(</td>
          <td class="paramtype">ArrayList&lt; <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> &gt;&#160;</td>
          <td class="paramname"><em>oCorridors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HashMap&lt; String, Double &gt;&#160;</td>
          <td class="paramname"><em>oParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>bSimulation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Executes one run of the IHP2 Speed Harmonization Algorithm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oCorridors</td><td>List that contains the Corridors to run the algorithm on </td></tr>
    <tr><td class="paramname">oParameters</td><td>HashMap containing all of the algorithm parameters </td></tr>
    <tr><td class="paramname">bSimulation</td><td>Flag telling if the algorithm is running in simulation mode or using live data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list containing new traffic controls generated from the IHP2 Speed Algorithm </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00979">979</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  981</span>    {</div>
<div class="line"><span class="lineno">  982</span>        ArrayList&lt;TrafCtrl&gt; oCtrls = <span class="keyword">new</span> ArrayList();</div>
<div class="line"><span class="lineno">  983</span>        Mercator oM = Mercator.getInstance();</div>
<div class="line"><span class="lineno">  984</span>        <span class="keywordtype">int</span>[] nTiles = <span class="keyword">new</span> <span class="keywordtype">int</span>[2];</div>
<div class="line"><span class="lineno">  985</span>        <span class="keywordtype">int</span> nMaxSpeedCtrl = TrafCtrlEnums.getCtrl(<span class="stringliteral">&quot;maxspeed&quot;</span>);</div>
<div class="line"><span class="lineno">  986</span>        StringBuilder sIdBuf = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><span class="lineno">  987</span>        <span class="keywordtype">long</span> lNow = System.currentTimeMillis();</div>
<div class="line"><span class="lineno">  988</span>        SimpleDateFormat oSdf = <span class="keyword">new</span> SimpleDateFormat(<span class="stringliteral">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</div>
<div class="line"><span class="lineno">  989</span>        DecimalFormat oDf = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">&quot;#.###&quot;</span>);</div>
<div class="line"><span class="lineno">  990</span>        oSdf.setTimeZone(TimeZone.getTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));</div>
<div class="line"><span class="lineno">  991</span>        <span class="keywordtype">double</span> dSpaceFactor = oParameters.get(<span class="stringliteral">&quot;space_factor&quot;</span>);</div>
<div class="line"><span class="lineno">  992</span>        <span class="keywordtype">double</span> dReducedSpeedRatio = oParameters.get(<span class="stringliteral">&quot;ratio_reduced_speed&quot;</span>);</div>
<div class="line"><span class="lineno">  993</span>        <span class="keywordtype">int</span> nConsecutiveTrigger = (int)oParameters.get(<span class="stringliteral">&quot;consecutive_time_interval_trigger&quot;</span>).doubleValue();</div>
<div class="line"><span class="lineno">  994</span>        <span class="keywordtype">int</span> nTimeInterval = (int)oParameters.get(<span class="stringliteral">&quot;time_interval&quot;</span>).doubleValue();</div>
<div class="line"><span class="lineno">  995</span>        <span class="keywordtype">double</span> dMaximalGap = oParameters.get(<span class="stringliteral">&quot;maximal_gap&quot;</span>);</div>
<div class="line"><span class="lineno">  996</span>        Units oUnits = Units.getInstance();</div>
<div class="line"><span class="lineno">  997</span>        <span class="keywordtype">double</span> dBaselineFlow = oUnits.convert(<span class="stringliteral">&quot;veh/hr/lane&quot;</span>, <span class="stringliteral">&quot;veh/s/lane&quot;</span>, oParameters.get(<span class="stringliteral">&quot;baseline_flow&quot;</span>).doubleValue());</div>
<div class="line"><span class="lineno">  998</span>        StringBuilder sLogBuf = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><span class="lineno">  999</span>        sLogBuf.append(oSdf.format(lNow)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1000</span>        sLogBuf.append(<span class="stringliteral">&quot;space factor,&quot;</span>).append(oDf.format(dSpaceFactor)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1001</span>        sLogBuf.append(<span class="stringliteral">&quot;ratio of reduced speed,&quot;</span>).append(oDf.format(dReducedSpeedRatio)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1002</span>        sLogBuf.append(<span class="stringliteral">&quot;number of consecutive reduced speed,&quot;</span>).append(nConsecutiveTrigger).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1003</span>        sLogBuf.append(<span class="stringliteral">&quot;time interval,&quot;</span>).append(nTimeInterval).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1004</span>        sLogBuf.append(<span class="stringliteral">&quot;maximal gap,&quot;</span>).append(oDf.format(dMaximalGap)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1005</span>        sLogBuf.append(<span class="stringliteral">&quot;baseline traffic flow,&quot;</span>).append(dBaselineFlow).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1006</span>        sLogBuf.append(<span class="stringliteral">&quot;input json,\&quot;&quot;</span>).append(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a0788d7074218e07d1b7f6554c9eaa134">m_oCurrentDetectors</a>.toString()).append(<span class="stringliteral">&quot;\&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1007</span>        <span class="keywordflow">if</span> (!bSimulation) <span class="comment">// if data was received from live source</span></div>
<div class="line"><span class="lineno"> 1008</span>        {</div>
<div class="line"><span class="lineno"> 1009</span>            <span class="keywordflow">for</span> (Corridor oCorridor : oCorridors)</div>
<div class="line"><span class="lineno"> 1010</span>            {</div>
<div class="line"><span class="lineno"> 1011</span>                <span class="keywordflow">for</span> (Subsegment oSubsegment : oCorridor)</div>
<div class="line"><span class="lineno"> 1012</span>                {</div>
<div class="line"><span class="lineno"> 1013</span>                    <span class="keywordflow">for</span> (Detector oDetector : oSubsegment) <span class="comment">// calculate the traffic parameters using the detectors inside of the subsegment</span></div>
<div class="line"><span class="lineno"> 1014</span>                    {</div>
<div class="line"><span class="lineno"> 1015</span>                        oSubsegment.m_dDensity += oDetector.m_dDensity;</div>
<div class="line"><span class="lineno"> 1016</span>                        oSubsegment.m_dVolume += oDetector.m_nVolume;</div>
<div class="line"><span class="lineno"> 1017</span>                        Iterator&lt;double[]&gt; oIt = Arrays.iterator(oDetector.m_dSpeeds, <span class="keyword">new</span> <span class="keywordtype">double</span>[1], 1, 1);</div>
<div class="line"><span class="lineno"> 1018</span>                        <span class="keywordflow">while</span> (oIt.hasNext())</div>
<div class="line"><span class="lineno"> 1019</span>                            oSubsegment.m_dSpeeds = Arrays.add(oSubsegment.m_dSpeeds, oIt.next()[0]);</div>
<div class="line"><span class="lineno"> 1020</span>                    }</div>
<div class="line"><span class="lineno"> 1021</span>                    oSubsegment.m_dDensity /= oSubsegment.size(); <span class="comment">// average the density</span></div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>                    oSubsegment.generateStats();</div>
<div class="line"><span class="lineno"> 1024</span>                    <span class="keywordtype">double</span> dX = Mercator.lonToMeters(oSubsegment.get(0).m_dLon);</div>
<div class="line"><span class="lineno"> 1025</span>                    <span class="keywordtype">double</span> dY = Mercator.latToMeters(oSubsegment.get(0).m_dLat);</div>
<div class="line"><span class="lineno"> 1026</span>                    oSubsegment.m_nMaxSpeed = Integer.MIN_VALUE;</div>
<div class="line"><span class="lineno"> 1027</span>                    oM.metersToTile(dX, dY, ProcCtrl.g_nDefaultZoom, nTiles);</div>
<div class="line"><span class="lineno"> 1028</span>                    Path oIndexFile = Paths.get(String.format(ProcCtrl.g_sTdFileFormat, nTiles[0], ProcCtrl.g_nDefaultZoom, nTiles[0], nTiles[1]) + <span class="stringliteral">&quot;.ndx&quot;</span>);</div>
<div class="line"><span class="lineno"> 1029</span> </div>
<div class="line"><span class="lineno"> 1030</span>                    <span class="keywordflow">try</span> (DataInputStream oIn = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> BufferedInputStream(FileUtil.newInputStream(oIndexFile)))) <span class="comment">// check the index file to file speed limit controls</span></div>
<div class="line"><span class="lineno"> 1031</span>                    {</div>
<div class="line"><span class="lineno"> 1032</span>                        <span class="keywordflow">while</span> (oIn.available() &gt; 0)</div>
<div class="line"><span class="lineno"> 1033</span>                        {</div>
<div class="line"><span class="lineno"> 1034</span>                            CtrlIndex oIndex = <span class="keyword">new</span> CtrlIndex(oIn);</div>
<div class="line"><span class="lineno"> 1035</span>                            <span class="keywordflow">if</span> (oIndex.m_nType == nMaxSpeedCtrl &amp;&amp; (oIndex.m_lStart &gt;= lNow || oIndex.m_lEnd &gt; lNow) &amp;&amp; Geo.isInBoundingBox(dX, dY, oIndex.m_dBB[0], oIndex.m_dBB[1], oIndex.m_dBB[2], oIndex.m_dBB[3])) <span class="comment">// everything valid now and in the future add to tile</span></div>
<div class="line"><span class="lineno"> 1036</span>                            {</div>
<div class="line"><span class="lineno"> 1037</span>                                TrafCtrl.getId(oIndex.m_yId, sIdBuf);</div>
<div class="line"><span class="lineno"> 1038</span>                                TrafCtrl oCtrl;</div>
<div class="line"><span class="lineno"> 1039</span>                                Path oPath = Paths.get(ProcCtrl.g_sTrafCtrlDir + sIdBuf.toString() + <span class="stringliteral">&quot;.bin&quot;</span>);</div>
<div class="line"><span class="lineno"> 1040</span>                                <span class="keywordflow">if</span> (oIndex.m_yId[0] != ProcCtrl.CC)</div>
<div class="line"><span class="lineno"> 1041</span>                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1042</span>                                <span class="keywordflow">try</span> (DataInputStream oCtrlIn = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> BufferedInputStream(FileUtil.newInputStream(oPath))))</div>
<div class="line"><span class="lineno"> 1043</span>                                {</div>
<div class="line"><span class="lineno"> 1044</span>                                    oCtrl = <span class="keyword">new</span> TrafCtrl(oCtrlIn, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1045</span>                                }</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>                                <span class="keywordtype">double</span>[] dPolygon = Geo.createPolygon(oCtrl.m_oFullGeo.m_dPT, oCtrl.m_oFullGeo.m_dNT);</div>
<div class="line"><span class="lineno"> 1048</span>                                dPolygon = Arrays.add(dPolygon, oCtrl.m_oFullGeo.m_dPT[1], oCtrl.m_oFullGeo.m_dPT[2]); <span class="comment">// close the polygon</span></div>
<div class="line"><span class="lineno"> 1049</span>                                <span class="keywordflow">if</span> (Geo.isInsidePolygon(dPolygon, dX, dY, 1))</div>
<div class="line"><span class="lineno"> 1050</span>                                {</div>
<div class="line"><span class="lineno"> 1051</span>                                    oSubsegment.m_nMaxSpeed = MathUtil.bytesToInt(oCtrl.m_yControlValue);</div>
<div class="line"><span class="lineno"> 1052</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1053</span>                                }</div>
<div class="line"><span class="lineno"> 1054</span>                            }</div>
<div class="line"><span class="lineno"> 1055</span>                        }</div>
<div class="line"><span class="lineno"> 1056</span>                    }</div>
<div class="line"><span class="lineno"> 1057</span>                    <span class="keywordflow">catch</span> (Exception oEx)</div>
<div class="line"><span class="lineno"> 1058</span>                    {</div>
<div class="line"><span class="lineno"> 1059</span>                        oEx.printStackTrace();</div>
<div class="line"><span class="lineno"> 1060</span>                    }</div>
<div class="line"><span class="lineno"> 1061</span>                }</div>
<div class="line"><span class="lineno"> 1062</span>            }</div>
<div class="line"><span class="lineno"> 1063</span>        }</div>
<div class="line"><span class="lineno"> 1064</span>        </div>
<div class="line"><span class="lineno"> 1065</span>        </div>
<div class="line"><span class="lineno"> 1066</span>        String[] sUnits = TrafCtrlEnums.UNITS[TrafCtrlEnums.getCtrl(<span class="stringliteral">&quot;maxspeed&quot;</span>)];</div>
<div class="line"><span class="lineno"> 1067</span>        </div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">for</span> (Corridor oCorridor : oCorridors) <span class="comment">// for each corridor run the algorithm</span></div>
<div class="line"><span class="lineno"> 1069</span>        {</div>
<div class="line"><span class="lineno"> 1070</span>            <span class="keywordtype">int</span> n = oCorridor.size(); <span class="comment">// number of subsegments</span></div>
<div class="line"><span class="lineno"> 1071</span>            Subsegment oReducedSpeedZone = oCorridor.get(0);</div>
<div class="line"><span class="lineno"> 1072</span>            Subsegment oSubSegOne = oCorridor.get(1);</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>            <span class="keywordflow">if</span> (oSubSegOne.m_d85th &lt; dReducedSpeedRatio * oSubSegOne.m_nMaxSpeed) <span class="comment">// determine if the speed is lower enough to run the algorithm</span></div>
<div class="line"><span class="lineno"> 1075</span>            {</div>
<div class="line"><span class="lineno"> 1076</span>                ++<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a>; <span class="comment">// increase consecutive trigger count</span></div>
<div class="line"><span class="lineno"> 1077</span>                sLogBuf.append(<span class="stringliteral">&quot;Consecutive reduced speed triggers,&quot;</span>).append(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a>).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1078</span>                <span class="keywordtype">double</span> dControlFlowRate = dSpaceFactor * oReducedSpeedZone.m_dVolume + (1 - dSpaceFactor) * oSubSegOne.m_dVolume; <span class="comment">// equation 1</span></div>
<div class="line"><span class="lineno"> 1079</span>                sLogBuf.append(<span class="stringliteral">&quot;Equation 1,&quot;</span>).append(oDf.format(dControlFlowRate)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1080</span>                <span class="keywordtype">double</span> dTargetDensity = oSubSegOne.m_dPreviousDensity + (oReducedSpeedZone.m_dVolume - oSubSegOne.m_dVolume) / oSubSegOne.m_dLength * nTimeInterval; <span class="comment">// equation 2</span></div>
<div class="line"><span class="lineno"> 1081</span>                sLogBuf.append(<span class="stringliteral">&quot;Equation 2,&quot;</span>).append(oDf.format(dTargetDensity)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1082</span>                <span class="keywordtype">double</span> dTargetSpeed = Math.max(Math.min(dControlFlowRate / dTargetDensity, oSubSegOne.m_d85th), oSubSegOne.m_d15th); <span class="comment">// equation 3</span></div>
<div class="line"><span class="lineno"> 1083</span>                sLogBuf.append(<span class="stringliteral">&quot;Equation 3,&quot;</span>).append(oDf.format(dTargetSpeed)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1084</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; n; i++)</div>
<div class="line"><span class="lineno"> 1085</span>                {</div>
<div class="line"><span class="lineno"> 1086</span>                    Subsegment oUpstream = oCorridor.get(i);</div>
<div class="line"><span class="lineno"> 1087</span>                    oUpstream.m_dTarCtrlSpeed = dTargetSpeed + ((oUpstream.m_d85th - dTargetSpeed) / (n - 1)) * (i - 1); <span class="comment">// equation 4</span></div>
<div class="line"><span class="lineno"> 1088</span>                    sLogBuf.append(<span class="stringliteral">&quot;Equation 4,subsegment &quot;</span>).append(i).append(<span class="charliteral">&#39;,&#39;</span>).append(oDf.format(oUpstream.m_dTarCtrlSpeed)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1089</span>                    oUpstream.m_dAdvisorySpeed = oUpstream.m_dTarCtrlSpeed;</div>
<div class="line"><span class="lineno"> 1090</span><span class="comment">//                  oUpstream.m_dAdvisorySpeed = Math.max(Math.min(oUpstream.m_dTarCtrlSpeed, oUpstream.m_d85th), oUpstream.m_d15th); // equation 6</span></div>
<div class="line"><span class="lineno"> 1091</span><span class="comment">//                  sBuf.append(&quot;Equation 6,subsegment &quot;).append(i).append(&#39;,&#39;).append(oDf.format(oUpstream.m_dAdvisorySpeed)).append(&#39;\n&#39;);</span></div>
<div class="line"><span class="lineno"> 1092</span>                    </div>
<div class="line"><span class="lineno"> 1093</span>                }</div>
<div class="line"><span class="lineno"> 1094</span>                </div>
<div class="line"><span class="lineno"> 1095</span><span class="comment">//              int r = n;</span></div>
<div class="line"><span class="lineno"> 1096</span><span class="comment">//              Subsegment oLast = oCorridor.get(r - 1);</span></div>
<div class="line"><span class="lineno"> 1097</span><span class="comment">//              for (int i = 2; i &lt; n; i++)</span></div>
<div class="line"><span class="lineno"> 1098</span><span class="comment">//              {</span></div>
<div class="line"><span class="lineno"> 1099</span><span class="comment">//                  Subsegment oUpstream = oCorridor.get(i);</span></div>
<div class="line"><span class="lineno"> 1100</span><span class="comment">//                  </span></div>
<div class="line"><span class="lineno"> 1101</span><span class="comment">//                  for (int j = i; j &lt; r; j++)</span></div>
<div class="line"><span class="lineno"> 1102</span><span class="comment">//                  {</span></div>
<div class="line"><span class="lineno"> 1103</span><span class="comment">//                      Subsegment oJ = oCorridor.get(j);</span></div>
<div class="line"><span class="lineno"> 1104</span><span class="comment">//                      oUpstream.m_dAdvisorySpeed = oJ.m_dAdvisorySpeed + (oLast.m_d85th - oJ.m_dAdvisorySpeed) / (r - j) * (i - j); // equation 7</span></div>
<div class="line"><span class="lineno"> 1105</span><span class="comment">//                      sBuf.append(&quot;Equation 7,subsegment &quot;).append(j).append(&#39;,&#39;).append(oDf.format(oUpstream.m_dAdvisorySpeed)).append(&#39;\n&#39;);</span></div>
<div class="line"><span class="lineno"> 1106</span><span class="comment">//                  }</span></div>
<div class="line"><span class="lineno"> 1107</span><span class="comment">//              }</span></div>
<div class="line"><span class="lineno"> 1108</span>                </div>
<div class="line"><span class="lineno"> 1109</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; n; i++)</div>
<div class="line"><span class="lineno"> 1110</span>                {</div>
<div class="line"><span class="lineno"> 1111</span>                    Subsegment oUpstream = oCorridor.get(i);</div>
<div class="line"><span class="lineno"> 1112</span>                    oUpstream.m_dAdvisorySpeed = Math.max(Math.min(oUpstream.m_dAdvisorySpeed, oUpstream.m_dPreviousAdvisorySpeed + dMaximalGap), oUpstream.m_dPreviousAdvisorySpeed - dMaximalGap); <span class="comment">// equation 8</span></div>
<div class="line"><span class="lineno"> 1113</span>                    sLogBuf.append(<span class="stringliteral">&quot;Equation 8,subsegment &quot;</span>).append(i).append(<span class="charliteral">&#39;,&#39;</span>).append(oDf.format(oUpstream.m_dAdvisorySpeed)).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1114</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a> &gt;= nConsecutiveTrigger)</div>
<div class="line"><span class="lineno"> 1115</span>                    {</div>
<div class="line"><span class="lineno"> 1116</span>                        <span class="keywordtype">int</span> nSpd = (int)Math.round(oUnits.convert(<span class="stringliteral">&quot;m/s&quot;</span>, sUnits[0], oUpstream.m_dAdvisorySpeed));</div>
<div class="line"><span class="lineno"> 1117</span>                        TrafCtrl oSpeed = <span class="keyword">new</span> TrafCtrl(<span class="stringliteral">&quot;maxspeed&quot;</span>, nSpd, <span class="keyword">null</span>, lNow, lNow, oUpstream.m_dCenterLine, String.format(<span class="stringliteral">&quot;Sub %d - Speed Harm&quot;</span>, i), <span class="keyword">false</span>, ProcCtrl.IHP2);</div>
<div class="line"><span class="lineno"> 1118</span>                        oSpeed.m_lEnd = lNow + nTimeInterval * 1000; <span class="comment">// timeout new controls after one time interval</span></div>
<div class="line"><span class="lineno"> 1119</span>                        oUpstream.m_oCtrl = oSpeed;</div>
<div class="line"><span class="lineno"> 1120</span>                        sLogBuf.append(<span class="stringliteral">&quot;new maxspeed,subsegment &quot;</span>).append(i).append(<span class="charliteral">&#39;,&#39;</span>).append(oDf.format(oUnits.convert(sUnits[0], <span class="stringliteral">&quot;mph&quot;</span>, nSpd))).append(<span class="stringliteral">&quot; mph&quot;</span>).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1121</span>                    }</div>
<div class="line"><span class="lineno"> 1122</span>                }</div>
<div class="line"><span class="lineno"> 1123</span>            }</div>
<div class="line"><span class="lineno"> 1124</span>            <span class="keywordflow">else</span> <span class="comment">// speed is not low enough to trigger the algorithm</span></div>
<div class="line"><span class="lineno"> 1125</span>            {</div>
<div class="line"><span class="lineno"> 1126</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a> = 0; <span class="comment">// reset consecutive trigger count</span></div>
<div class="line"><span class="lineno"> 1127</span>                sLogBuf.append(<span class="stringliteral">&quot;Speed greater than reduced ratio\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1128</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; n; i++)</div>
<div class="line"><span class="lineno"> 1129</span>                {</div>
<div class="line"><span class="lineno"> 1130</span>                    Subsegment oUpstream = oCorridor.get(i);</div>
<div class="line"><span class="lineno"> 1131</span>                    oUpstream.m_dPreviousAdvisorySpeed = oUpstream.m_nMaxSpeed;</div>
<div class="line"><span class="lineno"> 1132</span>                }</div>
<div class="line"><span class="lineno"> 1133</span>            }</div>
<div class="line"><span class="lineno"> 1134</span>        }</div>
<div class="line"><span class="lineno"> 1135</span>        </div>
<div class="line"><span class="lineno"> 1136</span>        <span class="keywordflow">for</span> (Corridor oCorridor : oCorridors) <span class="comment">// add any controls that have been generated for each subsegment of each corridor</span></div>
<div class="line"><span class="lineno"> 1137</span>        {</div>
<div class="line"><span class="lineno"> 1138</span>            <span class="keywordflow">for</span> (Subsegment oSubsegment : oCorridor)</div>
<div class="line"><span class="lineno"> 1139</span>            {</div>
<div class="line"><span class="lineno"> 1140</span>                <span class="keywordflow">if</span> (oSubsegment.m_oCtrl != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1141</span>                    oCtrls.add(oSubsegment.m_oCtrl);</div>
<div class="line"><span class="lineno"> 1142</span>            }</div>
<div class="line"><span class="lineno"> 1143</span>        }</div>
<div class="line"><span class="lineno"> 1144</span>        </div>
<div class="line"><span class="lineno"> 1145</span>        sLogBuf.append(<span class="charliteral">&#39;\n&#39;</span>).append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno"> 1146</span>        Path oPath = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a522c3062fcd99b0f9b48d89828a64c08">m_sCurrentFile</a>);</div>
<div class="line"><span class="lineno"> 1147</span>        Files.createDirectories(oPath.getParent(), FileUtil.DIRPERS);</div>
<div class="line"><span class="lineno"> 1148</span>        <span class="keywordflow">try</span> (BufferedWriter oOut = <span class="keyword">new</span> BufferedWriter(Channels.newWriter(Files.newByteChannel(oPath, FileUtil.APPENDTO, FileUtil.FILEPERS), StandardCharsets.UTF_8))) <span class="comment">// append to the log file</span></div>
<div class="line"><span class="lineno"> 1149</span>        {</div>
<div class="line"><span class="lineno"> 1150</span>            oOut.append(sLogBuf);</div>
<div class="line"><span class="lineno"> 1151</span>        }</div>
<div class="line"><span class="lineno"> 1152</span>        </div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordflow">return</span> oCtrls;</div>
<div class="line"><span class="lineno"> 1154</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a0788d7074218e07d1b7f6554c9eaa134"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a0788d7074218e07d1b7f6554c9eaa134">cc.ihp.IHP.m_oCurrentDetectors</a></div><div class="ttdeci">JSONArray m_oCurrentDetectors</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00183">IHP.java:183</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a2b70695596737ce9e4cdc0054f793cbf"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">cc.ihp.IHP.m_nTriggers</a></div><div class="ttdeci">int m_nTriggers</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00173">IHP.java:173</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a522c3062fcd99b0f9b48d89828a64c08"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a522c3062fcd99b0f9b48d89828a64c08">cc.ihp.IHP.m_sCurrentFile</a></div><div class="ttdeci">String m_sCurrentFile</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00178">IHP.java:178</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Arrays_8java_source.html#l00058">cc.util.Arrays.add()</a>, <a class="el" href="FileUtil_8java_source.html#l00034">cc.util.FileUtil.APPENDTO</a>, <a class="el" href="MathUtil_8java_source.html#l00152">cc.util.MathUtil.bytesToInt()</a>, <a class="el" href="ProcCtrl_8java_source.html#l00048">cc.ctrl.proc.ProcCtrl.CC</a>, <a class="el" href="Units_8java_source.html#l00074">cc.util.Units.convert()</a>, <a class="el" href="Geo_8java_source.html#l01063">cc.util.Geo.createPolygon()</a>, <a class="el" href="FileUtil_8java_source.html#l00027">cc.util.FileUtil.DIRPERS</a>, <a class="el" href="FileUtil_8java_source.html#l00031">cc.util.FileUtil.FILEPERS</a>, <a class="el" href="ProcCtrl_8java_source.html#l00047">cc.ctrl.proc.ProcCtrl.g_nDefaultZoom</a>, <a class="el" href="ProcCtrl_8java_source.html#l00045">cc.ctrl.proc.ProcCtrl.g_sTdFileFormat</a>, <a class="el" href="ProcCtrl_8java_source.html#l00044">cc.ctrl.proc.ProcCtrl.g_sTrafCtrlDir</a>, <a class="el" href="TrafCtrlEnums_8java_source.html#l00128">cc.ctrl.TrafCtrlEnums.getCtrl()</a>, <a class="el" href="TrafCtrl_8java_source.html#l00662">cc.ctrl.TrafCtrl.getId()</a>, <a class="el" href="Mercator_8java_source.html#l00073">cc.geosrv.Mercator.getInstance()</a>, <a class="el" href="Units_8java_source.html#l00058">cc.util.Units.getInstance()</a>, <a class="el" href="ProcCtrl_8java_source.html#l00050">cc.ctrl.proc.ProcCtrl.IHP2</a>, <a class="el" href="Geo_8java_source.html#l00166">cc.util.Geo.isInBoundingBox()</a>, <a class="el" href="Geo_8java_source.html#l00208">cc.util.Geo.isInsidePolygon()</a>, <a class="el" href="Arrays_8java_source.html#l00035">cc.util.Arrays.iterator()</a>, <a class="el" href="Mercator_8java_source.html#l00092">cc.geosrv.Mercator.latToMeters()</a>, <a class="el" href="Mercator_8java_source.html#l00086">cc.geosrv.Mercator.lonToMeters()</a>, <a class="el" href="Subsegment_8java_source.html#l00074">cc.ihp.Subsegment.m_d15th</a>, <a class="el" href="Subsegment_8java_source.html#l00069">cc.ihp.Subsegment.m_d85th</a>, <a class="el" href="Subsegment_8java_source.html#l00095">cc.ihp.Subsegment.m_dAdvisorySpeed</a>, <a class="el" href="CtrlIndex_8java_source.html#l00021">cc.ctrl.CtrlIndex.m_dBB</a>, <a class="el" href="Subsegment_8java_source.html#l00032">cc.ihp.Subsegment.m_dCenterLine</a>, <a class="el" href="Subsegment_8java_source.html#l00079">cc.ihp.Subsegment.m_dLength</a>, <a class="el" href="CtrlGeo_8java_source.html#l00029">cc.ctrl.CtrlGeo.m_dNT</a>, <a class="el" href="Subsegment_8java_source.html#l00100">cc.ihp.Subsegment.m_dPreviousAdvisorySpeed</a>, <a class="el" href="CtrlGeo_8java_source.html#l00037">cc.ctrl.CtrlGeo.m_dPT</a>, <a class="el" href="Subsegment_8java_source.html#l00089">cc.ihp.Subsegment.m_dTarCtrlSpeed</a>, <a class="el" href="Subsegment_8java_source.html#l00059">cc.ihp.Subsegment.m_dVolume</a>, <a class="el" href="CtrlIndex_8java_source.html#l00020">cc.ctrl.CtrlIndex.m_lEnd</a>, <a class="el" href="CtrlIndex_8java_source.html#l00019">cc.ctrl.CtrlIndex.m_lStart</a>, <a class="el" href="Subsegment_8java_source.html#l00084">cc.ihp.Subsegment.m_nMaxSpeed</a>, <a class="el" href="IHP_8java_source.html#l00173">cc.ihp.IHP.m_nTriggers</a>, <a class="el" href="CtrlIndex_8java_source.html#l00018">cc.ctrl.CtrlIndex.m_nType</a>, <a class="el" href="IHP_8java_source.html#l00183">cc.ihp.IHP.m_oCurrentDetectors</a>, <a class="el" href="TrafCtrl_8java_source.html#l00056">cc.ctrl.TrafCtrl.m_oFullGeo</a>, <a class="el" href="IHP_8java_source.html#l00178">cc.ihp.IHP.m_sCurrentFile</a>, <a class="el" href="TrafCtrl_8java_source.html#l00045">cc.ctrl.TrafCtrl.m_yControlValue</a>, <a class="el" href="CtrlIndex_8java_source.html#l00017">cc.ctrl.CtrlIndex.m_yId</a>, <a class="el" href="Mercator_8java_source.html#l00208">cc.geosrv.Mercator.metersToTile()</a>, <a class="el" href="FileUtil_8java_source.html#l00053">cc.util.FileUtil.newInputStream()</a>, and <a class="el" href="TrafCtrlEnums_8java_source.html#l00039">cc.ctrl.TrafCtrlEnums.UNITS</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_cgraph" id="aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_cgraph">
<area shape="rect" title=" " alt="" coords="5,405,177,446"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ad2b0be731525bf78dfd53f928929348f" title=" " alt="" coords="513,5,633,32"/>
<area shape="rect" href="classcc_1_1util_1_1MathUtil.html#a68ef402505ae8abc4065f8673422b5fc" title=" " alt="" coords="241,159,413,185"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="259,209,395,236"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ac238b5e5777edad2526561c2eeb26064" title=" " alt="" coords="243,92,411,119"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a492b8381a1eb62aee9eaeb81888a83de" title=" " alt="" coords="235,260,419,287"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrl.html#ada6cc53215b6f0c03f48c857ed62be43" title=" " alt="" coords="259,311,394,337"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#aabe972c17d1057379e7914a2e34a6693" title=" " alt="" coords="225,361,428,388"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="246,412,407,439"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a5b6a1769051751efefd777ee310fe893" title=" " alt="" coords="235,463,418,489"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a0e6a43a63d8127a8bd1ebe1536e5b7a7" title=" " alt="" coords="238,513,415,540"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a110fa0469db86b2624796b54066ebb75" title=" " alt="" coords="257,564,396,591"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a8e3d97064f85859c1eab5be32d496284" title=" " alt="" coords="245,615,409,657"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a9ea08b43e7884424f8836100eaf4d1c9" title=" " alt="" coords="243,681,410,722"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a897385b9eaa9258399b9b84c7f4843ca" title=" " alt="" coords="239,746,414,787"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#a28dcd177ce710068183b63672dd8d34e" title=" " alt="" coords="249,811,405,853"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ae89dc313e8c10f8b29067356277ff3d6" title=" " alt="" coords="719,5,907,32"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="476,197,669,224"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="485,248,661,275"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a0b8cea038af220c1d98cebf7a5f333c2" title=" " alt="" coords="491,81,654,122"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#af509524ed51a0b33daf14ca461f5e376" title=" " alt="" coords="511,147,634,173"/>
<area shape="rect" href="classcc_1_1util_1_1Text.html#a9b7dd03037c22c2cc0ca511d6623e800" title=" " alt="" coords="495,323,650,349"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0f6f5813f72ec98f00726f03f62270ac" title=" " alt="" coords="479,373,666,400"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12dfd03cde8e76b757d0ba535186d43a" title=" " alt="" coords="485,713,660,754"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a1c0c9d4ac165094c323436e2047b759e" title=" " alt="" coords="489,778,657,819"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12287382f28763590928f95ed9c81ae4" title=" " alt="" coords="717,720,908,747"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_icgraph" id="aclasscc_1_1ihp_1_1IHP_ac58d0e0175b5c9ce7b4d338a7fc204e3_icgraph">
<area shape="rect" title=" " alt="" coords="541,5,713,47"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de" title=" " alt="" coords="363,13,493,39"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190" title=" " alt="" coords="180,13,315,39"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,13,132,39"/>
</map>
</div>

</div>
</div>
<a id="a5143b92c262e56a7b4348fb51a92b5cf" name="a5143b92c262e56a7b4348fb51a92b5cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5143b92c262e56a7b4348fb51a92b5cf">&#9670;&nbsp;</a></span>getDetectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.getDetectors </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Adds the detector values of the subsegments of the Speed Harmonization <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> to the JSON response.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00871">871</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  873</span>    {</div>
<div class="line"><span class="lineno">  874</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  875</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  876</span>        {</div>
<div class="line"><span class="lineno">  877</span>            Path oPath = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a>);</div>
<div class="line"><span class="lineno">  878</span>            <span class="keywordflow">if</span> (!Files.exists(oPath))</div>
<div class="line"><span class="lineno">  879</span>            {</div>
<div class="line"><span class="lineno">  880</span>                oResponse.put(<span class="stringliteral">&quot;detectors&quot;</span>, <span class="keyword">new</span> JSONArray());</div>
<div class="line"><span class="lineno">  881</span>            }</div>
<div class="line"><span class="lineno">  882</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  883</span>            {</div>
<div class="line"><span class="lineno">  884</span>                <span class="keywordflow">try</span> (BufferedReader oIn = Files.newBufferedReader(oPath, StandardCharsets.UTF_8))</div>
<div class="line"><span class="lineno">  885</span>                {</div>
<div class="line"><span class="lineno">  886</span>                    JSONArray oDetectors = <span class="keyword">new</span> JSONArray(<span class="keyword">new</span> JSONTokener(oIn));</div>
<div class="line"><span class="lineno">  887</span>                    oResponse.put(<span class="stringliteral">&quot;detectors&quot;</span>, oDetectors);</div>
<div class="line"><span class="lineno">  888</span>                }</div>
<div class="line"><span class="lineno">  889</span>            }</div>
<div class="line"><span class="lineno">  890</span>        }</div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  892</span>        {</div>
<div class="line"><span class="lineno">  893</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  894</span>        }</div>
<div class="line"><span class="lineno">  895</span>        </div>
<div class="line"><span class="lineno">  896</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  897</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_af1c324fd88c29d9e5ad872850070e81b"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">cc.ihp.IHP.m_sDetectorFile</a></div><div class="ttdeci">String m_sDetectorFile</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00158">IHP.java:158</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, and <a class="el" href="IHP_8java_source.html#l00158">cc.ihp.IHP.m_sDetectorFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a5143b92c262e56a7b4348fb51a92b5cf_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a5143b92c262e56a7b4348fb51a92b5cf_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a5143b92c262e56a7b4348fb51a92b5cf_icgraph" id="aclasscc_1_1ihp_1_1IHP_a5143b92c262e56a7b4348fb51a92b5cf_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,339,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="aff07b202b4230e767c7f46b8b4c52afb" name="aff07b202b4230e767c7f46b8b4c52afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff07b202b4230e767c7f46b8b4c52afb">&#9670;&nbsp;</a></span>getFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.getFile </td>
          <td>(</td>
          <td class="paramtype">HttpServletRequest&#160;</td>
          <td class="paramname"><em>oReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Adds the requested log file to the JSON response.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oReq</td><td>object that contains all of the HTTP request information </td></tr>
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00949">949</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  951</span>    {</div>
<div class="line"><span class="lineno">  952</span>        String sFile = oReq.getParameter(<span class="stringliteral">&quot;file&quot;</span>);</div>
<div class="line"><span class="lineno">  953</span>        Path oPath = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a> + sFile);</div>
<div class="line"><span class="lineno">  954</span>        <span class="keywordflow">if</span> (!Files.exists(oPath))</div>
<div class="line"><span class="lineno">  955</span>            <span class="keywordflow">return</span> HttpServletResponse.SC_NOT_FOUND;</div>
<div class="line"><span class="lineno">  956</span>        </div>
<div class="line"><span class="lineno">  957</span>        StringBuilder sBuf = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><span class="lineno">  958</span>        <span class="keywordflow">try</span> (BufferedReader oIn = Files.newBufferedReader(oPath, StandardCharsets.UTF_8))</div>
<div class="line"><span class="lineno">  959</span>        {</div>
<div class="line"><span class="lineno">  960</span>            <span class="keywordtype">int</span> nByte;</div>
<div class="line"><span class="lineno">  961</span>            <span class="keywordflow">while</span> ((nByte = oIn.read()) &gt;= 0)</div>
<div class="line"><span class="lineno">  962</span>                sBuf.append((<span class="keywordtype">char</span>)nByte);</div>
<div class="line"><span class="lineno">  963</span>        }</div>
<div class="line"><span class="lineno">  964</span>        oResponse.put(<span class="stringliteral">&quot;csv&quot;</span>, sBuf.toString());</div>
<div class="line"><span class="lineno">  965</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  966</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a3dafea702122d7b79b517d48daa2c6a1"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">cc.ihp.IHP.m_sBaseDir</a></div><div class="ttdeci">String m_sBaseDir</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00163">IHP.java:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00163">cc.ihp.IHP.m_sBaseDir</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_aff07b202b4230e767c7f46b8b4c52afb_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_aff07b202b4230e767c7f46b8b4c52afb_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_aff07b202b4230e767c7f46b8b4c52afb_icgraph" id="aclasscc_1_1ihp_1_1IHP_aff07b202b4230e767c7f46b8b4c52afb_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,304,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a464bed6c7a6cd63932ede045f0e4351e" name="a464bed6c7a6cd63932ede045f0e4351e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464bed6c7a6cd63932ede045f0e4351e">&#9670;&nbsp;</a></span>getFiles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.getFiles </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Add a list of log files available to download grouped by month and then day and sorted so that the most recent files are at the beginning of the list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00907">907</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  909</span>    {</div>
<div class="line"><span class="lineno">  910</span>        Path oBaseDir = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a>);</div>
<div class="line"><span class="lineno">  911</span>        List&lt;Path&gt; oMonths = Files.walk(oBaseDir, 1).filter(Files::isDirectory).filter(oP -&gt; </div>
<div class="line"><span class="lineno">  912</span>        {</div>
<div class="line"><span class="lineno">  913</span>            String sPath = oP.toString();</div>
<div class="line"><span class="lineno">  914</span>            <span class="keywordflow">if</span> (!sPath.endsWith(<span class="stringliteral">&quot;/&quot;</span>))</div>
<div class="line"><span class="lineno">  915</span>                sPath += <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><span class="lineno">  916</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a>.compareTo(sPath) != 0;</div>
<div class="line"><span class="lineno">  917</span>        }).sorted().collect(Collectors.toList()); <span class="comment">// get list of month directories</span></div>
<div class="line"><span class="lineno">  918</span>        </div>
<div class="line"><span class="lineno">  919</span>        JSONObject oFiles = <span class="keyword">new</span> JSONObject();</div>
<div class="line"><span class="lineno">  920</span>        <span class="keywordflow">for</span> (Path oMonth : oMonths)</div>
<div class="line"><span class="lineno">  921</span>        {</div>
<div class="line"><span class="lineno">  922</span>            JSONObject oMonthJson = <span class="keyword">new</span> JSONObject();</div>
<div class="line"><span class="lineno">  923</span>            List&lt;Path&gt; oDays = Files.walk(oMonth, 1).filter(Files::isDirectory).filter(oP -&gt; oP.toString().compareTo(oMonth.toString()) != 0).sorted(Comparator.reverseOrder()).collect(Collectors.toList()); <span class="comment">// get list of day directories</span></div>
<div class="line"><span class="lineno">  924</span>            <span class="keywordflow">for</span> (Path oDay : oDays)</div>
<div class="line"><span class="lineno">  925</span>            {</div>
<div class="line"><span class="lineno">  926</span>                JSONArray oDayJson = <span class="keyword">new</span> JSONArray();</div>
<div class="line"><span class="lineno">  927</span>                List&lt;Path&gt; oRuns = Files.walk(oDay, 1).filter(Files::isRegularFile).sorted(Comparator.reverseOrder()).collect(Collectors.toList()); <span class="comment">// get the files for that day</span></div>
<div class="line"><span class="lineno">  928</span>                <span class="keywordflow">for</span> (Path oRun : oRuns)</div>
<div class="line"><span class="lineno">  929</span>                {</div>
<div class="line"><span class="lineno">  930</span>                    oDayJson.put(oRun.getFileName().toString());</div>
<div class="line"><span class="lineno">  931</span>                }</div>
<div class="line"><span class="lineno">  932</span>                oMonthJson.put(oDay.getFileName().toString(), oDayJson);</div>
<div class="line"><span class="lineno">  933</span>            }</div>
<div class="line"><span class="lineno">  934</span>            oFiles.put(oMonth.getFileName().toString(), oMonthJson);</div>
<div class="line"><span class="lineno">  935</span>        }</div>
<div class="line"><span class="lineno">  936</span>        </div>
<div class="line"><span class="lineno">  937</span>        oResponse.put(<span class="stringliteral">&quot;files&quot;</span>, oFiles);</div>
<div class="line"><span class="lineno">  938</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  939</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00163">cc.ihp.IHP.m_sBaseDir</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>, and <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a464bed6c7a6cd63932ede045f0e4351e_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a464bed6c7a6cd63932ede045f0e4351e_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a464bed6c7a6cd63932ede045f0e4351e_icgraph" id="aclasscc_1_1ihp_1_1IHP_a464bed6c7a6cd63932ede045f0e4351e_icgraph">
<area shape="rect" title=" " alt="" coords="349,5,480,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a9abd1b1ebb3f4c7f0c0d845c4321329f" title=" " alt="" coords="180,31,301,57"/>
</map>
</div>

</div>
</div>
<a id="a50d9d0fbe4f5d4975b252c711df169b9" name="a50d9d0fbe4f5d4975b252c711df169b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d9d0fbe4f5d4975b252c711df169b9">&#9670;&nbsp;</a></span>getGeo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.getGeo </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Adds the geometry of the Speed Harmonization <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> to the JSON response.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00797">797</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  798</span>    {</div>
<div class="line"><span class="lineno">  799</span>        JSONArray oFeatures = <span class="keyword">new</span> JSONArray(); <span class="comment">// features array that will be part of a geojson FeatureCollection</span></div>
<div class="line"><span class="lineno">  800</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  801</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  802</span>        {</div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">for</span> (Corridor oCorridor : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>)</div>
<div class="line"><span class="lineno">  804</span>            {</div>
<div class="line"><span class="lineno">  805</span>                <span class="keywordflow">for</span> (Subsegment oSubsegment : oCorridor)</div>
<div class="line"><span class="lineno">  806</span>                {</div>
<div class="line"><span class="lineno">  807</span>                    JSONObject oFeature = <span class="keyword">new</span> JSONObject(); <span class="comment">// geojson feature</span></div>
<div class="line"><span class="lineno">  808</span>                    oFeature.put(<span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;Feature&quot;</span>);</div>
<div class="line"><span class="lineno">  809</span>                    JSONObject oGeo = <span class="keyword">new</span> JSONObject();</div>
<div class="line"><span class="lineno">  810</span>                    oGeo.put(<span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;LineString&quot;</span>);</div>
<div class="line"><span class="lineno">  811</span>                    JSONArray oCoords = <span class="keyword">new</span> JSONArray();</div>
<div class="line"><span class="lineno">  812</span>                    Iterator&lt;double[]&gt; oIt = Arrays.iterator(oSubsegment.m_dGeo, <span class="keyword">new</span> <span class="keywordtype">double</span>[2], 1, 2);</div>
<div class="line"><span class="lineno">  813</span>                    <span class="keywordflow">while</span> (oIt.hasNext())</div>
<div class="line"><span class="lineno">  814</span>                    {</div>
<div class="line"><span class="lineno">  815</span>                        <span class="keywordtype">double</span>[] dPt = oIt.next();</div>
<div class="line"><span class="lineno">  816</span>                        oCoords.put(<span class="keyword">new</span> <span class="keywordtype">double</span>[]{Mercator.xToLon(dPt[0]), Mercator.yToLat(dPt[1])});</div>
<div class="line"><span class="lineno">  817</span>                    }</div>
<div class="line"><span class="lineno">  818</span>                    oGeo.put(<span class="stringliteral">&quot;coordinates&quot;</span>, oCoords);</div>
<div class="line"><span class="lineno">  819</span>                    oFeature.put(<span class="stringliteral">&quot;geometry&quot;</span>, oGeo);</div>
<div class="line"><span class="lineno">  820</span>                    oFeatures.put(oFeature);</div>
<div class="line"><span class="lineno">  821</span>                }</div>
<div class="line"><span class="lineno">  822</span>            }</div>
<div class="line"><span class="lineno">  823</span>        }</div>
<div class="line"><span class="lineno">  824</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  825</span>        {</div>
<div class="line"><span class="lineno">  826</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  827</span>        }</div>
<div class="line"><span class="lineno">  828</span>        </div>
<div class="line"><span class="lineno">  829</span>        oResponse.put(<span class="stringliteral">&quot;features&quot;</span>, oFeatures);</div>
<div class="line"><span class="lineno">  830</span>        </div>
<div class="line"><span class="lineno">  831</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  832</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Arrays_8java_source.html#l00035">cc.util.Arrays.iterator()</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00083">cc.ihp.IHP.m_oCorridors</a>, <a class="el" href="Mercator_8java_source.html#l00117">cc.geosrv.Mercator.xToLon()</a>, and <a class="el" href="Mercator_8java_source.html#l00123">cc.geosrv.Mercator.yToLat()</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_cgraph" id="aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,132,83"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a110fa0469db86b2624796b54066ebb75" title=" " alt="" coords="200,5,339,32"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0d0f478813f5ef4a2c4e8bd2efa3d7c1" title=" " alt="" coords="180,56,359,83"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a7ab072eb95484c4ece6ade0bde61b18c" title=" " alt="" coords="182,107,357,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_icgraph" id="aclasscc_1_1ihp_1_1IHP_a50d9d0fbe4f5d4975b252c711df169b9_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,307,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a195876f1a935eac7fb98bed19d5eb59d" name="a195876f1a935eac7fb98bed19d5eb59d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195876f1a935eac7fb98bed19d5eb59d">&#9670;&nbsp;</a></span>getParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.getParameters </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Adds the algorithm parameters to the JSON response</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00539">539</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  541</span>    {</div>
<div class="line"><span class="lineno">  542</span>        <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144">readParameters</a>();</div>
<div class="line"><span class="lineno">  543</span>        <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>)</div>
<div class="line"><span class="lineno">  544</span>        {</div>
<div class="line"><span class="lineno">  545</span>            <span class="keywordflow">for</span> (String sKey : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>)</div>
<div class="line"><span class="lineno">  546</span>            {</div>
<div class="line"><span class="lineno">  547</span>                oResponse.put(sKey, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.get(sKey));</div>
<div class="line"><span class="lineno">  548</span>            }</div>
<div class="line"><span class="lineno">  549</span>        }</div>
<div class="line"><span class="lineno">  550</span>        </div>
<div class="line"><span class="lineno">  551</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a908db8842d991813ca685294651b2ed2"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">cc.ihp.IHP.m_oParameters</a></div><div class="ttdeci">final HashMap&lt; String, Double &gt; m_oParameters</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00123">IHP.java:123</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_aef324811ee219cef60571c5cc2dd3466"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">cc.ihp.IHP.PARAMETER_KEYS</a></div><div class="ttdeci">final String[] PARAMETER_KEYS</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00093">IHP.java:93</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00093">cc.ihp.IHP.PARAMETER_KEYS</a>, and <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_cgraph" id="aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,176,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144" title=" " alt="" coords="224,5,401,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_icgraph" id="aclasscc_1_1ihp_1_1IHP_a195876f1a935eac7fb98bed19d5eb59d_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,351,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="ab461640a85ee9016e1c07553fb8d097d" name="ab461640a85ee9016e1c07553fb8d097d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab461640a85ee9016e1c07553fb8d097d">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cc.ihp.IHP.init </td>
          <td>(</td>
          <td class="paramtype">ServletConfig&#160;</td>
          <td class="paramname"><em>oConfig</em></td><td>)</td>
          <td> throws ServletException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Initializes the servlet by reading config parameters from web.xml and loading the current algorithm parameters and speed harm corridor</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oConfig</td><td>object that contains configuration values defined in web.xml </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ServletException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00193">193</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>    {</div>
<div class="line"><span class="lineno">  196</span>        <span class="comment">// default parameters</span></div>
<div class="line"><span class="lineno">  197</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;space_factor&quot;</span>, 0.05);</div>
<div class="line"><span class="lineno">  198</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;ratio_reduced_speed&quot;</span>, 0.8);</div>
<div class="line"><span class="lineno">  199</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;consecutive_time_interval_trigger&quot;</span>, 2.0);</div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;time_interval&quot;</span>, 300.0); <span class="comment">// seconds</span></div>
<div class="line"><span class="lineno">  201</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;maximal_gap&quot;</span>, 3.0); <span class="comment">// m/s</span></div>
<div class="line"><span class="lineno">  202</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<span class="stringliteral">&quot;baseline_flow&quot;</span>, 2000.0); <span class="comment">// veh/h/lane</span></div>
<div class="line"><span class="lineno">  203</span>        </div>
<div class="line"><span class="lineno">  204</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a> = oConfig.getInitParameter(<span class="stringliteral">&quot;pfile&quot;</span>);</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a> = <span class="stringliteral">&quot;/opt/tomcat/work/carmacloud/ihp/parameters.csv&quot;</span>; <span class="comment">// default value</span></div>
<div class="line"><span class="lineno">  207</span>        </div>
<div class="line"><span class="lineno">  208</span>        <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144">readParameters</a>();</div>
<div class="line"><span class="lineno">  209</span>        </div>
<div class="line"><span class="lineno">  210</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a> = oConfig.getInitParameter(<span class="stringliteral">&quot;cfile&quot;</span>);</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  212</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a> = <span class="stringliteral">&quot;/opt/tomcat/work/carmacloud/ihp/corridor.csv&quot;</span>; <span class="comment">// default value</span></div>
<div class="line"><span class="lineno">  213</span>        </div>
<div class="line"><span class="lineno">  214</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a> = oConfig.getInitParameter(<span class="stringliteral">&quot;dfile&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  216</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a> = <span class="stringliteral">&quot;/opt/tomcat/work/carmacloud/ihp/detectors.json&quot;</span>; <span class="comment">// default value</span></div>
<div class="line"><span class="lineno">  217</span>        </div>
<div class="line"><span class="lineno">  218</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a97a1cca655c3f95cc7a0e964fbf51960">m_sEndpoint</a> = oConfig.getInitParameter(<span class="stringliteral">&quot;endpoint&quot;</span>);</div>
<div class="line"><span class="lineno">  219</span>        </div>
<div class="line"><span class="lineno">  220</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a> = oConfig.getInitParameter(<span class="stringliteral">&quot;basedir&quot;</span>);</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a> = <span class="stringliteral">&quot;/opt/tomcat/work/carmacloud/ihp/&quot;</span>; <span class="comment">// default value</span></div>
<div class="line"><span class="lineno">  223</span>        </div>
<div class="line"><span class="lineno">  224</span>        <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f">readCorridors</a>(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a>);</div>
<div class="line"><span class="lineno">  225</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a455cdf9fa508499c24bc917da94f66bf"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">cc.ihp.IHP.m_sCorridorFile</a></div><div class="ttdeci">String m_sCorridorFile</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00153">IHP.java:153</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a6eebc83215ec2952080c469a00e4b08f"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f">cc.ihp.IHP.readCorridors</a></div><div class="ttdeci">void readCorridors(String sFile)</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00240">IHP.java:240</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_aaeab69bb94e16bd0fa29ad05ff82c51a"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">cc.ihp.IHP.m_sParameterFile</a></div><div class="ttdeci">String m_sParameterFile</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00088">IHP.java:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00163">cc.ihp.IHP.m_sBaseDir</a>, <a class="el" href="IHP_8java_source.html#l00153">cc.ihp.IHP.m_sCorridorFile</a>, <a class="el" href="IHP_8java_source.html#l00158">cc.ihp.IHP.m_sDetectorFile</a>, <a class="el" href="IHP_8java_source.html#l00073">cc.ihp.IHP.m_sEndpoint</a>, <a class="el" href="IHP_8java_source.html#l00088">cc.ihp.IHP.m_sParameterFile</a>, <a class="el" href="IHP_8java_source.html#l00240">cc.ihp.IHP.readCorridors()</a>, and <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_ab461640a85ee9016e1c07553fb8d097d_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_ab461640a85ee9016e1c07553fb8d097d_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_ab461640a85ee9016e1c07553fb8d097d_cgraph" id="aclasscc_1_1ihp_1_1IHP_ab461640a85ee9016e1c07553fb8d097d_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,108,57"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f" title=" " alt="" coords="163,5,326,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144" title=" " alt="" coords="156,56,333,83"/>
<area shape="rect" href="classcc_1_1ihp_1_1Corridor.html#ace377f38df88b0ec9df17aa5930e9b9d" title=" " alt="" coords="381,5,509,32"/>
</map>
</div>

</div>
</div>
<a id="a6eebc83215ec2952080c469a00e4b08f" name="a6eebc83215ec2952080c469a00e4b08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eebc83215ec2952080c469a00e4b08f">&#9670;&nbsp;</a></span>readCorridors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cc.ihp.IHP.readCorridors </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>sFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads the corridor csv file to load the geometric definition of the corridor and its subsegments. The file consists of sections separated by blank lines that represent a corridor to be used for the speed harmonization algorithm. The lines of a section represent each subsegment of the corridor, starting with subsegment 0 (the furthest downstream subsegment) and continuing in reverse direction of travel order. Each subsegment is a comma separated list representing the center line of the pavement of the subsegment in lon,lat,width coordinates. The first point of each subsegment should be the last point of the next subsegment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sFile</td><td>path of the corridor csv file </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00240">240</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  241</span>    {</div>
<div class="line"><span class="lineno">  242</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  243</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  244</span>        {</div>
<div class="line"><span class="lineno">  245</span>            Path oPath = Paths.get(sFile);</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">if</span> (!Files.exists(oPath))</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>.clear();</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">try</span> (CsvReader oIn = <span class="keyword">new</span> CsvReader(Files.newInputStream(oPath)))</div>
<div class="line"><span class="lineno">  251</span>            {</div>
<div class="line"><span class="lineno">  252</span>                <span class="keywordtype">int</span> nCol;</div>
<div class="line"><span class="lineno">  253</span>                Corridor oCorridor = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  254</span>                <span class="keywordflow">while</span> ((nCol = oIn.readLine()) &gt; 0)</div>
<div class="line"><span class="lineno">  255</span>                {</div>
<div class="line"><span class="lineno">  256</span>                    <span class="keywordflow">if</span> (oIn.isNull(0)) <span class="comment">// blank lines represent the end of a corridor</span></div>
<div class="line"><span class="lineno">  257</span>                    {</div>
<div class="line"><span class="lineno">  258</span>                        oCorridor = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  259</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  260</span>                    }</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>                    <span class="keywordflow">if</span> (oCorridor == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  263</span>                    {</div>
<div class="line"><span class="lineno">  264</span>                        oCorridor = <span class="keyword">new</span> Corridor();</div>
<div class="line"><span class="lineno">  265</span>                        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>.add(oCorridor);</div>
<div class="line"><span class="lineno">  266</span>                    }</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>                    oCorridor.add(<span class="keyword">new</span> Subsegment(oIn, nCol));</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>                }</div>
<div class="line"><span class="lineno">  271</span>            }</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">catch</span> (IOException oEx)</div>
<div class="line"><span class="lineno">  273</span>            {</div>
<div class="line"><span class="lineno">  274</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(oEx, oEx);</div>
<div class="line"><span class="lineno">  275</span>            }</div>
<div class="line"><span class="lineno">  276</span>        }</div>
<div class="line"><span class="lineno">  277</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  278</span>        {</div>
<div class="line"><span class="lineno">  279</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  280</span>        }</div>
<div class="line"><span class="lineno">  281</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Corridor_8java_source.html#l00032">cc.ihp.Corridor.add()</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00128">cc.ihp.IHP.LOGGER</a>, and <a class="el" href="IHP_8java_source.html#l00083">cc.ihp.IHP.m_oCorridors</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, and <a class="el" href="IHP_8java_source.html#l00750">cc.ihp.IHP.saveGeo()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_cgraph" id="aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,168,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1Corridor.html#ace377f38df88b0ec9df17aa5930e9b9d" title=" " alt="" coords="216,5,344,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_icgraph" id="aclasscc_1_1ihp_1_1IHP_a6eebc83215ec2952080c469a00e4b08f_icgraph">
<area shape="rect" title=" " alt="" coords="365,31,528,57"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#ab461640a85ee9016e1c07553fb8d097d" title=" " alt="" coords="197,5,300,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#afa494fa5af146512063b20c73fd58f19" title=" " alt="" coords="180,56,317,83"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,56,132,83"/>
</map>
</div>

</div>
</div>
<a id="a8f148b5dc823238497194c5e996fa1d6" name="a8f148b5dc823238497194c5e996fa1d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f148b5dc823238497194c5e996fa1d6">&#9670;&nbsp;</a></span>readDetectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cc.ihp.IHP.readDetectors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads the detector JSON file used to simulate traffic data if there is not a live data feed. The detector file is a JSON array of array of arrays. A sample is below, the first array contains each corridor. Each corridor contains an array of subsegments. Each subsegment contains an array of values which represent detector data in this format [speed limit (mph), 15th percentile speed (mph), 85th percentile speed (mph), occupancy (veh/mile/lane), volume (veh/h/lane] [ [ // start of corridor 0 [], // subsegment 0 [], // subsegment 1 [], // subsegment 2 [], // subsegment 3 [] // subsegment 4 ], // end of corridor 0 [ // start of corridor 1 [], // subsegment 0 [], // subsegment 1 [], // subsegment 2 [], // subsegment 3 [] // subsegment 4 ] // end of corridor 1 ]</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00309">309</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>    {</div>
<div class="line"><span class="lineno">  312</span>        Path oPath = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a>);</div>
<div class="line"><span class="lineno">  313</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  315</span>        {</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordflow">if</span> (!Files.exists(oPath))</div>
<div class="line"><span class="lineno">  317</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  318</span>            </div>
<div class="line"><span class="lineno">  319</span>            JSONArray oAllDetectors;</div>
<div class="line"><span class="lineno">  320</span>            <span class="keywordflow">try</span> (BufferedReader oIn = Files.newBufferedReader(oPath, StandardCharsets.UTF_8))</div>
<div class="line"><span class="lineno">  321</span>            {</div>
<div class="line"><span class="lineno">  322</span>                oAllDetectors = <span class="keyword">new</span> JSONArray(<span class="keyword">new</span> JSONTokener(oIn));</div>
<div class="line"><span class="lineno">  323</span>            }</div>
<div class="line"><span class="lineno">  324</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a0788d7074218e07d1b7f6554c9eaa134">m_oCurrentDetectors</a> = oAllDetectors; <span class="comment">// keep updated copy in memory</span></div>
<div class="line"><span class="lineno">  325</span>            </div>
<div class="line"><span class="lineno">  326</span>            Units oUnits = Units.getInstance();</div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nCorridorsIndex = 0; nCorridorsIndex &lt; <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>.size(); nCorridorsIndex++)</div>
<div class="line"><span class="lineno">  328</span>            {</div>
<div class="line"><span class="lineno">  329</span>                Corridor oList = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>.get(nCorridorsIndex);</div>
<div class="line"><span class="lineno">  330</span>                JSONArray oDetectors = oAllDetectors.getJSONArray(nCorridorsIndex);</div>
<div class="line"><span class="lineno">  331</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nSubsegmentIndex = 0; nSubsegmentIndex &lt; oList.size(); nSubsegmentIndex++)</div>
<div class="line"><span class="lineno">  332</span>                {</div>
<div class="line"><span class="lineno">  333</span>                    Subsegment oSubsegment = oList.get(nSubsegmentIndex);</div>
<div class="line"><span class="lineno">  334</span>                    JSONArray oSubsegmentDetectors = oDetectors.getJSONArray(nSubsegmentIndex);</div>
<div class="line"><span class="lineno">  335</span>                    oSubsegment.updateDetectors(oUnits.convert(<span class="stringliteral">&quot;mph&quot;</span>, <span class="stringliteral">&quot;m/s&quot;</span>, oSubsegmentDetectors.getDouble(0)), <span class="comment">// store in m/s for calculations</span></div>
<div class="line"><span class="lineno">  336</span>                        oUnits.convert(<span class="stringliteral">&quot;mph&quot;</span>, <span class="stringliteral">&quot;m/s&quot;</span>, oSubsegmentDetectors.getDouble(1)), <span class="comment">// store in m/s for calculations</span></div>
<div class="line"><span class="lineno">  337</span>                        oUnits.convert(<span class="stringliteral">&quot;mph&quot;</span>, <span class="stringliteral">&quot;m/s&quot;</span>, oSubsegmentDetectors.getDouble(2)), <span class="comment">// store in m/s for calculations </span></div>
<div class="line"><span class="lineno">  338</span>                        oUnits.convert(<span class="stringliteral">&quot;veh/mi/lane&quot;</span>, <span class="stringliteral">&quot;veh/m/lane&quot;</span>, oSubsegmentDetectors.getDouble(3)), <span class="comment">// store in veh/m/lane</span></div>
<div class="line"><span class="lineno">  339</span>                        oUnits.convert(<span class="stringliteral">&quot;veh/hr/lane&quot;</span>, <span class="stringliteral">&quot;veh/s/lane&quot;</span>, oSubsegmentDetectors.getDouble(4))); <span class="comment">// store in veh/s/lane</span></div>
<div class="line"><span class="lineno">  340</span>                }</div>
<div class="line"><span class="lineno">  341</span>            }</div>
<div class="line"><span class="lineno">  342</span>        }</div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  344</span>        {</div>
<div class="line"><span class="lineno">  345</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  346</span>        }</div>
<div class="line"><span class="lineno">  347</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Units_8java_source.html#l00074">cc.util.Units.convert()</a>, <a class="el" href="Units_8java_source.html#l00058">cc.util.Units.getInstance()</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00083">cc.ihp.IHP.m_oCorridors</a>, <a class="el" href="IHP_8java_source.html#l00183">cc.ihp.IHP.m_oCurrentDetectors</a>, <a class="el" href="IHP_8java_source.html#l00158">cc.ihp.IHP.m_sDetectorFile</a>, and <a class="el" href="Subsegment_8java_source.html#l00259">cc.ihp.Subsegment.updateDetectors()</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, and <a class="el" href="IHP_8java_source.html#l00842">cc.ihp.IHP.updateDetectors()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_cgraph" id="aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,172,108"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="239,31,375,57"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="227,81,388,108"/>
<area shape="rect" href="classcc_1_1ihp_1_1Subsegment.html#ae6f2310b45ad493ed89cdfa899587a7a" title=" " alt="" coords="220,133,395,174"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="443,5,636,32"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="451,56,627,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_icgraph" id="aclasscc_1_1ihp_1_1IHP_a8f148b5dc823238497194c5e996fa1d6_icgraph">
<area shape="rect" title=" " alt="" coords="587,31,753,57"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de" title=" " alt="" coords="408,5,539,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#aef6b6bbe4cdbe133249c632ac05cca10" title=" " alt="" coords="180,56,360,83"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190" title=" " alt="" coords="203,5,337,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,31,132,57"/>
</map>
</div>

</div>
</div>
<a id="a64de9b18e67b14bdb4516e1feda41144" name="a64de9b18e67b14bdb4516e1feda41144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64de9b18e67b14bdb4516e1feda41144">&#9670;&nbsp;</a></span>readParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">HashMap&lt; String, Double &gt; cc.ihp.IHP.readParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads the algorithm parameters file and updates the values in memory</p>
<dl class="section return"><dt>Returns</dt><dd>A new HashMap object with the current parameter values </dd></dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00407">407</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>    {</div>
<div class="line"><span class="lineno">  409</span>        <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>)</div>
<div class="line"><span class="lineno">  410</span>        {</div>
<div class="line"><span class="lineno">  411</span>            Path oParameters = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a>);</div>
<div class="line"><span class="lineno">  412</span>            <span class="keywordflow">if</span> (Files.exists(oParameters))</div>
<div class="line"><span class="lineno">  413</span>            {</div>
<div class="line"><span class="lineno">  414</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  415</span>                {</div>
<div class="line"><span class="lineno">  416</span>                    <span class="keywordflow">try</span> (CsvReader oIn = <span class="keyword">new</span> CsvReader(Files.newInputStream(oParameters)))</div>
<div class="line"><span class="lineno">  417</span>                    {</div>
<div class="line"><span class="lineno">  418</span>                        <span class="keywordtype">int</span> nCol;</div>
<div class="line"><span class="lineno">  419</span>                        <span class="keywordflow">while</span> ((nCol = oIn.readLine()) &gt; 0)</div>
<div class="line"><span class="lineno">  420</span>                        {</div>
<div class="line"><span class="lineno">  421</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  422</span>                            {</div>
<div class="line"><span class="lineno">  423</span>                                String sKey = oIn.parseString(0);</div>
<div class="line"><span class="lineno">  424</span>                                <span class="keywordtype">int</span> nIndex = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>.length;</div>
<div class="line"><span class="lineno">  425</span>                                <span class="keywordflow">while</span> (nIndex-- &gt; 0)</div>
<div class="line"><span class="lineno">  426</span>                                    <span class="keywordflow">if</span> (sKey.compareTo(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>[nIndex]) == 0)</div>
<div class="line"><span class="lineno">  427</span>                                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  428</span>                                </div>
<div class="line"><span class="lineno">  429</span>                                <span class="keywordflow">if</span> (nIndex &lt; 0)</div>
<div class="line"><span class="lineno">  430</span>                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  431</span>                                <span class="keywordtype">double</span> dVal = oIn.parseDouble(1);</div>
<div class="line"><span class="lineno">  432</span>                                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(sKey, dVal);</div>
<div class="line"><span class="lineno">  433</span>                            }</div>
<div class="line"><span class="lineno">  434</span>                            <span class="keywordflow">catch</span> (Exception oInnerEx)</div>
<div class="line"><span class="lineno">  435</span>                            {</div>
<div class="line"><span class="lineno">  436</span>                                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(<span class="stringliteral">&quot;Failed setting parameter &quot;</span> + oIn.parseString(0) + <span class="stringliteral">&quot; as &quot;</span> + oIn.parseString(1));</div>
<div class="line"><span class="lineno">  437</span>                            }</div>
<div class="line"><span class="lineno">  438</span>                        }</div>
<div class="line"><span class="lineno">  439</span>                    }</div>
<div class="line"><span class="lineno">  440</span>                }</div>
<div class="line"><span class="lineno">  441</span>                <span class="keywordflow">catch</span> (Exception oEx)</div>
<div class="line"><span class="lineno">  442</span>                {</div>
<div class="line"><span class="lineno">  443</span>                    <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a4bcb8a244100ece52b3ed002c8125d32">LOGGER</a>.error(oEx.getMessage());</div>
<div class="line"><span class="lineno">  444</span>                }</div>
<div class="line"><span class="lineno">  445</span>            }</div>
<div class="line"><span class="lineno">  446</span>            </div>
<div class="line"><span class="lineno">  447</span>            HashMap&lt;String, Double&gt; oReturn = <span class="keyword">new</span> HashMap(); <span class="comment">// create a copy of the map to return</span></div>
<div class="line"><span class="lineno">  448</span>            <span class="keywordflow">for</span> (Map.Entry&lt;String, Double&gt; oEntry : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.entrySet())</div>
<div class="line"><span class="lineno">  449</span>            {</div>
<div class="line"><span class="lineno">  450</span>                oReturn.put(oEntry.getKey(), oEntry.getValue());</div>
<div class="line"><span class="lineno">  451</span>            }</div>
<div class="line"><span class="lineno">  452</span>            </div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordflow">return</span> oReturn;</div>
<div class="line"><span class="lineno">  454</span>        }</div>
<div class="line"><span class="lineno">  455</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00128">cc.ihp.IHP.LOGGER</a>, <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00088">cc.ihp.IHP.m_sParameterFile</a>, and <a class="el" href="IHP_8java_source.html#l00093">cc.ihp.IHP.PARAMETER_KEYS</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, <a class="el" href="IHP_8java_source.html#l00539">cc.ihp.IHP.getParameters()</a>, and <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a64de9b18e67b14bdb4516e1feda41144_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a64de9b18e67b14bdb4516e1feda41144_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a64de9b18e67b14bdb4516e1feda41144_icgraph" id="aclasscc_1_1ihp_1_1IHP_a64de9b18e67b14bdb4516e1feda41144_icgraph">
<area shape="rect" title=" " alt="" coords="577,56,755,83"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de" title=" " alt="" coords="399,5,529,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a195876f1a935eac7fb98bed19d5eb59d" title=" " alt="" coords="180,56,351,83"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#ab461640a85ee9016e1c07553fb8d097d" title=" " alt="" coords="413,107,515,133"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a659feda7d6a5fd3fc978ec7e9d273190" title=" " alt="" coords="198,5,333,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,31,132,57"/>
</map>
</div>

</div>
</div>
<a id="afa494fa5af146512063b20c73fd58f19" name="afa494fa5af146512063b20c73fd58f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa494fa5af146512063b20c73fd58f19">&#9670;&nbsp;</a></span>saveGeo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.saveGeo </td>
          <td>(</td>
          <td class="paramtype">HttpServletRequest&#160;</td>
          <td class="paramname"><em>oReq</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Parses and saves the geometry of a Speed Harmonization <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> coming from the web application and then loads its into memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oReq</td><td>object that contains all of the HTTP request information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00750">750</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  752</span>    {</div>
<div class="line"><span class="lineno">  753</span>        JSONArray oFeatures = <span class="keyword">new</span> JSONArray(oReq.getParameter(<span class="stringliteral">&quot;geo&quot;</span>)); <span class="comment">// geojson feature collection</span></div>
<div class="line"><span class="lineno">  754</span>        <span class="keywordtype">double</span> dLaneWidth = Double.parseDouble(oReq.getParameter(<span class="stringliteral">&quot;width&quot;</span>));</div>
<div class="line"><span class="lineno">  755</span>        <span class="keywordtype">int</span> nLanes = (int)Double.parseDouble(oReq.getParameter(<span class="stringliteral">&quot;lanes&quot;</span>));</div>
<div class="line"><span class="lineno">  756</span>        <span class="keywordtype">double</span> dWidth = dLaneWidth * nLanes;</div>
<div class="line"><span class="lineno">  757</span>        </div>
<div class="line"><span class="lineno">  758</span>        StringBuilder sBuf = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><span class="lineno">  759</span>        DecimalFormat oOrdDf = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">&quot;#.#######&quot;</span>);</div>
<div class="line"><span class="lineno">  760</span>        String sWidth = <span class="keyword">new</span> DecimalFormat(<span class="stringliteral">&quot;#.##&quot;</span>).format(dWidth);</div>
<div class="line"><span class="lineno">  761</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nFeatureIndex = oFeatures.length() - 1; nFeatureIndex &gt;= 0; nFeatureIndex--) <span class="comment">// save in reverse order so that the furthest downstream subsegment is the first one written to file</span></div>
<div class="line"><span class="lineno">  762</span>        {</div>
<div class="line"><span class="lineno">  763</span>            JSONArray oCoords = oFeatures.getJSONObject(nFeatureIndex).getJSONObject(<span class="stringliteral">&quot;geometry&quot;</span>).getJSONArray(<span class="stringliteral">&quot;coordinates&quot;</span>);</div>
<div class="line"><span class="lineno">  764</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nCoordIndex = 0; nCoordIndex &lt; oCoords.length(); nCoordIndex++)</div>
<div class="line"><span class="lineno">  765</span>            {</div>
<div class="line"><span class="lineno">  766</span>                JSONArray oPt = oCoords.getJSONArray(nCoordIndex);</div>
<div class="line"><span class="lineno">  767</span>                sBuf.append(oOrdDf.format(oPt.get(0))).append(<span class="charliteral">&#39;,&#39;</span>).append(oOrdDf.format(oPt.get(1))).append(<span class="charliteral">&#39;,&#39;</span>).append(sWidth).append(<span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><span class="lineno">  768</span>            }</div>
<div class="line"><span class="lineno">  769</span>            sBuf.setLength(sBuf.length() - 1); <span class="comment">// remove trailing comma</span></div>
<div class="line"><span class="lineno">  770</span>            sBuf.append(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno">  771</span>        }</div>
<div class="line"><span class="lineno">  772</span>        </div>
<div class="line"><span class="lineno">  773</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  774</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  775</span>        {</div>
<div class="line"><span class="lineno">  776</span>            <span class="keywordflow">try</span> (BufferedWriter oOut = <span class="keyword">new</span> BufferedWriter(Channels.newWriter(Files.newByteChannel(Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a>), FileUtil.WRITE, FileUtil.FILEPERS), StandardCharsets.UTF_8))) <span class="comment">// save to disk</span></div>
<div class="line"><span class="lineno">  777</span>            {</div>
<div class="line"><span class="lineno">  778</span>                oOut.append(sBuf);</div>
<div class="line"><span class="lineno">  779</span>            }</div>
<div class="line"><span class="lineno">  780</span>            </div>
<div class="line"><span class="lineno">  781</span>            Files.deleteIfExists(Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a>)); <span class="comment">// remove stale detector file</span></div>
<div class="line"><span class="lineno">  782</span>            <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f">readCorridors</a>(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a455cdf9fa508499c24bc917da94f66bf">m_sCorridorFile</a>); <span class="comment">// load the new corridor into memory</span></div>
<div class="line"><span class="lineno">  783</span>        }</div>
<div class="line"><span class="lineno">  784</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  785</span>        {</div>
<div class="line"><span class="lineno">  786</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  787</span>        }</div>
<div class="line"><span class="lineno">  788</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  789</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="FileUtil_8java_source.html#l00031">cc.util.FileUtil.FILEPERS</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00153">cc.ihp.IHP.m_sCorridorFile</a>, <a class="el" href="IHP_8java_source.html#l00158">cc.ihp.IHP.m_sDetectorFile</a>, <a class="el" href="IHP_8java_source.html#l00240">cc.ihp.IHP.readCorridors()</a>, and <a class="el" href="FileUtil_8java_source.html#l00035">cc.util.FileUtil.WRITE</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_cgraph" id="aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,143,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a6eebc83215ec2952080c469a00e4b08f" title=" " alt="" coords="191,5,353,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1Corridor.html#ace377f38df88b0ec9df17aa5930e9b9d" title=" " alt="" coords="401,5,529,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_icgraph" id="aclasscc_1_1ihp_1_1IHP_afa494fa5af146512063b20c73fd58f19_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,317,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="af698769072a0f5b9fe15ae50cecaf490" name="af698769072a0f5b9fe15ae50cecaf490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af698769072a0f5b9fe15ae50cecaf490">&#9670;&nbsp;</a></span>saveParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.saveParameters </td>
          <td>(</td>
          <td class="paramtype">HttpServletRequest&#160;</td>
          <td class="paramname"><em>oReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads the parameters from the HTTP request and saves them to disk and updates the values in memory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oReq</td><td>object that contains all of the HTTP request information </td></tr>
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00563">563</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  565</span>    {</div>
<div class="line"><span class="lineno">  566</span>        <span class="keywordtype">double</span>[] dNewParas = <span class="keyword">new</span> <span class="keywordtype">double</span>[<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>.length];</div>
<div class="line"><span class="lineno">  567</span>        <span class="keywordtype">int</span> nIndex = -1;</div>
<div class="line"><span class="lineno">  568</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  569</span>        {</div>
<div class="line"><span class="lineno">  570</span>            <span class="keywordflow">for</span> (nIndex = 0; nIndex &lt; dNewParas.length; nIndex++)</div>
<div class="line"><span class="lineno">  571</span>                dNewParas[nIndex] = Double.parseDouble(oReq.getParameter(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>[nIndex]));</div>
<div class="line"><span class="lineno">  572</span>        }</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">catch</span> (Exception oEx)</div>
<div class="line"><span class="lineno">  574</span>        {</div>
<div class="line"><span class="lineno">  575</span>            oResponse.put(<span class="stringliteral">&quot;error&quot;</span>, <span class="stringliteral">&quot;Missing/invalid parameter for key &quot;</span> + <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>[nIndex]);</div>
<div class="line"><span class="lineno">  576</span>            <span class="keywordflow">return</span> HttpServletResponse.SC_BAD_REQUEST;</div>
<div class="line"><span class="lineno">  577</span>        }</div>
<div class="line"><span class="lineno">  578</span>        </div>
<div class="line"><span class="lineno">  579</span>        <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>)</div>
<div class="line"><span class="lineno">  580</span>        {</div>
<div class="line"><span class="lineno">  581</span>            Path oParameters = Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aaeab69bb94e16bd0fa29ad05ff82c51a">m_sParameterFile</a>);</div>
<div class="line"><span class="lineno">  582</span>            Files.createDirectories(oParameters.getParent(), FileUtil.DIRPERS);</div>
<div class="line"><span class="lineno">  583</span>            <span class="keywordflow">try</span> (BufferedWriter oOut = <span class="keyword">new</span> BufferedWriter(Channels.newWriter(Files.newByteChannel(oParameters, FileUtil.WRITE), StandardCharsets.UTF_8)))</div>
<div class="line"><span class="lineno">  584</span>            {</div>
<div class="line"><span class="lineno">  585</span>                <span class="keywordflow">for</span> (nIndex = 0; nIndex &lt; dNewParas.length; nIndex++)</div>
<div class="line"><span class="lineno">  586</span>                {</div>
<div class="line"><span class="lineno">  587</span>                    oOut.append(String.format(<span class="stringliteral">&quot;%s,%1.3f\n&quot;</span>, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>[nIndex], dNewParas[nIndex])); <span class="comment">// update values on disk</span></div>
<div class="line"><span class="lineno">  588</span>                    <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.put(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#aef324811ee219cef60571c5cc2dd3466">PARAMETER_KEYS</a>[nIndex], dNewParas[nIndex]); <span class="comment">// and in memory</span></div>
<div class="line"><span class="lineno">  589</span>                }</div>
<div class="line"><span class="lineno">  590</span>            }</div>
<div class="line"><span class="lineno">  591</span>        }</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  593</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="FileUtil_8java_source.html#l00027">cc.util.FileUtil.DIRPERS</a>, <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00088">cc.ihp.IHP.m_sParameterFile</a>, <a class="el" href="IHP_8java_source.html#l00093">cc.ihp.IHP.PARAMETER_KEYS</a>, and <a class="el" href="FileUtil_8java_source.html#l00035">cc.util.FileUtil.WRITE</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_af698769072a0f5b9fe15ae50cecaf490_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_af698769072a0f5b9fe15ae50cecaf490_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_af698769072a0f5b9fe15ae50cecaf490_icgraph" id="aclasscc_1_1ihp_1_1IHP_af698769072a0f5b9fe15ae50cecaf490_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,360,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a659feda7d6a5fd3fc978ec7e9d273190" name="a659feda7d6a5fd3fc978ec7e9d273190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a659feda7d6a5fd3fc978ec7e9d273190">&#9670;&nbsp;</a></span>startSim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.startSim </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Attempts to start the simulation of the IHP2 Speed Harmonization Algorithm</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00672">672</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  674</span>    {</div>
<div class="line"><span class="lineno">  675</span>        <span class="keyword">synchronized</span> (<span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  676</span>        {</div>
<div class="line"><span class="lineno">  677</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> != <span class="keyword">null</span>) <span class="comment">// if the Timer isn&#39;t null the simulation is arleady running</span></div>
<div class="line"><span class="lineno">  678</span>            {</div>
<div class="line"><span class="lineno">  679</span>                oResponse.put(<span class="stringliteral">&quot;error&quot;</span>, <span class="stringliteral">&quot;Already running&quot;</span>);</div>
<div class="line"><span class="lineno">  680</span>                <span class="keywordflow">return</span> HttpServletResponse.SC_BAD_REQUEST;</div>
<div class="line"><span class="lineno">  681</span>            }</div>
<div class="line"><span class="lineno">  682</span>            </div>
<div class="line"><span class="lineno">  683</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> = <span class="keyword">new</span> Timer();</div>
<div class="line"><span class="lineno">  684</span>            GregorianCalendar oCal = <span class="keyword">new</span> GregorianCalendar(TimeZone.getTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));</div>
<div class="line"><span class="lineno">  685</span>            oCal.set(Calendar.MILLISECOND, 0);</div>
<div class="line"><span class="lineno">  686</span>            oCal.set(Calendar.SECOND, 0);</div>
<div class="line"><span class="lineno">  687</span>            <span class="keywordtype">int</span> nPeriodInMillis;</div>
<div class="line"><span class="lineno">  688</span>            <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>)</div>
<div class="line"><span class="lineno">  689</span>            {</div>
<div class="line"><span class="lineno">  690</span>                nPeriodInMillis = (int)<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.get(<span class="stringliteral">&quot;time_interval&quot;</span>).doubleValue() * 1000;</div>
<div class="line"><span class="lineno">  691</span>            }</div>
<div class="line"><span class="lineno">  692</span>            <span class="keywordtype">long</span> lNext = System.currentTimeMillis() / nPeriodInMillis * nPeriodInMillis + nPeriodInMillis;</div>
<div class="line"><span class="lineno">  693</span>            SimpleDateFormat oFileFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a3dafea702122d7b79b517d48daa2c6a1">m_sBaseDir</a> + <span class="stringliteral">&quot;&#39;yyyyMM&#39;/&#39;yyyyMMdd&#39;/ihplog_&#39;yyyyMMdd_HHmmss&#39;.csv&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  694</span>            oFileFormat.setTimeZone(TimeZone.getTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));</div>
<div class="line"><span class="lineno">  695</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a522c3062fcd99b0f9b48d89828a64c08">m_sCurrentFile</a> = oFileFormat.format(lNext); <span class="comment">// set the log file name for this run of the simulation</span></div>
<div class="line"><span class="lineno">  696</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock();</div>
<div class="line"><span class="lineno">  697</span>            <span class="keywordflow">try</span> <span class="comment">// reset the necessary objects to start the simulation from scratch</span></div>
<div class="line"><span class="lineno">  698</span>            {</div>
<div class="line"><span class="lineno">  699</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a2b70695596737ce9e4cdc0054f793cbf">m_nTriggers</a> = 0;</div>
<div class="line"><span class="lineno">  700</span>                <span class="keywordflow">for</span> (Corridor oCorridor : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#acc741379533dce6503927a1a269ffee0">m_oCorridors</a>)</div>
<div class="line"><span class="lineno">  701</span>                {</div>
<div class="line"><span class="lineno">  702</span>                    <span class="keywordflow">for</span> (Subsegment oSubsegment : oCorridor)</div>
<div class="line"><span class="lineno">  703</span>                    {</div>
<div class="line"><span class="lineno">  704</span>                        oSubsegment.m_dPreviousAdvisorySpeed = oSubsegment.m_dAdvisorySpeed = oSubsegment.m_nMaxSpeed;</div>
<div class="line"><span class="lineno">  705</span>                    }</div>
<div class="line"><span class="lineno">  706</span>                }</div>
<div class="line"><span class="lineno">  707</span>            }</div>
<div class="line"><span class="lineno">  708</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  709</span>            {</div>
<div class="line"><span class="lineno">  710</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  711</span>            }</div>
<div class="line"><span class="lineno">  712</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a>.scheduleAtFixedRate(<span class="keyword">new</span> TimerTask(){@Override <span class="keyword">public</span> <span class="keywordtype">void</span> run(){<a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de">execute</a>();}}, <span class="keyword">new</span> Date(lNext), nPeriodInMillis);</div>
<div class="line"><span class="lineno">  713</span>        }</div>
<div class="line"><span class="lineno">  714</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  715</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a50026b144f9ab2a3593e780806b071de"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de">cc.ihp.IHP.execute</a></div><div class="ttdeci">void execute()</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00354">IHP.java:354</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_abdd638512f6ae4592bbad9a99be1c228"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">cc.ihp.IHP.m_oTimer</a></div><div class="ttdeci">Timer m_oTimer</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00078">IHP.java:78</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00173">cc.ihp.IHP.m_nTriggers</a>, <a class="el" href="IHP_8java_source.html#l00083">cc.ihp.IHP.m_oCorridors</a>, <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00078">cc.ihp.IHP.m_oTimer</a>, <a class="el" href="IHP_8java_source.html#l00163">cc.ihp.IHP.m_sBaseDir</a>, and <a class="el" href="IHP_8java_source.html#l00178">cc.ihp.IHP.m_sCurrentFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_cgraph" id="aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_cgraph">
<area shape="rect" title=" " alt="" coords="5,2211,140,2238"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a50026b144f9ab2a3593e780806b071de" title=" " alt="" coords="188,2211,319,2238"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#ac58d0e0175b5c9ce7b4d338a7fc204e3" title=" " alt="" coords="613,436,785,477"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6" title=" " alt="" coords="616,1381,783,1407"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a64de9b18e67b14bdb4516e1feda41144" title=" " alt="" coords="367,2211,544,2238"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a407342aae592fd466d9679f1697089f6" title=" " alt="" coords="368,2955,543,2996"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a1b3d7b9b4c1c85647dbd9361a997f499" title=" " alt="" coords="367,3020,544,3061"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ad2b0be731525bf78dfd53f928929348f" title=" " alt="" coords="1389,1406,1509,1433"/>
<area shape="rect" href="classcc_1_1util_1_1MathUtil.html#a68ef402505ae8abc4065f8673422b5fc" title=" " alt="" coords="871,2618,1043,2645"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="889,1254,1025,1281"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ac238b5e5777edad2526561c2eeb26064" title=" " alt="" coords="873,1558,1041,1585"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a492b8381a1eb62aee9eaeb81888a83de" title=" " alt="" coords="1111,2205,1295,2231"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrl.html#ada6cc53215b6f0c03f48c857ed62be43" title=" " alt="" coords="889,523,1024,550"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#aabe972c17d1057379e7914a2e34a6693" title=" " alt="" coords="1348,394,1551,421"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="876,1507,1037,1534"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a5b6a1769051751efefd777ee310fe893" title=" " alt="" coords="865,122,1048,149"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a0e6a43a63d8127a8bd1ebe1536e5b7a7" title=" " alt="" coords="868,173,1045,199"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a110fa0469db86b2624796b54066ebb75" title=" " alt="" coords="1380,2433,1519,2459"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a8e3d97064f85859c1eab5be32d496284" title=" " alt="" coords="875,224,1039,265"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a9ea08b43e7884424f8836100eaf4d1c9" title=" " alt="" coords="873,289,1040,331"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a897385b9eaa9258399b9b84c7f4843ca" title=" " alt="" coords="869,407,1044,448"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#a28dcd177ce710068183b63672dd8d34e" title=" " alt="" coords="879,5,1035,47"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#ae89dc313e8c10f8b29067356277ff3d6" title=" " alt="" coords="1599,1406,1787,1433"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="1107,1203,1300,1230"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="1115,1254,1291,1281"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#a0b8cea038af220c1d98cebf7a5f333c2" title=" " alt="" coords="1122,1676,1285,1717"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#af509524ed51a0b33daf14ca461f5e376" title=" " alt="" coords="1631,2509,1754,2535"/>
<area shape="rect" href="classcc_1_1util_1_1Text.html#a9b7dd03037c22c2cc0ca511d6623e800" title=" " alt="" coords="1126,574,1281,601"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a0f6f5813f72ec98f00726f03f62270ac" title=" " alt="" coords="1599,394,1786,421"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12dfd03cde8e76b757d0ba535186d43a" title=" " alt="" coords="1116,433,1291,475"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a1c0c9d4ac165094c323436e2047b759e" title=" " alt="" coords="1119,368,1287,409"/>
<area shape="rect" href="classcc_1_1geosrv_1_1Mercator.html#a12287382f28763590928f95ed9c81ae4" title=" " alt="" coords="1354,1035,1545,1062"/>
<area shape="rect" href="classcc_1_1ihp_1_1Subsegment.html#ae6f2310b45ad493ed89cdfa899587a7a" title=" " alt="" coords="869,969,1044,1011"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#a5311ecb90c7a2c76ba389b73edb07f68" title=" " alt="" coords="602,2147,797,2188"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcDirection.html#a2ec255b2924b3769686d615cc40737c9" title=" " alt="" coords="597,3075,802,3116"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcHeadway.html#a9ded9290ba708640872d6985fc1da2d0" title=" " alt="" coords="595,2915,803,2956"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxPlatoonSize.html#adf5e6c93936b9ecb4bcb2039f191e501" title=" " alt="" coords="608,3163,791,3204"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMaxSpeed.html#a0450e7bec9885dc65deb73e94948c953" title=" " alt="" coords="592,2611,807,2652"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcMinPlatoonHdwy.html#a8dabeb194d55e3d3c9c8320bd70055ac" title=" " alt="" coords="609,3272,789,3313"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcOpening.html#aa19c1962e66bce0648242b17ba4326df" title=" " alt="" coords="598,2059,801,2100"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcSignal.html#aacc879e9e19a1196f2ab7842284c7e1a" title=" " alt="" coords="604,3909,795,3951"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcStop.html#af6a3568aabe0108378de6716ac9b4ce7" title=" " alt="" coords="609,3656,790,3697"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcYield.html#a6f1c18261612249c3bee86e622c2f10e" title=" " alt="" coords="608,4280,791,4321"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#a5b63948c276949d4139e1bdfab69d92f" title=" " alt="" coords="597,1116,801,1157"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosing.html#a0a2895a21230e25c0314f2c7ca3e7a1b" title=" " alt="" coords="601,2995,798,3036"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#af056a1a6f4aca407a3101ac8f7d160f2" title=" " alt="" coords="885,1928,1028,1969"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ad077e6e88ca11094a491a0502e0a833b" title=" " alt="" coords="1136,3374,1271,3401"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#adcb4de9f0f37f923b411c37de2815bbb" title=" " alt="" coords="1120,3188,1287,3229"/>
<area shape="rect" href="classcc_1_1ctrl_1_1TrafCtrlEnums.html#a3d855f5ea45b8c4e2d77a77639db7e45" title=" " alt="" coords="875,2147,1039,2188"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a4fd6d36df99db8a6bcf94abb77108277" title=" " alt="" coords="1138,3137,1269,3163"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a1cb80b67268e839445ca6a8ac0f99c03" title=" " alt="" coords="1125,1601,1281,1627"/>
<area shape="rect" href="classcc_1_1util_1_1FileUtil.html#acad5fecf938895e2a9ea81e76654e85d" title=" " alt="" coords="1120,3284,1287,3325"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcClosed.html#ae63fac7675e20daf42f530a246c4fe67" title=" " alt="" coords="859,1863,1054,1904"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#ae7a37f571f3a1efcc1adac19e25cb759" title=" " alt="" coords="876,1761,1037,1787"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdLayer.html#a9fb7834ce4bf8cb6b44f00e5c2b6f7c5" title=" " alt="" coords="873,2922,1040,2949"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a238d4c0d1ded2a27a6fd924d52ddced4" title=" " alt="" coords="873,3293,1040,3335"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#abdb33a4fe3fa85788b064a17123cd97e" title=" " alt="" coords="1131,3071,1275,3112"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2241ff39ed721c330abdc7c1b9d90f44" title=" " alt="" coords="1362,3441,1537,3483"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a7e92758a1d96179668521360b1524949" title=" " alt="" coords="1381,3366,1518,3393"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a8f7846336ea8bf156adc5b5ed88e26fb" title=" " alt="" coords="1391,3137,1508,3163"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ab7436ca83ec17988aa62142389c52016" title=" " alt="" coords="1114,2567,1293,2594"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1TdFeature.html#ac068d66888fb0e7b24c88b05de0805c6" title=" " alt="" coords="1365,2501,1533,2543"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#a6d70755c859d1efe5124fea98214ab2e" title=" " alt="" coords="867,3075,1047,3116"/>
<area shape="rect" href="classcc_1_1util_1_1Geo.html#a2a4afbdc4d7858a1a792faa33175a916" title=" " alt="" coords="872,2770,1041,2797"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcCtrl.html#ad2943e3db00285f11fb4ca0587663b0c" title=" " alt="" coords="879,4069,1035,4111"/>
<area shape="rect" href="classcc_1_1util_1_1Arrays.html#aaf9deb249e1bac3a264c792b06d88fb3" title=" " alt="" coords="1111,899,1296,926"/>
<area shape="rect" href="classcc_1_1util_1_1TileUtil.html#a4bb2c0bd3ab70e2fe09654e21cbeb872" title=" " alt="" coords="883,700,1031,741"/>
<area shape="rect" href="classcc_1_1ctrl_1_1proc_1_1ProcLatPerm.html#aa4833293f5e96db8a411445665111806" title=" " alt="" coords="855,1087,1059,1128"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_icgraph" id="aclasscc_1_1ihp_1_1IHP_a659feda7d6a5fd3fc978ec7e9d273190_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,315,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a9abd1b1ebb3f4c7f0c0d845c4321329f" name="a9abd1b1ebb3f4c7f0c0d845c4321329f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9abd1b1ebb3f4c7f0c0d845c4321329f">&#9670;&nbsp;</a></span>status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcc_1_1ws_1_1Session.html">Session</a>&#160;</td>
          <td class="paramname"><em>oSession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Adds status values to the JSON response and updates what users are trying to use the web application. Status values include the number of users, time of the next run of the algorithm, time of the most recent run of the algorithm, status of the application, description of the status, and number of controls made in the last run of the algorithm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oSession</td><td>object that contain information about the session making the HTTP request </td></tr>
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00608">608</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  610</span>    {</div>
<div class="line"><span class="lineno">  611</span>        <span class="keywordtype">long</span> lNow = System.currentTimeMillis();</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordtype">int</span> nUsers = 1;</div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordtype">int</span> nResStatus = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ac9ac68d649991daa8ceb0af86001450a">ERROR</a>;</div>
<div class="line"><span class="lineno">  614</span>        <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>)</div>
<div class="line"><span class="lineno">  615</span>        {</div>
<div class="line"><span class="lineno">  616</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>.put(oSession.getUserName(), lNow);</div>
<div class="line"><span class="lineno">  617</span>            <span class="keywordtype">long</span> lTimeout = lNow - 30000; <span class="comment">// timeout after 30 seconds</span></div>
<div class="line"><span class="lineno">  618</span>            ArrayList&lt;String&gt; oRemove = <span class="keyword">new</span> ArrayList();</div>
<div class="line"><span class="lineno">  619</span>            <span class="keywordflow">for</span> (String sUser : <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>.keySet())</div>
<div class="line"><span class="lineno">  620</span>            {</div>
<div class="line"><span class="lineno">  621</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>.get(sUser) &lt;= lTimeout)</div>
<div class="line"><span class="lineno">  622</span>                    oRemove.add(sUser);</div>
<div class="line"><span class="lineno">  623</span>            }</div>
<div class="line"><span class="lineno">  624</span>            </div>
<div class="line"><span class="lineno">  625</span>            <span class="keywordflow">for</span> (String sRemove : oRemove)</div>
<div class="line"><span class="lineno">  626</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>.remove(sRemove);</div>
<div class="line"><span class="lineno">  627</span>            </div>
<div class="line"><span class="lineno">  628</span>            nUsers = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">m_oUsers</a>.size();</div>
<div class="line"><span class="lineno">  629</span>            <span class="keywordflow">if</span> (nUsers == 1)</div>
<div class="line"><span class="lineno">  630</span>                <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a5d00a4c59ec7ed407089154da1796d3e">m_sCurrentUser</a> = oSession.getUserName();</div>
<div class="line"><span class="lineno">  631</span>        }</div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a5d00a4c59ec7ed407089154da1796d3e">m_sCurrentUser</a>.compareTo(oSession.getUserName()) == 0) <span class="comment">// the web app doesn&#39;t work if the number of users is greater than one so if the user is the first user to start using the application force the nubmer to 1 regardless of others trying to use it</span></div>
<div class="line"><span class="lineno">  633</span>            oResponse.put(<span class="stringliteral">&quot;users&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  635</span>            oResponse.put(<span class="stringliteral">&quot;users&quot;</span>, nUsers);</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordtype">int</span> nPeriodInMillis;</div>
<div class="line"><span class="lineno">  638</span>        <span class="keyword">synchronized</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>)</div>
<div class="line"><span class="lineno">  639</span>        {</div>
<div class="line"><span class="lineno">  640</span>            nPeriodInMillis = (int)<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a908db8842d991813ca685294651b2ed2">m_oParameters</a>.get(<span class="stringliteral">&quot;time_interval&quot;</span>).doubleValue() * 1000;</div>
<div class="line"><span class="lineno">  641</span>        }</div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordtype">long</span> lNext = lNow / nPeriodInMillis * nPeriodInMillis + nPeriodInMillis;</div>
<div class="line"><span class="lineno">  643</span>        <span class="keyword">synchronized</span> (<span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  644</span>        {</div>
<div class="line"><span class="lineno">  645</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  646</span>                nResStatus = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af2bb252be0d37801652ba0baf07d4603">READY</a>;</div>
<div class="line"><span class="lineno">  647</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  648</span>            {</div>
<div class="line"><span class="lineno">  649</span>                nResStatus = <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a132d9293093a70f10b74b5b356248ed5">RUNNING</a>;</div>
<div class="line"><span class="lineno">  650</span>                oResponse.put(<span class="stringliteral">&quot;next_run&quot;</span>, lNext);</div>
<div class="line"><span class="lineno">  651</span>            }</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>            oResponse.put(<span class="stringliteral">&quot;ctrls_made&quot;</span>, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a88209f141a18562620447b900f492b69">m_nLastControls</a>);</div>
<div class="line"><span class="lineno">  654</span>            oResponse.put(<span class="stringliteral">&quot;last_run&quot;</span>, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#afad0b1dc18eb22d52d454492e843cc85">m_lLastRun</a>);</div>
<div class="line"><span class="lineno">  655</span>        }</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>        </div>
<div class="line"><span class="lineno">  658</span>        oResponse.put(<span class="stringliteral">&quot;status&quot;</span>, nResStatus);</div>
<div class="line"><span class="lineno">  659</span>        oResponse.put(<span class="stringliteral">&quot;desc&quot;</span>, <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#a5e8e25bb2b00de20ec98bb9df2a8c395">STATUS_MSGS</a>[nResStatus]);</div>
<div class="line"><span class="lineno">  660</span>        <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e">getFiles</a>(oResponse);</div>
<div class="line"><span class="lineno">  661</span>        </div>
<div class="line"><span class="lineno">  662</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  663</span>    }</div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a132d9293093a70f10b74b5b356248ed5"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a132d9293093a70f10b74b5b356248ed5">cc.ihp.IHP.RUNNING</a></div><div class="ttdeci">final int RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00118">IHP.java:118</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a5d00a4c59ec7ed407089154da1796d3e"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a5d00a4c59ec7ed407089154da1796d3e">cc.ihp.IHP.m_sCurrentUser</a></div><div class="ttdeci">String m_sCurrentUser</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00148">IHP.java:148</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_a5e8e25bb2b00de20ec98bb9df2a8c395"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#a5e8e25bb2b00de20ec98bb9df2a8c395">cc.ihp.IHP.STATUS_MSGS</a></div><div class="ttdeci">final String[] STATUS_MSGS</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00098">IHP.java:98</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_ac9ac68d649991daa8ceb0af86001450a"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#ac9ac68d649991daa8ceb0af86001450a">cc.ihp.IHP.ERROR</a></div><div class="ttdeci">final int ERROR</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00103">IHP.java:103</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_af2bb252be0d37801652ba0baf07d4603"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#af2bb252be0d37801652ba0baf07d4603">cc.ihp.IHP.READY</a></div><div class="ttdeci">final int READY</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00113">IHP.java:113</a></div></div>
<div class="ttc" id="aclasscc_1_1ihp_1_1IHP_html_af52a0361f1516b914fa68d1325da2d6b"><div class="ttname"><a href="classcc_1_1ihp_1_1IHP.html#af52a0361f1516b914fa68d1325da2d6b">cc.ihp.IHP.m_oUsers</a></div><div class="ttdeci">final HashMap&lt; String, Long &gt; m_oUsers</div><div class="ttdef"><b>Definition:</b> <a href="IHP_8java_source.html#l00143">IHP.java:143</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00103">cc.ihp.IHP.ERROR</a>, <a class="el" href="IHP_8java_source.html#l00907">cc.ihp.IHP.getFiles()</a>, <a class="el" href="IHP_8java_source.html#l00138">cc.ihp.IHP.m_lLastRun</a>, <a class="el" href="IHP_8java_source.html#l00133">cc.ihp.IHP.m_nLastControls</a>, <a class="el" href="IHP_8java_source.html#l00123">cc.ihp.IHP.m_oParameters</a>, <a class="el" href="IHP_8java_source.html#l00078">cc.ihp.IHP.m_oTimer</a>, <a class="el" href="IHP_8java_source.html#l00143">cc.ihp.IHP.m_oUsers</a>, <a class="el" href="IHP_8java_source.html#l00148">cc.ihp.IHP.m_sCurrentUser</a>, <a class="el" href="IHP_8java_source.html#l00113">cc.ihp.IHP.READY</a>, <a class="el" href="IHP_8java_source.html#l00118">cc.ihp.IHP.RUNNING</a>, and <a class="el" href="IHP_8java_source.html#l00098">cc.ihp.IHP.STATUS_MSGS</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_cgraph" id="aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,127,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a464bed6c7a6cd63932ede045f0e4351e" title=" " alt="" coords="175,5,305,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_icgraph" id="aclasscc_1_1ihp_1_1IHP_a9abd1b1ebb3f4c7f0c0d845c4321329f_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,301,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="a145d5aa03ac4c0d32de2dad078acdcc6" name="a145d5aa03ac4c0d32de2dad078acdcc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a145d5aa03ac4c0d32de2dad078acdcc6">&#9670;&nbsp;</a></span>stopSim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.stopSim </td>
          <td>(</td>
          <td class="paramtype">JSONObject&#160;</td>
          <td class="paramname"><em>oResponse</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Stops the simulation of the IHP2 Speed Harmonization Algorithm if it is currently running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oResponse</td><td>JSON object that gets returned to the web application </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00725">725</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  727</span>    {</div>
<div class="line"><span class="lineno">  728</span>        <span class="keyword">synchronized</span> (<span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  729</span>        {</div>
<div class="line"><span class="lineno">  730</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  731</span>            {</div>
<div class="line"><span class="lineno">  732</span>                oResponse.put(<span class="stringliteral">&quot;error&quot;</span>, <span class="stringliteral">&quot;Not running&quot;</span>);</div>
<div class="line"><span class="lineno">  733</span>                <span class="keywordflow">return</span> HttpServletResponse.SC_BAD_REQUEST;</div>
<div class="line"><span class="lineno">  734</span>            }</div>
<div class="line"><span class="lineno">  735</span>            </div>
<div class="line"><span class="lineno">  736</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a>.cancel();</div>
<div class="line"><span class="lineno">  737</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#abdd638512f6ae4592bbad9a99be1c228">m_oTimer</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  738</span>        }</div>
<div class="line"><span class="lineno">  739</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  740</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IHP_8java_source.html#l00078">cc.ihp.IHP.m_oTimer</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_a145d5aa03ac4c0d32de2dad078acdcc6_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_a145d5aa03ac4c0d32de2dad078acdcc6_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_a145d5aa03ac4c0d32de2dad078acdcc6_icgraph" id="aclasscc_1_1ihp_1_1IHP_a145d5aa03ac4c0d32de2dad078acdcc6_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,313,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<a id="aef6b6bbe4cdbe133249c632ac05cca10" name="aef6b6bbe4cdbe133249c632ac05cca10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef6b6bbe4cdbe133249c632ac05cca10">&#9670;&nbsp;</a></span>updateDetectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.updateDetectors </td>
          <td>(</td>
          <td class="paramtype">HttpServletRequest&#160;</td>
          <td class="paramname"><em>oReq</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Saves the detector values of the subsegments of the Speed Harmonization <a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a> from the web application request to a files and updates them in memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oReq</td><td>object that contains all of the HTTP request information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>HTTP status code </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00842">842</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  844</span>    {</div>
<div class="line"><span class="lineno">  845</span>        JSONArray oAllDetectors = <span class="keyword">new</span> JSONArray(oReq.getParameter(<span class="stringliteral">&quot;detectors&quot;</span>));</div>
<div class="line"><span class="lineno">  846</span>        <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.lock(); <span class="comment">// lock for async requests</span></div>
<div class="line"><span class="lineno">  847</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  848</span>        {</div>
<div class="line"><span class="lineno">  849</span>            <span class="keywordflow">try</span> (BufferedWriter oOut = <span class="keyword">new</span> BufferedWriter(Channels.newWriter(Files.newByteChannel(Paths.get(<a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#af1c324fd88c29d9e5ad872850070e81b">m_sDetectorFile</a>), FileUtil.WRITE, FileUtil.FILEPERS), StandardCharsets.UTF_8)))</div>
<div class="line"><span class="lineno">  850</span>            {</div>
<div class="line"><span class="lineno">  851</span>                oAllDetectors.write(oOut);</div>
<div class="line"><span class="lineno">  852</span>            }</div>
<div class="line"><span class="lineno">  853</span>            <a class="code hl_function" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6">readDetectors</a>();</div>
<div class="line"><span class="lineno">  854</span>        }</div>
<div class="line"><span class="lineno">  855</span>        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  856</span>        {</div>
<div class="line"><span class="lineno">  857</span>            <a class="code hl_variable" href="classcc_1_1ihp_1_1IHP.html#ae2118834ef88722231d82c1257eaa27a">LOCK</a>.unlock();</div>
<div class="line"><span class="lineno">  858</span>        }</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>        <span class="keywordflow">return</span> HttpServletResponse.SC_OK;</div>
<div class="line"><span class="lineno">  861</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="FileUtil_8java_source.html#l00031">cc.util.FileUtil.FILEPERS</a>, <a class="el" href="IHP_8java_source.html#l00168">cc.ihp.IHP.LOCK</a>, <a class="el" href="IHP_8java_source.html#l00158">cc.ihp.IHP.m_sDetectorFile</a>, <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>, and <a class="el" href="FileUtil_8java_source.html#l00035">cc.util.FileUtil.WRITE</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_cgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_cgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_cgraph" id="aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_cgraph">
<area shape="rect" title=" " alt="" coords="5,81,185,108"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#a8f148b5dc823238497194c5e996fa1d6" title=" " alt="" coords="233,81,400,108"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a0a9414ca999f7d80d61d1879f2f24354" title=" " alt="" coords="467,31,603,57"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a2ed097330b0706ed441dc42f929e61ee" title=" " alt="" coords="455,81,616,108"/>
<area shape="rect" href="classcc_1_1ihp_1_1Subsegment.html#ae6f2310b45ad493ed89cdfa899587a7a" title=" " alt="" coords="448,133,623,174"/>
<area shape="rect" href="classcc_1_1util_1_1Units_1_1UnitConv.html#a49b1a3c0c9061da7f0649f880e678bc6" title=" " alt="" coords="671,5,864,32"/>
<area shape="rect" href="classcc_1_1util_1_1Units.html#a154871f2e4e86dfbc474d0c4cf6d5ea3" title=" " alt="" coords="679,56,855,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_icgraph.png" border="0" usemap="#aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_icgraph" alt=""/></div>
<map name="aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_icgraph" id="aclasscc_1_1ihp_1_1IHP_aef6b6bbe4cdbe133249c632ac05cca10_icgraph">
<area shape="rect" title=" " alt="" coords="180,5,360,32"/>
<area shape="rect" href="classcc_1_1ihp_1_1IHP.html#af568702fccfef19e70ab6cb7936ccdbd" title=" " alt="" coords="5,5,132,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac9ac68d649991daa8ceb0af86001450a" name="ac9ac68d649991daa8ceb0af86001450a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9ac68d649991daa8ceb0af86001450a">&#9670;&nbsp;</a></span>ERROR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int cc.ihp.IHP.ERROR = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Status code for Error </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00103">103</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a6d3371b2c992d8b693f979040cb586de" name="a6d3371b2c992d8b693f979040cb586de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d3371b2c992d8b693f979040cb586de">&#9670;&nbsp;</a></span>INVALIDCORRIDOR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int cc.ihp.IHP.INVALIDCORRIDOR = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Status code for a corridor not properly defined </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00108">108</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

</div>
</div>
<a id="ae2118834ef88722231d82c1257eaa27a" name="ae2118834ef88722231d82c1257eaa27a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2118834ef88722231d82c1257eaa27a">&#9670;&nbsp;</a></span>LOCK</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Lock cc.ihp.IHP.LOCK = new ReentrantLock()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Lock object used to manage asynchronous requests </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00168">168</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, <a class="el" href="IHP_8java_source.html#l00871">cc.ihp.IHP.getDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00797">cc.ihp.IHP.getGeo()</a>, <a class="el" href="IHP_8java_source.html#l00240">cc.ihp.IHP.readCorridors()</a>, <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00750">cc.ihp.IHP.saveGeo()</a>, <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>, and <a class="el" href="IHP_8java_source.html#l00842">cc.ihp.IHP.updateDetectors()</a>.</p>

</div>
</div>
<a id="a4bcb8a244100ece52b3ed002c8125d32" name="a4bcb8a244100ece52b3ed002c8125d32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bcb8a244100ece52b3ed002c8125d32">&#9670;&nbsp;</a></span>LOGGER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Logger cc.ihp.IHP.LOGGER = LogManager.getLogger(IHP.class)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Log4j logger object </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00128">128</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00466">cc.ihp.IHP.doPost()</a>, <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, <a class="el" href="IHP_8java_source.html#l00240">cc.ihp.IHP.readCorridors()</a>, and <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>.</p>

</div>
</div>
<a id="afad0b1dc18eb22d52d454492e843cc85" name="afad0b1dc18eb22d52d454492e843cc85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad0b1dc18eb22d52d454492e843cc85">&#9670;&nbsp;</a></span>m_lLastRun</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long cc.ihp.IHP.m_lLastRun = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Timestamp of the last run of the Speed Harmonization algorithm </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00138">138</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, and <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a88209f141a18562620447b900f492b69" name="a88209f141a18562620447b900f492b69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88209f141a18562620447b900f492b69">&#9670;&nbsp;</a></span>m_nLastControls</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.m_nLastControls = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Keeps track of the number of controls created for the last run of the Speed Harmonization algorithm </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00133">133</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, and <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a2b70695596737ce9e4cdc0054f793cbf" name="a2b70695596737ce9e4cdc0054f793cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b70695596737ce9e4cdc0054f793cbf">&#9670;&nbsp;</a></span>m_nTriggers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cc.ihp.IHP.m_nTriggers = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Keeps track of the number of consecutive runs of the Speed Harmonization Algorithm that have a reduced speed </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00173">173</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00979">cc.ihp.IHP.generateSpeedControls()</a>, and <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>.</p>

</div>
</div>
<a id="acc741379533dce6503927a1a269ffee0" name="acc741379533dce6503927a1a269ffee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc741379533dce6503927a1a269ffee0">&#9670;&nbsp;</a></span>m_oCorridors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final ArrayList&lt;<a class="el" href="classcc_1_1ihp_1_1Corridor.html">Corridor</a>&gt; cc.ihp.IHP.m_oCorridors = new ArrayList()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >List that contains the definitions of the Speed Harmonization Corridors </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00083">83</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, <a class="el" href="IHP_8java_source.html#l00797">cc.ihp.IHP.getGeo()</a>, <a class="el" href="IHP_8java_source.html#l00240">cc.ihp.IHP.readCorridors()</a>, <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>, and <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>.</p>

</div>
</div>
<a id="a0788d7074218e07d1b7f6554c9eaa134" name="a0788d7074218e07d1b7f6554c9eaa134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0788d7074218e07d1b7f6554c9eaa134">&#9670;&nbsp;</a></span>m_oCurrentDetectors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JSONArray cc.ihp.IHP.m_oCurrentDetectors = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >JSONArray containing the current values for detectors </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00183">183</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00979">cc.ihp.IHP.generateSpeedControls()</a>, and <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>.</p>

</div>
</div>
<a id="a908db8842d991813ca685294651b2ed2" name="a908db8842d991813ca685294651b2ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908db8842d991813ca685294651b2ed2">&#9670;&nbsp;</a></span>m_oParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final HashMap&lt;String, Double&gt; cc.ihp.IHP.m_oParameters = new HashMap()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Map used to store parameters for the algorithm </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00123">123</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00539">cc.ihp.IHP.getParameters()</a>, <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>, <a class="el" href="IHP_8java_source.html#l00563">cc.ihp.IHP.saveParameters()</a>, <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>, and <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="abdd638512f6ae4592bbad9a99be1c228" name="abdd638512f6ae4592bbad9a99be1c228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd638512f6ae4592bbad9a99be1c228">&#9670;&nbsp;</a></span>m_oTimer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Timer cc.ihp.IHP.m_oTimer = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Object used to execute tasks on a regular interval </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00078">78</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>, <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>, and <a class="el" href="IHP_8java_source.html#l00725">cc.ihp.IHP.stopSim()</a>.</p>

</div>
</div>
<a id="af52a0361f1516b914fa68d1325da2d6b" name="af52a0361f1516b914fa68d1325da2d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af52a0361f1516b914fa68d1325da2d6b">&#9670;&nbsp;</a></span>m_oUsers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final HashMap&lt;String, Long&gt; cc.ihp.IHP.m_oUsers = new HashMap()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Map used to keep track of users accessing the system </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00143">143</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a3dafea702122d7b79b517d48daa2c6a1" name="a3dafea702122d7b79b517d48daa2c6a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dafea702122d7b79b517d48daa2c6a1">&#9670;&nbsp;</a></span>m_sBaseDir</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sBaseDir</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path of the working directory for <a class="el" href="classcc_1_1ihp_1_1IHP.html">IHP</a> files </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00163">163</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00949">cc.ihp.IHP.getFile()</a>, <a class="el" href="IHP_8java_source.html#l00907">cc.ihp.IHP.getFiles()</a>, <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, and <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>.</p>

</div>
</div>
<a id="a455cdf9fa508499c24bc917da94f66bf" name="a455cdf9fa508499c24bc917da94f66bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455cdf9fa508499c24bc917da94f66bf">&#9670;&nbsp;</a></span>m_sCorridorFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sCorridorFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path of the file that contains corridor definitions </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00153">153</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, and <a class="el" href="IHP_8java_source.html#l00750">cc.ihp.IHP.saveGeo()</a>.</p>

</div>
</div>
<a id="a522c3062fcd99b0f9b48d89828a64c08" name="a522c3062fcd99b0f9b48d89828a64c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a522c3062fcd99b0f9b48d89828a64c08">&#9670;&nbsp;</a></span>m_sCurrentFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sCurrentFile = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path of the current log file </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00178">178</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00979">cc.ihp.IHP.generateSpeedControls()</a>, and <a class="el" href="IHP_8java_source.html#l00672">cc.ihp.IHP.startSim()</a>.</p>

</div>
</div>
<a id="a5d00a4c59ec7ed407089154da1796d3e" name="a5d00a4c59ec7ed407089154da1796d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d00a4c59ec7ed407089154da1796d3e">&#9670;&nbsp;</a></span>m_sCurrentUser</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sCurrentUser</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Keeps track of the current user </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00148">148</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="af1c324fd88c29d9e5ad872850070e81b" name="af1c324fd88c29d9e5ad872850070e81b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1c324fd88c29d9e5ad872850070e81b">&#9670;&nbsp;</a></span>m_sDetectorFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sDetectorFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path of the file containing detector data </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00158">158</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00871">cc.ihp.IHP.getDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, <a class="el" href="IHP_8java_source.html#l00309">cc.ihp.IHP.readDetectors()</a>, <a class="el" href="IHP_8java_source.html#l00750">cc.ihp.IHP.saveGeo()</a>, and <a class="el" href="IHP_8java_source.html#l00842">cc.ihp.IHP.updateDetectors()</a>.</p>

</div>
</div>
<a id="a97a1cca655c3f95cc7a0e964fbf51960" name="a97a1cca655c3f95cc7a0e964fbf51960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a1cca655c3f95cc7a0e964fbf51960">&#9670;&nbsp;</a></span>m_sEndpoint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sEndpoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path specifying the data endpoint. Can be a local file or remote URL </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00073">73</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00354">cc.ihp.IHP.execute()</a>, and <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>.</p>

</div>
</div>
<a id="aaeab69bb94e16bd0fa29ad05ff82c51a" name="aaeab69bb94e16bd0fa29ad05ff82c51a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeab69bb94e16bd0fa29ad05ff82c51a">&#9670;&nbsp;</a></span>m_sParameterFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String cc.ihp.IHP.m_sParameterFile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Path to file contains parameters for the Speed Harmonization Algorithm </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00088">88</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00193">cc.ihp.IHP.init()</a>, <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>, and <a class="el" href="IHP_8java_source.html#l00563">cc.ihp.IHP.saveParameters()</a>.</p>

</div>
</div>
<a id="aef324811ee219cef60571c5cc2dd3466" name="aef324811ee219cef60571c5cc2dd3466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef324811ee219cef60571c5cc2dd3466">&#9670;&nbsp;</a></span>PARAMETER_KEYS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String [] cc.ihp.IHP.PARAMETER_KEYS = new String[]{&quot;space_factor&quot;, &quot;ratio_reduced_speed&quot;, &quot;consecutive_time_interval_trigger&quot;, &quot;time_interval&quot;, &quot;maximal_gap&quot;, &quot;baseline_flow&quot;}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Array of parameter names </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00093">93</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00539">cc.ihp.IHP.getParameters()</a>, <a class="el" href="IHP_8java_source.html#l00407">cc.ihp.IHP.readParameters()</a>, and <a class="el" href="IHP_8java_source.html#l00563">cc.ihp.IHP.saveParameters()</a>.</p>

</div>
</div>
<a id="af2bb252be0d37801652ba0baf07d4603" name="af2bb252be0d37801652ba0baf07d4603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2bb252be0d37801652ba0baf07d4603">&#9670;&nbsp;</a></span>READY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int cc.ihp.IHP.READY = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Status code for ready </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00113">113</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a132d9293093a70f10b74b5b356248ed5" name="a132d9293093a70f10b74b5b356248ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132d9293093a70f10b74b5b356248ed5">&#9670;&nbsp;</a></span>RUNNING</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int cc.ihp.IHP.RUNNING = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Status code for running </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00118">118</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<a id="a5e8e25bb2b00de20ec98bb9df2a8c395" name="a5e8e25bb2b00de20ec98bb9df2a8c395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e8e25bb2b00de20ec98bb9df2a8c395">&#9670;&nbsp;</a></span>STATUS_MSGS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String [] cc.ihp.IHP.STATUS_MSGS = new String[]{&quot;Error&quot;, &quot;Invalid subsegment definitions&quot;, &quot;Ready to run&quot;, &quot;Running&quot;}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Array containing status messages </p>

<p class="definition">Definition at line <a class="el" href="IHP_8java_source.html#l00098">98</a> of file <a class="el" href="IHP_8java_source.html">IHP.java</a>.</p>

<p class="reference">Referenced by <a class="el" href="IHP_8java_source.html#l00608">cc.ihp.IHP.status()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/cc/ihp/<a class="el" href="IHP_8java_source.html">IHP.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cc</b></li><li class="navelem"><a class="el" href="namespacecc_1_1ihp.html">ihp</a></li><li class="navelem"><a class="el" href="classcc_1_1ihp_1_1IHP.html">IHP</a></li>
    <li class="footer">Generated on Thu Jan 19 2023 22:04:28 for Carma-cloud by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
