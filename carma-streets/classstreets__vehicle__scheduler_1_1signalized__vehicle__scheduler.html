<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: streets_vehicle_scheduler::signalized_vehicle_scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">streets_vehicle_scheduler::signalized_vehicle_scheduler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for streets_vehicle_scheduler::signalized_vehicle_scheduler:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler__inherit__graph.png" border="0" usemap="#astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_inherit__map" alt="Inheritance graph"/></div>
<map name="astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_inherit__map" id="astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_inherit__map">
<area shape="rect" title=" " alt="" coords="5,263,201,839"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html" title="Abstract Class for extend to implement scheduling business logic." alt="" coords="17,5,190,215"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for streets_vehicle_scheduler::signalized_vehicle_scheduler:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler__coll__graph.png" border="0" usemap="#astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_coll__map" alt="Collaboration graph"/></div>
<map name="astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_coll__map" id="astreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_coll__map">
<area shape="rect" title=" " alt="" coords="193,447,389,993"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html" title="Abstract Class for extend to implement scheduling business logic." alt="" coords="5,160,179,369"/>
<area shape="rect" title=" " alt="" coords="13,5,171,97"/>
<area shape="rect" title=" " alt="" coords="203,219,379,311"/>
<area shape="rect" title=" " alt="" coords="403,226,471,303"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5549c21cf0c7d99ad6ed41192f319dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ad5549c21cf0c7d99ad6ed41192f319dc">signalized_vehicle_scheduler</a> ()=default</td></tr>
<tr class="memdesc:ad5549c21cf0c7d99ad6ed41192f319dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new signalized vehicle scheduler object.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ad5549c21cf0c7d99ad6ed41192f319dc">More...</a><br /></td></tr>
<tr class="separator:ad5549c21cf0c7d99ad6ed41192f319dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a253b363db5dde03d2d3ad5565d900260"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a253b363db5dde03d2d3ad5565d900260">~signalized_vehicle_scheduler</a> () override=default</td></tr>
<tr class="memdesc:a253b363db5dde03d2d3ad5565d900260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the signalized vehicle scheduler object.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a253b363db5dde03d2d3ad5565d900260">More...</a><br /></td></tr>
<tr class="separator:a253b363db5dde03d2d3ad5565d900260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2572fdbb86e141df40174d618fe2a3d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0">schedule_vehicles</a> (std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles, std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">intersection_schedule</a> &gt; &amp;schedule) override</td></tr>
<tr class="memdesc:a2572fdbb86e141df40174d618fe2a3d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to schedule vehicles. Given and empty <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">intersection_schedule</a> shared pointer and a map of vehicles and vehicle ids. This method will populate the intersection schedule with a schedule for all vehicles in the vehicle map based on UC 3 scheduling logic to estimate vehicles' entering times to the intersection box based on the modified spat.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0">More...</a><br /></td></tr>
<tr class="separator:a2572fdbb86e141df40174d618fe2a3d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2532494d22760bd75165d7b2c25bc354"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2532494d22760bd75165d7b2c25bc354">set_initial_green_buffer</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:a2532494d22760bd75165d7b2c25bc354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the initial green buffer (ms). This value is used to account for the time it takes a vehicle before entering the intersection box at a green phase.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2532494d22760bd75165d7b2c25bc354">More...</a><br /></td></tr>
<tr class="separator:a2532494d22760bd75165d7b2c25bc354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c1c065ffbe9ecd62e2a985815aa8170"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a0c1c065ffbe9ecd62e2a985815aa8170">get_initial_green_buffer</a> () const</td></tr>
<tr class="memdesc:a0c1c065ffbe9ecd62e2a985815aa8170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial green buffer (ms).  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a0c1c065ffbe9ecd62e2a985815aa8170">More...</a><br /></td></tr>
<tr class="separator:a0c1c065ffbe9ecd62e2a985815aa8170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f16f001c3768c180d62ea66a8770151"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9f16f001c3768c180d62ea66a8770151">set_final_green_buffer</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:a9f16f001c3768c180d62ea66a8770151"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the final green buffer (ms). This value is used to account for safety. The assumption is that no vehicle shall enter the intersection box after the end of a green phase minus the final green buffer. entering the intersection box at a green phase.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9f16f001c3768c180d62ea66a8770151">More...</a><br /></td></tr>
<tr class="separator:a9f16f001c3768c180d62ea66a8770151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbeb97e551e87ad6340c620b51f28fe1"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#afbeb97e551e87ad6340c620b51f28fe1">get_final_green_buffer</a> () const</td></tr>
<tr class="memdesc:afbeb97e551e87ad6340c620b51f28fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the final green buffer (ms).  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#afbeb97e551e87ad6340c620b51f28fe1">More...</a><br /></td></tr>
<tr class="separator:afbeb97e551e87ad6340c620b51f28fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4707ffc16fca19f724911b9f0c0e581"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa4707ffc16fca19f724911b9f0c0e581">get_spat</a> () const</td></tr>
<tr class="memdesc:aa4707ffc16fca19f724911b9f0c0e581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the spat object.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa4707ffc16fca19f724911b9f0c0e581">More...</a><br /></td></tr>
<tr class="separator:aa4707ffc16fca19f724911b9f0c0e581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31439c5e2c152727be5df25e109ba988"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a31439c5e2c152727be5df25e109ba988">set_spat</a> (std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt; spat_info)</td></tr>
<tr class="memdesc:a31439c5e2c152727be5df25e109ba988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the spat object.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a31439c5e2c152727be5df25e109ba988">More...</a><br /></td></tr>
<tr class="separator:a31439c5e2c152727be5df25e109ba988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html">streets_vehicle_scheduler::vehicle_scheduler</a></td></tr>
<tr class="memitem:a26f9acdf3e3fa08c8025bf4daebd1376 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a26f9acdf3e3fa08c8025bf4daebd1376">vehicle_scheduler</a> ()=default</td></tr>
<tr class="memdesc:a26f9acdf3e3fa08c8025bf4daebd1376 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new vehicle scheduler object.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a26f9acdf3e3fa08c8025bf4daebd1376">More...</a><br /></td></tr>
<tr class="separator:a26f9acdf3e3fa08c8025bf4daebd1376 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ebf26e4aae6538e7481220b2df3488 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#ab4ebf26e4aae6538e7481220b2df3488">~vehicle_scheduler</a> ()=default</td></tr>
<tr class="memdesc:ab4ebf26e4aae6538e7481220b2df3488 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the vehicle scheduler object.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#ab4ebf26e4aae6538e7481220b2df3488">More...</a><br /></td></tr>
<tr class="separator:ab4ebf26e4aae6538e7481220b2df3488 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ae44ddfa8ae16f298b2798ed93b9d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a68ae44ddfa8ae16f298b2798ed93b9d2">schedule_vehicles</a> (std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles, std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">intersection_schedule</a> &gt; &amp;schedule)=0</td></tr>
<tr class="memdesc:a68ae44ddfa8ae16f298b2798ed93b9d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual method to schedule vehicle. Different implementations of vehicle scheduler can implement custom business logic for scheduling vehicle while taking advantage of polymorphism to dynamically assign class at runtime.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a68ae44ddfa8ae16f298b2798ed93b9d2">More...</a><br /></td></tr>
<tr class="separator:a68ae44ddfa8ae16f298b2798ed93b9d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843b25b73b376d77df5a8d5e77f818d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a843b25b73b376d77df5a8d5e77f818d2">get_intersection_info</a> () const</td></tr>
<tr class="memdesc:a843b25b73b376d77df5a8d5e77f818d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the intersection info object.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a843b25b73b376d77df5a8d5e77f818d2">More...</a><br /></td></tr>
<tr class="separator:a843b25b73b376d77df5a8d5e77f818d2 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b666aed7fe6d72a268315baeb1f85e1 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a8b666aed7fe6d72a268315baeb1f85e1">set_intersection_info</a> (std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; _intersection_info)</td></tr>
<tr class="memdesc:a8b666aed7fe6d72a268315baeb1f85e1 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the intersection info object.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a8b666aed7fe6d72a268315baeb1f85e1">More...</a><br /></td></tr>
<tr class="separator:a8b666aed7fe6d72a268315baeb1f85e1 inherit pub_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4ff15023fb9c14d1765ebe78d3d3a944"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944">schedule_dvs</a> (const std::list&lt; <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;dvs, const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">signalized_intersection_schedule</a> &gt; &amp;schedule) const</td></tr>
<tr class="memdesc:a4ff15023fb9c14d1765ebe78d3d3a944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the intersection departure times (dt's) for all currently Departing Vehicle (DVs) based on kinematic vehicle information and intersection geometry. Method assumes empty <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">intersection_schedule</a> is passed in. Method will add vehicle_schedule(s) for each DV in the vector.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944">More...</a><br /></td></tr>
<tr class="separator:a4ff15023fb9c14d1765ebe78d3d3a944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41bc42db46cbbf7a037486fa46dd7e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0">schedule_evs</a> (std::list&lt; <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;evs, const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">signalized_intersection_schedule</a> &gt; &amp;schedule) const</td></tr>
<tr class="memdesc:ac41bc42db46cbbf7a037486fa46dd7e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry lane. These list are ordered in ascending order with the vehicle closest to the intersection in a given lane being the first vehicle in that entry lanes vehicle list. Then, for each entry lane, an entering time (ET) for each EV in the entry lane is calculated sequentially starting from the first vehicle until in the list. ET is estimated based on the EV's earliest entering time (EET), its preceding vehicle's estimated ET, and the modifed spat.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0">More...</a><br /></td></tr>
<tr class="separator:ac41bc42db46cbbf7a037486fa46dd7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d00a1ab964b44569653d414280a3419"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419">estimate_et</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">signalized_vehicle_schedule</a> &gt; &amp;preceding_veh, <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">signalized_vehicle_schedule</a> &amp;sched, const <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;move_state, const uint64_t schedule_timestamp) const</td></tr>
<tr class="memdesc:a4d00a1ab964b44569653d414280a3419"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV's earliest entering time (EET), its preceding vehicle's estimated ET, and the modifed spat.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419">More...</a><br /></td></tr>
<tr class="separator:a4d00a1ab964b44569653d414280a3419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616f990b94f85cbe7c8ac5ecc215d41c"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c">calculate_earliest_entering_time</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh) const</td></tr>
<tr class="memdesc:a616f990b94f85cbe7c8ac5ecc215d41c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an entering vehicle (EV). Does not consider any other vehicles. Limiting factors are the vehicles current kinematic information, lane speed limits and vehicle acceleration and deceleration limits.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c">More...</a><br /></td></tr>
<tr class="separator:a616f990b94f85cbe7c8ac5ecc215d41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925165d32ec5e00e9e2992df9337010d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d">calculate_distance_accel_and_decel</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double max_speed, const double departure_speed) const</td></tr>
<tr class="memdesc:a925165d32ec5e00e9e2992df9337010d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the distance required to speed up to lane speed limit with maximum acceleration and then decelerate to departure speed with maximum deceleration. This is used to calculate the earliest entering time (EET) for the vehicle.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d">More...</a><br /></td></tr>
<tr class="separator:a925165d32ec5e00e9e2992df9337010d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98775d8dc582750131d1a7daff140397"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397">calculate_distance_accel_or_decel</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double departure_speed) const</td></tr>
<tr class="memdesc:a98775d8dc582750131d1a7daff140397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration (maximum deceleration). If the departure speed is greater than the vehicle's current speed, the vehicle has to speed up with maximum acceleration. Otherwise, the vehicle has to slow down with maximum deceleration. This is used to calculate the earliest entering time (EET) for the vehicle.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397">More...</a><br /></td></tr>
<tr class="separator:a98775d8dc582750131d1a7daff140397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d4f24941809d897f4f2bd27d16a41e0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0">calculate_v_hat</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double max_speed, const double departure_speed, const double delta_x, const double delta_x_prime, const double delta_x_zegond) const</td></tr>
<tr class="memdesc:a8d4f24941809d897f4f2bd27d16a41e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods of a vehicle trajectory that is calculated to estimate the vehicle's earliest entering time (EET).  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0">More...</a><br /></td></tr>
<tr class="separator:a8d4f24941809d897f4f2bd27d16a41e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c75b9f5697f17b55e8ee1749370ce85"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85">calculate_acceleration_time</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double v_hat, const double departure_speed, const double delta_x, const double delta_x_zegond) const</td></tr>
<tr class="memdesc:a9c75b9f5697f17b55e8ee1749370ce85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle. Will return 0 if there is no acceleration period.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85">More...</a><br /></td></tr>
<tr class="separator:a9c75b9f5697f17b55e8ee1749370ce85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b376d76daf797d450e98eee7773ba4a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a">calculate_deceleration_time</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double v_hat, const double departure_speed, const double delta_x, const double delta_x_zegond) const</td></tr>
<tr class="memdesc:a5b376d76daf797d450e98eee7773ba4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to calculate time interval necessary for deceleration from v_hat to departure speed. Will return 0 if there is no deceleration period.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a">More...</a><br /></td></tr>
<tr class="separator:a5b376d76daf797d450e98eee7773ba4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af28d893b32779b4c75ab82a38f640169"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169">calculate_cruising_time</a> (const double v_hat, const double delta_x, const double delta_x_prime) const</td></tr>
<tr class="memdesc:af28d893b32779b4c75ab82a38f640169"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) greater than current vehicle speed. Will return 0 if there is no cruising period.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169">More...</a><br /></td></tr>
<tr class="separator:af28d893b32779b4c75ab82a38f640169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b1ad1b03c5a472d08448ddaaae63369"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369">calculate_min_headway</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh, const double speed) const</td></tr>
<tr class="memdesc:a6b1ad1b03c5a472d08448ddaaae63369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the minimum safety time headway required by the vehicle at a given speed.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369">More...</a><br /></td></tr>
<tr class="separator:a6b1ad1b03c5a472d08448ddaaae63369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cce3f6e4da6ae1804dfd6a49305baf2"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2">estimate_clearance_time</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh) const</td></tr>
<tr class="memdesc:a1cce3f6e4da6ae1804dfd6a49305baf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate clearance time of a vehicle given it's current speed. <br  />
  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2">More...</a><br /></td></tr>
<tr class="separator:a1cce3f6e4da6ae1804dfd6a49305baf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed159065f9086c0c9e8b7c7476f3e7aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa">find_movement_state_for_lane</a> (const <a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> &amp;entry_lane_info) const</td></tr>
<tr class="memdesc:aed159065f9086c0c9e8b7c7476f3e7aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">find the movement state info from the modified spat for vehicles from a given entry lane. Note: The <a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">signalized_vehicle_scheduler</a> is only capable of understanding intersection where all connection lanes from a single entry lane share a signal_group_id. Therefore, vehicles from an entry lane with different directions at the intersection box shall be able to receive protected green at the same time.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa">More...</a><br /></td></tr>
<tr class="separator:aed159065f9086c0c9e8b7c7476f3e7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa17cd405d5cda86d877060b915b9aa32"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">spat_ptr</a></td></tr>
<tr class="memdesc:aa17cd405d5cda86d877060b915b9aa32"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shared pointer to the modified_spat.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">More...</a><br /></td></tr>
<tr class="separator:aa17cd405d5cda86d877060b915b9aa32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed5f596d0160b7fc2941f8f003293f50"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">initial_green_buffer</a></td></tr>
<tr class="memdesc:aed5f596d0160b7fc2941f8f003293f50"><td class="mdescLeft">&#160;</td><td class="mdescRight">The configurable time interval at the beginning of a green phase in milliseconds that is considered for estimating vehicles' entering times. The earliest possible entering time during a phase is set to the beginning of the green phase plus the initial_green_buffer.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">More...</a><br /></td></tr>
<tr class="separator:aed5f596d0160b7fc2941f8f003293f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af23ea3f8079aedda1f3e36203d0bc0c9"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">final_green_buffer</a></td></tr>
<tr class="memdesc:af23ea3f8079aedda1f3e36203d0bc0c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The configurable time interval at the end of a green phase in milliseconds that is considered for estimating vehicles' entering times. The latest possible entering time during a phase is set to the end of the green phase minus the final_green_buffer.  <a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">More...</a><br /></td></tr>
<tr class="separator:af23ea3f8079aedda1f3e36203d0bc0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html">streets_vehicle_scheduler::vehicle_scheduler</a></td></tr>
<tr class="memitem:a85947f43b293504a108619374c0c0dae inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a85947f43b293504a108619374c0c0dae">estimate_vehicles_at_common_time</a> (std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles, const u_int64_t timestamp) const</td></tr>
<tr class="memdesc:a85947f43b293504a108619374c0c0dae inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to estimate all vehicle's speed and location at a common future time. The time needs to be time since epoch in milliseconds. To predict vehicle location and speed at future time, current kinematic information is used including speed and current acceleration.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a85947f43b293504a108619374c0c0dae">More...</a><br /></td></tr>
<tr class="separator:a85947f43b293504a108619374c0c0dae inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8916add714bef70d8f48efc0ccfca7b inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b">get_entry_lanelet_info</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh) const</td></tr>
<tr class="memdesc:af8916add714bef70d8f48efc0ccfca7b inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to get entry lane OAILanelet_info from intersection information given a vehicle.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b">More...</a><br /></td></tr>
<tr class="separator:af8916add714bef70d8f48efc0ccfca7b inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c80eb87e5a9cabaad660544003663c inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">get_link_lanelet_info</a> (const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;veh) const</td></tr>
<tr class="memdesc:af2c80eb87e5a9cabaad660544003663c inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to get link lane OAILanelet_info from intersection information given a vehicle.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">More...</a><br /></td></tr>
<tr class="separator:af2c80eb87e5a9cabaad660544003663c inherit pro_methods_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classstreets__vehicle__scheduler_1_1vehicle__scheduler')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html">streets_vehicle_scheduler::vehicle_scheduler</a></td></tr>
<tr class="memitem:a5fa37276e5ccb41e38cbef573e830e8e inherit pro_attribs_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">intersection_info</a></td></tr>
<tr class="memdesc:a5fa37276e5ccb41e38cbef573e830e8e inherit pro_attribs_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared pointer to intersection information required for scheduling.  <a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">More...</a><br /></td></tr>
<tr class="separator:a5fa37276e5ccb41e38cbef573e830e8e inherit pro_attribs_classstreets__vehicle__scheduler_1_1vehicle__scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00017">17</a> of file <a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5549c21cf0c7d99ad6ed41192f319dc" name="ad5549c21cf0c7d99ad6ed41192f319dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5549c21cf0c7d99ad6ed41192f319dc">&#9670;&nbsp;</a></span>signalized_vehicle_scheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_vehicle_scheduler::signalized_vehicle_scheduler::signalized_vehicle_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new signalized vehicle scheduler object. </p>

</div>
</div>
<a id="a253b363db5dde03d2d3ad5565d900260" name="a253b363db5dde03d2d3ad5565d900260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a253b363db5dde03d2d3ad5565d900260">&#9670;&nbsp;</a></span>~signalized_vehicle_scheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_vehicle_scheduler::signalized_vehicle_scheduler::~signalized_vehicle_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the signalized vehicle scheduler object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9c75b9f5697f17b55e8ee1749370ce85" name="a9c75b9f5697f17b55e8ee1749370ce85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c75b9f5697f17b55e8ee1749370ce85">&#9670;&nbsp;</a></span>calculate_acceleration_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_acceleration_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>v_hat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>departure_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x_zegond</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle. Will return 0 if there is no acceleration period. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate the joint speed. </td></tr>
    <tr><td class="paramname">v_hat</td><td>joint speed between the acceleration and deceleration periods. </td></tr>
    <tr><td class="paramname">departure_speed</td><td>departure speed = speed limit of the vehicle's link lane. </td></tr>
    <tr><td class="paramname">delta_x</td><td>distance between the vehicle and the stop bar at its entry lane </td></tr>
    <tr><td class="paramname">delta_x_zegond</td><td>distance required to speed up (slow down) to departure speed with maximum acceleration (maximum deceleration). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double acceleration time interval in seconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00334">334</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  334</span>                                                                                                                                                                                                                  {</div>
<div class="line"><span class="lineno">  335</span>        <span class="keywordtype">double</span> t_accel = 0.0;</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">if</span> (delta_x &gt;= delta_x_zegond || departure_speed &gt;= veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>){</div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordflow">if</span> (v_hat &gt;= veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) {</div>
<div class="line"><span class="lineno">  338</span>                t_accel = (v_hat - veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) / veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>;</div>
<div class="line"><span class="lineno">  339</span>            }</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  341</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Negative acceleration time interval is calculated for vehicle {0}. The acceleration time interval is set to 0.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>);</div>
<div class="line"><span class="lineno">  342</span>            }</div>
<div class="line"><span class="lineno">  343</span>        }</div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">return</span> t_accel;</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a026375b9e6ffc8f8c8aee72465f352dc"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">streets_vehicles::vehicle::_cur_speed</a></div><div class="ttdeci">double _cur_speed</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00075">vehicle.h:75</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a1180998ca4eeb7d695d135a1e4a75424"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">streets_vehicles::vehicle::_accel_max</a></div><div class="ttdeci">double _accel_max</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00045">vehicle.h:45</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a470605f661a8f625329ebbb10888e2b8"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">streets_vehicles::vehicle::_id</a></div><div class="ttdeci">std::string _id</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00037">vehicle.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00045">streets_vehicles::vehicle::_accel_max</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, and <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a9c75b9f5697f17b55e8ee1749370ce85_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a9c75b9f5697f17b55e8ee1749370ce85_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a9c75b9f5697f17b55e8ee1749370ce85_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a9c75b9f5697f17b55e8ee1749370ce85_icgraph">
<area shape="rect" title="Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle...." alt="" coords="1000,5,1196,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="af28d893b32779b4c75ab82a38f640169" name="af28d893b32779b4c75ab82a38f640169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af28d893b32779b4c75ab82a38f640169">&#9670;&nbsp;</a></span>calculate_cruising_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_cruising_time </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>v_hat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x_prime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) greater than current vehicle speed. Will return 0 if there is no cruising period. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v_hat</td><td>cruising speed\joint speed between the acceleration and deceleration periods. Usually lane speed limit, in m/s. </td></tr>
    <tr><td class="paramname">delta_x</td><td>distance between the vehicle and the stop bar at its entry lane </td></tr>
    <tr><td class="paramname">delta_x_prime</td><td>distance required to speed up to lane speed limit with maximum acceleration and then decelerate to departure speed with maximum deceleration. The difference between the distance to the stop bar and this distance is the part of the trajectory for which the vehicle can cruise at v_hat. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double cruising time interval in seconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00370">370</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  370</span>                                                                                                                                           {</div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">if</span> (delta_x &gt; delta_x_prime) {</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">return</span> (delta_x - delta_x_prime) / v_hat;</div>
<div class="line"><span class="lineno">  373</span>        }</div>
<div class="line"><span class="lineno">  374</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><span class="lineno">  375</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_af28d893b32779b4c75ab82a38f640169_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_af28d893b32779b4c75ab82a38f640169_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_af28d893b32779b4c75ab82a38f640169_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_af28d893b32779b4c75ab82a38f640169_icgraph">
<area shape="rect" title="Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea..." alt="" coords="1000,5,1196,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a5b376d76daf797d450e98eee7773ba4a" name="a5b376d76daf797d450e98eee7773ba4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b376d76daf797d450e98eee7773ba4a">&#9670;&nbsp;</a></span>calculate_deceleration_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_deceleration_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>v_hat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>departure_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x_zegond</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to calculate time interval necessary for deceleration from v_hat to departure speed. Will return 0 if there is no deceleration period. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate trajectory. </td></tr>
    <tr><td class="paramname">v_hat</td><td>joint speed between the acceleration and deceleration periods. </td></tr>
    <tr><td class="paramname">departure_speed</td><td>departure speed = speed limit of the vehicle's link lane. </td></tr>
    <tr><td class="paramname">delta_x</td><td>distance between the vehicle and the stop bar at its entry lane </td></tr>
    <tr><td class="paramname">delta_x_zegond</td><td>distance required to speed up (slow down) to departure speed with maximum acceleration (maximum deceleration). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double deceleration time interval in seconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00348">348</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  348</span>                                                                                                                                                                                                                  {</div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordtype">double</span> t_decel = 0.0;</div>
<div class="line"><span class="lineno">  350</span>        <span class="keywordflow">if</span> (delta_x &lt; delta_x_zegond &amp;&amp; departure_speed &lt; veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) {</div>
<div class="line"><span class="lineno">  351</span>            <span class="keywordflow">if</span> (v_hat &lt;= veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) {</div>
<div class="line"><span class="lineno">  352</span>                t_decel = (v_hat - veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) / veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a>;</div>
<div class="line"><span class="lineno">  353</span>            }</div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  355</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Negative deceleration time interval is calculated for vehicle {0}. The deceleration time interval is set to 0.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>);</div>
<div class="line"><span class="lineno">  356</span>            }</div>
<div class="line"><span class="lineno">  357</span>        }</div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (delta_x &gt;= delta_x_zegond) {</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordflow">if</span> (v_hat &gt;= departure_speed) {</div>
<div class="line"><span class="lineno">  360</span>                t_decel = (departure_speed - v_hat) / veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a>;</div>
<div class="line"><span class="lineno">  361</span>            }</div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  363</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Negative deceleration time interval is calculated for vehicle {0}. The deceleration time interval is set to 0.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>);</div>
<div class="line"><span class="lineno">  364</span>            }</div>
<div class="line"><span class="lineno">  365</span>        }</div>
<div class="line"><span class="lineno">  366</span>        <span class="keywordflow">return</span> t_decel;</div>
<div class="line"><span class="lineno">  367</span>    }</div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a253341595deb3473620116dcf63d9927"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">streets_vehicles::vehicle::_decel_max</a></div><div class="ttdeci">double _decel_max</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00047">vehicle.h:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, <a class="el" href="vehicle_8h_source.html#l00047">streets_vehicles::vehicle::_decel_max</a>, and <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a5b376d76daf797d450e98eee7773ba4a_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a5b376d76daf797d450e98eee7773ba4a_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a5b376d76daf797d450e98eee7773ba4a_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a5b376d76daf797d450e98eee7773ba4a_icgraph">
<area shape="rect" title="Method to calculate time interval necessary for deceleration from v_hat to departure speed...." alt="" coords="1000,5,1196,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a925165d32ec5e00e9e2992df9337010d" name="a925165d32ec5e00e9e2992df9337010d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925165d32ec5e00e9e2992df9337010d">&#9670;&nbsp;</a></span>calculate_distance_accel_and_decel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_distance_accel_and_decel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>max_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>departure_speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the distance required to speed up to lane speed limit with maximum acceleration and then decelerate to departure speed with maximum deceleration. This is used to calculate the earliest entering time (EET) for the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate distance. </td></tr>
    <tr><td class="paramname">max_speed</td><td>speed limit of the vehicle's entry lane. </td></tr>
    <tr><td class="paramname">departure_speed</td><td>departure speed = speed limit of the vehicle's link lane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double distance in meters </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00294">294</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  294</span>                                                                                                                                                                           {</div>
<div class="line"><span class="lineno">  295</span>        <span class="comment">// calculate delta x prime</span></div>
<div class="line"><span class="lineno">  296</span>        <span class="keywordtype">double</span> delta_x_prime = ((pow(max_speed, 2) - pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2)) / (2 * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>)) + ((pow(departure_speed, 2) - pow(max_speed, 2)) / (2 * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a>));</div>
<div class="line"><span class="lineno">  297</span>        <span class="keywordflow">return</span>  delta_x_prime;</div>
<div class="line"><span class="lineno">  298</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00045">streets_vehicles::vehicle::_accel_max</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, and <a class="el" href="vehicle_8h_source.html#l00047">streets_vehicles::vehicle::_decel_max</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a925165d32ec5e00e9e2992df9337010d_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a925165d32ec5e00e9e2992df9337010d_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a925165d32ec5e00e9e2992df9337010d_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a925165d32ec5e00e9e2992df9337010d_icgraph">
<area shape="rect" title="Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de..." alt="" coords="1000,5,1240,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a98775d8dc582750131d1a7daff140397" name="a98775d8dc582750131d1a7daff140397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98775d8dc582750131d1a7daff140397">&#9670;&nbsp;</a></span>calculate_distance_accel_or_decel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_distance_accel_or_decel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>departure_speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration (maximum deceleration). If the departure speed is greater than the vehicle's current speed, the vehicle has to speed up with maximum acceleration. Otherwise, the vehicle has to slow down with maximum deceleration. This is used to calculate the earliest entering time (EET) for the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate distance. </td></tr>
    <tr><td class="paramname">departure_speed</td><td>departure speed = speed limit of the vehicle's link lane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double distance in meters </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00301">301</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                                                                                                   {</div>
<div class="line"><span class="lineno">  302</span>        <span class="comment">// calculate delta x zegond</span></div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordtype">double</span> delta_x_zegond;</div>
<div class="line"><span class="lineno">  304</span>        <span class="keywordflow">if</span> (veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a> &lt;= departure_speed) {</div>
<div class="line"><span class="lineno">  305</span>            delta_x_zegond = (pow(departure_speed, 2) - pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2)) / (2 * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>);</div>
<div class="line"><span class="lineno">  306</span>        }</div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  308</span>            delta_x_zegond = (pow(departure_speed, 2) - pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2)) / (2 * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a>);</div>
<div class="line"><span class="lineno">  309</span>        }</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">return</span>  delta_x_zegond;</div>
<div class="line"><span class="lineno">  311</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00045">streets_vehicles::vehicle::_accel_max</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, and <a class="el" href="vehicle_8h_source.html#l00047">streets_vehicles::vehicle::_decel_max</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a98775d8dc582750131d1a7daff140397_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a98775d8dc582750131d1a7daff140397_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a98775d8dc582750131d1a7daff140397_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a98775d8dc582750131d1a7daff140397_icgraph">
<area shape="rect" title="Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ..." alt="" coords="1000,5,1231,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a616f990b94f85cbe7c8ac5ecc215d41c" name="a616f990b94f85cbe7c8ac5ecc215d41c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616f990b94f85cbe7c8ac5ecc215d41c">&#9670;&nbsp;</a></span>calculate_earliest_entering_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_earliest_entering_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an entering vehicle (EV). Does not consider any other vehicles. Limiting factors are the vehicles current kinematic information, lane speed limits and vehicle acceleration and deceleration limits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to estimate EET. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint64_t time in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">247</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>                                                                                                                    {</div>
<div class="line"><span class="lineno">  248</span>        </div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">if</span> ( veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a54872859b3a12ee290b98e0eedd2864f">_cur_state</a> == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a>) {</div>
<div class="line"><span class="lineno">  250</span>            <span class="comment">// Distance to stop bar </span></div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordtype">double</span> delta_x = veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a21a6378ca2401ac4bc9ca6f6364833fb">_cur_distance</a>;</div>
<div class="line"><span class="lineno">  252</span>            <span class="comment">// Get Entry Lane</span></div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> entry_lane =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b">get_entry_lanelet_info</a>( veh );</div>
<div class="line"><span class="lineno">  254</span>            <span class="comment">// Get Link Lane</span></div>
<div class="line"><span class="lineno">  255</span>            <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> link_lane =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">get_link_lanelet_info</a>( veh );</div>
<div class="line"><span class="lineno">  256</span>            <span class="comment">// Distance necessary to get to max speed and decelerate with decel_max to departure speed</span></div>
<div class="line"><span class="lineno">  257</span>            <span class="keywordtype">double</span> delta_x_prime =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d">calculate_distance_accel_and_decel</a>( veh, entry_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>(), link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>() );</div>
<div class="line"><span class="lineno">  258</span>            <span class="comment">// Distance necessary to get to the departure speed</span></div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordtype">double</span> delta_x_zegond =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397">calculate_distance_accel_or_decel</a>( veh, link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>() );</div>
<div class="line"><span class="lineno">  260</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Delta X = {0}, Delta X Prime = {1}, Delta X Zegond = {2}.&quot;</span>, delta_x, delta_x_prime, delta_x_zegond);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>            <span class="comment">// Calculate v_hat</span></div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordtype">double</span> v_hat = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0">calculate_v_hat</a>(veh, entry_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>(), link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>(), delta_x, delta_x_prime, delta_x_zegond);</div>
<div class="line"><span class="lineno">  264</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;V hat = {0}.&quot;</span>, v_hat);</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>            <span class="comment">// calculate planned acceleration time interval</span></div>
<div class="line"><span class="lineno">  267</span>            <span class="keywordtype">double</span> t_accel = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85">calculate_acceleration_time</a>(veh, v_hat, link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>(), delta_x, delta_x_zegond);</div>
<div class="line"><span class="lineno">  268</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;T accel = {0}.&quot;</span>,t_accel);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>            <span class="comment">// calculate planned deceleration time interval</span></div>
<div class="line"><span class="lineno">  271</span>            <span class="keywordtype">double</span> t_decel = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a">calculate_deceleration_time</a>(veh, v_hat, link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>(), delta_x, delta_x_zegond);</div>
<div class="line"><span class="lineno">  272</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;T decel = {0}.&quot;</span>,t_decel);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>            <span class="comment">// Calculate planned cruising time interval</span></div>
<div class="line"><span class="lineno">  275</span>            <span class="keywordtype">double</span> t_cruising = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169">calculate_cruising_time</a>(v_hat, delta_x, delta_x_prime);</div>
<div class="line"><span class="lineno">  276</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;T cruising = {0}.&quot;</span>,t_cruising);</div>
<div class="line"><span class="lineno">  277</span>            </div>
<div class="line"><span class="lineno">  278</span>            <span class="comment">// calculate earliest entering time to stop bar</span></div>
<div class="line"><span class="lineno">  279</span>            <span class="keywordtype">double</span> eet = t_accel + t_cruising + t_decel;</div>
<div class="line"><span class="lineno">  280</span>            <span class="keywordflow">if</span> (eet &lt;= 0) {</div>
<div class="line"><span class="lineno">  281</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;The estimated eet for vehicle {0} has a negative value = {1}!&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, eet);</div>
<div class="line"><span class="lineno">  282</span>            }</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(ceil(eet * 1000.0)) + veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a278b51810d25efcfcfb91bb13e43e6f3">_cur_time</a>;</div>
<div class="line"><span class="lineno">  284</span>        }</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  286</span>        {</div>
<div class="line"><span class="lineno">  287</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Cannot estimate the earliest entering time for vehicle {0} which is not an EV!&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>);</div>
<div class="line"><span class="lineno">  288</span>            <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;Trying to calculate earliest entering time (EET) for a vehicle that is not an EV!&quot;</span>);</div>
<div class="line"><span class="lineno">  289</span>        }</div>
<div class="line"><span class="lineno">  290</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  291</span>    }</div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a></div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8h_source.html#l00031">OAILanelet_info.h:31</a></div></div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_a9ed2860829d5aeba3062f26e78afcbdc"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">OpenAPI::OAILanelet_info::getSpeedLimit</a></div><div class="ttdeci">double getSpeedLimit() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00137">OAILanelet_info.cpp:137</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a5b376d76daf797d450e98eee7773ba4a"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_deceleration_time</a></div><div class="ttdeci">double calculate_deceleration_time(const streets_vehicles::vehicle &amp;veh, const double v_hat, const double departure_speed, const double delta_x, const double delta_x_zegond) const</div><div class="ttdoc">Method to calculate time interval necessary for deceleration from v_hat to departure speed....</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00348">signalized_vehicle_scheduler.cpp:348</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a8d4f24941809d897f4f2bd27d16a41e0"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_v_hat</a></div><div class="ttdeci">double calculate_v_hat(const streets_vehicles::vehicle &amp;veh, const double max_speed, const double departure_speed, const double delta_x, const double delta_x_prime, const double delta_x_zegond) const</div><div class="ttdoc">Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00314">signalized_vehicle_scheduler.cpp:314</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a925165d32ec5e00e9e2992df9337010d"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_distance_accel_and_decel</a></div><div class="ttdeci">double calculate_distance_accel_and_decel(const streets_vehicles::vehicle &amp;veh, const double max_speed, const double departure_speed) const</div><div class="ttdoc">Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00294">signalized_vehicle_scheduler.cpp:294</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a98775d8dc582750131d1a7daff140397"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_distance_accel_or_decel</a></div><div class="ttdeci">double calculate_distance_accel_or_decel(const streets_vehicles::vehicle &amp;veh, const double departure_speed) const</div><div class="ttdoc">Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00301">signalized_vehicle_scheduler.cpp:301</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a9c75b9f5697f17b55e8ee1749370ce85"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_acceleration_time</a></div><div class="ttdeci">double calculate_acceleration_time(const streets_vehicles::vehicle &amp;veh, const double v_hat, const double departure_speed, const double delta_x, const double delta_x_zegond) const</div><div class="ttdoc">Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle....</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00334">signalized_vehicle_scheduler.cpp:334</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_af28d893b32779b4c75ab82a38f640169"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_cruising_time</a></div><div class="ttdeci">double calculate_cruising_time(const double v_hat, const double delta_x, const double delta_x_prime) const</div><div class="ttdoc">Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00370">signalized_vehicle_scheduler.cpp:370</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1vehicle__scheduler_html_af2c80eb87e5a9cabaad660544003663c"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">streets_vehicle_scheduler::vehicle_scheduler::get_link_lanelet_info</a></div><div class="ttdeci">OpenAPI::OAILanelet_info get_link_lanelet_info(const streets_vehicles::vehicle &amp;veh) const</div><div class="ttdoc">Helper method to get link lane OAILanelet_info from intersection information given a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__scheduler_8cpp_source.html#l00031">vehicle_scheduler.cpp:31</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1vehicle__scheduler_html_af8916add714bef70d8f48efc0ccfca7b"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b">streets_vehicle_scheduler::vehicle_scheduler::get_entry_lanelet_info</a></div><div class="ttdeci">OpenAPI::OAILanelet_info get_entry_lanelet_info(const streets_vehicles::vehicle &amp;veh) const</div><div class="ttdoc">Helper method to get entry lane OAILanelet_info from intersection information given a vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__scheduler_8cpp_source.html#l00013">vehicle_scheduler.cpp:13</a></div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a></div><div class="ttdeci">@ EV</div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a21a6378ca2401ac4bc9ca6f6364833fb"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a21a6378ca2401ac4bc9ca6f6364833fb">streets_vehicles::vehicle::_cur_distance</a></div><div class="ttdeci">double _cur_distance</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00073">vehicle.h:73</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a278b51810d25efcfcfb91bb13e43e6f3"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a278b51810d25efcfcfb91bb13e43e6f3">streets_vehicles::vehicle::_cur_time</a></div><div class="ttdeci">u_int64_t _cur_time</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00071">vehicle.h:71</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a54872859b3a12ee290b98e0eedd2864f"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a54872859b3a12ee290b98e0eedd2864f">streets_vehicles::vehicle::_cur_state</a></div><div class="ttdeci">vehicle_state _cur_state</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00079">vehicle.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00079">streets_vehicles::vehicle::_cur_state</a>, <a class="el" href="vehicle_8h_source.html#l00071">streets_vehicles::vehicle::_cur_time</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00334">calculate_acceleration_time()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00370">calculate_cruising_time()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00348">calculate_deceleration_time()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00294">calculate_distance_accel_and_decel()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00301">calculate_distance_accel_or_decel()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00314">calculate_v_hat()</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00013">streets_vehicle_scheduler::vehicle_scheduler::get_entry_lanelet_info()</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00031">streets_vehicle_scheduler::vehicle_scheduler::get_link_lanelet_info()</a>, and <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00137">OpenAPI::OAILanelet_info::getSpeedLimit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_cgraph">
<area shape="rect" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="5,325,220,381"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85" title="Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle...." alt="" coords="290,5,486,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169" title="Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea..." alt="" coords="290,85,486,141"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a" title="Method to calculate time interval necessary for deceleration from v_hat to departure speed...." alt="" coords="290,165,486,221"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d" title="Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de..." alt="" coords="268,245,508,301"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397" title="Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ..." alt="" coords="273,325,503,381"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0" title="Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ..." alt="" coords="290,405,486,461"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b" title="Helper method to get entry lane OAILanelet_info from intersection information given a vehicle." alt="" coords="301,565,475,621"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="301,485,475,541"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="315,645,461,686"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="556,498,703,539"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="593,569,665,596"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a616f990b94f85cbe7c8ac5ecc215d41c_icgraph">
<area shape="rect" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a6b1ad1b03c5a472d08448ddaaae63369" name="a6b1ad1b03c5a472d08448ddaaae63369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b1ad1b03c5a472d08448ddaaae63369">&#9670;&nbsp;</a></span>calculate_min_headway()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_min_headway </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the minimum safety time headway required by the vehicle at a given speed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate minimum safety time headway. </td></tr>
    <tr><td class="paramname">speed</td><td>the assumed speed at which to calculate minimum safety time headway. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint64_t minimum safety time headway in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00378">378</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>                                                                                                                             {</div>
<div class="line"><span class="lineno">  379</span>        </div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(ceil( 1000*(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a5c6b46bfbbb31785e7a07e96bc18ae76">_reaction_time</a> + ((veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a8df55ea8c6a305540ae4601f5c770843">_length</a> + veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a3a38a205ab41c1912245c3d2a3b8c907">_min_gap</a>)/speed)) ));</div>
<div class="line"><span class="lineno">  381</span>    } </div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a3a38a205ab41c1912245c3d2a3b8c907"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a3a38a205ab41c1912245c3d2a3b8c907">streets_vehicles::vehicle::_min_gap</a></div><div class="ttdeci">double _min_gap</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00041">vehicle.h:41</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a5c6b46bfbbb31785e7a07e96bc18ae76"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a5c6b46bfbbb31785e7a07e96bc18ae76">streets_vehicles::vehicle::_reaction_time</a></div><div class="ttdeci">double _reaction_time</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00043">vehicle.h:43</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a8df55ea8c6a305540ae4601f5c770843"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a8df55ea8c6a305540ae4601f5c770843">streets_vehicles::vehicle::_length</a></div><div class="ttdeci">double _length</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00039">vehicle.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00039">streets_vehicles::vehicle::_length</a>, <a class="el" href="vehicle_8h_source.html#l00041">streets_vehicles::vehicle::_min_gap</a>, and <a class="el" href="vehicle_8h_source.html#l00043">streets_vehicles::vehicle::_reaction_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a6b1ad1b03c5a472d08448ddaaae63369_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a6b1ad1b03c5a472d08448ddaaae63369_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a6b1ad1b03c5a472d08448ddaaae63369_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a6b1ad1b03c5a472d08448ddaaae63369_icgraph">
<area shape="rect" title="Calculate the minimum safety time headway required by the vehicle at a given speed." alt="" coords="737,5,933,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a8d4f24941809d897f4f2bd27d16a41e0" name="a8d4f24941809d897f4f2bd27d16a41e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d4f24941809d897f4f2bd27d16a41e0">&#9670;&nbsp;</a></span>calculate_v_hat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_v_hat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>max_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>departure_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x_prime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_x_zegond</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods of a vehicle trajectory that is calculated to estimate the vehicle's earliest entering time (EET). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to calculate the joint speed. </td></tr>
    <tr><td class="paramname">max_speed</td><td>speed limit of the vehicle's entry lane. </td></tr>
    <tr><td class="paramname">departure_speed</td><td>departure speed = speed limit of the vehicle's link lane. </td></tr>
    <tr><td class="paramname">delta_x</td><td>distance between the vehicle and the stop bar at its entry lane </td></tr>
    <tr><td class="paramname">delta_x_prime</td><td>distance required to speed up to lane speed limit with maximum acceleration and then decelerate to departure speed with maximum deceleration. </td></tr>
    <tr><td class="paramname">delta_x_zegond</td><td>distance required to speed up (slow down) to departure speed with maximum acceleration (maximum deceleration). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double v_hat in m/s </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00314">314</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>                                                                                                                                                                                                                                        {</div>
<div class="line"><span class="lineno">  315</span>        <span class="keywordflow">if</span> (delta_x &gt;= delta_x_prime) {</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordflow">return</span> max_speed;</div>
<div class="line"><span class="lineno">  317</span>        }</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (delta_x_prime &gt; delta_x &amp;&amp; delta_x &gt;= delta_x_zegond) {</div>
<div class="line"><span class="lineno">  319</span>            <span class="keywordtype">double</span> numerator = (2 * delta_x * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a> * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>) + (veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a> * pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2)) - (veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a> * pow(departure_speed, 2));</div>
<div class="line"><span class="lineno">  320</span>            <span class="keywordtype">double</span> denominator = veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a> - veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>;</div>
<div class="line"><span class="lineno">  321</span>            <span class="keywordflow">return</span> sqrt(numerator/denominator);</div>
<div class="line"><span class="lineno">  322</span>        }</div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">if</span> (veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a> &lt;= departure_speed) {</div>
<div class="line"><span class="lineno">  325</span>                <span class="keywordflow">return</span> sqrt((2 * delta_x * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a1180998ca4eeb7d695d135a1e4a75424">_accel_max</a>) + pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2));</div>
<div class="line"><span class="lineno">  326</span>            }</div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">return</span> sqrt((2 * delta_x * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a253341595deb3473620116dcf63d9927">_decel_max</a>) + pow(veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>, 2));</div>
<div class="line"><span class="lineno">  329</span>            }</div>
<div class="line"><span class="lineno">  330</span>        }</div>
<div class="line"><span class="lineno">  331</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00045">streets_vehicles::vehicle::_accel_max</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, and <a class="el" href="vehicle_8h_source.html#l00047">streets_vehicles::vehicle::_decel_max</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a8d4f24941809d897f4f2bd27d16a41e0_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a8d4f24941809d897f4f2bd27d16a41e0_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a8d4f24941809d897f4f2bd27d16a41e0_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a8d4f24941809d897f4f2bd27d16a41e0_icgraph">
<area shape="rect" title="Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ..." alt="" coords="1000,5,1196,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="737,5,952,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a1cce3f6e4da6ae1804dfd6a49305baf2" name="a1cce3f6e4da6ae1804dfd6a49305baf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cce3f6e4da6ae1804dfd6a49305baf2">&#9670;&nbsp;</a></span>estimate_clearance_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::estimate_clearance_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate clearance time of a vehicle given it's current speed. <br  />
 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to estimate clearance time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint64_t clearance time in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00384">384</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  384</span>                                                                                                             {</div>
<div class="line"><span class="lineno">  385</span>        <span class="comment">// Get Link Lane</span></div>
<div class="line"><span class="lineno">  386</span>        <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> link_lane =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">get_link_lanelet_info</a>( veh );</div>
<div class="line"><span class="lineno">  387</span>        <span class="keywordflow">if</span> ( veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a54872859b3a12ee290b98e0eedd2864f">_cur_state</a> == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::vehicle_state::DV</a> ) {</div>
<div class="line"><span class="lineno">  388</span>            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>( ceil(1000 * veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a21a6378ca2401ac4bc9ca6f6364833fb">_cur_distance</a> / veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a026375b9e6ffc8f8c8aee72465f352dc">_cur_speed</a>) );</div>
<div class="line"><span class="lineno">  389</span>        }</div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  391</span>            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>( ceil(1000 * link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad">getLength</a>() / link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>()) );</div>
<div class="line"><span class="lineno">  392</span>        }</div>
<div class="line"><span class="lineno">  393</span>    }</div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_abc1c4d5d24a2dafb175874ecad09cfad"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad">OpenAPI::OAILanelet_info::getLength</a></div><div class="ttdeci">double getLength() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00169">OAILanelet_info.cpp:169</a></div></div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::vehicle_state::DV</a></div><div class="ttdeci">@ DV</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00073">streets_vehicles::vehicle::_cur_distance</a>, <a class="el" href="vehicle_8h_source.html#l00075">streets_vehicles::vehicle::_cur_speed</a>, <a class="el" href="vehicle_8h_source.html#l00079">streets_vehicles::vehicle::_cur_state</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::DV</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00031">streets_vehicle_scheduler::vehicle_scheduler::get_link_lanelet_info()</a>, <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00169">OpenAPI::OAILanelet_info::getLength()</a>, and <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00137">OpenAPI::OAILanelet_info::getSpeedLimit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>, and <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00046">schedule_dvs()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_cgraph">
<area shape="rect" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="5,99,201,155"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="249,27,423,83"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad" title=" " alt="" coords="263,107,409,148"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="263,172,409,213"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="471,5,617,47"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="508,71,580,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a1cce3f6e4da6ae1804dfd6a49305baf2_icgraph">
<area shape="rect" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="737,47,933,103"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,9,689,65"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944" title="Estimate the intersection departure times (dt&#39;s) for all currently Departing Vehicle (DVs) based on k..." alt="" coords="249,85,445,141"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,45,201,101"/>
</map>
</div>

</div>
</div>
<a id="a4d00a1ab964b44569653d414280a3419" name="a4d00a1ab964b44569653d414280a3419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d00a1ab964b44569653d414280a3419">&#9670;&nbsp;</a></span>estimate_et()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::estimate_et </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">signalized_vehicle_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>preceding_veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">signalized_vehicle_schedule</a> &amp;&#160;</td>
          <td class="paramname"><em>sched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;&#160;</td>
          <td class="paramname"><em>move_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>schedule_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV's earliest entering time (EET), its preceding vehicle's estimated ET, and the modifed spat. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">veh</td><td>vehicle for which to estimate ET. </td></tr>
    <tr><td class="paramname">preceding_veh</td><td>shared pointer of the preceding vehicle of the subject vehicle (veh) </td></tr>
    <tr><td class="paramname">sched</td><td><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">signalized_intersection_schedule</a> to add EV scheduling information to. </td></tr>
    <tr><td class="paramname">move_state</td><td>movement state information that includes a list of current and pending phases. </td></tr>
    <tr><td class="paramname">schedule_timestamp</td><td>timestamp of the current schedule in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<p >estimate the earliest possible ET based on the current timestamp, the preceding vehicle's estimated ET, and the subject vehicle's minimum required safety time headway at tbe departure speed.</p>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">190</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                                                                                                                                                                                                                                                                            {</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>        <span class="comment">// Get link lanelet information for ev</span></div>
<div class="line"><span class="lineno">  193</span>        <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> link_lane = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">get_link_lanelet_info</a>( veh );</div>
<div class="line"><span class="lineno">  194</span>        SPDLOG_DEBUG( <span class="stringliteral">&quot;Link lanelet for vehicle {0} is {1}.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">getId</a>());</div>
<div class="line"><span class="lineno">  195</span>        <span class="comment">// Calculate EET for vehicle</span></div>
<div class="line"><span class="lineno">  196</span>        uint64_t eet = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c">calculate_earliest_entering_time</a>(veh);</div>
<div class="line"><span class="lineno">  197</span>        SPDLOG_DEBUG( <span class="stringliteral">&quot;EET for vehicle {0} is {1}.&quot;</span> ,veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, eet );</div>
<div class="line"><span class="lineno">  198</span>        <span class="comment">// Calculate min_headway</span></div>
<div class="line"><span class="lineno">  199</span>        uint64_t min_headway = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369">calculate_min_headway</a>( veh, link_lane.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc">getSpeedLimit</a>() );</div>
<div class="line"><span class="lineno">  200</span>        SPDLOG_DEBUG( <span class="stringliteral">&quot;min headway for vehicle {0} is {1}.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, min_headway );</div>
<div class="line"><span class="lineno">  204</span>        uint64_t first_available_et;</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">if</span> (preceding_veh == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  206</span>            first_available_et = schedule_timestamp;</div>
<div class="line"><span class="lineno">  207</span>        }</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  209</span>            first_available_et = std::max(schedule_timestamp, preceding_veh-&gt;et + min_headway);</div>
<div class="line"><span class="lineno">  210</span>        }</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>        <span class="comment">// Check the movement_event list one by one until successfully estimating the vehicle&#39;s entering time (ET).</span></div>
<div class="line"><span class="lineno">  213</span>        <span class="comment">// The assumption is that the movement_event list is sorted based on the movement_event timing.</span></div>
<div class="line"><span class="lineno">  214</span>        <span class="comment">// (example: the second phase&#39;s start time shall be equal to the first phase&#39;s min_end_time).</span></div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordtype">bool</span> is_successful = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  216</span>        uint64_t et;</div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;move_event : move_state.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>) {</div>
<div class="line"><span class="lineno">  218</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Moving to the next movement event from the list! start time without buffer = {0}, end time without buffer = {1}&quot;</span>, move_event.timing.get_epoch_start_time(), move_event.timing.get_epoch_min_end_time() );</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">if</span> (move_event.event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>) {</div>
<div class="line"><span class="lineno">  220</span>                et = std::max(first_available_et, std::max(eet, move_event.timing.get_epoch_start_time() + <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">initial_green_buffer</a>));</div>
<div class="line"><span class="lineno">  221</span>                <span class="keywordflow">if</span> ( et &lt; move_event.timing.get_epoch_min_end_time() - <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">final_green_buffer</a> ) {</div>
<div class="line"><span class="lineno">  222</span>                    SPDLOG_DEBUG( <span class="stringliteral">&quot;Successfully estimate an ET (within a green phase) for vehicle {0}. The estimated ET = {1}.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, et);</div>
<div class="line"><span class="lineno">  223</span>                    is_successful = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  224</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  225</span>                }</div>
<div class="line"><span class="lineno">  226</span>                SPDLOG_DEBUG( <span class="stringliteral">&quot;The estimated ET for vehicle {0} is later than the end of the phase. Estimated ET = {1}, end of the phase&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, et, move_event.timing.get_epoch_min_end_time() - <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">final_green_buffer</a> );</div>
<div class="line"><span class="lineno">  227</span>            }</div>
<div class="line"><span class="lineno">  228</span>        }</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>        <span class="comment">// TBD area</span></div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordflow">if</span> (!is_successful) {</div>
<div class="line"><span class="lineno">  232</span>            et = std::max(first_available_et, std::max(eet, move_state.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.back().timing.get_epoch_min_end_time() + <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">initial_green_buffer</a>));</div>
<div class="line"><span class="lineno">  233</span>            SPDLOG_DEBUG( <span class="stringliteral">&quot;Successfully estimate an ET (within TBD area) for vehicle {0}. The estimated ET = {1}.&quot;</span>, veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>, et);</div>
<div class="line"><span class="lineno">  234</span>        }</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>        <span class="comment">// Set schedule properties</span></div>
<div class="line"><span class="lineno">  237</span>        sched.v_id =  veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a470605f661a8f625329ebbb10888e2b8">_id</a>;</div>
<div class="line"><span class="lineno">  238</span>        sched.eet = eet;</div>
<div class="line"><span class="lineno">  239</span>        sched.et = et;</div>
<div class="line"><span class="lineno">  240</span>        sched.dt = sched.et + <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2">estimate_clearance_time</a>( veh );</div>
<div class="line"><span class="lineno">  241</span>        sched.entry_lane =  veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#a4ef0e2e811b0f5cb00f14b89a353c3b5">_entry_lane_id</a>;</div>
<div class="line"><span class="lineno">  242</span>        sched.link_id = veh.<a class="code hl_variable" href="structstreets__vehicles_1_1vehicle.html#aaa9cbe97b2343b3f14841c1ed2bc8e3d">_link_id</a>;</div>
<div class="line"><span class="lineno">  243</span>        sched.state = <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a>;</div>
<div class="line"><span class="lineno">  244</span>    }</div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_a489d1a475686159298697bccabd2bd52"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">OpenAPI::OAILanelet_info::getId</a></div><div class="ttdeci">qint32 getId() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00121">OAILanelet_info.cpp:121</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a1cce3f6e4da6ae1804dfd6a49305baf2"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2">streets_vehicle_scheduler::signalized_vehicle_scheduler::estimate_clearance_time</a></div><div class="ttdeci">uint64_t estimate_clearance_time(const streets_vehicles::vehicle &amp;veh) const</div><div class="ttdoc">Estimate clearance time of a vehicle given it's current speed.</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00384">signalized_vehicle_scheduler.cpp:384</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a616f990b94f85cbe7c8ac5ecc215d41c"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_earliest_entering_time</a></div><div class="ttdeci">uint64_t calculate_earliest_entering_time(const streets_vehicles::vehicle &amp;veh) const</div><div class="ttdoc">Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00247">signalized_vehicle_scheduler.cpp:247</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a6b1ad1b03c5a472d08448ddaaae63369"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369">streets_vehicle_scheduler::signalized_vehicle_scheduler::calculate_min_headway</a></div><div class="ttdeci">uint64_t calculate_min_headway(const streets_vehicles::vehicle &amp;veh, const double speed) const</div><div class="ttdoc">Calculate the minimum safety time headway required by the vehicle at a given speed.</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00378">signalized_vehicle_scheduler.cpp:378</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_aed5f596d0160b7fc2941f8f003293f50"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">streets_vehicle_scheduler::signalized_vehicle_scheduler::initial_green_buffer</a></div><div class="ttdeci">uint64_t initial_green_buffer</div><div class="ttdoc">The configurable time interval at the beginning of a green phase in milliseconds that is considered f...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8h_source.html#l00032">signalized_vehicle_scheduler.h:32</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_af23ea3f8079aedda1f3e36203d0bc0c9"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">streets_vehicle_scheduler::signalized_vehicle_scheduler::final_green_buffer</a></div><div class="ttdeci">uint64_t final_green_buffer</div><div class="ttdoc">The configurable time interval at the end of a green phase in milliseconds that is considered for est...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8h_source.html#l00039">signalized_vehicle_scheduler.h:39</a></div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a></div><div class="ttdeci">@ protected_movement_allowed</div><div class="ttdoc">Often called 'protected green' in US Driver Action: Proceed, tossing caution to the wind,...</div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_a087beaba691971b31df26e90bf4e81c4"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">signal_phase_and_timing::movement_state::state_time_speed</a></div><div class="ttdeci">std::list&lt; movement_event &gt; state_time_speed</div><div class="ttdoc">Consisting of sets of movement data with: SignalPhaseState TimeChangeDetails Advisory Speeds (optiona...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00034">movement_state.h:34</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_a4ef0e2e811b0f5cb00f14b89a353c3b5"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#a4ef0e2e811b0f5cb00f14b89a353c3b5">streets_vehicles::vehicle::_entry_lane_id</a></div><div class="ttdeci">int _entry_lane_id</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00051">vehicle.h:51</a></div></div>
<div class="ttc" id="astructstreets__vehicles_1_1vehicle_html_aaa9cbe97b2343b3f14841c1ed2bc8e3d"><div class="ttname"><a href="structstreets__vehicles_1_1vehicle.html#aaa9cbe97b2343b3f14841c1ed2bc8e3d">streets_vehicles::vehicle::_link_id</a></div><div class="ttdeci">int _link_id</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00055">vehicle.h:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle_8h_source.html#l00051">streets_vehicles::vehicle::_entry_lane_id</a>, <a class="el" href="vehicle_8h_source.html#l00037">streets_vehicles::vehicle::_id</a>, <a class="el" href="vehicle_8h_source.html#l00055">streets_vehicles::vehicle::_link_id</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00247">calculate_earliest_entering_time()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00378">calculate_min_headway()</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00041">streets_vehicle_scheduler::signalized_vehicle_schedule::dt</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00030">streets_vehicle_scheduler::signalized_vehicle_schedule::eet</a>, <a class="el" href="intersection__schedule_8h_source.html#l00032">streets_vehicle_scheduler::vehicle_schedule::entry_lane</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00384">estimate_clearance_time()</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00035">streets_vehicle_scheduler::signalized_vehicle_schedule::et</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00039">final_green_buffer</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00031">streets_vehicle_scheduler::vehicle_scheduler::get_link_lanelet_info()</a>, <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00121">OpenAPI::OAILanelet_info::getId()</a>, <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00137">OpenAPI::OAILanelet_info::getSpeedLimit()</a>, <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00032">initial_green_buffer</a>, <a class="el" href="intersection__schedule_8h_source.html#l00036">streets_vehicle_scheduler::vehicle_schedule::link_id</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00045">streets_vehicle_scheduler::signalized_vehicle_schedule::state</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, and <a class="el" href="intersection__schedule_8h_source.html#l00028">streets_vehicle_scheduler::vehicle_schedule::v_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00078">schedule_evs()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_cgraph">
<area shape="rect" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="5,656,201,712"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="249,365,464,421"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="800,573,947,614"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="545,565,719,621"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="559,697,705,738"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369" title="Calculate the minimum safety time headway required by the vehicle at a given speed." alt="" coords="259,827,455,883"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="259,747,455,803"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85" title="Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle...." alt="" coords="534,245,730,301"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169" title="Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea..." alt="" coords="534,325,730,381"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a" title="Method to calculate time interval necessary for deceleration from v_hat to departure speed...." alt="" coords="534,405,730,461"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d" title="Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de..." alt="" coords="512,5,752,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397" title="Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ..." alt="" coords="517,85,747,141"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0" title="Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ..." alt="" coords="534,165,730,221"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b" title="Helper method to get entry lane OAILanelet_info from intersection information given a vehicle." alt="" coords="545,485,719,541"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="837,511,909,537"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad" title=" " alt="" coords="559,762,705,803"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4d00a1ab964b44569653d414280a3419_icgraph">
<area shape="rect" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="493,5,689,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="aed159065f9086c0c9e8b7c7476f3e7aa" name="aed159065f9086c0c9e8b7c7476f3e7aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed159065f9086c0c9e8b7c7476f3e7aa">&#9670;&nbsp;</a></span>find_movement_state_for_lane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> streets_vehicle_scheduler::signalized_vehicle_scheduler::find_movement_state_for_lane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> &amp;&#160;</td>
          <td class="paramname"><em>entry_lane_info</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>find the movement state info from the modified spat for vehicles from a given entry lane. Note: The <a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">signalized_vehicle_scheduler</a> is only capable of understanding intersection where all connection lanes from a single entry lane share a signal_group_id. Therefore, vehicles from an entry lane with different directions at the intersection box shall be able to receive protected green at the same time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry_lane_info</td><td>entry lanelet lane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> movement stat object. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">if</td><td>two or more connection link lanelets from a single entry lane have different signal_group_id, then the design does not satisfy the requirement of the <a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">signalized_vehicle_scheduler</a> and thus, this method throws exception. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00147">147</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>                                                                                                                                                        {</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        <span class="comment">// check if all links connected to the entry lane have the same signal ids or not!</span></div>
<div class="line"><span class="lineno">  150</span>        uint8_t signal_group_id = 0;</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordtype">bool</span> first_link_visited = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  152</span>        <span class="keyword">auto</span> connection_lanelet_ids = entry_lane_info.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9">getConnectingLaneletIds</a>();</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;lane : <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">intersection_info</a>-&gt;getLinkLanelets() ) {</div>
<div class="line"><span class="lineno">  154</span>            <span class="comment">// check if the link lanelet&#39;s id (lane.getId()) is included in the list of connecting lanelet ids of the received entry lanelet.</span></div>
<div class="line"><span class="lineno">  155</span>            <span class="keywordflow">if</span> ( std::find(connection_lanelet_ids.begin(), connection_lanelet_ids.end(), lane.getId()) != connection_lanelet_ids.end() ) {</div>
<div class="line"><span class="lineno">  156</span>                <span class="keywordflow">if</span> ( !lane.getSignalGroupId() ) {</div>
<div class="line"><span class="lineno">  157</span>                    <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;The connection link lanelet does not have a group_id!&quot;</span>);</div>
<div class="line"><span class="lineno">  158</span>                }</div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">if</span> (first_link_visited &amp;&amp; lane.getSignalGroupId() != signal_group_id){</div>
<div class="line"><span class="lineno">  160</span>                    <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;The link lanelets connected to the entry lane have &quot;</span></div>
<div class="line"><span class="lineno">  161</span>                                                <span class="stringliteral">&quot;different signal_group_ids! The signalized_vehicle_scheduler&quot;</span></div>
<div class="line"><span class="lineno">  162</span>                                                <span class="stringliteral">&quot; is only capable of understanding intersection where all connection&quot;</span></div>
<div class="line"><span class="lineno">  163</span>                                                <span class="stringliteral">&quot; lanes from a single entry lane share a signal_group_id!&quot;</span>);</div>
<div class="line"><span class="lineno">  164</span>                }</div>
<div class="line"><span class="lineno">  165</span>                <span class="keywordflow">if</span> (!first_link_visited) {</div>
<div class="line"><span class="lineno">  166</span>                    signal_group_id = lane.getSignalGroupId();</div>
<div class="line"><span class="lineno">  167</span>                    first_link_visited = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  168</span>                }</div>
<div class="line"><span class="lineno">  169</span>            }</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="comment">// find the movement_state object</span></div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> move_state; </div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">spat_ptr</a> ) {</div>
<div class="line"><span class="lineno">  175</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ms : <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">spat_ptr</a>-&gt;get_intersection().states){</div>
<div class="line"><span class="lineno">  176</span>                <span class="keywordflow">if</span> (ms.signal_group == signal_group_id) {</div>
<div class="line"><span class="lineno">  177</span>                    move_state = ms;</div>
<div class="line"><span class="lineno">  178</span>                    <span class="keywordflow">return</span> move_state;</div>
<div class="line"><span class="lineno">  179</span>                }</div>
<div class="line"><span class="lineno">  180</span>            }</div>
<div class="line"><span class="lineno">  181</span>            <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;Could not find the movement_state with the required signal_group_id!&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>        }</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  184</span>            <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;SPaT is not found!&quot;</span>);</div>
<div class="line"><span class="lineno">  185</span>        }</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">return</span> move_state;</div>
<div class="line"><span class="lineno">  187</span>    }</div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_abcfdd002f92a00fc383e2de5027fa7c9"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9">OpenAPI::OAILanelet_info::getConnectingLaneletIds</a></div><div class="ttdeci">QList&lt; qint32 &gt; getConnectingLaneletIds() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00217">OAILanelet_info.cpp:217</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_aa17cd405d5cda86d877060b915b9aa32"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">streets_vehicle_scheduler::signalized_vehicle_scheduler::spat_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; signal_phase_and_timing::spat &gt; spat_ptr</div><div class="ttdoc">A shared pointer to the modified_spat.</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8h_source.html#l00024">signalized_vehicle_scheduler.h:24</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1vehicle__scheduler_html_a5fa37276e5ccb41e38cbef573e830e8e"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">streets_vehicle_scheduler::vehicle_scheduler::intersection_info</a></div><div class="ttdeci">std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; intersection_info</div><div class="ttdoc">shared pointer to intersection information required for scheduling.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__scheduler_8h_source.html#l00026">vehicle_scheduler.h:26</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a></div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00015">movement_state.h:15</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00217">OpenAPI::OAILanelet_info::getConnectingLaneletIds()</a>, <a class="el" href="vehicle__scheduler_8h_source.html#l00026">streets_vehicle_scheduler::vehicle_scheduler::intersection_info</a>, and <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00024">spat_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00078">schedule_evs()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_cgraph">
<area shape="rect" title="find the movement state info from the modified spat for vehicles from a given entry lane...." alt="" coords="5,5,211,61"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="259,13,459,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_aed159065f9086c0c9e8b7c7476f3e7aa_icgraph">
<area shape="rect" title="find the movement state info from the modified spat for vehicles from a given entry lane...." alt="" coords="493,5,699,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="afbeb97e551e87ad6340c620b51f28fe1" name="afbeb97e551e87ad6340c620b51f28fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbeb97e551e87ad6340c620b51f28fe1">&#9670;&nbsp;</a></span>get_final_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::get_final_green_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the final green buffer (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t final green buffer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00408">408</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>                                                                        {</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">final_green_buffer</a>;</div>
<div class="line"><span class="lineno">  410</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00039">final_green_buffer</a>.</p>

</div>
</div>
<a id="a0c1c065ffbe9ecd62e2a985815aa8170" name="a0c1c065ffbe9ecd62e2a985815aa8170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c1c065ffbe9ecd62e2a985815aa8170">&#9670;&nbsp;</a></span>get_initial_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::get_initial_green_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial green buffer (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t initial green buffer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00400">400</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  400</span>                                                                          {</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">initial_green_buffer</a>;</div>
<div class="line"><span class="lineno">  402</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00032">initial_green_buffer</a>.</p>

</div>
</div>
<a id="aa4707ffc16fca19f724911b9f0c0e581" name="aa4707ffc16fca19f724911b9f0c0e581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4707ffc16fca19f724911b9f0c0e581">&#9670;&nbsp;</a></span>get_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt; streets_vehicle_scheduler::signalized_vehicle_scheduler::get_spat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the spat object. </p>
<dl class="section return"><dt>Returns</dt><dd>std::shared_ptr&lt;signal_phase_and_timing::spat&gt; spat object </dd></dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00412">412</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  412</span>                                                                                            {</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">spat_ptr</a>;</div>
<div class="line"><span class="lineno">  414</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00024">spat_ptr</a>.</p>

</div>
</div>
<a id="a4ff15023fb9c14d1765ebe78d3d3a944" name="a4ff15023fb9c14d1765ebe78d3d3a944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff15023fb9c14d1765ebe78d3d3a944">&#9670;&nbsp;</a></span>schedule_dvs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::schedule_dvs </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dvs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">signalized_intersection_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>schedule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate the intersection departure times (dt's) for all currently Departing Vehicle (DVs) based on kinematic vehicle information and intersection geometry. Method assumes empty <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">intersection_schedule</a> is passed in. Method will add vehicle_schedule(s) for each DV in the vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dvs</td><td>vector of unscheduled DVs. </td></tr>
    <tr><td class="paramname">schedule</td><td><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">signalized_intersection_schedule</a> to add DV scheduling information to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00046">46</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>                                                                                                                                                                        {</div>
<div class="line"><span class="lineno">   47</span>        </div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;departing_veh : dvs ) {</div>
<div class="line"><span class="lineno">   49</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Scheduling the departure time for DV with ID {0} .&quot;</span>, departing_veh._id);</div>
<div class="line"><span class="lineno">   50</span>            <span class="comment">// get link lane info</span></div>
<div class="line"><span class="lineno">   51</span>            <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> lane_info =  <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c">get_link_lanelet_info</a>( departing_veh );</div>
<div class="line"><span class="lineno">   52</span>            <span class="comment">// calculate clearance time in milliseconds </span></div>
<div class="line"><span class="lineno">   53</span>            uint64_t clearance_time = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2">estimate_clearance_time</a>( departing_veh );</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>            signalized_vehicle_schedule veh_sched;</div>
<div class="line"><span class="lineno">   56</span>            <span class="comment">// set id</span></div>
<div class="line"><span class="lineno">   57</span>            veh_sched.v_id = departing_veh._id;</div>
<div class="line"><span class="lineno">   58</span>            <span class="comment">// set et </span></div>
<div class="line"><span class="lineno">   59</span>            veh_sched.et = departing_veh._actual_et;</div>
<div class="line"><span class="lineno">   60</span>            <span class="comment">// departure time is equal to current time plus clearance time for DVs</span></div>
<div class="line"><span class="lineno">   61</span>            veh_sched.dt =  schedule-&gt;timestamp + clearance_time;</div>
<div class="line"><span class="lineno">   62</span>            <span class="comment">// set state</span></div>
<div class="line"><span class="lineno">   63</span>            veh_sched.state = departing_veh._cur_state;</div>
<div class="line"><span class="lineno">   64</span>            <span class="comment">// set vehicle link id</span></div>
<div class="line"><span class="lineno">   65</span>            veh_sched.link_id =  departing_veh._link_id;</div>
<div class="line"><span class="lineno">   66</span>            <span class="comment">// set vehicle entry lane id</span></div>
<div class="line"><span class="lineno">   67</span>            veh_sched.entry_lane =  departing_veh._entry_lane_id;</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Added schedule for DV {0} with dt {1}.&quot;</span>, veh_sched.v_id, veh_sched.dt);</div>
<div class="line"><span class="lineno">   70</span>            <span class="comment">// add vehicle_schedule</span></div>
<div class="line"><span class="lineno">   71</span>            schedule-&gt;vehicle_schedules.push_back(veh_sched);</div>
<div class="line"><span class="lineno">   72</span>        }</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__intersection__schedule_8h_source.html#l00041">streets_vehicle_scheduler::signalized_vehicle_schedule::dt</a>, <a class="el" href="intersection__schedule_8h_source.html#l00032">streets_vehicle_scheduler::vehicle_schedule::entry_lane</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00384">estimate_clearance_time()</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00035">streets_vehicle_scheduler::signalized_vehicle_schedule::et</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00031">streets_vehicle_scheduler::vehicle_scheduler::get_link_lanelet_info()</a>, <a class="el" href="intersection__schedule_8h_source.html#l00036">streets_vehicle_scheduler::vehicle_schedule::link_id</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00045">streets_vehicle_scheduler::signalized_vehicle_schedule::state</a>, and <a class="el" href="intersection__schedule_8h_source.html#l00028">streets_vehicle_scheduler::vehicle_schedule::v_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00005">schedule_vehicles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_cgraph">
<area shape="rect" title="Estimate the intersection departure times (dt&#39;s) for all currently Departing Vehicle (DVs) based on k..." alt="" coords="5,65,201,121"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="249,97,445,153"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="493,27,667,83"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad" title=" " alt="" coords="507,107,653,148"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="507,172,653,213"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="715,5,861,47"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="752,71,824,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a4ff15023fb9c14d1765ebe78d3d3a944_icgraph">
<area shape="rect" title="Estimate the intersection departure times (dt&#39;s) for all currently Departing Vehicle (DVs) based on k..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="ac41bc42db46cbbf7a037486fa46dd7e0" name="ac41bc42db46cbbf7a037486fa46dd7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac41bc42db46cbbf7a037486fa46dd7e0">&#9670;&nbsp;</a></span>schedule_evs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::schedule_evs </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>evs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">signalized_intersection_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>schedule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry lane. These list are ordered in ascending order with the vehicle closest to the intersection in a given lane being the first vehicle in that entry lanes vehicle list. Then, for each entry lane, an entering time (ET) for each EV in the entry lane is calculated sequentially starting from the first vehicle until in the list. ET is estimated based on the EV's earliest entering time (EET), its preceding vehicle's estimated ET, and the modifed spat. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evs</td><td>list of all EVs. </td></tr>
    <tr><td class="paramname">schedule</td><td><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">signalized_intersection_schedule</a> to add EV scheduling information to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00078">78</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>                                                                                                                                                                  {</div>
<div class="line"><span class="lineno">   79</span>        </div>
<div class="line"><span class="lineno">   80</span>        <span class="comment">// Sort vehicles based on distance</span></div>
<div class="line"><span class="lineno">   81</span>        evs.sort(<a class="code hl_function" href="namespacestreets__vehicle__scheduler.html#ab550673e6a269f9f374ca3ca7ff6ba82">distance_comparator</a>);</div>
<div class="line"><span class="lineno">   82</span>        </div>
<div class="line"><span class="lineno">   83</span>        <span class="comment">// Create a map of entry lane id keys and list of EVs in each lane.</span></div>
<div class="line"><span class="lineno">   84</span>        std::unordered_map&lt;int, std::list&lt;streets_vehicles::vehicle&gt;&gt; vehicle_lane_map;</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry_lane : <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">intersection_info</a>-&gt;getEntryLanelets() ) {</div>
<div class="line"><span class="lineno">   86</span>            std::list&lt;streets_vehicles::vehicle&gt; vehicles_in_lane;</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;ev : evs ) {</div>
<div class="line"><span class="lineno">   88</span>                <span class="keywordflow">if</span> ( ev._entry_lane_id == entry_lane.getId()) {</div>
<div class="line"><span class="lineno">   89</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;Adding vehicle {0} to EVs list in entry lane {1}&quot;</span>, ev._id, ev._entry_lane_id);</div>
<div class="line"><span class="lineno">   90</span>                    vehicles_in_lane.push_back(ev);</div>
<div class="line"><span class="lineno">   91</span>                }</div>
<div class="line"><span class="lineno">   92</span>            }</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">if</span> ( !vehicles_in_lane.empty()) {</div>
<div class="line"><span class="lineno">   94</span>                vehicles_in_lane.sort(<a class="code hl_function" href="namespacestreets__vehicle__scheduler.html#ab550673e6a269f9f374ca3ca7ff6ba82">distance_comparator</a>);</div>
<div class="line"><span class="lineno">   95</span>                vehicle_lane_map.try_emplace( entry_lane.getId(), vehicles_in_lane );</div>
<div class="line"><span class="lineno">   96</span>            }</div>
<div class="line"><span class="lineno">   97</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   98</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;No EVs in lane {0}.&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(entry_lane.getId()) );</div>
<div class="line"><span class="lineno">   99</span>            }</div>
<div class="line"><span class="lineno">  100</span>        }</div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">if</span> ( vehicle_lane_map.empty() ) {</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">throw</span> scheduling_exception(<span class="stringliteral">&quot;Map of vehicles to be scheduled is empty but list of EVs to be scheduled is not!&quot;</span>);</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span>        </div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[entry_lane, evs_in_lane] : vehicle_lane_map ) {           </div>
<div class="line"><span class="lineno">  106</span>            </div>
<div class="line"><span class="lineno">  107</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Scheduling EVs from entry lane {0} &quot;</span>, entry_lane);</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>            <span class="comment">// Find the last DV from the entry lane</span></div>
<div class="line"><span class="lineno">  110</span>            std::shared_ptr&lt;signalized_vehicle_schedule&gt; preceding_veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;veh_sched : schedule-&gt;vehicle_schedules ) {</div>
<div class="line"><span class="lineno">  112</span>                <span class="keywordflow">if</span> ( veh_sched.entry_lane == entry_lane &amp;&amp; veh_sched.state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::vehicle_state::DV</a> &amp;&amp; (preceding_veh == <span class="keyword">nullptr</span> || veh_sched.et &lt; preceding_veh-&gt;et)) {</div>
<div class="line"><span class="lineno">  113</span>                    preceding_veh = std::make_shared&lt;signalized_vehicle_schedule&gt;(veh_sched);</div>
<div class="line"><span class="lineno">  114</span>                }</div>
<div class="line"><span class="lineno">  115</span>            }</div>
<div class="line"><span class="lineno">  116</span>            </div>
<div class="line"><span class="lineno">  117</span>            <span class="comment">// Find the entry lane object</span></div>
<div class="line"><span class="lineno">  118</span>            <a class="code hl_class" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> entry_lane_info;</div>
<div class="line"><span class="lineno">  119</span>            <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;lane : <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a5fa37276e5ccb41e38cbef573e830e8e">intersection_info</a>-&gt;getEntryLanelets() ){</div>
<div class="line"><span class="lineno">  120</span>                <span class="keywordflow">if</span> ( lane.getId() == entry_lane ) {</div>
<div class="line"><span class="lineno">  121</span>                    entry_lane_info = lane;</div>
<div class="line"><span class="lineno">  122</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  123</span>                }</div>
<div class="line"><span class="lineno">  124</span>            }</div>
<div class="line"><span class="lineno">  125</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;The entry lane id = {0}&quot;</span>, entry_lane_info.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">getId</a>());</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>            <span class="comment">// Get the movement_state object that connects to this entry lane</span></div>
<div class="line"><span class="lineno">  128</span>            <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> move_state = <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa">find_movement_state_for_lane</a>(entry_lane_info);</div>
<div class="line"><span class="lineno">  129</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;The signal group id for the link lanelets connected to entry lane {0} = {1}&quot;</span>, entry_lane_info.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">getId</a>(), move_state.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>);</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ev : evs_in_lane){</div>
<div class="line"><span class="lineno">  132</span>                signalized_vehicle_schedule sched;</div>
<div class="line"><span class="lineno">  133</span>                SPDLOG_DEBUG( <span class="stringliteral">&quot;Estimating schedule for {0}.&quot;</span>, ev._id);</div>
<div class="line"><span class="lineno">  134</span>                <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419">estimate_et</a>(ev, preceding_veh, sched, move_state, schedule-&gt;timestamp);</div>
<div class="line"><span class="lineno">  135</span>                <span class="comment">// Add vehicle schedule to the schedule list.</span></div>
<div class="line"><span class="lineno">  136</span>                schedule-&gt;vehicle_schedules.push_back(sched);</div>
<div class="line"><span class="lineno">  137</span>                <span class="comment">// Update the preceding vehicle schedule.</span></div>
<div class="line"><span class="lineno">  138</span>                preceding_veh = std::make_shared&lt;signalized_vehicle_schedule&gt;(sched);</div>
<div class="line"><span class="lineno">  139</span>            }</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;All vehicles in lane {0} have been scheduled!&quot;</span>, entry_lane);</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        }</div>
<div class="line"><span class="lineno">  144</span>    }</div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a4d00a1ab964b44569653d414280a3419"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419">streets_vehicle_scheduler::signalized_vehicle_scheduler::estimate_et</a></div><div class="ttdeci">void estimate_et(const streets_vehicles::vehicle &amp;veh, const std::shared_ptr&lt; signalized_vehicle_schedule &gt; &amp;preceding_veh, signalized_vehicle_schedule &amp;sched, const signal_phase_and_timing::movement_state &amp;move_state, const uint64_t schedule_timestamp) const</div><div class="ttdoc">Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV's e...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00190">signalized_vehicle_scheduler.cpp:190</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_aed159065f9086c0c9e8b7c7476f3e7aa"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa">streets_vehicle_scheduler::signalized_vehicle_scheduler::find_movement_state_for_lane</a></div><div class="ttdeci">signal_phase_and_timing::movement_state find_movement_state_for_lane(const OpenAPI::OAILanelet_info &amp;entry_lane_info) const</div><div class="ttdoc">find the movement state info from the modified spat for vehicles from a given entry lane....</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00147">signalized_vehicle_scheduler.cpp:147</a></div></div>
<div class="ttc" id="anamespacestreets__vehicle__scheduler_html_ab550673e6a269f9f374ca3ca7ff6ba82"><div class="ttname"><a href="namespacestreets__vehicle__scheduler.html#ab550673e6a269f9f374ca3ca7ff6ba82">streets_vehicle_scheduler::distance_comparator</a></div><div class="ttdeci">bool distance_comparator(const streets_vehicles::vehicle &amp;prev_veh, const streets_vehicles::vehicle &amp;next_veh)</div><div class="ttdoc">Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__sorting_8cpp_source.html#l00029">vehicle_sorting.cpp:29</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_ad403f25c761b6ef77b4bbc6bacbfc888"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_phase_and_timing::movement_state::signal_group</a></div><div class="ttdeci">uint8_t signal_group</div><div class="ttdoc">The group id is used to map to list of lanes (and their descriptions) which this MovementState data a...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00025">movement_state.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__sorting_8cpp_source.html#l00029">streets_vehicle_scheduler::distance_comparator()</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::DV</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00147">find_movement_state_for_lane()</a>, <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00121">OpenAPI::OAILanelet_info::getId()</a>, <a class="el" href="vehicle__scheduler_8h_source.html#l00026">streets_vehicle_scheduler::vehicle_scheduler::intersection_info</a>, and <a class="el" href="movement__state_8h_source.html#l00025">signal_phase_and_timing::movement_state::signal_group</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00005">schedule_vehicles()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_cgraph">
<area shape="rect" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="5,753,201,809"/>
<area shape="rect" href="namespacestreets__vehicle__scheduler.html#ab550673e6a269f9f374ca3ca7ff6ba82" title="Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord..." alt="" coords="265,598,439,639"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="254,663,450,719"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="1053,685,1200,726"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa" title="find the movement state info from the modified spat for vehicles from a given entry lane...." alt="" coords="249,876,455,932"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="503,365,717,421"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="799,629,972,685"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="812,565,959,606"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369" title="Calculate the minimum safety time headway required by the vehicle at a given speed." alt="" coords="512,695,708,751"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="512,564,708,620"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85" title="Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle...." alt="" coords="787,85,983,141"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169" title="Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea..." alt="" coords="787,165,983,221"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a" title="Method to calculate time interval necessary for deceleration from v_hat to departure speed...." alt="" coords="787,245,983,301"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d" title="Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de..." alt="" coords="765,325,1005,381"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397" title="Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ..." alt="" coords="770,405,1001,461"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0" title="Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ..." alt="" coords="787,485,983,541"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b" title="Helper method to get entry lane OAILanelet_info from intersection information given a vehicle." alt="" coords="799,5,972,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="1091,597,1163,624"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad" title=" " alt="" coords="812,709,959,750"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="510,883,710,925"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_icgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_icgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_icgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_ac41bc42db46cbbf7a037486fa46dd7e0_icgraph">
<area shape="rect" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,5,445,61"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a2572fdbb86e141df40174d618fe2a3d0" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,5,201,61"/>
</map>
</div>

</div>
</div>
<a id="a2572fdbb86e141df40174d618fe2a3d0" name="a2572fdbb86e141df40174d618fe2a3d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2572fdbb86e141df40174d618fe2a3d0">&#9670;&nbsp;</a></span>schedule_vehicles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::schedule_vehicles </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">intersection_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>schedule</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to schedule vehicles. Given and empty <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">intersection_schedule</a> shared pointer and a map of vehicles and vehicle ids. This method will populate the intersection schedule with a schedule for all vehicles in the vehicle map based on UC 3 scheduling logic to estimate vehicles' entering times to the intersection box based on the modified spat. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vehicles</td><td>A map of the vehicles to schedule, with vehicle id as keys </td></tr>
    <tr><td class="paramname">schedule</td><td>A signalize_intersection schedule shared pointer populated with a vehicle schedule for all EVs and DVs in the map. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a68ae44ddfa8ae16f298b2798ed93b9d2">streets_vehicle_scheduler::vehicle_scheduler</a>.</p>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00005">5</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    5</span>                                                                                                                                                                       {</div>
<div class="line"><span class="lineno">    6</span>        </div>
<div class="line"><span class="lineno">    7</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">    8</span>            <span class="keyword">auto</span> schedule = std::dynamic_pointer_cast&lt;signalized_intersection_schedule&gt; (i_sched);</div>
<div class="line"><span class="lineno">    9</span>            </div>
<div class="line"><span class="lineno">   10</span>            <span class="keywordflow">if</span> ( vehicles.empty() ) {</div>
<div class="line"><span class="lineno">   11</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;No vehicles to schedule.&quot;</span>);</div>
<div class="line"><span class="lineno">   12</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   13</span>            }</div>
<div class="line"><span class="lineno">   14</span> </div>
<div class="line"><span class="lineno">   15</span>            <span class="comment">// Estimate Vehicles at common time </span></div>
<div class="line"><span class="lineno">   16</span>            <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a85947f43b293504a108619374c0c0dae">estimate_vehicles_at_common_time</a>( vehicles, schedule-&gt;timestamp);</div>
<div class="line"><span class="lineno">   17</span>            <span class="comment">// Create vectors of DVs and EVs</span></div>
<div class="line"><span class="lineno">   18</span>            std::list&lt;streets_vehicles::vehicle&gt; DVs;</div>
<div class="line"><span class="lineno">   19</span>            std::list&lt;streets_vehicles::vehicle&gt; EVs;</div>
<div class="line"><span class="lineno">   20</span>            </div>
<div class="line"><span class="lineno">   21</span>            <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;[v_id, veh] : vehicles) {</div>
<div class="line"><span class="lineno">   22</span>                <span class="keywordflow">if</span> ( veh._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a>) {</div>
<div class="line"><span class="lineno">   23</span>                    EVs.push_back(veh);</div>
<div class="line"><span class="lineno">   24</span>                }</div>
<div class="line"><span class="lineno">   25</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( veh._cur_state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::vehicle_state::DV</a> ) {</div>
<div class="line"><span class="lineno">   26</span>                    DVs.push_back(veh);</div>
<div class="line"><span class="lineno">   27</span>                }</div>
<div class="line"><span class="lineno">   28</span>            }</div>
<div class="line"><span class="lineno">   29</span>            </div>
<div class="line"><span class="lineno">   30</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Number of Entering Vehicles (EVs) to schedule are : {0} &quot;</span>, EVs.size());</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>            <span class="comment">// Schedule DVs</span></div>
<div class="line"><span class="lineno">   33</span>            <span class="keywordflow">if</span> ( !DVs.empty() )</div>
<div class="line"><span class="lineno">   34</span>                <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944">schedule_dvs</a>( DVs, schedule);</div>
<div class="line"><span class="lineno">   35</span>            <span class="comment">// Schedule EVs</span></div>
<div class="line"><span class="lineno">   36</span>            <span class="keywordflow">if</span> ( !EVs.empty() )</div>
<div class="line"><span class="lineno">   37</span>                <a class="code hl_function" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0">schedule_evs</a>( EVs, schedule);</div>
<div class="line"><span class="lineno">   38</span>        }</div>
<div class="line"><span class="lineno">   39</span>        <span class="keywordflow">catch</span> ( <span class="keyword">const</span> <a class="code hl_class" href="classstreets__service_1_1streets__configuration__exception.html">streets_service::streets_configuration_exception</a> &amp;ex ) {</div>
<div class="line"><span class="lineno">   40</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;signalized scheduler failure: {0} &quot;</span>, ex.what());</div>
<div class="line"><span class="lineno">   41</span>        }</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration__exception_html"><div class="ttname"><a href="classstreets__service_1_1streets__configuration__exception.html">streets_service::streets_configuration_exception</a></div><div class="ttdoc">Streets Configuration Exception thrown when manifest.json configuration files are incorrectly formatt...</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration__exception_8h_source.html#l00011">streets_configuration_exception.h:11</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_a4ff15023fb9c14d1765ebe78d3d3a944"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944">streets_vehicle_scheduler::signalized_vehicle_scheduler::schedule_dvs</a></div><div class="ttdeci">void schedule_dvs(const std::list&lt; streets_vehicles::vehicle &gt; &amp;dvs, const std::shared_ptr&lt; signalized_intersection_schedule &gt; &amp;schedule) const</div><div class="ttdoc">Estimate the intersection departure times (dt's) for all currently Departing Vehicle (DVs) based on k...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00046">signalized_vehicle_scheduler.cpp:46</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_html_ac41bc42db46cbbf7a037486fa46dd7e0"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0">streets_vehicle_scheduler::signalized_vehicle_scheduler::schedule_evs</a></div><div class="ttdeci">void schedule_evs(std::list&lt; streets_vehicles::vehicle &gt; &amp;evs, const std::shared_ptr&lt; signalized_intersection_schedule &gt; &amp;schedule) const</div><div class="ttdoc">Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__vehicle__scheduler_8cpp_source.html#l00078">signalized_vehicle_scheduler.cpp:78</a></div></div>
<div class="ttc" id="aclassstreets__vehicle__scheduler_1_1vehicle__scheduler_html_a85947f43b293504a108619374c0c0dae"><div class="ttname"><a href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a85947f43b293504a108619374c0c0dae">streets_vehicle_scheduler::vehicle_scheduler::estimate_vehicles_at_common_time</a></div><div class="ttdeci">void estimate_vehicles_at_common_time(std::unordered_map&lt; std::string, streets_vehicles::vehicle &gt; &amp;vehicles, const u_int64_t timestamp) const</div><div class="ttdoc">Method to estimate all vehicle's speed and location at a common future time. The time needs to be tim...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__scheduler_8cpp_source.html#l00049">vehicle_scheduler.cpp:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00">streets_vehicles::DV</a>, <a class="el" href="vehicle__scheduler_8cpp_source.html#l00049">streets_vehicle_scheduler::vehicle_scheduler::estimate_vehicles_at_common_time()</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00046">schedule_dvs()</a>, and <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00078">schedule_evs()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a2572fdbb86e141df40174d618fe2a3d0_cgraph.png" border="0" usemap="#aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a2572fdbb86e141df40174d618fe2a3d0_cgraph" alt=""/></div>
<map name="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a2572fdbb86e141df40174d618fe2a3d0_cgraph" id="aclassstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a2572fdbb86e141df40174d618fe2a3d0_cgraph">
<area shape="rect" title="Method to schedule vehicles. Given and empty intersection_schedule shared pointer and a map of vehicl..." alt="" coords="5,243,201,299"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#a85947f43b293504a108619374c0c0dae" title="Method to estimate all vehicle&#39;s speed and location at a common future time. The time needs to be tim..." alt="" coords="253,178,441,234"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4ff15023fb9c14d1765ebe78d3d3a944" title="Estimate the intersection departure times (dt&#39;s) for all currently Departing Vehicle (DVs) based on k..." alt="" coords="498,141,694,197"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#ac41bc42db46cbbf7a037486fa46dd7e0" title="Schedule all Entering Vehicles (EVs). Method first organizes all EVs into lists based on their entry ..." alt="" coords="249,366,445,422"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a1cce3f6e4da6ae1804dfd6a49305baf2" title="Estimate clearance time of a vehicle given it&#39;s current speed." alt="" coords="756,141,952,197"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af2c80eb87e5a9cabaad660544003663c" title="Helper method to get link lane OAILanelet_info from intersection information given a vehicle." alt="" coords="1043,70,1216,126"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abc1c4d5d24a2dafb175874ecad09cfad" title=" " alt="" coords="1056,5,1203,47"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a9ed2860829d5aeba3062f26e78afcbdc" title=" " alt="" coords="1056,149,1203,191"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="1297,672,1444,713"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="1335,578,1407,605"/>
<area shape="rect" href="namespacestreets__vehicle__scheduler.html#ab550673e6a269f9f374ca3ca7ff6ba82" title="Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord..." alt="" coords="509,301,683,343"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a4d00a1ab964b44569653d414280a3419" title="Estimate an entering time (ET) for a given Entering Vehicle (EV). ET is estimated based on the EV&#39;s e..." alt="" coords="498,366,694,422"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed159065f9086c0c9e8b7c7476f3e7aa" title="find the movement state info from the modified spat for vehicles from a given entry lane...." alt="" coords="493,875,699,931"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a616f990b94f85cbe7c8ac5ecc215d41c" title="Method to use vehicle kinematic information to estimate earliest possible entering time (EET) for an ..." alt="" coords="747,366,961,422"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a6b1ad1b03c5a472d08448ddaaae63369" title="Calculate the minimum safety time headway required by the vehicle at a given speed." alt="" coords="756,446,952,502"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a9c75b9f5697f17b55e8ee1749370ce85" title="Method to calculate time interval necessary for accelerating to speed v_hat for a given vehicle...." alt="" coords="1031,534,1227,590"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af28d893b32779b4c75ab82a38f640169" title="Method to calculate time interval necessary for cruising at a constant speed v_hat (speed limit) grea..." alt="" coords="1031,694,1227,750"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a5b376d76daf797d450e98eee7773ba4a" title="Method to calculate time interval necessary for deceleration from v_hat to departure speed...." alt="" coords="1031,214,1227,270"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a925165d32ec5e00e9e2992df9337010d" title="Calculate the distance required to speed up to lane speed limit with maximum acceleration and then de..." alt="" coords="1009,294,1249,350"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a98775d8dc582750131d1a7daff140397" title="Calculate the distance required to speed up (slow down) to departure speed with maximum acceleration ..." alt="" coords="1014,374,1245,430"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#a8d4f24941809d897f4f2bd27d16a41e0" title="Method to calculate v_hat. This is the joint speed between the acceleration and deceleration periods ..." alt="" coords="1031,454,1227,510"/>
<area shape="rect" href="classstreets__vehicle__scheduler_1_1vehicle__scheduler.html#af8916add714bef70d8f48efc0ccfca7b" title="Helper method to get entry lane OAILanelet_info from intersection information given a vehicle." alt="" coords="1043,614,1216,670"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="754,883,954,924"/>
</map>
</div>

</div>
</div>
<a id="a9f16f001c3768c180d62ea66a8770151" name="a9f16f001c3768c180d62ea66a8770151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f16f001c3768c180d62ea66a8770151">&#9670;&nbsp;</a></span>set_final_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::set_final_green_buffer </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the final green buffer (ms). This value is used to account for safety. The assumption is that no vehicle shall enter the intersection box after the end of a green phase minus the final green buffer. entering the intersection box at a green phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>final green buffer in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00404">404</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  404</span>                                                                                  {</div>
<div class="line"><span class="lineno">  405</span>        <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#af23ea3f8079aedda1f3e36203d0bc0c9">final_green_buffer</a> = buffer;</div>
<div class="line"><span class="lineno">  406</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00039">final_green_buffer</a>.</p>

</div>
</div>
<a id="a2532494d22760bd75165d7b2c25bc354" name="a2532494d22760bd75165d7b2c25bc354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2532494d22760bd75165d7b2c25bc354">&#9670;&nbsp;</a></span>set_initial_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::set_initial_green_buffer </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the initial green buffer (ms). This value is used to account for the time it takes a vehicle before entering the intersection box at a green phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>initial green buffer in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00396">396</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  396</span>                                                                                    {</div>
<div class="line"><span class="lineno">  397</span>        <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aed5f596d0160b7fc2941f8f003293f50">initial_green_buffer</a> = buffer;</div>
<div class="line"><span class="lineno">  398</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00032">initial_green_buffer</a>.</p>

</div>
</div>
<a id="a31439c5e2c152727be5df25e109ba988" name="a31439c5e2c152727be5df25e109ba988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31439c5e2c152727be5df25e109ba988">&#9670;&nbsp;</a></span>set_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_vehicle_scheduler::signalized_vehicle_scheduler::set_spat </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td>
          <td class="paramname"><em>spat_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the spat object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spat_info</td><td><a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00416">416</a> of file <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  416</span>                                                                                                    {</div>
<div class="line"><span class="lineno">  417</span>        <a class="code hl_variable" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html#aa17cd405d5cda86d877060b915b9aa32">spat_ptr</a> = spat_info;</div>
<div class="line"><span class="lineno">  418</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00024">spat_ptr</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af23ea3f8079aedda1f3e36203d0bc0c9" name="af23ea3f8079aedda1f3e36203d0bc0c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af23ea3f8079aedda1f3e36203d0bc0c9">&#9670;&nbsp;</a></span>final_green_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::final_green_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The configurable time interval at the end of a green phase in milliseconds that is considered for estimating vehicles' entering times. The latest possible entering time during a phase is set to the end of the green phase minus the final_green_buffer. </p>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00039">39</a> of file <a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00408">get_final_green_buffer()</a>, and <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00404">set_final_green_buffer()</a>.</p>

</div>
</div>
<a id="aed5f596d0160b7fc2941f8f003293f50" name="aed5f596d0160b7fc2941f8f003293f50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed5f596d0160b7fc2941f8f003293f50">&#9670;&nbsp;</a></span>initial_green_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_vehicle_scheduler::signalized_vehicle_scheduler::initial_green_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The configurable time interval at the beginning of a green phase in milliseconds that is considered for estimating vehicles' entering times. The earliest possible entering time during a phase is set to the beginning of the green phase plus the initial_green_buffer. </p>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00032">32</a> of file <a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00190">estimate_et()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00400">get_initial_green_buffer()</a>, and <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00396">set_initial_green_buffer()</a>.</p>

</div>
</div>
<a id="aa17cd405d5cda86d877060b915b9aa32" name="aa17cd405d5cda86d877060b915b9aa32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17cd405d5cda86d877060b915b9aa32">&#9670;&nbsp;</a></span>spat_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a>&gt; streets_vehicle_scheduler::signalized_vehicle_scheduler::spat_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A shared pointer to the modified_spat. </p>

<p class="definition">Definition at line <a class="el" href="signalized__vehicle__scheduler_8h_source.html#l00024">24</a> of file <a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00147">find_movement_state_for_lane()</a>, <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00412">get_spat()</a>, and <a class="el" href="signalized__vehicle__scheduler_8cpp_source.html#l00416">set_spat()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>streets_utils/streets_vehicle_scheduler/include/<a class="el" href="signalized__vehicle__scheduler_8h_source.html">signalized_vehicle_scheduler.h</a></li>
<li>streets_utils/streets_vehicle_scheduler/src/<a class="el" href="signalized__vehicle__scheduler_8cpp_source.html">signalized_vehicle_scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacestreets__vehicle__scheduler.html">streets_vehicle_scheduler</a></li><li class="navelem"><a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">signalized_vehicle_scheduler</a></li>
    <li class="footer">Generated on Mon Jan 9 2023 15:08:39 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
