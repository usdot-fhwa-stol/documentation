<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm/src/Geometry.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('Geometry_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Geometry.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="Geometry_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (C) 2022 LEIDOS.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * use this file except in compliance with the License. You may obtain a copy of</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * the License at</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> *</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> * License for the specific language governing permissions and limitations under</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> * the License.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> */</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="Geometry_8hpp.html">carma_wm/Geometry.hpp</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;lanelet2_core/geometry/Point.h&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;tf2/LinearMath/Transform.h&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;tf2_geometry_msgs/tf2_geometry_msgs.h&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;tf2/transform_datatypes.h&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacecarma__wm.html">carma_wm</a></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>{</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">namespace </span>geometry</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>{</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">   28</a></span><span class="keyword">constexpr</span> <span class="keywordtype">double</span> <a class="code hl_variable" href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">SPATIAL_EPSILON_M</a> = 0.05;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment">// This safeAcos implementation is based on Stack Overflow answer: https://stackoverflow.com/questions/8489792/is-it-legal-to-take-acos-of-1-0f-or-1-0f</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">// Asked by SirYakalot: https://stackoverflow.com/users/956689/siryakalot</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment">// Answered by TonyK: https://stackoverflow.com/users/428857/tonyk</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">// Credited in accordance with Stack Overflow&#39;s CC-BY license</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">   34</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">safeAcos</a> (<span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>)</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>{</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &lt; -1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = -1.0 ;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &gt; 1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = 1.0 ;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  <span class="keywordflow">return</span> std::acos(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>) ;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>}</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">// This safeAcos implementation is based on Stack Overflow answer: https://stackoverflow.com/questions/8489792/is-it-legal-to-take-acos-of-1-0f-or-1-0f</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">// Asked by SirYakalot: https://stackoverflow.com/users/956689/siryakalot</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">// Answered by TonyK: https://stackoverflow.com/users/428857/tonyk</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">// Credited in accordance with Stack Overflow&#39;s CC-BY license</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#abab233f090920664b21fafd83065a77b">   45</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#abab233f090920664b21fafd83065a77b">safeAsin</a> (<span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>)</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &lt; -1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = -1.0 ;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> &gt; 1.0) <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = 1.0 ;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  <span class="keywordflow">return</span> std::asin(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>) ;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>}</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">   52</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">rpyFromQuaternion</a>(<span class="keyword">const</span> tf2::Quaternion&amp; q, <span class="keywordtype">double</span>&amp; roll, <span class="keywordtype">double</span>&amp; pitch, <span class="keywordtype">double</span>&amp; yaw) </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>{</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  tf2::Matrix3x3 mat(q);</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  mat.getRPY(roll, pitch, yaw);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>}</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a33b80c2f327d0293d7bdb9b4503a1cd5">   58</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">rpyFromQuaternion</a>(<span class="keyword">const</span> geometry_msgs::msg::Quaternion&amp; q_msg, <span class="keywordtype">double</span>&amp; roll, <span class="keywordtype">double</span>&amp; pitch, <span class="keywordtype">double</span>&amp; yaw)</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>{</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  tf2::Quaternion quat;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  <a class="code hl_function" href="namespacemotion__computation_1_1conversion.html#a9884e63460f3d5f5e2b755354984dc29">tf2::convert</a>(q_msg, quat);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">rpyFromQuaternion</a>(quat, roll, pitch, yaw);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>}</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">   65</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">getAngleBetweenVectors</a>(<span class="keyword">const</span> Eigen::Vector2d&amp; vec1, <span class="keyword">const</span> Eigen::Vector2d&amp; vec2)</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>{</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  <span class="keywordtype">double</span> vec1Mag = vec1.norm();</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <span class="keywordtype">double</span> vec2Mag = vec2.norm();</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  <span class="keywordflow">if</span> (vec1Mag == 0.0 || vec2Mag == 0.0)</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">safeAcos</a>(vec1.dot(vec2) / (vec1Mag * vec2Mag));</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>}</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a05616ac1d3b4773665beb74bd495af2c">   76</a></span><a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(<span class="keyword">const</span> lanelet::BasicPoint2d&amp; p, <span class="keyword">const</span> lanelet::BasicPoint2d&amp; seg_start,</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                  <span class="keyword">const</span> lanelet::BasicPoint2d&amp; seg_end)</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>{</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>  Eigen::Vector2d vec_to_p(p);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  Eigen::Vector2d vec_to_start(seg_start);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  Eigen::Vector2d vec_to_end(seg_end);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <span class="comment">// Get vector from start to external point</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  Eigen::Vector2d start_to_p = vec_to_p - vec_to_start;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="comment">// Get vector from start to end point</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  Eigen::Vector2d start_to_end = vec_to_end - vec_to_start;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <span class="comment">// Get angle between both vectors</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <span class="keywordtype">double</span> interior_angle = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">getAngleBetweenVectors</a>(start_to_p, start_to_end);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <span class="comment">// Calculate downtrack distance</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  <span class="keywordtype">double</span> start_to_p_mag = start_to_p.norm();</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <span class="keywordtype">double</span> downtrack_dist = start_to_p_mag * std::cos(interior_angle);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  <span class="keywordtype">double</span> d = (start_to_p[0] * start_to_end[1]) - (start_to_p[1] * start_to_end[0]);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  <span class="keywordtype">double</span> sign = d &gt;= 0 ? 1.0 : -1.0;  <span class="comment">// If d is positive then the point is to the right if it is negative the point is</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                                      <span class="comment">// to the left</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <span class="keywordtype">double</span> crosstrack = start_to_p_mag * std::sin(interior_angle) * sign;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>(downtrack_dist, crosstrack);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>}</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">  120</a></span><a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(<span class="keyword">const</span> lanelet::ConstLanelet&amp; <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, <span class="keyword">const</span> lanelet::BasicPoint2d&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>)</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>{</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="keyword">auto</span> center_line = lanelet::utils::to2D(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.centerline());</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  <span class="keywordflow">if</span> (center_line.numSegments() &lt; 1)</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided lanelet has invalid centerline containing no points&quot;</span>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <span class="keyword">auto</span> tuple = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">matchSegment</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, center_line.basicLineString());</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <span class="keywordflow">return</span> std::get&lt;0&gt;(tuple);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>}</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">  156</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">selectFirstSegment</a>(<span class="keyword">const</span> <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&amp; first_seg_trackPos, <span class="keyword">const</span> <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&amp; second_seg_trackPos,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                        <span class="keywordtype">double</span> first_seg_length, <span class="keywordtype">double</span> second_seg_length)</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>{</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> first_seg_in_downtrack =</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>      (0 &lt;= first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &amp;&amp; first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &lt; first_seg_length);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> second_seg_in_downtrack =</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>      (0 &lt;= second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &amp;&amp; second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> &lt; second_seg_length);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="keywordflow">if</span> (first_seg_in_downtrack &amp;&amp; !second_seg_in_downtrack)</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  {  <span class="comment">// If in the first segment but not the last segment</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// First segment is better</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (second_seg_in_downtrack &amp;&amp; !first_seg_in_downtrack)</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Second segment is better</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  }</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (first_seg_in_downtrack &amp;&amp; second_seg_in_downtrack)</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">return</span> first_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a> &lt;=</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>           second_seg_trackPos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>;  <span class="comment">// Pick the first segment if the crosstrack values are equal or the first</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                                            <span class="comment">// segment is closer</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  {  <span class="comment">// Point lies outside the downtrack bounds of both segments (Remember According to function contract the nearest</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>     <span class="comment">// point to external point is the midpoint of the two segments)</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Choose first segment as it will always have positive downtrack in this case while the second</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                  <span class="comment">// segment will always have negative downtrack</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>}</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">  187</a></span>std::tuple&lt;TrackPos, lanelet::BasicSegment2d&gt; <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">matchSegment</a>(<span class="keyword">const</span> lanelet::BasicPoint2d&amp; p,</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                                                           <span class="keyword">const</span> lanelet::BasicLineString2d&amp; line_string)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>{</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  <span class="keywordflow">if</span> (line_string.size() &lt; 2)</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided with linestring containing fewer than 2 points&quot;</span>);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  lanelet::BasicSegment2d best_segment =</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>      std::make_pair(line_string[0], line_string[1]);  <span class="comment">// Default to starting segment if no match is found</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="keyword">auto</span> point_2d = lanelet::utils::to2D(p);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  <span class="keywordtype">double</span> min_distance = lanelet::geometry::distance2d(point_2d, line_string[0]);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="keywordtype">size_t</span> best_point_index = 0;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="keywordtype">double</span> best_accumulated_length = 0;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="keywordtype">double</span> best_last_accumulated_length = 0;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="keywordtype">double</span> best_seg_length = 0;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  <span class="keywordtype">double</span> best_last_seg_length = 0;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  <span class="keywordtype">double</span> last_seg_length = 0;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <span class="keywordtype">double</span> accumulated_length = 0;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  <span class="keywordtype">double</span> last_accumulated_length = 0;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; line_string.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  {  <span class="comment">// Iterate over line string to find nearest point</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <span class="keywordtype">double</span> seg_length = 0;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; line_string.size() - 1)</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>      seg_length = lanelet::geometry::distance2d(line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>], line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1]);  <span class="comment">// Compute segment length</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordtype">double</span> distance = lanelet::geometry::distance2d(p, line_string[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);  <span class="comment">// Compute from current point to external point</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="keywordflow">if</span> (distance &lt; min_distance)</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    {  <span class="comment">// If this distance is below minimum discovered so far then update minimum</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>      min_distance = distance;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      best_point_index = <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      best_accumulated_length = accumulated_length;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      best_last_accumulated_length = last_accumulated_length;  <span class="comment">// Record accumulated lengths to each segment</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      best_seg_length = seg_length;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>      best_last_seg_length = last_seg_length;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    }</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    last_accumulated_length = accumulated_length;  <span class="comment">// Update accumulated lenths</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    accumulated_length += seg_length;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    last_seg_length = seg_length;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <span class="comment">// Minimum point has been found next step is to determine which segment it should go with using the following rules.</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <span class="comment">// If the minimum point is the first point then use the first segment</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  <span class="comment">// If the minimum point is the last point then use the last segment</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="comment">// If the minimum point is within the downtrack bounds of one segment but not the other then use the one it is within</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <span class="comment">// If the minimum point is within the downtrack bounds of both segments then use the one with the smallest crosstrack</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="comment">// distance If the minimum point is within the downtrack bounds of both segments and has exactly equal crosstrack</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  <span class="comment">// bounds with each segment then use the first one</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> best_pos(0, 0);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="keywordflow">if</span> (best_point_index == 0)</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    best_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[0], line_string[1]);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    best_segment = std::make_pair(line_string[0], line_string[1]);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (best_point_index == line_string.size() - 1)</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    best_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[line_string.size() - 2], line_string[line_string.size() - 1]);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    best_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> += best_last_accumulated_length;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    best_segment = std::make_pair(line_string[line_string.size() - 2], line_string[line_string.size() - 1]);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  }</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> first_seg_trackPos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[best_point_index - 1], line_string[best_point_index]);</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> second_seg_trackPos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">trackPos</a>(p, line_string[best_point_index], line_string[best_point_index + 1]);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">selectFirstSegment</a>(first_seg_trackPos, second_seg_trackPos, best_last_seg_length, best_seg_length))</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>      best_pos = first_seg_trackPos;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>      best_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> += best_last_accumulated_length;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      best_segment = std::make_pair(line_string[best_point_index - 1], line_string[best_point_index]);</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    {</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      best_pos = second_seg_trackPos;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>      best_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a> += best_accumulated_length;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>      best_segment = std::make_pair(line_string[best_point_index], line_string[best_point_index + 1]);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    }</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  }</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span> </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  <span class="comment">// couldn&#39;t find a matching segment, so use the first segment within the downtrack range of.</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="comment">// Or the starting segment assuming we are before the route</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <span class="keywordflow">return</span> std::make_tuple(best_pos, best_segment);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>}</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">// NOTE: See Geometry.h header file for details on source of logic in this function</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#aeaa3d6346b083b5fd1b7c699fab5bb5a">  276</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aeaa3d6346b083b5fd1b7c699fab5bb5a">computeCurvature</a>(<span class="keyword">const</span> lanelet::BasicPoint2d&amp; p1, <span class="keyword">const</span> lanelet::BasicPoint2d&amp; p2,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                        <span class="keyword">const</span> lanelet::BasicPoint2d&amp; p3)</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>{</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>  <span class="keyword">auto</span> dp = 0.5 * (p3 - p1);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  <span class="keyword">auto</span> ddp = p3 - 2.0 * p2 + p1;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  <span class="keyword">auto</span> denom = std::pow(dp.x() * dp.x() + dp.y() * dp.y(), 3.0 / 2.0);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <span class="keywordflow">if</span> (std::fabs(denom) &lt; 1e-20)</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>  {</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    denom = 1e-20;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>((ddp.y() * dp.x() - dp.y() * ddp.x()) / denom);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>}</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">  289</a></span>lanelet::BasicPolygon2d <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">objectToMapPolygon</a>(<span class="keyword">const</span> geometry_msgs::msg::Pose&amp; pose, <span class="keyword">const</span> geometry_msgs::msg::Vector3&amp; size)</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>{</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>  tf2::Transform object_tf;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>  tf2::fromMsg(pose, object_tf);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <span class="keywordtype">double</span> half_x_bound = size.x / 2;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>  <span class="keywordtype">double</span> half_y_bound = size.y / 2;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  <span class="comment">// 4 corners of the object starting with upper left and moving in clockwise direction in pose frame</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  tf2::Vector3 obj_p1(half_x_bound, half_y_bound, 0);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  tf2::Vector3 obj_p2(half_x_bound, -half_y_bound, 0);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  tf2::Vector3 obj_p3(-half_x_bound, -half_y_bound, 0);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  tf2::Vector3 obj_p4(-half_x_bound, half_y_bound, 0);</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>  tf2::Vector3 obj_p1_map = object_tf * obj_p1;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  tf2::Vector3 obj_p2_map = object_tf * obj_p2;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  tf2::Vector3 obj_p3_map = object_tf * obj_p3;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  tf2::Vector3 obj_p4_map = object_tf * obj_p4;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>  lanelet::BasicPoint2d p1(obj_p1_map.getX(), obj_p1_map.getY());</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  lanelet::BasicPoint2d p2(obj_p2_map.getX(), obj_p2_map.getY());</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  lanelet::BasicPoint2d p3(obj_p3_map.getX(), obj_p3_map.getY());</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  lanelet::BasicPoint2d p4(obj_p4_map.getX(), obj_p4_map.getY());</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <span class="keywordflow">return</span> { p1, p2, p3, p4 };</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>}</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">  316</a></span>lanelet::BasicLineString2d <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">concatenate_lanelets</a>(<span class="keyword">const</span> std::vector&lt;lanelet::ConstLanelet&gt;&amp; lanelets)</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>{</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>  <span class="keywordflow">if</span> (lanelets.empty()) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">return</span> lanelet::BasicLineString2d();</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>  lanelet::BasicLineString2d centerline_points = lanelets[0].centerline2d().basicLineString();</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  lanelet::BasicLineString2d new_points;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; lanelets.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    new_points = lanelets[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].centerline2d().basicLineString();</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    centerline_points = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">concatenate_line_strings</a>(centerline_points, new_points);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>  }</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  <span class="keywordflow">return</span> centerline_points;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>}</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> P, <span class="keyword">class</span> A&gt;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">  333</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a>(<span class="keyword">const</span> std::vector&lt;P, A&gt;&amp; centerline_points)</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>{</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <span class="keywordflow">if</span> (centerline_points.empty()) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;No points in centerline for curvature calculation&quot;</span>);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>  }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>  std::vector&lt;Eigen::Vector2d&gt; spatial_derivative = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(centerline_points);</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  std::vector&lt;Eigen::Vector2d&gt; normalized_tangent_vectors = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">normalize_vectors</a>(spatial_derivative);</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  std::vector&lt;double&gt; arc_lengths = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">compute_arc_lengths</a>(centerline_points);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>  std::vector&lt;Eigen::Vector2d&gt; tangent_derivative = </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>      normalized_tangent_vectors, </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>      arc_lengths);</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  std::vector&lt;double&gt; curvature = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">compute_magnitude_of_vectors</a>(tangent_derivative);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  <span class="keywordflow">return</span> curvature;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>}</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">  356</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a>(<span class="keyword">const</span> lanelet::BasicLineString2d&amp; centerline_points)</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>{</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a>(centerline_points);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>}</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ab48da315ebfff807cc0b248261fc542a">  362</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; centerline_points)</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>{</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">templated_local_curvatures</a>(centerline_points);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>}</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#aafc2b19933ed189b32a03d8462e69d46">  368</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a>(<span class="keyword">const</span> std::vector&lt;lanelet::ConstLanelet&gt;&amp; lanelets) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">local_curvatures</a>(<a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">concatenate_lanelets</a>(lanelets));</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>}</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>lanelet::BasicLineString2d </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">  373</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">concatenate_line_strings</a>(<span class="keyword">const</span> lanelet::BasicLineString2d&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>, </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>                                          <span class="keyword">const</span> lanelet::BasicLineString2d&amp; b)</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>{</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>  lanelet::BasicLineString2d out;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>  <span class="keywordtype">int</span> start_offset = 0;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.empty() &amp;&amp; !b.empty() &amp;&amp; <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a>(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.back(), b.front()) &lt; <a class="code hl_variable" href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">SPATIAL_EPSILON_M</a>) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    start_offset = 1;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  out.insert(out.end(), <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.begin(), <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>.end());</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>  out.insert(out.end(), b.begin() + start_offset, b.end());</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>}</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> P, <span class="keyword">class</span> A&gt;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>std::vector&lt;Eigen::Vector2d&gt; </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">  391</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a>(<span class="keyword">const</span> std::vector&lt;P,A&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>)</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>{</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>  Eigen::Vector2d diff;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>  Eigen::Vector2d vec_i_plus_1;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  Eigen::Vector2d vec_i_minus_1;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>      <span class="comment">// Compute forward derivative</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size() - 1) {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>      <span class="comment">// Compute backward derivative</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>      <span class="comment">// Else, compute centered derivative</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>      vec_i_plus_1 = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1];</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>      vec_i_minus_1 = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1];</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>      diff = (vec_i_plus_1 - vec_i_minus_1)/2.0;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    out.push_back(diff);</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>  }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>}</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>std::vector&lt;Eigen::Vector2d&gt; </div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">  419</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(<span class="keyword">const</span> lanelet::BasicLineString2d&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>)</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>{</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>}</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a0a097ad38dcc748e54bb065a9f77b1ae">  424</a></span>std::vector&lt;Eigen::Vector2d&gt; <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">compute_templated_finite_differences</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>}</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>std::vector&lt;double&gt; </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a527def551d1300fdb8d1b47230b50b18">  429</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(<span class="keyword">const</span> std::vector&lt;double&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>)</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>{</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>  <span class="keywordtype">double</span> diff;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span> </div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>      diff = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>];</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size() - 1) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>      diff = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1];</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/2.0;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    }</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    </div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    out.push_back(diff);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>}</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>std::vector&lt;Eigen::Vector2d&gt; </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a6704d3b310afef54189310c11300c4fc">  450</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">compute_finite_differences</a>(<span class="keyword">const</span> std::vector&lt;Eigen::Vector2d&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>,<span class="keyword">const</span> std::vector&lt;double&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>)</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>{</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size() != <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>.size()) {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Attempting to differentiate two unequal sized lists!&quot;</span>);</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  Eigen::Vector2d diff;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>.size() - 1) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      diff = (<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1])/(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + 1] - <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1]);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    }</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    out.push_back(diff);</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>  }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>}</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> P, <span class="keyword">class</span> A&gt;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">  475</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a>(<span class="keyword">const</span> std::vector&lt;P, A&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>) {</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  <span class="keywordtype">double</span> total = 0;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  <span class="keywordtype">double</span> diff = 0;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> =  0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> == 0) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>      out.push_back(0);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>      diff = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> - 1], <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>      total += diff;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>      out.push_back(total);</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>  }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>}</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a8613e0408964a148aef8cb034fa1b1ce">  493</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">compute_arc_lengths</a>(<span class="keyword">const</span> lanelet::BasicLineString2d&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>) {</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>}</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">  498</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">compute_arc_lengths</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>)</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>{</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">compute_templated_arc_lengths</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>);</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>}</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span><span class="keywordtype">double</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">  504</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">compute_euclidean_distance</a>(<span class="keyword">const</span> Eigen::Vector2d&amp; <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>, <span class="keyword">const</span> Eigen::Vector2d&amp; b)</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>{</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>  <span class="keywordflow">return</span> std::sqrt(std::pow(b[0] - <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>[0], 2) + std::pow(b[1] - <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>[1], 2));</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>}</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>std::vector&lt;Eigen::Vector2d&gt;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">  510</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">normalize_vectors</a>(<span class="keyword">const</span> std::vector&lt;Eigen::Vector2d&gt;&amp; vectors)</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>{</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  std::vector&lt;Eigen::Vector2d&gt; out;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> vec : vectors) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    out.push_back(vec.normalized());</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>  }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>}</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>std::vector&lt;double&gt; </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">  520</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">compute_magnitude_of_vectors</a>(<span class="keyword">const</span> std::vector&lt;Eigen::Vector2d&gt;&amp; vectors)</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>{</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> vec : vectors) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    out.push_back(vec.norm());</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>  }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span> </div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>}</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span><span class="keyword">template</span>&lt;<span class="keyword">class</span> P, <span class="keyword">class</span> A&gt;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">  532</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a>(<span class="keyword">const</span> std::vector&lt;P,A&gt;&amp; centerline)</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>{</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>  std::vector&lt;double&gt; out;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>  <span class="keywordflow">if</span> (centerline.empty())</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  std::vector&lt;Eigen::Vector2d&gt; tangents = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">carma_wm::geometry::compute_templated_finite_differences</a>(centerline);</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> tangent : tangents)</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>  {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    geometry_msgs::msg::Quaternion q;</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="comment">// Derive angle by cos theta = (u . v)/(||u| * ||v||)</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordtype">double</span> yaw = 0;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordtype">double</span> norm = tangent.norm();</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">if</span> (norm != 0.0) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>      <span class="keyword">auto</span> normalized_tanged = tangent / norm;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>      yaw = atan2(normalized_tanged[1], normalized_tanged[0]);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    out.push_back(yaw);</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  }</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>}</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">  559</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">compute_tangent_orientations</a>(<span class="keyword">const</span> lanelet::BasicLineString2d&amp; centerline)</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>{</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a>(centerline);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>}</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>std::vector&lt;double&gt;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a99c83b095273261648f894b27c2af5b7">  565</a></span><a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">compute_tangent_orientations</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; centerline)</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>{</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">compute_templated_tangent_orientations</a>(centerline);</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>}</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#ab51c08f5f937a6aa72b7490eeabed211">  570</a></span>Eigen::Isometry2d <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ab51c08f5f937a6aa72b7490eeabed211">build2dEigenTransform</a>(<span class="keyword">const</span> Eigen::Vector2d&amp; position, <span class="keyword">const</span> Eigen::Rotation2Dd&amp; rotation) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  Eigen::Vector2d scale(1.0, 1.0);</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  Eigen::Isometry2d tf;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>}</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">  576</a></span>Eigen::Isometry3d <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">build3dEigenTransform</a>(<span class="keyword">const</span> Eigen::Vector3d&amp; position, <span class="keyword">const</span> Eigen::Quaterniond&amp; rotation) {</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>  Eigen::Vector3d scale(1.0, 1.0, 1.0);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>  Eigen::Isometry3d tf;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>}</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a7eb61db7c8cef6d70093927f8f824cfc">  582</a></span>Eigen::Isometry3d <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">build3dEigenTransform</a>(<span class="keyword">const</span> Eigen::Vector3d&amp; position, <span class="keyword">const</span> Eigen::AngleAxisd&amp; rotation) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  Eigen::Vector3d scale(1.0, 1.0, 1.0);</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>  Eigen::Isometry3d tf;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  <span class="keywordflow">return</span> tf.fromPositionOrientationScale(position, rotation, scale);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>}</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">  588</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">point_to_point_yaw</a>(<span class="keyword">const</span> lanelet::BasicPoint2d&amp; cur_point, <span class="keyword">const</span> lanelet::BasicPoint2d&amp; next_point)</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>{</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keywordtype">double</span> dx = next_point[0] - cur_point[0];</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  <span class="keywordtype">double</span> dy = next_point[1] - cur_point[1];</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  <span class="keywordtype">double</span> yaw = atan2(dy, dx);</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keywordflow">return</span> yaw;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>}</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">  596</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">circular_arc_curvature</a>(<span class="keyword">const</span> lanelet::BasicPoint2d&amp; cur_point, <span class="keyword">const</span> lanelet::BasicPoint2d&amp; next_point)</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>{</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  <span class="keywordtype">double</span> dist = sqrt(pow(cur_point[0] - next_point[0], 2) + pow(cur_point[1] - next_point[1], 2));</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span> </div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  <span class="keywordtype">double</span> angle = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">point_to_point_yaw</a>(cur_point, next_point);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keywordtype">double</span> r = 0.5 * (dist / std::sin(angle));</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>  <span class="keywordtype">double</span> max_curvature = 100000;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <span class="keywordtype">double</span> curvature = std::min(1 / r, max_curvature);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>  <span class="keywordflow">return</span> curvature;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>}</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno"><a class="line" href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38">  610</a></span>std::vector&lt;double&gt; <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38">local_circular_arc_curvatures</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; points, <span class="keywordtype">int</span> lookahead) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>  std::vector&lt;double&gt; curvatures;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>  curvatures.reserve(points.size());</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keywordflow">if</span> (lookahead &lt;= 0) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;local_circular_arc_curvatures lookahead must be greater than 0&quot;</span>);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>  }</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span> </div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>  <span class="keywordflow">if</span> (points.empty()) {</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>  }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (points.size() == 1) {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    curvatures.push_back(0.0);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  }</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span> </div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; points.size() - 1; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  {</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordtype">size_t</span> next_point_index = <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> + lookahead;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="keywordflow">if</span> (next_point_index &gt;= points.size()) {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      next_point_index = points.size() - 1;</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordtype">double</span> cur = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">circular_arc_curvature</a>(points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>], points[next_point_index]);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    curvatures.push_back(fabs(cur));</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>  }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>  curvatures.push_back(curvatures.back());</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>  <span class="keywordflow">return</span> curvatures;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>}</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span> </div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>}  <span class="comment">// namespace geometry</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>}  <span class="comment">// namespace carma_wm</span></div>
<div class="ttc" id="aGeometry_8hpp_html"><div class="ttname"><a href="Geometry_8hpp.html">Geometry.hpp</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a></div><div class="ttdoc">Position in a track based coordinate system where the axis are downtrack and crosstrack....</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00034">TrackPos.hpp:35</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a60c766fa11f68e1d8832d79cd2d292c2"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">carma_wm::TrackPos::crosstrack</a></div><div class="ttdeci">double crosstrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00038">TrackPos.hpp:38</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a6ea99bbb9c6a75685ceaaf370d58ea24"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">carma_wm::TrackPos::downtrack</a></div><div class="ttdeci">double downtrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00037">TrackPos.hpp:37</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a021ce676d4f65c79ee147ca433a0db0a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a021ce676d4f65c79ee147ca433a0db0a">carma_wm::geometry::build3dEigenTransform</a></div><div class="ttdeci">Eigen::Isometry3d build3dEigenTransform(const Eigen::Vector3d &amp;position, const Eigen::Quaterniond &amp;rotation)</div><div class="ttdoc">Builds a 3D Eigen coordinate frame transform with not applied scaling (only translation and rotation)...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00576">Geometry.cpp:576</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a126f739493756f0eb84183ea22912b93"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a126f739493756f0eb84183ea22912b93">carma_wm::geometry::compute_templated_tangent_orientations</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_templated_tangent_orientations(const std::vector&lt; P, A &gt; &amp;centerline)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00532">Geometry.cpp:532</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a1f7db96beb74c526d4b502265e7c1e82"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">carma_wm::geometry::objectToMapPolygon</a></div><div class="ttdeci">lanelet::BasicPolygon2d objectToMapPolygon(const geometry_msgs::msg::Pose &amp;pose, const geometry_msgs::msg::Vector3 &amp;size)</div><div class="ttdoc">Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00289">Geometry.cpp:289</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a2bae0fef2b76bda05a8ba1f1382f027d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a2bae0fef2b76bda05a8ba1f1382f027d">carma_wm::geometry::local_curvatures</a></div><div class="ttdeci">std::vector&lt; double &gt; local_curvatures(const lanelet::BasicLineString2d &amp;centerline_points)</div><div class="ttdoc">Returns a list of local (computed by discrete derivative) curvatures for the input centerlines....</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00356">Geometry.cpp:356</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a2d95e2615fd8cbd681414e997bb513aa"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a2d95e2615fd8cbd681414e997bb513aa">carma_wm::geometry::SPATIAL_EPSILON_M</a></div><div class="ttdeci">constexpr double SPATIAL_EPSILON_M</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00028">Geometry.cpp:28</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a31ddfa96008060a7c10c2bbd08a5739d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a31ddfa96008060a7c10c2bbd08a5739d">carma_wm::geometry::rpyFromQuaternion</a></div><div class="ttdeci">void rpyFromQuaternion(const tf2::Quaternion &amp;q, double &amp;roll, double &amp;pitch, double &amp;yaw)</div><div class="ttdoc">Extract extrinsic roll-pitch-yaw from quaternion.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00052">Geometry.cpp:52</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a4e12c2971926486d1447e44e978f8d4d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a4e12c2971926486d1447e44e978f8d4d">carma_wm::geometry::compute_templated_arc_lengths</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_templated_arc_lengths(const std::vector&lt; P, A &gt; &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00475">Geometry.cpp:475</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a50c966bd5e6ed00ea0b1a70e93cd0d4a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a">carma_wm::geometry::safeAcos</a></div><div class="ttdeci">double safeAcos(double x)</div><div class="ttdoc">acos method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to preve...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00034">Geometry.cpp:34</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a56bddbee1116988543192b2f235a692c"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a56bddbee1116988543192b2f235a692c">carma_wm::geometry::normalize_vectors</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; normalize_vectors(const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</div><div class="ttdoc">Normalize the vectors in the input list such that their magnitudes = 1.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00510">Geometry.cpp:510</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a6f156f9d93ac8bd84fa6663b1efa5db4"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">carma_wm::geometry::point_to_point_yaw</a></div><div class="ttdeci">double point_to_point_yaw(const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</div><div class="ttdoc">Computes the 2d orientation of the vector from the provided start point to end point.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00588">Geometry.cpp:588</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a906a93ecedb3430179178f7b44d0b2e8"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a906a93ecedb3430179178f7b44d0b2e8">carma_wm::geometry::circular_arc_curvature</a></div><div class="ttdeci">double circular_arc_curvature(const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</div><div class="ttdoc">Computes the curvature of a circular arc that passes through the two provided points....</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00596">Geometry.cpp:596</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a9bc48b810ba18270fcc21674b55922f0"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a9bc48b810ba18270fcc21674b55922f0">carma_wm::geometry::compute_euclidean_distance</a></div><div class="ttdeci">double compute_euclidean_distance(const Eigen::Vector2d &amp;a, const Eigen::Vector2d &amp;b)</div><div class="ttdoc">Compute the Euclidean distance between the two points.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00504">Geometry.cpp:504</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ab51c08f5f937a6aa72b7490eeabed211"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ab51c08f5f937a6aa72b7490eeabed211">carma_wm::geometry::build2dEigenTransform</a></div><div class="ttdeci">Eigen::Isometry2d build2dEigenTransform(const Eigen::Vector2d &amp;position, const Eigen::Rotation2Dd &amp;rotation)</div><div class="ttdoc">Builds a 2D Eigen coordinate frame transform with not applied scaling (only translation and rotation)...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00570">Geometry.cpp:570</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ab675b2b8862a2ba9c139a8b5b353b846"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">carma_wm::geometry::matchSegment</a></div><div class="ttdeci">std::tuple&lt; TrackPos, lanelet::BasicSegment2d &gt; matchSegment(const lanelet::BasicPoint2d &amp;p, const lanelet::BasicLineString2d &amp;line_string)</div><div class="ttdoc">Get the TrackPos of the provided point along the linestring and the segment of the line string which ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00187">Geometry.cpp:187</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_abab233f090920664b21fafd83065a77b"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#abab233f090920664b21fafd83065a77b">carma_wm::geometry::safeAsin</a></div><div class="ttdeci">double safeAsin(double x)</div><div class="ttdoc">asin method that caps the input x value for 1 or -1 to avoid undefined output. This is meant to preve...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00045">Geometry.cpp:45</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_abab7ba4e773f03d6cfc09492742c6b7b"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b">carma_wm::geometry::getAngleBetweenVectors</a></div><div class="ttdeci">double getAngleBetweenVectors(const Eigen::Vector2d &amp;vec1, const Eigen::Vector2d &amp;vec2)</div><div class="ttdoc">Calculates the angle between two vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00065">Geometry.cpp:65</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ad8a3ee0bf06f85a6e7a8b5097251da2b"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ad8a3ee0bf06f85a6e7a8b5097251da2b">carma_wm::geometry::compute_tangent_orientations</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_tangent_orientations(const lanelet::BasicLineString2d &amp;centerline)</div><div class="ttdoc">Compute an approximate orientation for the vehicle at each point along the provided centerline.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00559">Geometry.cpp:559</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adb8e11194693e77d9be753dd84d15524"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adb8e11194693e77d9be753dd84d15524">carma_wm::geometry::concatenate_lanelets</a></div><div class="ttdeci">lanelet::BasicLineString2d concatenate_lanelets(const std::vector&lt; lanelet::ConstLanelet &gt; &amp;lanelets)</div><div class="ttdoc">Helper function to a list of lanelets together and return the result. Neither LineString is modified ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00316">Geometry.cpp:316</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adebf4a245f31404e822133b23e061ed3"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adebf4a245f31404e822133b23e061ed3">carma_wm::geometry::templated_local_curvatures</a></div><div class="ttdeci">std::vector&lt; double &gt; templated_local_curvatures(const std::vector&lt; P, A &gt; &amp;centerline_points)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00333">Geometry.cpp:333</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_adf1c6b7f1e33569b45074e4e5bbeff1d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#adf1c6b7f1e33569b45074e4e5bbeff1d">carma_wm::geometry::compute_arc_lengths</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_arc_lengths(const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;data)</div><div class="ttdoc">Compute the arc length at each point around the curve.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00498">Geometry.cpp:498</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae0a06818149f7430fee80e295ef04548"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548">carma_wm::geometry::selectFirstSegment</a></div><div class="ttdeci">bool selectFirstSegment(const TrackPos &amp;first_seg_trackPos, const TrackPos &amp;second_seg_trackPos, double first_seg_length, double second_seg_length)</div><div class="ttdoc">Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00156">Geometry.cpp:156</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae7d5ca280140dce2bf7bcfb78bdfd55d"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae7d5ca280140dce2bf7bcfb78bdfd55d">carma_wm::geometry::concatenate_line_strings</a></div><div class="ttdeci">lanelet::BasicLineString2d concatenate_line_strings(const lanelet::BasicLineString2d &amp;l1, const lanelet::BasicLineString2d &amp;l2)</div><div class="ttdoc">Helper function to concatenate 2 linestrings together and return the result. Neither LineString is mo...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00373">Geometry.cpp:373</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ae8af6cd9c27d35849c12959ab9f1b9c3"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ae8af6cd9c27d35849c12959ab9f1b9c3">carma_wm::geometry::compute_templated_finite_differences</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; compute_templated_finite_differences(const std::vector&lt; P, A &gt; &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00391">Geometry.cpp:391</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aeaa3d6346b083b5fd1b7c699fab5bb5a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aeaa3d6346b083b5fd1b7c699fab5bb5a">carma_wm::geometry::computeCurvature</a></div><div class="ttdeci">double computeCurvature(const lanelet::BasicPoint2d &amp;p1, const lanelet::BasicPoint2d &amp;p2, const lanelet::BasicPoint2d &amp;p3)</div><div class="ttdoc">Function for computing curvature from 3 points.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00276">Geometry.cpp:276</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aebce986f21c117983313292d5e82b50a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a></div><div class="ttdeci">TrackPos trackPos(const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</div><div class="ttdoc">Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00120">Geometry.cpp:120</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aec227caee1708506f7fec3561538ef38"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aec227caee1708506f7fec3561538ef38">carma_wm::geometry::local_circular_arc_curvatures</a></div><div class="ttdeci">std::vector&lt; double &gt; local_circular_arc_curvatures(const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;points, int lookahead)</div><div class="ttdoc">Computes the curvature of each point in the provided list by calling circular_arc_curvature using tha...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00610">Geometry.cpp:610</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aef0b6f2362a5ebbf0d5dcb3b7ff78619"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aef0b6f2362a5ebbf0d5dcb3b7ff78619">carma_wm::geometry::compute_finite_differences</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector2d &gt; compute_finite_differences(const lanelet::BasicLineString2d &amp;data)</div><div class="ttdoc">Use finite differences methods to compute the derivative of the input data set with respect to index ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00419">Geometry.cpp:419</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_afad31f5a6dcbee8828814d406384635f"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#afad31f5a6dcbee8828814d406384635f">carma_wm::geometry::compute_magnitude_of_vectors</a></div><div class="ttdeci">std::vector&lt; double &gt; compute_magnitude_of_vectors(const std::vector&lt; Eigen::Vector2d &gt; &amp;vectors)</div><div class="ttdoc">Compute the magnitude of each vector in the input list.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00520">Geometry.cpp:520</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html"><div class="ttname"><a href="namespacecarma__wm.html">carma_wm</a></div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00036">CARMAWorldModel.hpp:37</a></div></div>
<div class="ttc" id="anamespacelanelet_html"><div class="ttname"><a href="namespacelanelet.html">lanelet</a></div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8hpp_source.html#l00038">MapConformer.hpp:39</a></div></div>
<div class="ttc" id="anamespacemotion__computation_1_1conversion_html_a9884e63460f3d5f5e2b755354984dc29"><div class="ttname"><a href="namespacemotion__computation_1_1conversion.html#a9884e63460f3d5f5e2b755354984dc29">motion_computation::conversion::convert</a></div><div class="ttdeci">void convert(const carma_v2x_msgs::msg::PSM &amp;in_msg, carma_perception_msgs::msg::ExternalObject &amp;out_msg, const std::string &amp;map_frame_id, double pred_period, double pred_step_size, const lanelet::projection::LocalFrameProjector &amp;map_projector, const tf2::Quaternion &amp;ned_in_map_rotation, rclcpp::node_interfaces::NodeClockInterface::SharedPtr node_clock)</div><div class="ttdef"><b>Definition:</b> <a href="psm__to__external__object__convertor_8cpp_source.html#l00019">psm_to_external_object_convertor.cpp:19</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_a05bdb238bfbf3836fb0aa69c5aa1bb48"><div class="ttname"><a href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">process_traj_logs.y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00129">process_traj_logs.py:129</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ab81a05c3d1d100117b6781d7dedf8a29"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">process_traj_logs.point</a></div><div class="ttdeci">point</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00126">process_traj_logs.py:126</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ac70c24fdb487f1aed5b846490501b5f1"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">process_traj_logs.data</a></div><div class="ttdeci">list data</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00041">process_traj_logs.py:41</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_af3ba6144a2d35a4990f1a8d04632a052"><div class="ttname"><a href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">process_traj_logs.x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00128">process_traj_logs.py:128</a></div></div>
<div class="ttc" id="apointer_8h_html_aeeddce917cf130d62c370b8f216026dd"><div class="ttname"><a href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a></div><div class="ttdeci">const GenericPointer&lt; typename T::ValueType &gt; T2 T::AllocatorType &amp; a</div><div class="ttdef"><b>Definition:</b> <a href="pointer_8h_source.html#l01121">pointer.h:1121</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_063394ac95ddab6826ca68be56e39eae.html">carma_wm</a></li><li class="navelem"><a class="el" href="dir_bed7bb81c6bc1fae1bac689cbf6acc02.html">src</a></li><li class="navelem"><a class="el" href="Geometry_8cpp.html">Geometry.cpp</a></li>
    <li class="footer">Generated on Sun Jun 4 2023 23:39:00 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
