<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: localization_manager::LocalizationManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classlocalization__manager_1_1LocalizationManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classlocalization__manager_1_1LocalizationManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">localization_manager::LocalizationManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Primary logic class for the localization manager node.  
 <a href="classlocalization__manager_1_1LocalizationManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for localization_manager::LocalizationManager:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager__coll__graph.png" border="0" usemap="#alocalization__manager_1_1LocalizationManager_coll__map" alt="Collaboration graph"/></div>
<map name="alocalization__manager_1_1LocalizationManager_coll__map" id="alocalization__manager_1_1LocalizationManager_coll__map">
<area shape="rect" title="Primary logic class for the localization manager node." alt="" coords="1655,696,1833,979"/>
<area shape="rect" title=" " alt="" coords="5,431,139,523"/>
<area shape="rect" title=" " alt="" coords="181,424,336,531"/>
<area shape="rect" title=" " alt="" coords="361,424,589,531"/>
<area shape="rect" title=" " alt="" coords="613,424,832,531"/>
<area shape="rect" href="structlocalization__manager_1_1LocalizationManagerConfig.html" title="Struct to store the configuration settings for the LocalizationManager class." alt="" coords="857,431,1039,523"/>
<area shape="rect" title=" " alt="" coords="726,20,786,97"/>
<area shape="rect" href="classint.html" title=" " alt="" coords="993,20,1031,97"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html" title="Class defining the state transition table behavior for the LocalizationManager." alt="" coords="1233,336,1436,619"/>
<area shape="rect" title=" " alt="" coords="1135,20,1257,97"/>
<area shape="rect" title=" " alt="" coords="1281,20,1388,97"/>
<area shape="rect" title=" " alt="" coords="1413,5,1659,112"/>
<area shape="rect" title=" " alt="" coords="1461,439,1619,516"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="1643,439,1690,516"/>
<area shape="rect" title=" " alt="" coords="1714,431,1905,523"/>
<area shape="rect" title=" " alt="" coords="1929,439,2084,516"/>
<area shape="rect" title=" " alt="" coords="2108,439,2188,516"/>
<area shape="rect" title=" " alt="" coords="2213,439,2270,516"/>
<area shape="rect" title=" " alt="" coords="2294,431,2482,523"/>
<area shape="rect" title=" " alt="" coords="2506,424,2697,531"/>
<area shape="rect" title=" " alt="" coords="2721,431,2882,523"/>
<area shape="rect" title=" " alt="" coords="2905,439,2980,516"/>
<area shape="rect" title=" " alt="" coords="3014,439,3130,516"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac75e2c2af5e2a75a6ee3ce23ce2a290d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">PosePublisher</a> = std::function&lt; void(const geometry_msgs::msg::PoseStamped &amp;)&gt;</td></tr>
<tr class="separator:ac75e2c2af5e2a75a6ee3ce23ce2a290d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7191d344d1c87a83903453ab82eb76"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">ManagedInitialPosePublisher</a> = std::function&lt; void(const geometry_msgs::msg::PoseWithCovarianceStamped &amp;)&gt;</td></tr>
<tr class="separator:aef7191d344d1c87a83903453ab82eb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5d0959c7592ae97ad032a3e1e9f2a3"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">StatePublisher</a> = std::function&lt; void(const carma_localization_msgs::msg::LocalizationStatusReport &amp;)&gt;</td></tr>
<tr class="separator:a7b5d0959c7592ae97ad032a3e1e9f2a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad90c46a0d8ac4dfa2a76eb3a65bd0af"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">TimerUniquePtr</a> = std::unique_ptr&lt; carma_ros2_utils::timers::Timer &gt;</td></tr>
<tr class="separator:aad90c46a0d8ac4dfa2a76eb3a65bd0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acbb7d81be472c3ec96f3d700b7ca823c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#acbb7d81be472c3ec96f3d700b7ca823c">LocalizationManager</a> (<a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">PosePublisher</a> pose_pub, <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">StatePublisher</a> state_pub, <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">ManagedInitialPosePublisher</a> initialpose_pub, const <a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a> &amp;config, rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger, std::unique_ptr&lt; carma_ros2_utils::timers::TimerFactory &gt; timer_factory)</td></tr>
<tr class="memdesc:acbb7d81be472c3ec96f3d700b7ca823c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classlocalization__manager_1_1LocalizationManager.html#acbb7d81be472c3ec96f3d700b7ca823c">More...</a><br /></td></tr>
<tr class="separator:acbb7d81be472c3ec96f3d700b7ca823c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2804818f7ee388d2eca7bcbd3e27f908"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a2804818f7ee388d2eca7bcbd3e27f908">gnssPoseCallback</a> (const geometry_msgs::msg::PoseStamped::SharedPtr msg)</td></tr>
<tr class="memdesc:a2804818f7ee388d2eca7bcbd3e27f908"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for new GNSS messages.  <a href="classlocalization__manager_1_1LocalizationManager.html#a2804818f7ee388d2eca7bcbd3e27f908">More...</a><br /></td></tr>
<tr class="separator:a2804818f7ee388d2eca7bcbd3e27f908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027f5aab97b4a77bdbea02a2cf585115"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a027f5aab97b4a77bdbea02a2cf585115">poseAndStatsCallback</a> (const geometry_msgs::msg::PoseStamped::ConstPtr pose, const autoware_msgs::msg::NDTStat::ConstPtr stats)</td></tr>
<tr class="memdesc:a027f5aab97b4a77bdbea02a2cf585115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synced callback for the NDT reported pose and status messages.  <a href="classlocalization__manager_1_1LocalizationManager.html#a027f5aab97b4a77bdbea02a2cf585115">More...</a><br /></td></tr>
<tr class="separator:a027f5aab97b4a77bdbea02a2cf585115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4c9b82f1d519c27cc82bc5c9231121"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a9e4c9b82f1d519c27cc82bc5c9231121">systemAlertCallback</a> (const carma_msgs::msg::SystemAlert::SharedPtr alert)</td></tr>
<tr class="memdesc:a9e4c9b82f1d519c27cc82bc5c9231121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for SystemAlert data. Used to check for lidar failure.  <a href="classlocalization__manager_1_1LocalizationManager.html#a9e4c9b82f1d519c27cc82bc5c9231121">More...</a><br /></td></tr>
<tr class="separator:a9e4c9b82f1d519c27cc82bc5c9231121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d2dc2970c35c4d6a12293ec240e84a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a43d2dc2970c35c4d6a12293ec240e84a">initialPoseCallback</a> (const geometry_msgs::msg::PoseWithCovarianceStamped::SharedPtr msg)</td></tr>
<tr class="memdesc:a43d2dc2970c35c4d6a12293ec240e84a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for the initial pose provided by Rviz or some external localization initializer.  <a href="classlocalization__manager_1_1LocalizationManager.html#a43d2dc2970c35c4d6a12293ec240e84a">More...</a><br /></td></tr>
<tr class="separator:a43d2dc2970c35c4d6a12293ec240e84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ce2b35dcab57bd0abc4ad9c10f5a24e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a0ce2b35dcab57bd0abc4ad9c10f5a24e">posePubTick</a> ()</td></tr>
<tr class="memdesc:a0ce2b35dcab57bd0abc4ad9c10f5a24e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer callback that controls the publication of the selected pose and status report.  <a href="classlocalization__manager_1_1LocalizationManager.html#a0ce2b35dcab57bd0abc4ad9c10f5a24e">More...</a><br /></td></tr>
<tr class="separator:a0ce2b35dcab57bd0abc4ad9c10f5a24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e91016dd16e328bec5041afaf5bc0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c">stateTransitionCallback</a> (<a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a> prev_state, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a> new_state, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4a">LocalizationSignal</a> signal)</td></tr>
<tr class="memdesc:a37e91016dd16e328bec5041afaf5bc0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for when a new state was triggered. Allows creation of entry/exit behavior for states.  <a href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c">More...</a><br /></td></tr>
<tr class="separator:a37e91016dd16e328bec5041afaf5bc0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a180b8d484c93d7faea1a707a0d586a79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79">timerCallback</a> (const <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a> origin_state)</td></tr>
<tr class="memdesc:a180b8d484c93d7faea1a707a0d586a79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for timeouts. Used to trigger timeout signals for the state machine.  <a href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79">More...</a><br /></td></tr>
<tr class="separator:a180b8d484c93d7faea1a707a0d586a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14aa24430db99e65ffc1fa52aa34dd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ab14aa24430db99e65ffc1fa52aa34dd0">getState</a> () const</td></tr>
<tr class="memdesc:ab14aa24430db99e65ffc1fa52aa34dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current localization state.  <a href="classlocalization__manager_1_1LocalizationManager.html#ab14aa24430db99e65ffc1fa52aa34dd0">More...</a><br /></td></tr>
<tr class="separator:ab14aa24430db99e65ffc1fa52aa34dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83866ff4e7229989b0a265a98e3d50b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a83866ff4e7229989b0a265a98e3d50b4">clearTimers</a> ()</td></tr>
<tr class="memdesc:a83866ff4e7229989b0a265a98e3d50b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the expired timers from the memory of this scheduler.  <a href="classlocalization__manager_1_1LocalizationManager.html#a83866ff4e7229989b0a265a98e3d50b4">More...</a><br /></td></tr>
<tr class="separator:a83866ff4e7229989b0a265a98e3d50b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26090538f61ea866d2e4729ab6a0a91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ad26090538f61ea866d2e4729ab6a0a91">setConfig</a> (const <a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a> &amp;config)</td></tr>
<tr class="memdesc:ad26090538f61ea866d2e4729ab6a0a91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set config.  <a href="classlocalization__manager_1_1LocalizationManager.html#ad26090538f61ea866d2e4729ab6a0a91">More...</a><br /></td></tr>
<tr class="separator:ad26090538f61ea866d2e4729ab6a0a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ace5b1b34adeeab50c2b3d47591e6c7c9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9">computeNDTFreq</a> (const rclcpp::Time &amp;new_stamp)</td></tr>
<tr class="memdesc:ace5b1b34adeeab50c2b3d47591e6c7c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to both compute the NDT Frequency and update the previous pose timestamp.  <a href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9">More...</a><br /></td></tr>
<tr class="separator:ace5b1b34adeeab50c2b3d47591e6c7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a06b312cdda09ab9b945daf69710c66"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66">computeFreq</a> (const rclcpp::Time &amp;old_stamp, const rclcpp::Time &amp;new_stamp) const</td></tr>
<tr class="memdesc:a6a06b312cdda09ab9b945daf69710c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to compute the instantaneous frequency between two times.  <a href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66">More...</a><br /></td></tr>
<tr class="separator:a6a06b312cdda09ab9b945daf69710c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357d15f4b553adac7c730e66a0b99cbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf">nextId</a> ()</td></tr>
<tr class="memdesc:a357d15f4b553adac7c730e66a0b99cbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the next id to be used for a timer.  <a href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf">More...</a><br /></td></tr>
<tr class="separator:a357d15f4b553adac7c730e66a0b99cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa33a58bf865e068cde48d411f16e1299"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">PosePublisher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aa33a58bf865e068cde48d411f16e1299">pose_pub_</a></td></tr>
<tr class="separator:aa33a58bf865e068cde48d411f16e1299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93edbdcc39c9116097b2ccd3249852c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">StatePublisher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a93edbdcc39c9116097b2ccd3249852c5">state_pub_</a></td></tr>
<tr class="separator:a93edbdcc39c9116097b2ccd3249852c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad607aaab0ad2cc47bc4793106f54616e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">ManagedInitialPosePublisher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ad607aaab0ad2cc47bc4793106f54616e">initialpose_pub_</a></td></tr>
<tr class="separator:ad607aaab0ad2cc47bc4793106f54616e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4caa21b1d191857bc60a786ead351554"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a></td></tr>
<tr class="separator:a4caa21b1d191857bc60a786ead351554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f6a02f44f6812384262295e1e8ad132"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlocalization__manager_1_1LocalizationTransitionTable.html">LocalizationTransitionTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a></td></tr>
<tr class="separator:a8f6a02f44f6812384262295e1e8ad132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab81bcd2a98e3d1194a8fd1f2f5794bf5"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; rclcpp::Time &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a></td></tr>
<tr class="separator:ab81bcd2a98e3d1194a8fd1f2f5794bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d56bb3fcbc47135a84653fb202dd47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> = 0</td></tr>
<tr class="separator:a06d56bb3fcbc47135a84653fb202dd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c9636657b5d522204253456836b13b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a39c9636657b5d522204253456836b13b">is_sequential_</a> = false</td></tr>
<tr class="separator:a39c9636657b5d522204253456836b13b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4728052763f8223186c97e3169126062"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; geometry_msgs::msg::PoseStamped &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a></td></tr>
<tr class="separator:a4728052763f8223186c97e3169126062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd6886f83ce04f8d2c49ca0b85b9a9a"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; tf2::Vector3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a></td></tr>
<tr class="separator:aafd6886f83ce04f8d2c49ca0b85b9a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e5f615aa35031d88ce289d832dcb02"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; geometry_msgs::msg::PoseStamped &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a></td></tr>
<tr class="separator:ac4e5f615aa35031d88ce289d832dcb02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd9faf8ff9460cff6066dd2323453e8"><td class="memItemLeft" align="right" valign="top">rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a1fd9faf8ff9460cff6066dd2323453e8">logger_</a></td></tr>
<tr class="separator:a1fd9faf8ff9460cff6066dd2323453e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b70bd02d34a73dfc7b05ae9e63d0502"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a6b70bd02d34a73dfc7b05ae9e63d0502">mutex_</a></td></tr>
<tr class="separator:a6b70bd02d34a73dfc7b05ae9e63d0502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673a02a2282dcbeff6d9df5f91c1f8d6"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; carma_ros2_utils::timers::TimerFactory &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a></td></tr>
<tr class="separator:a673a02a2282dcbeff6d9df5f91c1f8d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae067b5ec0c115080299c03529f3b2861"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, std::pair&lt; <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">TimerUniquePtr</a>, <a class="el" href="classbool.html">bool</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a></td></tr>
<tr class="separator:ae067b5ec0c115080299c03529f3b2861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5798343089ac239263eb82275aad228"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">TimerUniquePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a></td></tr>
<tr class="separator:ad5798343089ac239263eb82275aad228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f2d3375a21dea78754e388dac1997e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a56f2d3375a21dea78754e388dac1997e">next_id_</a> = 0</td></tr>
<tr class="separator:a56f2d3375a21dea78754e388dac1997e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6c443414a7d5e417e365ef0bd0c254"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a></td></tr>
<tr class="separator:a1b6c443414a7d5e417e365ef0bd0c254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d753ea64cf1496b644e9245e13f387c"><td class="memItemLeft" align="right" valign="top">rcl_clock_type_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a> = RCL_SYSTEM_TIME</td></tr>
<tr class="separator:a9d753ea64cf1496b644e9245e13f387c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a852f8fa433424784ce64e712a5f1a9e6"><td class="memItemLeft" align="right" valign="top">static const std::unordered_set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a852f8fa433424784ce64e712a5f1a9e6">LIDAR_FAILURE_STRINGS</a></td></tr>
<tr class="memdesc:a852f8fa433424784ce64e712a5f1a9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The set of strings which mark a lidar failure in a system alert message.  <a href="classlocalization__manager_1_1LocalizationManager.html#a852f8fa433424784ce64e712a5f1a9e6">More...</a><br /></td></tr>
<tr class="separator:a852f8fa433424784ce64e712a5f1a9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Primary logic class for the localization manager node. </p>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00040">40</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aef7191d344d1c87a83903453ab82eb76" name="aef7191d344d1c87a83903453ab82eb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7191d344d1c87a83903453ab82eb76">&#9670;&nbsp;</a></span>ManagedInitialPosePublisher</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">localization_manager::LocalizationManager::ManagedInitialPosePublisher</a> =  std::function&lt;void(const geometry_msgs::msg::PoseWithCovarianceStamped &amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00045">45</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

</div>
</div>
<a id="ac75e2c2af5e2a75a6ee3ce23ce2a290d" name="ac75e2c2af5e2a75a6ee3ce23ce2a290d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac75e2c2af5e2a75a6ee3ce23ce2a290d">&#9670;&nbsp;</a></span>PosePublisher</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">localization_manager::LocalizationManager::PosePublisher</a> =  std::function&lt;void(const geometry_msgs::msg::PoseStamped &amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00044">44</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

</div>
</div>
<a id="a7b5d0959c7592ae97ad032a3e1e9f2a3" name="a7b5d0959c7592ae97ad032a3e1e9f2a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5d0959c7592ae97ad032a3e1e9f2a3">&#9670;&nbsp;</a></span>StatePublisher</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">localization_manager::LocalizationManager::StatePublisher</a> =  std::function&lt;void(const carma_localization_msgs::msg::LocalizationStatusReport &amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00046">46</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

</div>
</div>
<a id="aad90c46a0d8ac4dfa2a76eb3a65bd0af" name="aad90c46a0d8ac4dfa2a76eb3a65bd0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad90c46a0d8ac4dfa2a76eb3a65bd0af">&#9670;&nbsp;</a></span>TimerUniquePtr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">localization_manager::LocalizationManager::TimerUniquePtr</a> =  std::unique_ptr&lt;carma_ros2_utils::timers::Timer&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00047">47</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acbb7d81be472c3ec96f3d700b7ca823c" name="acbb7d81be472c3ec96f3d700b7ca823c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb7d81be472c3ec96f3d700b7ca823c">&#9670;&nbsp;</a></span>LocalizationManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">localization_manager::LocalizationManager::LocalizationManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">PosePublisher</a>&#160;</td>
          <td class="paramname"><em>pose_pub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">StatePublisher</a>&#160;</td>
          <td class="paramname"><em>state_pub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">ManagedInitialPosePublisher</a>&#160;</td>
          <td class="paramname"><em>initialpose_pub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; carma_ros2_utils::timers::TimerFactory &gt;&#160;</td>
          <td class="paramname"><em>timer_factory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose_pub</td><td>A callback to trigger publication of the selected pose </td></tr>
    <tr><td class="paramname">state_pub</td><td>A callback to trigger publication of the localization state </td></tr>
    <tr><td class="paramname">initialpose_pub</td><td>A callback to trigger publication of the intial pose </td></tr>
    <tr><td class="paramname">config</td><td>The configuration settings to use for this manager </td></tr>
    <tr><td class="paramname">logger</td><td>Logger interface of node calling manager object </td></tr>
    <tr><td class="paramname">node_timers</td><td>Timer interface of node calling manager object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00026">26</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>        : <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aa33a58bf865e068cde48d411f16e1299">pose_pub_</a>(pose_pub), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a93edbdcc39c9116097b2ccd3249852c5">state_pub_</a>(state_pub), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad607aaab0ad2cc47bc4793106f54616e">initialpose_pub_</a>(initialpose_pub), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>(config), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1fd9faf8ff9460cff6066dd2323453e8">logger_</a>(logger), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>(std::move(timer_factory)), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">LocalizerMode</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_mode</a>))</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>    {</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#af6e9734499a3487b0f6c732466804a66">setTransitionCallback</a>(std::bind(&amp;<a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c">LocalizationManager::stateTransitionCallback</a>, <span class="keyword">this</span>,</div>
<div class="line"><span class="lineno">   36</span>                                                          std::placeholders::_1, std::placeholders::_2,</div>
<div class="line"><span class="lineno">   37</span>                                                          std::placeholders::_3));</div>
<div class="line"><span class="lineno">   38</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a> = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;now().get_clock_type();</div>
<div class="line"><span class="lineno">   39</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a1fd9faf8ff9460cff6066dd2323453e8"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a1fd9faf8ff9460cff6066dd2323453e8">localization_manager::LocalizationManager::logger_</a></div><div class="ttdeci">rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00157">LocalizationManager.hpp:157</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a37e91016dd16e328bec5041afaf5bc0c"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c">localization_manager::LocalizationManager::stateTransitionCallback</a></div><div class="ttdeci">void stateTransitionCallback(LocalizationState prev_state, LocalizationState new_state, LocalizationSignal signal)</div><div class="ttdoc">Callback for when a new state was triggered. Allows creation of entry/exit behavior for states.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00227">LocalizationManager.cpp:227</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a4caa21b1d191857bc60a786ead351554"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">localization_manager::LocalizationManager::config_</a></div><div class="ttdeci">LocalizationManagerConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00144">LocalizationManager.hpp:144</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a673a02a2282dcbeff6d9df5f91c1f8d6"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">localization_manager::LocalizationManager::timer_factory_</a></div><div class="ttdeci">std::unique_ptr&lt; carma_ros2_utils::timers::TimerFactory &gt; timer_factory_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00161">LocalizationManager.hpp:161</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a8f6a02f44f6812384262295e1e8ad132"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">localization_manager::LocalizationManager::transition_table_</a></div><div class="ttdeci">LocalizationTransitionTable transition_table_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00146">LocalizationManager.hpp:146</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a93edbdcc39c9116097b2ccd3249852c5"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a93edbdcc39c9116097b2ccd3249852c5">localization_manager::LocalizationManager::state_pub_</a></div><div class="ttdeci">StatePublisher state_pub_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00141">LocalizationManager.hpp:141</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a9d753ea64cf1496b644e9245e13f387c"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">localization_manager::LocalizationManager::timer_clock_type_</a></div><div class="ttdeci">rcl_clock_type_t timer_clock_type_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00166">LocalizationManager.hpp:166</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_aa33a58bf865e068cde48d411f16e1299"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#aa33a58bf865e068cde48d411f16e1299">localization_manager::LocalizationManager::pose_pub_</a></div><div class="ttdeci">PosePublisher pose_pub_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00140">LocalizationManager.hpp:140</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ad607aaab0ad2cc47bc4793106f54616e"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ad607aaab0ad2cc47bc4793106f54616e">localization_manager::LocalizationManager::initialpose_pub_</a></div><div class="ttdeci">ManagedInitialPosePublisher initialpose_pub_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00142">LocalizationManager.hpp:142</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationTransitionTable_html_af6e9734499a3487b0f6c732466804a66"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationTransitionTable.html#af6e9734499a3487b0f6c732466804a66">localization_manager::LocalizationTransitionTable::setTransitionCallback</a></div><div class="ttdeci">void setTransitionCallback(TransitionCallback cb)</div><div class="ttdoc">Callback setting function. The provided callback will be triggered any time the current state changes...</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTransitionTable_8cpp_source.html#l00247">LocalizationTransitionTable.cpp:247</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a9b86b848ab2c2216f0987be7c5007b70"><div class="ttname"><a href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">localization_manager::LocalizerMode</a></div><div class="ttdeci">LocalizerMode</div><div class="ttdoc">Enum describing the possible operational modes of the LocalizationManager.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTypes_8hpp_source.html#l00025">LocalizationTypes.hpp:26</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a4a33f8febd8d330d70727a20dd242550"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_manager::LocalizationManagerConfig::localization_mode</a></div><div class="ttdeci">int localization_mode</div><div class="ttdoc">Localization mode to use.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00047">LocalizationManagerConfig.hpp:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00247">localization_manager::LocalizationTransitionTable::setTransitionCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00166">timer_clock_type_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00161">timer_factory_</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_acbb7d81be472c3ec96f3d700b7ca823c_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_acbb7d81be472c3ec96f3d700b7ca823c_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_acbb7d81be472c3ec96f3d700b7ca823c_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_acbb7d81be472c3ec96f3d700b7ca823c_cgraph">
<area shape="rect" title="Constructor." alt="" coords="5,99,152,155"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#af6e9734499a3487b0f6c732466804a66" title="Callback setting function. The provided callback will be triggered any time the current state changes..." alt="" coords="200,59,387,115"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c" title="Callback for when a new state was triggered. Allows creation of entry/exit behavior for states." alt="" coords="211,139,375,195"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf" title="Generates the next id to be used for a timer." alt="" coords="435,99,581,155"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79" title="Callback for timeouts. Used to trigger timeout signals for the state machine." alt="" coords="435,179,581,235"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="629,127,816,183"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="629,231,816,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="864,311,1172,367"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="925,391,1111,447"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="885,471,1151,527"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="925,71,1111,127"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="923,151,1113,207"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="923,231,1113,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="1220,231,1407,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="1220,311,1407,367"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a83866ff4e7229989b0a265a98e3d50b4" name="a83866ff4e7229989b0a265a98e3d50b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83866ff4e7229989b0a265a98e3d50b4">&#9670;&nbsp;</a></span>clearTimers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::clearTimers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the expired timers from the memory of this scheduler. </p>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00206">206</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  207</span>    {</div>
<div class="line"><span class="lineno">  208</span>        std::lock_guard&lt;std::mutex&gt; guard(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a6b70bd02d34a73dfc7b05ae9e63d0502">mutex_</a>);</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>        <span class="comment">// Clear expired timers</span></div>
<div class="line"><span class="lineno">  211</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>.begin();</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">while</span> (it != <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>.end())</div>
<div class="line"><span class="lineno">  213</span>        {</div>
<div class="line"><span class="lineno">  214</span>            <span class="comment">// Check if timer is marked for deletion</span></div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">if</span> (it-&gt;second.second)</div>
<div class="line"><span class="lineno">  216</span>            {</div>
<div class="line"><span class="lineno">  217</span>                <span class="comment">// erase() function returns the iterator of the next to last deleted element</span></div>
<div class="line"><span class="lineno">  218</span>                it = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>.erase(it);</div>
<div class="line"><span class="lineno">  219</span>            }</div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  221</span>            {</div>
<div class="line"><span class="lineno">  222</span>                it++;</div>
<div class="line"><span class="lineno">  223</span>            }</div>
<div class="line"><span class="lineno">  224</span>        }</div>
<div class="line"><span class="lineno">  225</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a6b70bd02d34a73dfc7b05ae9e63d0502"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a6b70bd02d34a73dfc7b05ae9e63d0502">localization_manager::LocalizationManager::mutex_</a></div><div class="ttdeci">std::mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00160">LocalizationManager.hpp:160</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ae067b5ec0c115080299c03529f3b2861"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">localization_manager::LocalizationManager::timers_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, std::pair&lt; TimerUniquePtr, bool &gt; &gt; timers_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00162">LocalizationManager.hpp:162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00160">mutex_</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00162">timers_</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a83866ff4e7229989b0a265a98e3d50b4_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a83866ff4e7229989b0a265a98e3d50b4_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a83866ff4e7229989b0a265a98e3d50b4_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a83866ff4e7229989b0a265a98e3d50b4_icgraph">
<area shape="rect" title="Clears the expired timers from the memory of this scheduler." alt="" coords="431,5,577,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a0ce2b35dcab57bd0abc4ad9c10f5a24e" title="Timer callback that controls the publication of the selected pose and status report." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a6a06b312cdda09ab9b945daf69710c66" name="a6a06b312cdda09ab9b945daf69710c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a06b312cdda09ab9b945daf69710c66">&#9670;&nbsp;</a></span>computeFreq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double localization_manager::LocalizationManager::computeFreq </td>
          <td>(</td>
          <td class="paramtype">const rclcpp::Time &amp;&#160;</td>
          <td class="paramname"><em>old_stamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rclcpp::Time &amp;&#160;</td>
          <td class="paramname"><em>new_stamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to compute the instantaneous frequency between two times. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_stamp</td><td>The old timestamp </td></tr>
    <tr><td class="paramname">new_stamp</td><td>The new timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The computed instantaneous frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00041">41</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">return</span> 1.0 / (new_stamp - old_stamp).seconds(); <span class="comment">// Convert delta to frequency (Hz = 1/s)</span></div>
<div class="line"><span class="lineno">   44</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00051">computeNDTFreq()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a6a06b312cdda09ab9b945daf69710c66_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a6a06b312cdda09ab9b945daf69710c66_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a6a06b312cdda09ab9b945daf69710c66_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a6a06b312cdda09ab9b945daf69710c66_icgraph">
<area shape="rect" title="Helper function to compute the instantaneous frequency between two times." alt="" coords="431,45,577,101"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9" title="Helper function to both compute the NDT Frequency and update the previous pose timestamp." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a0ce2b35dcab57bd0abc4ad9c10f5a24e" title="Timer callback that controls the publication of the selected pose and status report." alt="" coords="236,85,383,141"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a027f5aab97b4a77bdbea02a2cf585115" title="Synced callback for the NDT reported pose and status messages." alt="" coords="17,5,177,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,93,188,134"/>
</map>
</div>

</div>
</div>
<a id="ace5b1b34adeeab50c2b3d47591e6c7c9" name="ace5b1b34adeeab50c2b3d47591e6c7c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5b1b34adeeab50c2b3d47591e6c7c9">&#9670;&nbsp;</a></span>computeNDTFreq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double localization_manager::LocalizationManager::computeNDTFreq </td>
          <td>(</td>
          <td class="paramtype">const rclcpp::Time &amp;&#160;</td>
          <td class="paramname"><em>new_stamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to both compute the NDT Frequency and update the previous pose timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_stamp</td><td>The new pose timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The computed instantaneous frequency in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00051">51</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>    {</div>
<div class="line"><span class="lineno">   53</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>)</div>
<div class="line"><span class="lineno">   54</span>        { <span class="comment">// Check if this is the first data point</span></div>
<div class="line"><span class="lineno">   55</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a> = new_stamp;</div>
<div class="line"><span class="lineno">   56</span>            <span class="comment">// When no historic data is available force the frequency into the operational range</span></div>
<div class="line"><span class="lineno">   57</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae10dc543a160a4932983ca4fb8770dac">ndt_frequency_degraded_threshold</a> * 2;</div>
<div class="line"><span class="lineno">   58</span>        }</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">if</span> (new_stamp &lt;= rclcpp::Time(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>.get(), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a>))</div>
<div class="line"><span class="lineno">   61</span>        {</div>
<div class="line"><span class="lineno">   62</span>            RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;LocalizationManager received NDT data out of order. Prev stamp was &quot;</span></div>
<div class="line"><span class="lineno">   63</span>                                                                                &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>.get().seconds() &lt;&lt; <span class="stringliteral">&quot; new stamp is &quot;</span> &lt;&lt; new_stamp.seconds());</div>
<div class="line"><span class="lineno">   64</span>            <span class="comment">// When invalid data is received from NDT force the frequency into the fault range</span></div>
<div class="line"><span class="lineno">   65</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae0ca2842f7b10c7af545b5d3d16e87fc">ndt_frequency_fault_threshold</a> / 2;</div>
<div class="line"><span class="lineno">   66</span>        }</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66">computeFreq</a>(rclcpp::Time(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>.get(), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a>), new_stamp); <span class="comment">// Convert delta to frequency (Hz = 1/s)</span></div>
<div class="line"><span class="lineno">   68</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a6a06b312cdda09ab9b945daf69710c66"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66">localization_manager::LocalizationManager::computeFreq</a></div><div class="ttdeci">double computeFreq(const rclcpp::Time &amp;old_stamp, const rclcpp::Time &amp;new_stamp) const</div><div class="ttdoc">Helper function to compute the instantaneous frequency between two times.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00041">LocalizationManager.cpp:41</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ab81bcd2a98e3d1194a8fd1f2f5794bf5"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">localization_manager::LocalizationManager::prev_ndt_stamp_</a></div><div class="ttdeci">boost::optional&lt; rclcpp::Time &gt; prev_ndt_stamp_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00148">LocalizationManager.hpp:148</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_ae0ca2842f7b10c7af545b5d3d16e87fc"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae0ca2842f7b10c7af545b5d3d16e87fc">localization_manager::LocalizationManagerConfig::ndt_frequency_fault_threshold</a></div><div class="ttdeci">double ndt_frequency_fault_threshold</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00035">LocalizationManagerConfig.hpp:35</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_ae10dc543a160a4932983ca4fb8770dac"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae10dc543a160a4932983ca4fb8770dac">localization_manager::LocalizationManagerConfig::ndt_frequency_degraded_threshold</a></div><div class="ttdeci">double ndt_frequency_degraded_threshold</div><div class="ttdoc">NDT solution frequency below which the localization is considered in a degraded state.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00032">LocalizationManagerConfig.hpp:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8cpp_source.html#l00041">computeFreq()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00144">config_</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00032">localization_manager::LocalizationManagerConfig::ndt_frequency_degraded_threshold</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00035">localization_manager::LocalizationManagerConfig::ndt_frequency_fault_threshold</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00148">prev_ndt_stamp_</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00166">timer_clock_type_</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_cgraph">
<area shape="rect" title="Helper function to both compute the NDT Frequency and update the previous pose timestamp." alt="" coords="5,5,152,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66" title="Helper function to compute the instantaneous frequency between two times." alt="" coords="200,5,347,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_ace5b1b34adeeab50c2b3d47591e6c7c9_icgraph">
<area shape="rect" title="Helper function to both compute the NDT Frequency and update the previous pose timestamp." alt="" coords="213,5,360,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a027f5aab97b4a77bdbea02a2cf585115" title="Synced callback for the NDT reported pose and status messages." alt="" coords="5,5,165,61"/>
</map>
</div>

</div>
</div>
<a id="ab14aa24430db99e65ffc1fa52aa34dd0" name="ab14aa24430db99e65ffc1fa52aa34dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14aa24430db99e65ffc1fa52aa34dd0">&#9670;&nbsp;</a></span>getState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a> localization_manager::LocalizationManager::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current localization state. </p>
<dl class="section return"><dt>Returns</dt><dd>The current localization state </dd></dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00316">316</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>    {</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>();</div>
<div class="line"><span class="lineno">  319</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationTransitionTable_html_aeec5e1584741de33c3c5f23f3ebe529a"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">localization_manager::LocalizationTransitionTable::getState</a></div><div class="ttdeci">LocalizationState getState() const</div><div class="ttdoc">Returns the current state.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTransitionTable_8cpp_source.html#l00024">LocalizationTransitionTable.cpp:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00024">localization_manager::LocalizationTransitionTable::getState()</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_ab14aa24430db99e65ffc1fa52aa34dd0_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_ab14aa24430db99e65ffc1fa52aa34dd0_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_ab14aa24430db99e65ffc1fa52aa34dd0_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_ab14aa24430db99e65ffc1fa52aa34dd0_cgraph">
<area shape="rect" title="Returns the current localization state." alt="" coords="5,5,152,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="200,5,387,61"/>
</map>
</div>

</div>
</div>
<a id="a2804818f7ee388d2eca7bcbd3e27f908" name="a2804818f7ee388d2eca7bcbd3e27f908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2804818f7ee388d2eca7bcbd3e27f908">&#9670;&nbsp;</a></span>gnssPoseCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::gnssPoseCallback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseStamped::SharedPtr&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for new GNSS messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The pose of vehicle in map frame provided by GNSS </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00143">143</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>    {</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a> = *msg;</div>
<div class="line"><span class="lineno">  146</span>        <span class="comment">// Just like ndt_matching the gnss pose is treated as an initialize signal if the system is not yet intialized</span></div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>() == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1add652546039b18970b8dcf2cff824268">LocalizationState::UNINITIALIZED</a>)</div>
<div class="line"><span class="lineno">  148</span>        {</div>
<div class="line"><span class="lineno">  149</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> = 0;</div>
<div class="line"><span class="lineno">  150</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b">LocalizationSignal::INITIAL_POSE</a>);</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>            geometry_msgs::msg::PoseWithCovarianceStamped new_initial_pose;</div>
<div class="line"><span class="lineno">  153</span>            new_initial_pose.header = msg-&gt;header;</div>
<div class="line"><span class="lineno">  154</span>            new_initial_pose.pose.pose = msg-&gt;pose;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad607aaab0ad2cc47bc4793106f54616e">initialpose_pub_</a>(new_initial_pose);</div>
<div class="line"><span class="lineno">  157</span>        }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>() == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a>)</div>
<div class="line"><span class="lineno">  160</span>        {</div>
<div class="line"><span class="lineno">  161</span>            geometry_msgs::msg::PoseStamped corrected_pose = *msg;</div>
<div class="line"><span class="lineno">  162</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a>)</div>
<div class="line"><span class="lineno">  163</span>            {</div>
<div class="line"><span class="lineno">  164</span>                corrected_pose.pose.position.x = corrected_pose.pose.position.x + <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a>-&gt;x();</div>
<div class="line"><span class="lineno">  165</span>                corrected_pose.pose.position.y = corrected_pose.pose.position.y + <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a>-&gt;y();</div>
<div class="line"><span class="lineno">  166</span>                corrected_pose.pose.position.z = corrected_pose.pose.position.z + <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a>-&gt;z();</div>
<div class="line"><span class="lineno">  167</span>            }</div>
<div class="line"><span class="lineno">  168</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Publishing GNSS pose with lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a>);</div>
<div class="line"><span class="lineno">  169</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a> = corrected_pose;</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a06d56bb3fcbc47135a84653fb202dd47"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">localization_manager::LocalizationManager::lidar_init_sequential_timesteps_counter_</a></div><div class="ttdeci">int lidar_init_sequential_timesteps_counter_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00150">LocalizationManager.hpp:150</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a4728052763f8223186c97e3169126062"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">localization_manager::LocalizationManager::last_raw_gnss_value_</a></div><div class="ttdeci">boost::optional&lt; geometry_msgs::msg::PoseStamped &gt; last_raw_gnss_value_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00152">LocalizationManager.hpp:152</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_aafd6886f83ce04f8d2c49ca0b85b9a9a"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">localization_manager::LocalizationManager::gnss_offset_</a></div><div class="ttdeci">boost::optional&lt; tf2::Vector3 &gt; gnss_offset_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00153">LocalizationManager.hpp:153</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ac4e5f615aa35031d88ce289d832dcb02"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">localization_manager::LocalizationManager::current_pose_</a></div><div class="ttdeci">boost::optional&lt; geometry_msgs::msg::PoseStamped &gt; current_pose_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00154">LocalizationManager.hpp:154</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationTransitionTable_html_a0f5e05d562934f0e04d7f64f9d2fd95c"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">localization_manager::LocalizationTransitionTable::signal</a></div><div class="ttdeci">void signal(LocalizationSignal signal)</div><div class="ttdoc">Trigger signal for the transition table.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTransitionTable_8cpp_source.html#l00219">LocalizationTransitionTable.cpp:219</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c"><div class="ttname"><a href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">localization_manager::LocalizationState::DEGRADED_NO_LIDAR_FIX</a></div><div class="ttdeci">@ DEGRADED_NO_LIDAR_FIX</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a539480c89bbebadc494867fa841b35d1add652546039b18970b8dcf2cff824268"><div class="ttname"><a href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1add652546039b18970b8dcf2cff824268">localization_manager::LocalizationState::UNINITIALIZED</a></div><div class="ttdeci">@ UNINITIALIZED</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b">localization_manager::LocalizationSignal::INITIAL_POSE</a></div><div class="ttdeci">@ INITIAL_POSE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00154">current_pose_</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">localization_manager::DEGRADED_NO_LIDAR_FIX</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00024">localization_manager::LocalizationTransitionTable::getState()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00153">gnss_offset_</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b">localization_manager::INITIAL_POSE</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00142">initialpose_pub_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00152">last_raw_gnss_value_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00150">lidar_init_sequential_timesteps_counter_</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>, and <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1add652546039b18970b8dcf2cff824268">localization_manager::UNINITIALIZED</a>.</p>

<p class="reference">Referenced by <a class="el" href="localization__manager__node_8cpp_source.html#l00048">localization_manager::Node::handle_on_configure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_cgraph">
<area shape="rect" title="Callback for new GNSS messages." alt="" coords="5,179,152,235"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="200,127,387,183"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="200,231,387,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="435,311,743,367"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="495,391,682,447"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="455,471,722,527"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="495,71,682,127"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="494,151,683,207"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="493,231,684,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="791,231,977,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="791,311,977,367"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a2804818f7ee388d2eca7bcbd3e27f908_icgraph">
<area shape="rect" title="Callback for new GNSS messages." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a43d2dc2970c35c4d6a12293ec240e84a" name="a43d2dc2970c35c4d6a12293ec240e84a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d2dc2970c35c4d6a12293ec240e84a">&#9670;&nbsp;</a></span>initialPoseCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::initialPoseCallback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseWithCovarianceStamped::SharedPtr&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for the initial pose provided by Rviz or some external localization initializer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The initial pose message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00173">173</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>    {</div>
<div class="line"><span class="lineno">  175</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> = 0;</div>
<div class="line"><span class="lineno">  176</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b">LocalizationSignal::INITIAL_POSE</a>);</div>
<div class="line"><span class="lineno">  177</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a> = boost::none; <span class="comment">// Reset the current pose until a new pose is recieved</span></div>
<div class="line"><span class="lineno">  178</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad607aaab0ad2cc47bc4793106f54616e">initialpose_pub_</a>(*msg);      <span class="comment">// Forward the initial pose to the rest of the system</span></div>
<div class="line"><span class="lineno">  179</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00154">current_pose_</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa3abd129e0314ad9fd7f7587a2465d94b">localization_manager::INITIAL_POSE</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00142">initialpose_pub_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00150">lidar_init_sequential_timesteps_counter_</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>.</p>

<p class="reference">Referenced by <a class="el" href="localization__manager__node_8cpp_source.html#l00048">localization_manager::Node::handle_on_configure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_cgraph">
<area shape="rect" title="Callback for the initial pose provided by Rviz or some external localization initializer." alt="" coords="5,225,152,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="200,225,387,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="435,305,743,361"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="495,385,682,441"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="455,465,722,521"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="495,65,682,121"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="494,145,683,201"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="493,225,684,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="791,225,977,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="791,305,977,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a43d2dc2970c35c4d6a12293ec240e84a_icgraph">
<area shape="rect" title="Callback for the initial pose provided by Rviz or some external localization initializer." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a357d15f4b553adac7c730e66a0b99cbf" name="a357d15f4b553adac7c730e66a0b99cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a357d15f4b553adac7c730e66a0b99cbf">&#9670;&nbsp;</a></span>nextId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> localization_manager::LocalizationManager::nextId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates the next id to be used for a timer. </p>
<dl class="section return"><dt>Returns</dt><dd>The next available timer id </dd></dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00200">200</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  201</span>    {</div>
<div class="line"><span class="lineno">  202</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a56f2d3375a21dea78754e388dac1997e">next_id_</a>++;</div>
<div class="line"><span class="lineno">  203</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a56f2d3375a21dea78754e388dac1997e">next_id_</a>;</div>
<div class="line"><span class="lineno">  204</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a56f2d3375a21dea78754e388dac1997e"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a56f2d3375a21dea78754e388dac1997e">localization_manager::LocalizationManager::next_id_</a></div><div class="ttdeci">uint32_t next_id_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00164">LocalizationManager.hpp:164</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00164">next_id_</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a357d15f4b553adac7c730e66a0b99cbf_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a357d15f4b553adac7c730e66a0b99cbf_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a357d15f4b553adac7c730e66a0b99cbf_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a357d15f4b553adac7c730e66a0b99cbf_icgraph">
<area shape="rect" title="Generates the next id to be used for a timer." alt="" coords="412,5,559,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c" title="Callback for when a new state was triggered. Allows creation of entry/exit behavior for states." alt="" coords="200,5,364,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#acbb7d81be472c3ec96f3d700b7ca823c" title="Constructor." alt="" coords="5,5,152,61"/>
</map>
</div>

</div>
</div>
<a id="a027f5aab97b4a77bdbea02a2cf585115" name="a027f5aab97b4a77bdbea02a2cf585115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a027f5aab97b4a77bdbea02a2cf585115">&#9670;&nbsp;</a></span>poseAndStatsCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::poseAndStatsCallback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseStamped::ConstPtr&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const autoware_msgs::msg::NDTStat::ConstPtr&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synced callback for the NDT reported pose and status messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>The pose reported by NDT matching of the vehicle in the map frame </td></tr>
    <tr><td class="paramname">stats</td><td>The stats reported by NDT matching for the accuracy of the provided pose </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00070">70</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>    {</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordtype">double</span> ndt_freq = <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9">computeNDTFreq</a>(rclcpp::Time(pose-&gt;header.stamp, <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a>));</div>
<div class="line"><span class="lineno">   74</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Received pose resulting in frequency value of &quot;</span> &lt;&lt; ndt_freq &lt;&lt; <span class="stringliteral">&quot; with score of &quot;</span> &lt;&lt; stats-&gt;score);</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">if</span> (stats-&gt;score &gt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a0cdb308c05aa70c80687938f4f043949">fitness_score_fault_threshold</a> || ndt_freq &lt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae0ca2842f7b10c7af545b5d3d16e87fc">ndt_frequency_fault_threshold</a>)</div>
<div class="line"><span class="lineno">   77</span>        {</div>
<div class="line"><span class="lineno">   78</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d">LocalizationSignal::UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</a>);</div>
<div class="line"><span class="lineno">   79</span>        }</div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stats-&gt;score &gt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a37547042fb173223e33c8a1a7ecb5b1a">fitness_score_degraded_threshold</a> || ndt_freq &lt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae10dc543a160a4932983ca4fb8770dac">ndt_frequency_degraded_threshold</a>)</div>
<div class="line"><span class="lineno">   81</span>        {</div>
<div class="line"><span class="lineno">   82</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5">LocalizationSignal::POOR_NDT_FREQ_OR_FITNESS_SCORE</a>);</div>
<div class="line"><span class="lineno">   83</span>        }</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   85</span>        {</div>
<div class="line"><span class="lineno">   86</span>            <span class="comment">// In GNSS_WITH_NDT_INIT mode, we shouldn&#39;t switch back to NDT and only rely on GPS</span></div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">if</span> (!(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">LocalizerMode</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_mode</a>) == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a90db69d58f7274bfad34570f2fdce99c">LocalizerMode::GNSS_WITH_NDT_INIT</a> &amp;&amp;</div>
<div class="line"><span class="lineno">   88</span>                  <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>() == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a> &amp;&amp;</div>
<div class="line"><span class="lineno">   89</span>                  <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &gt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#aed78bd42d681c0ace463dddc4dbf36f1">sequential_timesteps_until_gps_operation</a>))</div>
<div class="line"><span class="lineno">   90</span>            {</div>
<div class="line"><span class="lineno">   91</span>                <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaa0e8cc642780818952c89ed5c6626a78">LocalizationSignal::GOOD_NDT_FREQ_AND_FITNESS_SCORE</a>);</div>
<div class="line"><span class="lineno">   92</span>            }</div>
<div class="line"><span class="lineno">   93</span>        }</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a> state = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>();</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">LocalizerMode</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_mode</a>) == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a90db69d58f7274bfad34570f2fdce99c">LocalizerMode::GNSS_WITH_NDT_INIT</a> &amp;&amp; state == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">LocalizationState::OPERATIONAL</a> &amp;&amp; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>)</div>
<div class="line"><span class="lineno">   98</span>        {</div>
<div class="line"><span class="lineno">   99</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a>);</div>
<div class="line"><span class="lineno">  100</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#aed78bd42d681c0ace463dddc4dbf36f1">sequential_timesteps_until_gps_operation</a>)</div>
<div class="line"><span class="lineno">  101</span>            {</div>
<div class="line"><span class="lineno">  102</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a39c9636657b5d522204253456836b13b">is_sequential_</a>)</div>
<div class="line"><span class="lineno">  103</span>                    <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a>++;</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>                <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a39c9636657b5d522204253456836b13b">is_sequential_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  106</span>            }</div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  108</span>            {</div>
<div class="line"><span class="lineno">  109</span>                <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaaa3e4a1e1b08ccd33ff7cfb1d64aa575">LocalizationSignal::LIDAR_INITIALIZED_SWITCH_TO_GPS</a>);</div>
<div class="line"><span class="lineno">  110</span>                RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Switched to LIDAR_INITIALIZED_SWITCH_TO_GPS at lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a></div>
<div class="line"><span class="lineno">  111</span>                                                                                                                                                                            &lt;&lt; <span class="stringliteral">&quot;, with new state: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>());</div>
<div class="line"><span class="lineno">  112</span>            }</div>
<div class="line"><span class="lineno">  113</span>        }</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">LocalizerMode</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_mode</a>) == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a90db69d58f7274bfad34570f2fdce99c">LocalizerMode::GNSS_WITH_NDT_INIT</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  115</span>                   state == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  116</span>                   <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  117</span>                   <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &gt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#aed78bd42d681c0ace463dddc4dbf36f1">sequential_timesteps_until_gps_operation</a>)) <span class="comment">// don&#39;t reset counter if Lidar initialized and switched to GPS</span></div>
<div class="line"><span class="lineno">  118</span>                                                                                                                  <span class="comment">// as it will reset state to OPERATIONAL</span></div>
<div class="line"><span class="lineno">  119</span>        {</div>
<div class="line"><span class="lineno">  120</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a39c9636657b5d522204253456836b13b">is_sequential_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  121</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> = 0;</div>
<div class="line"><span class="lineno">  122</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Resetting lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &lt;&lt; <span class="stringliteral">&quot;, with new state: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>());</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">if</span> (state == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">LocalizationState::OPERATIONAL</a> &amp;&amp; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>)</div>
<div class="line"><span class="lineno">  126</span>        {</div>
<div class="line"><span class="lineno">  127</span>            tf2::Vector3 ndt_translation(pose-&gt;pose.position.x, pose-&gt;pose.position.y, pose-&gt;pose.position.z);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>            tf2::Vector3 gnss_translation(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>-&gt;pose.position.x, <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>-&gt;pose.position.y, <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>-&gt;pose.position.z);</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a> = ndt_translation - gnss_translation;</div>
<div class="line"><span class="lineno">  132</span>        }</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">if</span> (state != <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a>)</div>
<div class="line"><span class="lineno">  135</span>        {</div>
<div class="line"><span class="lineno">  136</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Publishing mixed pose with lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &lt;&lt; <span class="stringliteral">&quot;, and state&quot;</span> &lt;&lt; state);</div>
<div class="line"><span class="lineno">  137</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a> = *pose;</div>
<div class="line"><span class="lineno">  138</span>        }</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a> = pose-&gt;header.stamp;</div>
<div class="line"><span class="lineno">  141</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a39c9636657b5d522204253456836b13b"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a39c9636657b5d522204253456836b13b">localization_manager::LocalizationManager::is_sequential_</a></div><div class="ttdeci">bool is_sequential_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00151">LocalizationManager.hpp:151</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ace5b1b34adeeab50c2b3d47591e6c7c9"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9">localization_manager::LocalizationManager::computeNDTFreq</a></div><div class="ttdeci">double computeNDTFreq(const rclcpp::Time &amp;new_stamp)</div><div class="ttdoc">Helper function to both compute the NDT Frequency and update the previous pose timestamp.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00051">LocalizationManager.cpp:51</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a539480c89bbebadc494867fa841b35d1"><div class="ttname"><a href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">localization_manager::LocalizationState</a></div><div class="ttdeci">LocalizationState</div><div class="ttdoc">Enum describing the possible states of the localization system.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTypes_8hpp_source.html#l00041">LocalizationTypes.hpp:42</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782"><div class="ttname"><a href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">localization_manager::LocalizationState::OPERATIONAL</a></div><div class="ttdeci">@ OPERATIONAL</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a9b86b848ab2c2216f0987be7c5007b70a90db69d58f7274bfad34570f2fdce99c"><div class="ttname"><a href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a90db69d58f7274bfad34570f2fdce99c">localization_manager::GNSS_WITH_NDT_INIT</a></div><div class="ttdeci">@ GNSS_WITH_NDT_INIT</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTypes_8hpp_source.html#l00031">LocalizationTypes.hpp:31</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5">localization_manager::LocalizationSignal::POOR_NDT_FREQ_OR_FITNESS_SCORE</a></div><div class="ttdeci">@ POOR_NDT_FREQ_OR_FITNESS_SCORE</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d">localization_manager::LocalizationSignal::UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</a></div><div class="ttdeci">@ UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aaa0e8cc642780818952c89ed5c6626a78"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaa0e8cc642780818952c89ed5c6626a78">localization_manager::LocalizationSignal::GOOD_NDT_FREQ_AND_FITNESS_SCORE</a></div><div class="ttdeci">@ GOOD_NDT_FREQ_AND_FITNESS_SCORE</div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aaaa3e4a1e1b08ccd33ff7cfb1d64aa575"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaaa3e4a1e1b08ccd33ff7cfb1d64aa575">localization_manager::LocalizationSignal::LIDAR_INITIALIZED_SWITCH_TO_GPS</a></div><div class="ttdeci">@ LIDAR_INITIALIZED_SWITCH_TO_GPS</div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a0cdb308c05aa70c80687938f4f043949"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a0cdb308c05aa70c80687938f4f043949">localization_manager::LocalizationManagerConfig::fitness_score_fault_threshold</a></div><div class="ttdeci">double fitness_score_fault_threshold</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00030">LocalizationManagerConfig.hpp:30</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a37547042fb173223e33c8a1a7ecb5b1a"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a37547042fb173223e33c8a1a7ecb5b1a">localization_manager::LocalizationManagerConfig::fitness_score_degraded_threshold</a></div><div class="ttdeci">double fitness_score_degraded_threshold</div><div class="ttdoc">NDT Fitness score above which the localization is considered in a degraded state.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00027">LocalizationManagerConfig.hpp:27</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_aed78bd42d681c0ace463dddc4dbf36f1"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#aed78bd42d681c0ace463dddc4dbf36f1">localization_manager::LocalizationManagerConfig::sequential_timesteps_until_gps_operation</a></div><div class="ttdeci">int sequential_timesteps_until_gps_operation</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00043">LocalizationManagerConfig.hpp:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8cpp_source.html#l00051">computeNDTFreq()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00144">config_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00154">current_pose_</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">localization_manager::DEGRADED_NO_LIDAR_FIX</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00027">localization_manager::LocalizationManagerConfig::fitness_score_degraded_threshold</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00030">localization_manager::LocalizationManagerConfig::fitness_score_fault_threshold</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00024">localization_manager::LocalizationTransitionTable::getState()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00153">gnss_offset_</a>, <a class="el" href="LocalizationTypes_8hpp_source.html#l00031">localization_manager::GNSS_WITH_NDT_INIT</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaa0e8cc642780818952c89ed5c6626a78">localization_manager::GOOD_NDT_FREQ_AND_FITNESS_SCORE</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00151">is_sequential_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00152">last_raw_gnss_value_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00150">lidar_init_sequential_timesteps_counter_</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aaaa3e4a1e1b08ccd33ff7cfb1d64aa575">localization_manager::LIDAR_INITIALIZED_SWITCH_TO_GPS</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00047">localization_manager::LocalizationManagerConfig::localization_mode</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00032">localization_manager::LocalizationManagerConfig::ndt_frequency_degraded_threshold</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00035">localization_manager::LocalizationManagerConfig::ndt_frequency_fault_threshold</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">localization_manager::OPERATIONAL</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5">localization_manager::POOR_NDT_FREQ_OR_FITNESS_SCORE</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00148">prev_ndt_stamp_</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00043">localization_manager::LocalizationManagerConfig::sequential_timesteps_until_gps_operation</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00166">timer_clock_type_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>, and <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d">localization_manager::UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a027f5aab97b4a77bdbea02a2cf585115_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a027f5aab97b4a77bdbea02a2cf585115_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a027f5aab97b4a77bdbea02a2cf585115_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a027f5aab97b4a77bdbea02a2cf585115_cgraph">
<area shape="rect" title="Synced callback for the NDT reported pose and status messages." alt="" coords="5,139,165,195"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#ace5b1b34adeeab50c2b3d47591e6c7c9" title="Helper function to both compute the NDT Frequency and update the previous pose timestamp." alt="" coords="233,32,380,88"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="213,139,400,195"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="213,296,400,352"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66" title="Helper function to compute the instantaneous frequency between two times." alt="" coords="529,5,675,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="448,376,756,432"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="509,456,695,512"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="469,536,735,592"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="509,136,695,192"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="507,216,697,272"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="507,296,697,352"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="804,296,991,352"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="804,376,991,432"/>
</map>
</div>

</div>
</div>
<a id="a0ce2b35dcab57bd0abc4ad9c10f5a24e" name="a0ce2b35dcab57bd0abc4ad9c10f5a24e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ce2b35dcab57bd0abc4ad9c10f5a24e">&#9670;&nbsp;</a></span>posePubTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::posePubTick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer callback that controls the publication of the selected pose and status report. </p>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00263">263</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  264</span>    {</div>
<div class="line"><span class="lineno">  265</span>        <span class="comment">// Clear any expired timers</span></div>
<div class="line"><span class="lineno">  266</span>        <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a83866ff4e7229989b0a265a98e3d50b4">clearTimers</a>();</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>        <span class="comment">// Evaluate NDT Frequency if we have started receiving messages</span></div>
<div class="line"><span class="lineno">  269</span>        <span class="comment">// This check provides protection against excessively long NDT computation times that do not trigger the callback</span></div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>)</div>
<div class="line"><span class="lineno">  271</span>        {</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordtype">double</span> freq = <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66">computeFreq</a>(rclcpp::Time(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a>.get(), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a>), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;now());</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">if</span> (freq &lt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae0ca2842f7b10c7af545b5d3d16e87fc">ndt_frequency_fault_threshold</a>)</div>
<div class="line"><span class="lineno">  274</span>            {</div>
<div class="line"><span class="lineno">  275</span>                <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d">LocalizationSignal::UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</a>);</div>
<div class="line"><span class="lineno">  276</span>            }</div>
<div class="line"><span class="lineno">  277</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (freq &lt;= <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ae10dc543a160a4932983ca4fb8770dac">ndt_frequency_degraded_threshold</a>)</div>
<div class="line"><span class="lineno">  278</span>            {</div>
<div class="line"><span class="lineno">  279</span>                <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5">LocalizationSignal::POOR_NDT_FREQ_OR_FITNESS_SCORE</a>);</div>
<div class="line"><span class="lineno">  280</span>            }</div>
<div class="line"><span class="lineno">  281</span>        }</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="comment">// check if last gnss time stamp is older than threshold and send the corresponding signal</span></div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a> &amp;&amp; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;now() - rclcpp::Time(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4728052763f8223186c97e3169126062">last_raw_gnss_value_</a>-&gt;header.stamp, <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a9d753ea64cf1496b644e9245e13f387c">timer_clock_type_</a>) &gt; rclcpp::Duration(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ab27470df69b8ee345f9cbcd2f668b714">gnss_data_timeout</a> * 1e6))</div>
<div class="line"><span class="lineno">  285</span>        {</div>
<div class="line"><span class="lineno">  286</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa37815e2063ce32e3d059ed60121d98e7">LocalizationSignal::GNSS_DATA_TIMEOUT</a>);</div>
<div class="line"><span class="lineno">  287</span>        }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>        <span class="comment">// Used in LocalizerMode::GNSS_WITH_NDT_INIT</span></div>
<div class="line"><span class="lineno">  290</span>        <span class="comment">// If the state is not Operational with good NDT, or already using GPS only, we reset the counter</span></div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>() != <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">LocalizationState::OPERATIONAL</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  292</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>() != <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a>)</div>
<div class="line"><span class="lineno">  293</span>        {</div>
<div class="line"><span class="lineno">  294</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> = 0;</div>
<div class="line"><span class="lineno">  295</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;Resetting lidar_init_sequential_timesteps_counter_: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a06d56bb3fcbc47135a84653fb202dd47">lidar_init_sequential_timesteps_counter_</a> &lt;&lt; <span class="stringliteral">&quot;, with new state: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>());</div>
<div class="line"><span class="lineno">  296</span>        }</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>        <span class="comment">// Publish current pose message if available</span></div>
<div class="line"><span class="lineno">  299</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a>)</div>
<div class="line"><span class="lineno">  300</span>        {</div>
<div class="line"><span class="lineno">  301</span>            <span class="keyword">auto</span> pose_to_publish = *<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ac4e5f615aa35031d88ce289d832dcb02">current_pose_</a>;</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70">LocalizerMode</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a4a33f8febd8d330d70727a20dd242550">localization_mode</a>) == <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a0430b40fe2d8ddf273cd76756b9ea35a">LocalizerMode::GNSS_WITH_FIXED_OFFSET</a>)</div>
<div class="line"><span class="lineno">  303</span>            {</div>
<div class="line"><span class="lineno">  304</span>                pose_to_publish.pose.position.x += <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#aa4973d8be04cfc255e6adbb883a8b7d8">x_offset</a>;</div>
<div class="line"><span class="lineno">  305</span>                pose_to_publish.pose.position.y += <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#ab2809bbed39929923e3637be4f43c069">y_offset</a>;</div>
<div class="line"><span class="lineno">  306</span>                pose_to_publish.pose.position.z += <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a1809d3864ece9da5caddbae982d26253">z_offset</a>;</div>
<div class="line"><span class="lineno">  307</span>            }</div>
<div class="line"><span class="lineno">  308</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aa33a58bf865e068cde48d411f16e1299">pose_pub_</a>(pose_to_publish);</div>
<div class="line"><span class="lineno">  309</span>        }</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>        <span class="comment">// Create and publish status report message</span></div>
<div class="line"><span class="lineno">  312</span>        carma_localization_msgs::msg::LocalizationStatusReport msg = <a class="code hl_function" href="namespacelocalization__manager.html#a0dd225fbc4cf3989bc6a2b0a78b57eb8">stateToMsg</a>(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>(), <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;now());</div>
<div class="line"><span class="lineno">  313</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a93edbdcc39c9116097b2ccd3249852c5">state_pub_</a>(msg);</div>
<div class="line"><span class="lineno">  314</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a83866ff4e7229989b0a265a98e3d50b4"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a83866ff4e7229989b0a265a98e3d50b4">localization_manager::LocalizationManager::clearTimers</a></div><div class="ttdeci">void clearTimers()</div><div class="ttdoc">Clears the expired timers from the memory of this scheduler.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00206">LocalizationManager.cpp:206</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a0dd225fbc4cf3989bc6a2b0a78b57eb8"><div class="ttname"><a href="namespacelocalization__manager.html#a0dd225fbc4cf3989bc6a2b0a78b57eb8">localization_manager::stateToMsg</a></div><div class="ttdeci">carma_localization_msgs::msg::LocalizationStatusReport stateToMsg(LocalizationState state, const rclcpp::Time &amp;stamp)</div><div class="ttdoc">Helper function to convert LocalizationState objects into LocalizationStatusReport ROS messages.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTypes_8cpp_source.html#l00068">LocalizationTypes.cpp:68</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a9b86b848ab2c2216f0987be7c5007b70a0430b40fe2d8ddf273cd76756b9ea35a"><div class="ttname"><a href="namespacelocalization__manager.html#a9b86b848ab2c2216f0987be7c5007b70a0430b40fe2d8ddf273cd76756b9ea35a">localization_manager::GNSS_WITH_FIXED_OFFSET</a></div><div class="ttdeci">@ GNSS_WITH_FIXED_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationTypes_8hpp_source.html#l00033">LocalizationTypes.hpp:32</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa37815e2063ce32e3d059ed60121d98e7"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa37815e2063ce32e3d059ed60121d98e7">localization_manager::LocalizationSignal::GNSS_DATA_TIMEOUT</a></div><div class="ttdeci">@ GNSS_DATA_TIMEOUT</div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a1809d3864ece9da5caddbae982d26253"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a1809d3864ece9da5caddbae982d26253">localization_manager::LocalizationManagerConfig::z_offset</a></div><div class="ttdeci">double z_offset</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00053">LocalizationManagerConfig.hpp:53</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_aa4973d8be04cfc255e6adbb883a8b7d8"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#aa4973d8be04cfc255e6adbb883a8b7d8">localization_manager::LocalizationManagerConfig::x_offset</a></div><div class="ttdeci">double x_offset</div><div class="ttdoc">GPS Offset to apply if that mode is enabled.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00051">LocalizationManagerConfig.hpp:51</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_ab27470df69b8ee345f9cbcd2f668b714"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#ab27470df69b8ee345f9cbcd2f668b714">localization_manager::LocalizationManagerConfig::gnss_data_timeout</a></div><div class="ttdeci">int gnss_data_timeout</div><div class="ttdoc">GNSS Data timeout. If exceeded the system will assume the GNSS is no longer functional....</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00045">LocalizationManagerConfig.hpp:45</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_ab2809bbed39929923e3637be4f43c069"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#ab2809bbed39929923e3637be4f43c069">localization_manager::LocalizationManagerConfig::y_offset</a></div><div class="ttdeci">double y_offset</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00052">LocalizationManagerConfig.hpp:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8cpp_source.html#l00206">clearTimers()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00041">computeFreq()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00144">config_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00154">current_pose_</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">localization_manager::DEGRADED_NO_LIDAR_FIX</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00024">localization_manager::LocalizationTransitionTable::getState()</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00045">localization_manager::LocalizationManagerConfig::gnss_data_timeout</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa37815e2063ce32e3d059ed60121d98e7">localization_manager::GNSS_DATA_TIMEOUT</a>, <a class="el" href="LocalizationTypes_8hpp_source.html#l00032">localization_manager::GNSS_WITH_FIXED_OFFSET</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00152">last_raw_gnss_value_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00150">lidar_init_sequential_timesteps_counter_</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00047">localization_manager::LocalizationManagerConfig::localization_mode</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00032">localization_manager::LocalizationManagerConfig::ndt_frequency_degraded_threshold</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00035">localization_manager::LocalizationManagerConfig::ndt_frequency_fault_threshold</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1ac97e79e14549c9f528427e36c90ae782">localization_manager::OPERATIONAL</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa30b13d34b135451276460125d3bebae5">localization_manager::POOR_NDT_FREQ_OR_FITNESS_SCORE</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00140">pose_pub_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00148">prev_ndt_stamp_</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00141">state_pub_</a>, <a class="el" href="LocalizationTypes_8cpp_source.html#l00068">localization_manager::stateToMsg()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00166">timer_clock_type_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00161">timer_factory_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa57fb0eaa7867d3c150558b918cf8c32d">localization_manager::UNUSABLE_NDT_FREQ_OR_FITNESS_SCORE</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00051">localization_manager::LocalizationManagerConfig::x_offset</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00052">localization_manager::LocalizationManagerConfig::y_offset</a>, and <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00053">localization_manager::LocalizationManagerConfig::z_offset</a>.</p>

<p class="reference">Referenced by <a class="el" href="localization__manager__node_8cpp_source.html#l00048">localization_manager::Node::handle_on_configure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_cgraph">
<area shape="rect" title="Timer callback that controls the publication of the selected pose and status report." alt="" coords="5,165,152,221"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a83866ff4e7229989b0a265a98e3d50b4" title="Clears the expired timers from the memory of this scheduler." alt="" coords="220,5,367,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a6a06b312cdda09ab9b945daf69710c66" title="Helper function to compute the instantaneous frequency between two times." alt="" coords="220,85,367,141"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="200,165,387,221"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="200,269,387,325"/>
<area shape="rect" href="namespacelocalization__manager.html#a0dd225fbc4cf3989bc6a2b0a78b57eb8" title="Helper function to convert LocalizationState objects into LocalizationStatusReport ROS messages." alt="" coords="222,349,365,390"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="435,349,743,405"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="495,429,682,485"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="455,509,722,565"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="495,109,682,165"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="494,189,683,245"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="493,269,684,325"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="791,269,977,325"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="791,349,977,405"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a0ce2b35dcab57bd0abc4ad9c10f5a24e_icgraph">
<area shape="rect" title="Timer callback that controls the publication of the selected pose and status report." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="ad26090538f61ea866d2e4729ab6a0a91" name="ad26090538f61ea866d2e4729ab6a0a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad26090538f61ea866d2e4729ab6a0a91">&#9670;&nbsp;</a></span>setConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::setConfig </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set config. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>localization manager config </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00046">46</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>    {</div>
<div class="line"><span class="lineno">   48</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a> = config;</div>
<div class="line"><span class="lineno">   49</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00144">config_</a>.</p>

</div>
</div>
<a id="a37e91016dd16e328bec5041afaf5bc0c" name="a37e91016dd16e328bec5041afaf5bc0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37e91016dd16e328bec5041afaf5bc0c">&#9670;&nbsp;</a></span>stateTransitionCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::stateTransitionCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a>&#160;</td>
          <td class="paramname"><em>prev_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a>&#160;</td>
          <td class="paramname"><em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4a">LocalizationSignal</a>&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for when a new state was triggered. Allows creation of entry/exit behavior for states. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prev_state</td><td>The previous state </td></tr>
    <tr><td class="paramname">new_state</td><td>The new current state. This should never equal prev_state. </td></tr>
    <tr><td class="paramname">signal</td><td>The signal that triggered the state transition </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00227">227</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  229</span>    {</div>
<div class="line"><span class="lineno">  230</span>        RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;localization_manager&quot;</span>), <span class="stringliteral">&quot;State transition from &quot;</span> &lt;&lt; prev_state &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; new_state &lt;&lt; <span class="stringliteral">&quot; with signal &quot;</span> &lt;&lt; signal);</div>
<div class="line"><span class="lineno">  231</span>        <span class="comment">// Mark the expired timers as expired if any</span></div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a>)</div>
<div class="line"><span class="lineno">  233</span>        {</div>
<div class="line"><span class="lineno">  234</span>            <span class="comment">// NOTE unit testing of current algorithm depends on all timers being one-shot timers.</span></div>
<div class="line"><span class="lineno">  235</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>[<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a>].second = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  236</span>        }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">switch</span> (new_state)</div>
<div class="line"><span class="lineno">  239</span>        {</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a86bf8c89d85949f8f45cde2f73fce113">LocalizationState::INITIALIZING</a>:</div>
<div class="line"><span class="lineno">  241</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#aafd6886f83ce04f8d2c49ca0b85b9a9a">gnss_offset_</a> = boost::none;</div>
<div class="line"><span class="lineno">  242</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ab81bcd2a98e3d1194a8fd1f2f5794bf5">prev_ndt_stamp_</a> = boost::none;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a> = <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf">nextId</a>();</div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a> = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;buildTimer(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a>, rclcpp::Duration(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a815937ae2f121dea77ae1308f666a1f9">auto_initialization_timeout</a> * 1e6),</div>
<div class="line"><span class="lineno">  246</span>                                                        std::bind(&amp;<a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79">LocalizationManager::timerCallback</a>, <span class="keyword">this</span>, new_state), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>[<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a>] = std::make_pair(std::move(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a>), <span class="keyword">false</span>); <span class="comment">// Add start timer to map by Id</span></div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">LocalizationState::DEGRADED_NO_LIDAR_FIX</a>:</div>
<div class="line"><span class="lineno">  251</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a> = <a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf">nextId</a>();</div>
<div class="line"><span class="lineno">  252</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a> = <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a673a02a2282dcbeff6d9df5f91c1f8d6">timer_factory_</a>-&gt;buildTimer(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a>, rclcpp::Duration(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a4caa21b1d191857bc60a786ead351554">config_</a>.<a class="code hl_variable" href="structlocalization__manager_1_1LocalizationManagerConfig.html#a0755604ab7b77f80fcd3ae0cb467099d">gnss_only_operation_timeout</a> * 1e6),</div>
<div class="line"><span class="lineno">  253</span>                                                        std::bind(&amp;<a class="code hl_function" href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79">LocalizationManager::timerCallback</a>, <span class="keyword">this</span>, new_state), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ae067b5ec0c115080299c03529f3b2861">timers_</a>[<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">current_timer_id_</a>] = std::make_pair(std::move(<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">current_timer_</a>), <span class="keyword">false</span>); <span class="comment">// Add start timer to map by Id</span></div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  260</span>        }</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a180b8d484c93d7faea1a707a0d586a79"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79">localization_manager::LocalizationManager::timerCallback</a></div><div class="ttdeci">void timerCallback(const LocalizationState origin_state)</div><div class="ttdoc">Callback for timeouts. Used to trigger timeout signals for the state machine.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00189">LocalizationManager.cpp:189</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a1b6c443414a7d5e417e365ef0bd0c254"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a1b6c443414a7d5e417e365ef0bd0c254">localization_manager::LocalizationManager::current_timer_id_</a></div><div class="ttdeci">uint32_t current_timer_id_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00165">LocalizationManager.hpp:165</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a357d15f4b553adac7c730e66a0b99cbf"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf">localization_manager::LocalizationManager::nextId</a></div><div class="ttdeci">uint32_t nextId()</div><div class="ttdoc">Generates the next id to be used for a timer.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8cpp_source.html#l00200">LocalizationManager.cpp:200</a></div></div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_ad5798343089ac239263eb82275aad228"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#ad5798343089ac239263eb82275aad228">localization_manager::LocalizationManager::current_timer_</a></div><div class="ttdeci">TimerUniquePtr current_timer_</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00163">LocalizationManager.hpp:163</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_a539480c89bbebadc494867fa841b35d1a86bf8c89d85949f8f45cde2f73fce113"><div class="ttname"><a href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a86bf8c89d85949f8f45cde2f73fce113">localization_manager::LocalizationState::INITIALIZING</a></div><div class="ttdeci">@ INITIALIZING</div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a0755604ab7b77f80fcd3ae0cb467099d"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a0755604ab7b77f80fcd3ae0cb467099d">localization_manager::LocalizationManagerConfig::gnss_only_operation_timeout</a></div><div class="ttdeci">int gnss_only_operation_timeout</div><div class="ttdoc">Timeout in ms for GNSS only operation. Ignored when in GNSS mode.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00040">LocalizationManagerConfig.hpp:40</a></div></div>
<div class="ttc" id="astructlocalization__manager_1_1LocalizationManagerConfig_html_a815937ae2f121dea77ae1308f666a1f9"><div class="ttname"><a href="structlocalization__manager_1_1LocalizationManagerConfig.html#a815937ae2f121dea77ae1308f666a1f9">localization_manager::LocalizationManagerConfig::auto_initialization_timeout</a></div><div class="ttdeci">int auto_initialization_timeout</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManagerConfig_8hpp_source.html#l00038">LocalizationManagerConfig.hpp:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00038">localization_manager::LocalizationManagerConfig::auto_initialization_timeout</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00144">config_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00163">current_timer_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00165">current_timer_id_</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a30e9fbe62db0831f32b1be44a883350c">localization_manager::DEGRADED_NO_LIDAR_FIX</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00153">gnss_offset_</a>, <a class="el" href="LocalizationManagerConfig_8hpp_source.html#l00040">localization_manager::LocalizationManagerConfig::gnss_only_operation_timeout</a>, <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1a86bf8c89d85949f8f45cde2f73fce113">localization_manager::INITIALIZING</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00200">nextId()</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00148">prev_ndt_stamp_</a>, <a class="el" href="LocalizationManager_8hpp_source.html#l00161">timer_factory_</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00189">timerCallback()</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00162">timers_</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00026">LocalizationManager()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_cgraph">
<area shape="rect" title="Callback for when a new state was triggered. Allows creation of entry/exit behavior for states." alt="" coords="5,139,169,195"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a357d15f4b553adac7c730e66a0b99cbf" title="Generates the next id to be used for a timer." alt="" coords="217,99,364,155"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a180b8d484c93d7faea1a707a0d586a79" title="Callback for timeouts. Used to trigger timeout signals for the state machine." alt="" coords="217,179,364,235"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="412,127,599,183"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="412,231,599,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="647,311,955,367"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="707,391,894,447"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="667,471,934,527"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="707,71,894,127"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="706,151,895,207"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="705,231,896,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="1003,231,1189,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="1003,311,1189,367"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a37e91016dd16e328bec5041afaf5bc0c_icgraph">
<area shape="rect" title="Callback for when a new state was triggered. Allows creation of entry/exit behavior for states." alt="" coords="200,5,364,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#acbb7d81be472c3ec96f3d700b7ca823c" title="Constructor." alt="" coords="5,5,152,61"/>
</map>
</div>

</div>
</div>
<a id="a9e4c9b82f1d519c27cc82bc5c9231121" name="a9e4c9b82f1d519c27cc82bc5c9231121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e4c9b82f1d519c27cc82bc5c9231121">&#9670;&nbsp;</a></span>systemAlertCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::systemAlertCallback </td>
          <td>(</td>
          <td class="paramtype">const carma_msgs::msg::SystemAlert::SharedPtr&#160;</td>
          <td class="paramname"><em>alert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for SystemAlert data. Used to check for lidar failure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alert</td><td>The alert message to evaluate </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00181">181</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  182</span>    {</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a852f8fa433424784ce64e712a5f1a9e6">LIDAR_FAILURE_STRINGS</a>.find(alert-&gt;description) != <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a852f8fa433424784ce64e712a5f1a9e6">LIDAR_FAILURE_STRINGS</a>.end())</div>
<div class="line"><span class="lineno">  184</span>        {</div>
<div class="line"><span class="lineno">  185</span>            <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa6b2aa1c5eb86ace61332b4358866497e">LocalizationSignal::LIDAR_SENSOR_FAILURE</a>);</div>
<div class="line"><span class="lineno">  186</span>        }</div>
<div class="line"><span class="lineno">  187</span>    }</div>
<div class="ttc" id="aclasslocalization__manager_1_1LocalizationManager_html_a852f8fa433424784ce64e712a5f1a9e6"><div class="ttname"><a href="classlocalization__manager_1_1LocalizationManager.html#a852f8fa433424784ce64e712a5f1a9e6">localization_manager::LocalizationManager::LIDAR_FAILURE_STRINGS</a></div><div class="ttdeci">static const std::unordered_set&lt; std::string &gt; LIDAR_FAILURE_STRINGS</div><div class="ttdoc">The set of strings which mark a lidar failure in a system alert message.</div><div class="ttdef"><b>Definition:</b> <a href="LocalizationManager_8hpp_source.html#l00138">LocalizationManager.hpp:138</a></div></div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa6b2aa1c5eb86ace61332b4358866497e"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa6b2aa1c5eb86ace61332b4358866497e">localization_manager::LocalizationSignal::LIDAR_SENSOR_FAILURE</a></div><div class="ttdeci">@ LIDAR_SENSOR_FAILURE</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationManager_8hpp_source.html#l00138">LIDAR_FAILURE_STRINGS</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa6b2aa1c5eb86ace61332b4358866497e">localization_manager::LIDAR_SENSOR_FAILURE</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>.</p>

<p class="reference">Referenced by <a class="el" href="localization__manager__node_8cpp_source.html#l00048">localization_manager::Node::handle_on_configure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_cgraph">
<area shape="rect" title="Callback for SystemAlert data. Used to check for lidar failure." alt="" coords="5,225,152,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="200,225,387,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="435,305,743,361"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="495,385,682,441"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="455,465,722,521"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="495,65,682,121"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="494,145,683,201"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="493,225,684,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="791,225,977,281"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="791,305,977,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a9e4c9b82f1d519c27cc82bc5c9231121_icgraph">
<area shape="rect" title="Callback for SystemAlert data. Used to check for lidar failure." alt="" coords="236,5,383,61"/>
<area shape="rect" href="classlocalization__manager_1_1Node.html#afb38782f4ca8c455d8b6440b38bc62a9" title=" " alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a180b8d484c93d7faea1a707a0d586a79" name="a180b8d484c93d7faea1a707a0d586a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a180b8d484c93d7faea1a707a0d586a79">&#9670;&nbsp;</a></span>timerCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void localization_manager::LocalizationManager::timerCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacelocalization__manager.html#a539480c89bbebadc494867fa841b35d1">LocalizationState</a>&#160;</td>
          <td class="paramname"><em>origin_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for timeouts. Used to trigger timeout signals for the state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">origin_state</td><td>The state that was the current state when the timer that triggered this callback was setup </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8cpp_source.html#l00189">189</a> of file <a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>    {</div>
<div class="line"><span class="lineno">  191</span>        <span class="comment">// If there is already a timer callback in progress or the expected state has changed then return</span></div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">if</span> (origin_state != <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a">getState</a>())</div>
<div class="line"><span class="lineno">  193</span>        {</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>        <a class="code hl_variable" href="classlocalization__manager_1_1LocalizationManager.html#a8f6a02f44f6812384262295e1e8ad132">transition_table_</a>.<a class="code hl_function" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c">signal</a>(<a class="code hl_enumvalue" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa070a0fb40f6c308ab544b227660aadff">LocalizationSignal::TIMEOUT</a>);</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="ttc" id="anamespacelocalization__manager_html_af61876be3f0f4998db813dd549c8bf4aa070a0fb40f6c308ab544b227660aadff"><div class="ttname"><a href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa070a0fb40f6c308ab544b227660aadff">localization_manager::LocalizationSignal::TIMEOUT</a></div><div class="ttdeci">@ TIMEOUT</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00024">localization_manager::LocalizationTransitionTable::getState()</a>, <a class="el" href="LocalizationTransitionTable_8cpp_source.html#l00219">localization_manager::LocalizationTransitionTable::signal()</a>, <a class="el" href="namespacelocalization__manager.html#af61876be3f0f4998db813dd549c8bf4aa070a0fb40f6c308ab544b227660aadff">localization_manager::TIMEOUT</a>, and <a class="el" href="LocalizationManager_8hpp_source.html#l00146">transition_table_</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_cgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_cgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_cgraph" id="aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_cgraph">
<area shape="rect" title="Callback for timeouts. Used to trigger timeout signals for the state machine." alt="" coords="5,179,152,235"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aeec5e1584741de33c3c5f23f3ebe529a" title="Returns the current state." alt="" coords="200,127,387,183"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a0f5e05d562934f0e04d7f64f9d2fd95c" title="Trigger signal for the transition table." alt="" coords="200,231,387,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a2436fd6ba3b137c8f94ae07660763e8f" title=" " alt="" coords="435,311,743,367"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ac0a99a2e6cff16fd3d75212ce97beb21" title=" " alt="" coords="495,391,682,447"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a23f60d98eb471786a4ad04d9ad18c094" title=" " alt="" coords="455,471,722,527"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a63a7132b4e220496356ff142df4daba2" title=" " alt="" coords="495,71,682,127"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#ad6622c59f8297f8f8654de9c0208ab44" title=" " alt="" coords="494,151,683,207"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#aab9c58979971dcdabde93e222d5f5028" title=" " alt="" coords="493,231,684,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a909aab1a6b7683b40720282de992ca42" title="Helper function for logging the provide signal." alt="" coords="791,231,977,287"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationTransitionTable.html#a1b9ef45847204afb476ebb661e06454a" title="Function to change the current state and log the details of the transition." alt="" coords="791,311,977,367"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_icgraph.png" border="0" usemap="#aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_icgraph" alt=""/></div>
<map name="aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_icgraph" id="aclasslocalization__manager_1_1LocalizationManager_a180b8d484c93d7faea1a707a0d586a79_icgraph">
<area shape="rect" title="Callback for timeouts. Used to trigger timeout signals for the state machine." alt="" coords="412,5,559,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#a37e91016dd16e328bec5041afaf5bc0c" title="Callback for when a new state was triggered. Allows creation of entry/exit behavior for states." alt="" coords="200,5,364,61"/>
<area shape="rect" href="classlocalization__manager_1_1LocalizationManager.html#acbb7d81be472c3ec96f3d700b7ca823c" title="Constructor." alt="" coords="5,5,152,61"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4caa21b1d191857bc60a786ead351554" name="a4caa21b1d191857bc60a786ead351554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4caa21b1d191857bc60a786ead351554">&#9670;&nbsp;</a></span>config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlocalization__manager_1_1LocalizationManagerConfig.html">LocalizationManagerConfig</a> localization_manager::LocalizationManager::config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00144">144</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00051">computeNDTFreq()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00046">setConfig()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="ac4e5f615aa35031d88ce289d832dcb02" name="ac4e5f615aa35031d88ce289d832dcb02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4e5f615aa35031d88ce289d832dcb02">&#9670;&nbsp;</a></span>current_pose_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;geometry_msgs::msg::PoseStamped&gt; localization_manager::LocalizationManager::current_pose_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00154">154</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00173">initialPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="ad5798343089ac239263eb82275aad228" name="ad5798343089ac239263eb82275aad228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5798343089ac239263eb82275aad228">&#9670;&nbsp;</a></span>current_timer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">TimerUniquePtr</a> localization_manager::LocalizationManager::current_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00163">163</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="a1b6c443414a7d5e417e365ef0bd0c254" name="a1b6c443414a7d5e417e365ef0bd0c254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6c443414a7d5e417e365ef0bd0c254">&#9670;&nbsp;</a></span>current_timer_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> localization_manager::LocalizationManager::current_timer_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00165">165</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="aafd6886f83ce04f8d2c49ca0b85b9a9a" name="aafd6886f83ce04f8d2c49ca0b85b9a9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafd6886f83ce04f8d2c49ca0b85b9a9a">&#9670;&nbsp;</a></span>gnss_offset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;tf2::Vector3&gt; localization_manager::LocalizationManager::gnss_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00153">153</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="ad607aaab0ad2cc47bc4793106f54616e" name="ad607aaab0ad2cc47bc4793106f54616e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad607aaab0ad2cc47bc4793106f54616e">&#9670;&nbsp;</a></span>initialpose_pub_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aef7191d344d1c87a83903453ab82eb76">ManagedInitialPosePublisher</a> localization_manager::LocalizationManager::initialpose_pub_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00142">142</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00173">initialPoseCallback()</a>.</p>

</div>
</div>
<a id="a39c9636657b5d522204253456836b13b" name="a39c9636657b5d522204253456836b13b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c9636657b5d522204253456836b13b">&#9670;&nbsp;</a></span>is_sequential_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> localization_manager::LocalizationManager::is_sequential_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00151">151</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>.</p>

</div>
</div>
<a id="a4728052763f8223186c97e3169126062" name="a4728052763f8223186c97e3169126062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4728052763f8223186c97e3169126062">&#9670;&nbsp;</a></span>last_raw_gnss_value_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;geometry_msgs::msg::PoseStamped&gt; localization_manager::LocalizationManager::last_raw_gnss_value_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00152">152</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="a852f8fa433424784ce64e712a5f1a9e6" name="a852f8fa433424784ce64e712a5f1a9e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a852f8fa433424784ce64e712a5f1a9e6">&#9670;&nbsp;</a></span>LIDAR_FAILURE_STRINGS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_set&lt; std::string &gt; localization_manager::LocalizationManager::LIDAR_FAILURE_STRINGS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The set of strings which mark a lidar failure in a system alert message. </p>

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00138">138</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00181">systemAlertCallback()</a>.</p>

</div>
</div>
<a id="a06d56bb3fcbc47135a84653fb202dd47" name="a06d56bb3fcbc47135a84653fb202dd47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d56bb3fcbc47135a84653fb202dd47">&#9670;&nbsp;</a></span>lidar_init_sequential_timesteps_counter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> localization_manager::LocalizationManager::lidar_init_sequential_timesteps_counter_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00150">150</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00173">initialPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="a1fd9faf8ff9460cff6066dd2323453e8" name="a1fd9faf8ff9460cff6066dd2323453e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fd9faf8ff9460cff6066dd2323453e8">&#9670;&nbsp;</a></span>logger_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr localization_manager::LocalizationManager::logger_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00157">157</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

</div>
</div>
<a id="a6b70bd02d34a73dfc7b05ae9e63d0502" name="a6b70bd02d34a73dfc7b05ae9e63d0502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b70bd02d34a73dfc7b05ae9e63d0502">&#9670;&nbsp;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex localization_manager::LocalizationManager::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00160">160</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00206">clearTimers()</a>.</p>

</div>
</div>
<a id="a56f2d3375a21dea78754e388dac1997e" name="a56f2d3375a21dea78754e388dac1997e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f2d3375a21dea78754e388dac1997e">&#9670;&nbsp;</a></span>next_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> localization_manager::LocalizationManager::next_id_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00164">164</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00200">nextId()</a>.</p>

</div>
</div>
<a id="aa33a58bf865e068cde48d411f16e1299" name="aa33a58bf865e068cde48d411f16e1299"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa33a58bf865e068cde48d411f16e1299">&#9670;&nbsp;</a></span>pose_pub_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#ac75e2c2af5e2a75a6ee3ce23ce2a290d">PosePublisher</a> localization_manager::LocalizationManager::pose_pub_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00140">140</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="ab81bcd2a98e3d1194a8fd1f2f5794bf5" name="ab81bcd2a98e3d1194a8fd1f2f5794bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab81bcd2a98e3d1194a8fd1f2f5794bf5">&#9670;&nbsp;</a></span>prev_ndt_stamp_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;rclcpp::Time&gt; localization_manager::LocalizationManager::prev_ndt_stamp_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00148">148</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00051">computeNDTFreq()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="a93edbdcc39c9116097b2ccd3249852c5" name="a93edbdcc39c9116097b2ccd3249852c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93edbdcc39c9116097b2ccd3249852c5">&#9670;&nbsp;</a></span>state_pub_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html#a7b5d0959c7592ae97ad032a3e1e9f2a3">StatePublisher</a> localization_manager::LocalizationManager::state_pub_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00141">141</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="a9d753ea64cf1496b644e9245e13f387c" name="a9d753ea64cf1496b644e9245e13f387c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d753ea64cf1496b644e9245e13f387c">&#9670;&nbsp;</a></span>timer_clock_type_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rcl_clock_type_t localization_manager::LocalizationManager::timer_clock_type_ = RCL_SYSTEM_TIME</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00166">166</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00026">LocalizationManager()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00051">computeNDTFreq()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>.</p>

</div>
</div>
<a id="a673a02a2282dcbeff6d9df5f91c1f8d6" name="a673a02a2282dcbeff6d9df5f91c1f8d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673a02a2282dcbeff6d9df5f91c1f8d6">&#9670;&nbsp;</a></span>timer_factory_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;carma_ros2_utils::timers::TimerFactory&gt; localization_manager::LocalizationManager::timer_factory_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00161">161</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00026">LocalizationManager()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="ae067b5ec0c115080299c03529f3b2861" name="ae067b5ec0c115080299c03529f3b2861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae067b5ec0c115080299c03529f3b2861">&#9670;&nbsp;</a></span>timers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, std::pair&lt;<a class="el" href="classlocalization__manager_1_1LocalizationManager.html#aad90c46a0d8ac4dfa2a76eb3a65bd0af">TimerUniquePtr</a>, <a class="el" href="classbool.html">bool</a>&gt; &gt; localization_manager::LocalizationManager::timers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00162">162</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00206">clearTimers()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00227">stateTransitionCallback()</a>.</p>

</div>
</div>
<a id="a8f6a02f44f6812384262295e1e8ad132" name="a8f6a02f44f6812384262295e1e8ad132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f6a02f44f6812384262295e1e8ad132">&#9670;&nbsp;</a></span>transition_table_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlocalization__manager_1_1LocalizationTransitionTable.html">LocalizationTransitionTable</a> localization_manager::LocalizationManager::transition_table_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LocalizationManager_8hpp_source.html#l00146">146</a> of file <a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LocalizationManager_8cpp_source.html#l00026">LocalizationManager()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00316">getState()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00143">gnssPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00173">initialPoseCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00070">poseAndStatsCallback()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00263">posePubTick()</a>, <a class="el" href="LocalizationManager_8cpp_source.html#l00181">systemAlertCallback()</a>, and <a class="el" href="LocalizationManager_8cpp_source.html#l00189">timerCallback()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>localization_manager/include/localization_manager/<a class="el" href="LocalizationManager_8hpp_source.html">LocalizationManager.hpp</a></li>
<li>localization_manager/src/<a class="el" href="LocalizationManager_8cpp_source.html">LocalizationManager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelocalization__manager.html">localization_manager</a></li><li class="navelem"><a class="el" href="classlocalization__manager_1_1LocalizationManager.html">LocalizationManager</a></li>
    <li class="footer">Generated on Fri Jun 23 2023 18:15:27 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
