<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: health_monitor::DriverManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classhealth__monitor_1_1DriverManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classhealth__monitor_1_1DriverManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">health_monitor::DriverManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="driver__manager_8h_source.html">driver_manager.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for health_monitor::DriverManager:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager__coll__graph.png" border="0" usemap="#ahealth__monitor_1_1DriverManager_coll__map" alt="Collaboration graph"/></div>
<map name="ahealth__monitor_1_1DriverManager_coll__map" id="ahealth__monitor_1_1DriverManager_coll__map">
<area shape="rect" title=" " alt="" coords="212,491,409,685"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html" title=" " alt="" coords="71,204,263,428"/>
<area shape="rect" title=" " alt="" coords="5,5,160,97"/>
<area shape="rect" title=" " alt="" coords="184,13,320,90"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="287,277,334,355"/>
<area shape="rect" title=" " alt="" coords="397,277,443,355"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a51c81a606c3bd59463d33863060141e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a51c81a606c3bd59463d33863060141e9">DriverManager</a> ()</td></tr>
<tr class="memdesc:a51c81a606c3bd59463d33863060141e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor for <a class="el" href="classhealth__monitor_1_1DriverManager.html">DriverManager</a> with driver_timeout_ = 1000.  <a href="classhealth__monitor_1_1DriverManager.html#a51c81a606c3bd59463d33863060141e9">More...</a><br /></td></tr>
<tr class="separator:a51c81a606c3bd59463d33863060141e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad394e0f1559b2d8b2797c8c8048f71db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#ad394e0f1559b2d8b2797c8c8048f71db">DriverManager</a> (std::vector&lt; std::string &gt; critical_driver_names, const long driver_timeout, std::vector&lt; std::string &gt; lidar_gps_driver_names, std::vector&lt; std::string &gt; camera_driver_names)</td></tr>
<tr class="memdesc:ad394e0f1559b2d8b2797c8c8048f71db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classhealth__monitor_1_1DriverManager.html">DriverManager</a> takes in crtitical driver names and driver timeout.  <a href="classhealth__monitor_1_1DriverManager.html#ad394e0f1559b2d8b2797c8c8048f71db">More...</a><br /></td></tr>
<tr class="separator:ad394e0f1559b2d8b2797c8c8048f71db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52833c1c62820e161714fab489eabdcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a52833c1c62820e161714fab489eabdcb">update_driver_status</a> (const cav_msgs::DriverStatusConstPtr &amp;msg, long current_time)</td></tr>
<tr class="memdesc:a52833c1c62820e161714fab489eabdcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update driver status.  <a href="classhealth__monitor_1_1DriverManager.html#a52833c1c62820e161714fab489eabdcb">More...</a><br /></td></tr>
<tr class="separator:a52833c1c62820e161714fab489eabdcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a657e4039414f06c43625633f281c2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2">are_critical_drivers_operational_truck</a> (long current_time)</td></tr>
<tr class="memdesc:a39a657e4039414f06c43625633f281c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all critical drivers are operational for truck.  <a href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2">More...</a><br /></td></tr>
<tr class="separator:a39a657e4039414f06c43625633f281c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09a1e7ae9666784702fe99c35457dd7"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7">are_critical_drivers_operational_car</a> (long current_time)</td></tr>
<tr class="memdesc:ac09a1e7ae9666784702fe99c35457dd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all critical drivers are operational for car.  <a href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7">More...</a><br /></td></tr>
<tr class="separator:ac09a1e7ae9666784702fe99c35457dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d3ffc516df63bf934d59f8e787dfd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a> (<a class="el" href="classint.html">int</a> &amp;sensor_input, <a class="el" href="classbool.html">bool</a> available, long current_time, long timestamp, long driver_timeout)</td></tr>
<tr class="memdesc:a89d3ffc516df63bf934d59f8e787dfd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate if the sensor is available.  <a href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">More...</a><br /></td></tr>
<tr class="separator:a89d3ffc516df63bf934d59f8e787dfd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bc9cac7e2d7690021175f01efef726"><td class="memItemLeft" align="right" valign="top">cav_msgs::SystemAlert&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a75bc9cac7e2d7690021175f01efef726">handleSpin</a> (<a class="el" href="classbool.html">bool</a> truck, <a class="el" href="classbool.html">bool</a> car, long time_now, long start_up_timestamp, long startup_duration)</td></tr>
<tr class="memdesc:a75bc9cac7e2d7690021175f01efef726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the spin and publisher.  <a href="classhealth__monitor_1_1DriverManager.html#a75bc9cac7e2d7690021175f01efef726">More...</a><br /></td></tr>
<tr class="separator:a75bc9cac7e2d7690021175f01efef726"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2fad75e091aeae2ae3d28e283f2b7a7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classhealth__monitor_1_1EntryManager.html">EntryManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a></td></tr>
<tr class="separator:a2fad75e091aeae2ae3d28e283f2b7a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a77c8e374b30b24fc20958571ab920"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">starting_up_</a> = true</td></tr>
<tr class="separator:aa1a77c8e374b30b24fc20958571ab920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c806fb500acedf46dc821189fe2e0b"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a> {1000}</td></tr>
<tr class="separator:a50c806fb500acedf46dc821189fe2e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="driver__manager_8h_source.html#l00025">25</a> of file <a class="el" href="driver__manager_8h_source.html">driver_manager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a51c81a606c3bd59463d33863060141e9" name="a51c81a606c3bd59463d33863060141e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c81a606c3bd59463d33863060141e9">&#9670;&nbsp;</a></span>DriverManager() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">health_monitor::DriverManager::DriverManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor for <a class="el" href="classhealth__monitor_1_1DriverManager.html">DriverManager</a> with driver_timeout_ = 1000. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00021">21</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad394e0f1559b2d8b2797c8c8048f71db" name="ad394e0f1559b2d8b2797c8c8048f71db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad394e0f1559b2d8b2797c8c8048f71db">&#9670;&nbsp;</a></span>DriverManager() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">health_monitor::DriverManager::DriverManager </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>critical_driver_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const long&#160;</td>
          <td class="paramname"><em>driver_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>lidar_gps_driver_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>camera_driver_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classhealth__monitor_1_1DriverManager.html">DriverManager</a> takes in crtitical driver names and driver timeout. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00023">23</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>                                              :</div>
<div class="line"><span class="lineno">   25</span>                                <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>(EntryManager(critical_driver_names,lidar_gps_driver_names, camera_driver_names)), <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>(driver_timeout) {}</div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_a2fad75e091aeae2ae3d28e283f2b7a7a"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">health_monitor::DriverManager::em_</a></div><div class="ttdeci">EntryManager em_</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8h_source.html#l00061">driver_manager.h:61</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_a50c806fb500acedf46dc821189fe2e0b"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">health_monitor::DriverManager::driver_timeout_</a></div><div class="ttdeci">long driver_timeout_</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8h_source.html#l00064">driver_manager.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac09a1e7ae9666784702fe99c35457dd7" name="ac09a1e7ae9666784702fe99c35457dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09a1e7ae9666784702fe99c35457dd7">&#9670;&nbsp;</a></span>are_critical_drivers_operational_car()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string health_monitor::DriverManager::are_critical_drivers_operational_car </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>current_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if all critical drivers are operational for car. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00136">136</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span>    {</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordtype">int</span> ssc=0;</div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordtype">int</span> lidar=0;</div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordtype">int</span> gps=0;</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordtype">int</span> camera=0;</div>
<div class="line"><span class="lineno">  142</span>        std::vector&lt;Entry&gt; driver_list = <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e">get_entries</a>(); <span class="comment">//Real time driver list from driver status</span></div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = driver_list.begin(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; driver_list.end(); ++<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>)</div>
<div class="line"><span class="lineno">  144</span>        {</div>
<div class="line"><span class="lineno">  145</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8">is_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_))</div>
<div class="line"><span class="lineno">  146</span>            {</div>
<div class="line"><span class="lineno">  147</span>                <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(ssc,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">  148</span>            }</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">is_lidar_gps_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==0) <span class="comment">//Lidar</span></div>
<div class="line"><span class="lineno">  150</span>            {   </div>
<div class="line"><span class="lineno">  151</span>                <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(lidar,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">  152</span>            }</div>
<div class="line"><span class="lineno">  153</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">is_lidar_gps_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==1) <span class="comment">//GPS</span></div>
<div class="line"><span class="lineno">  154</span>            {</div>
<div class="line"><span class="lineno">  155</span>                <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(gps,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">  156</span>            }</div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79">is_camera_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==0)</div>
<div class="line"><span class="lineno">  158</span>            {</div>
<div class="line"><span class="lineno">  159</span>                <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(camera,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">  160</span>            }</div>
<div class="line"><span class="lineno">  161</span>        }</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  164</span>        <span class="comment">// NOTE: THIS IS A MANUAL DISABLE OF ALL LIDAR FAILURE DETECTION FOLLOWING THE ROS2 PORT</span></div>
<div class="line"><span class="lineno">  166</span><span class="comment"></span>        lidar=1;</div>
<div class="line"><span class="lineno">  167</span>        gps=1;</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>        <span class="comment">//Decision making </span></div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">if</span>(ssc==1)</div>
<div class="line"><span class="lineno">  172</span>        {</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">if</span>((lidar==0) &amp;&amp; (gps==0))</div>
<div class="line"><span class="lineno">  174</span>            {</div>
<div class="line"><span class="lineno">  175</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_0_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">  176</span>            }</div>
<div class="line"><span class="lineno">  177</span>            </div>
<div class="line"><span class="lineno">  178</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar==0) &amp;&amp; (gps==1) &amp;&amp; (camera == 1))</div>
<div class="line"><span class="lineno">  179</span>            {</div>
<div class="line"><span class="lineno">  180</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_0_g_1&quot;</span>;</div>
<div class="line"><span class="lineno">  181</span>            }</div>
<div class="line"><span class="lineno">  182</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar==1) &amp;&amp; (gps==0) &amp;&amp; (camera == 1))</div>
<div class="line"><span class="lineno">  183</span>            {</div>
<div class="line"><span class="lineno">  184</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_1_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">  185</span>            }</div>
<div class="line"><span class="lineno">  186</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((camera==0) &amp;&amp; (lidar == 1) &amp;&amp; (gps ==1))</div>
<div class="line"><span class="lineno">  187</span>            {</div>
<div class="line"><span class="lineno">  188</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_1_g_1_c_0&quot;</span>;</div>
<div class="line"><span class="lineno">  189</span>            }</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((camera==0) &amp;&amp; (lidar == 0) &amp;&amp; (gps == 1))</div>
<div class="line"><span class="lineno">  191</span>            {</div>
<div class="line"><span class="lineno">  192</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_0_g_1_c_0&quot;</span>;</div>
<div class="line"><span class="lineno">  193</span>            }</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((camera==0) &amp;&amp; (lidar == 1) &amp;&amp; (gps == 0))</div>
<div class="line"><span class="lineno">  195</span>            {</div>
<div class="line"><span class="lineno">  196</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_1_g_0_c_0&quot;</span>;</div>
<div class="line"><span class="lineno">  197</span>            }</div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar==1) &amp;&amp; (gps==1) &amp;&amp; (camera == 1))</div>
<div class="line"><span class="lineno">  199</span>            {</div>
<div class="line"><span class="lineno">  200</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l_1_g_1_c_1&quot;</span>;</div>
<div class="line"><span class="lineno">  201</span>            }</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>        }</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  205</span>        {</div>
<div class="line"><span class="lineno">  206</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_0&quot;</span>;</div>
<div class="line"><span class="lineno">  207</span>        }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>    }</div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_a89d3ffc516df63bf934d59f8e787dfd0"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">health_monitor::DriverManager::evaluate_sensor</a></div><div class="ttdeci">void evaluate_sensor(int &amp;sensor_input, bool available, long current_time, long timestamp, long driver_timeout)</div><div class="ttdoc">Evaluate if the sensor is available.</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8cpp_source.html#l00035">driver_manager.cpp:35</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1EntryManager_html_a1256456c461297157cd3a651190096c8"><div class="ttname"><a href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8">health_monitor::EntryManager::is_entry_required</a></div><div class="ttdeci">bool is_entry_required(const std::string &amp;name) const</div><div class="ttdoc">Check if the entry is required.</div><div class="ttdef"><b>Definition:</b> <a href="health__monitor_2src_2entry__manager_8cpp_source.html#l00078">entry_manager.cpp:78</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1EntryManager_html_a275bc9653940317f85431dadf4cccc79"><div class="ttname"><a href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79">health_monitor::EntryManager::is_camera_entry_required</a></div><div class="ttdeci">int is_camera_entry_required(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="health__monitor_2src_2entry__manager_8cpp_source.html#l00105">entry_manager.cpp:105</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1EntryManager_html_a3d536a9a44ed582fcd11fa3b4651545e"><div class="ttname"><a href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e">health_monitor::EntryManager::get_entries</a></div><div class="ttdeci">std::vector&lt; Entry &gt; get_entries() const</div><div class="ttdoc">Get all registed entries as a list.</div><div class="ttdef"><b>Definition:</b> <a href="health__monitor_2src_2entry__manager_8cpp_source.html#l00047">entry_manager.cpp:47</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1EntryManager_html_a4e33c11ff040905b0b49d9e2f421bb5d"><div class="ttname"><a href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">health_monitor::EntryManager::is_lidar_gps_entry_required</a></div><div class="ttdeci">int is_lidar_gps_entry_required(const std::string &amp;name) const</div><div class="ttdoc">Check if the entry is required.</div><div class="ttdef"><b>Definition:</b> <a href="health__monitor_2src_2entry__manager_8cpp_source.html#l00090">entry_manager.cpp:90</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="driver__manager_8h_source.html#l00064">driver_timeout_</a>, <a class="el" href="driver__manager_8h_source.html#l00061">em_</a>, <a class="el" href="driver__manager_8cpp_source.html#l00035">evaluate_sensor()</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00047">health_monitor::EntryManager::get_entries()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00105">health_monitor::EntryManager::is_camera_entry_required()</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00078">health_monitor::EntryManager::is_entry_required()</a>, and <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00090">health_monitor::EntryManager::is_lidar_gps_entry_required()</a>.</p>

<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00211">handleSpin()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_cgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_cgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_cgraph" id="aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_cgraph">
<area shape="rect" title="Check if all critical drivers are operational for car." alt="" coords="5,136,237,177"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0" title="Evaluate if the sensor is available." alt="" coords="285,5,483,47"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e" title="Get all registed entries as a list." alt="" coords="288,71,480,112"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79" title=" " alt="" coords="288,136,480,177"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8" title="Check if the entry is required." alt="" coords="288,201,480,243"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d" title="Check if the entry is required." alt="" coords="288,267,480,308"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_icgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_icgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_icgraph" id="aclasshealth__monitor_1_1DriverManager_ac09a1e7ae9666784702fe99c35457dd7_icgraph">
<area shape="rect" title="Check if all critical drivers are operational for car." alt="" coords="251,5,483,47"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a75bc9cac7e2d7690021175f01efef726" title="Handle the spin and publisher." alt="" coords="5,5,203,47"/>
</map>
</div>

</div>
</div>
<a id="a39a657e4039414f06c43625633f281c2" name="a39a657e4039414f06c43625633f281c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a657e4039414f06c43625633f281c2">&#9670;&nbsp;</a></span>are_critical_drivers_operational_truck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string health_monitor::DriverManager::are_critical_drivers_operational_truck </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>current_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if all critical drivers are operational for truck. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00047">47</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>    {</div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordtype">int</span> ssc=0;</div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordtype">int</span> lidar1=0;</div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordtype">int</span> lidar2=0;</div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordtype">int</span> gps=0;</div>
<div class="line"><span class="lineno">   53</span>        <span class="keywordtype">int</span> camera=0; <span class="comment">//Add Camera Driver</span></div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>        std::vector&lt;Entry&gt; driver_list = <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e">get_entries</a>(); <span class="comment">//Real time driver list from driver status</span></div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = driver_list.begin(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; driver_list.end(); ++<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>)</div>
<div class="line"><span class="lineno">   57</span>        {</div>
<div class="line"><span class="lineno">   58</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8">is_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_))</div>
<div class="line"><span class="lineno">   59</span>            {</div>
<div class="line"><span class="lineno">   60</span>              <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(ssc,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">   61</span>            }</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">is_lidar_gps_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==0) <span class="comment">//Lidar1</span></div>
<div class="line"><span class="lineno">   64</span>            {</div>
<div class="line"><span class="lineno">   65</span>               <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(lidar1,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">   66</span>            }</div>
<div class="line"><span class="lineno">   67</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">is_lidar_gps_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==1) <span class="comment">//Lidar2</span></div>
<div class="line"><span class="lineno">   68</span>            {</div>
<div class="line"><span class="lineno">   69</span>              <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(lidar2,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">   70</span>            }</div>
<div class="line"><span class="lineno">   71</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d">is_lidar_gps_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==2) <span class="comment">//GPS</span></div>
<div class="line"><span class="lineno">   72</span>            {</div>
<div class="line"><span class="lineno">   73</span>              <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(gps,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">   74</span>            }</div>
<div class="line"><span class="lineno">   75</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79">is_camera_entry_required</a>(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;name_)==0)</div>
<div class="line"><span class="lineno">   76</span>            {</div>
<div class="line"><span class="lineno">   77</span>                <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0">evaluate_sensor</a>(camera,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;available_,current_time,<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>-&gt;timestamp_,<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a50c806fb500acedf46dc821189fe2e0b">driver_timeout_</a>);</div>
<div class="line"><span class="lineno">   78</span>            }</div>
<div class="line"><span class="lineno">   79</span>            </div>
<div class="line"><span class="lineno">   80</span>        }</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   83</span>        <span class="comment">// NOTE: THIS IS A MANUAL DISABLE OF ALL LIDAR AND GPS FAILURE DETECTION FOLLOWING THE ROS2 PORT</span></div>
<div class="line"><span class="lineno">   85</span><span class="comment"></span>        lidar1=1;</div>
<div class="line"><span class="lineno">   86</span>        lidar2=1;</div>
<div class="line"><span class="lineno">   87</span>        gps=1;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>        <span class="comment">//Decision making </span></div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">if</span> (ssc == 0)</div>
<div class="line"><span class="lineno">   92</span>        {</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_0&quot;</span>;</div>
<div class="line"><span class="lineno">   94</span>        }</div>
<div class="line"><span class="lineno">   95</span>        <span class="comment">// if ssc= 1</span></div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">if</span>((lidar1==0) &amp;&amp; (lidar2==0) &amp;&amp; (gps==0))</div>
<div class="line"><span class="lineno">   97</span>        {</div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_0_l2_0_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">   99</span>        }</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==0) &amp;&amp; (lidar2==0) &amp;&amp; (gps==1))</div>
<div class="line"><span class="lineno">  101</span>        {</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_0_l2_0_g_1&quot;</span>;</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==0) &amp;&amp; (lidar2==1) &amp;&amp; (gps==0))</div>
<div class="line"><span class="lineno">  105</span>        {</div>
<div class="line"><span class="lineno">  106</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_0_l2_1_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">  107</span>        }</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==0) &amp;&amp; (lidar2==1) &amp;&amp; (gps==1))</div>
<div class="line"><span class="lineno">  109</span>        {</div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_0_l2_1_g_1&quot;</span>;</div>
<div class="line"><span class="lineno">  111</span>        }</div>
<div class="line"><span class="lineno">  112</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==1) &amp;&amp; (lidar2==0) &amp;&amp; (gps==0))</div>
<div class="line"><span class="lineno">  113</span>        {</div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_1_l2_0_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">  115</span>        }</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==1) &amp;&amp; (lidar2==0) &amp;&amp; (gps==1))</div>
<div class="line"><span class="lineno">  117</span>        {</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_1_l2_0_g_1&quot;</span>;</div>
<div class="line"><span class="lineno">  119</span>        }</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==1) &amp;&amp; (lidar2==1) &amp;&amp; (gps==0))</div>
<div class="line"><span class="lineno">  121</span>        {</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_1_l2_1_g_0&quot;</span>;</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((camera==0) &amp;&amp; (lidar1 ==1) &amp;&amp; (lidar2 == 1) &amp;&amp; (gps == 1) )</div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_1_l2_1_g_1_c_0&quot;</span>;</div>
<div class="line"><span class="lineno">  127</span>        }</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((lidar1==1) &amp;&amp; (lidar2==1) &amp;&amp; (gps==1) &amp;&amp; (camera == 1))</div>
<div class="line"><span class="lineno">  129</span>        {</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;s_1_l1_1_l2_1_g_1_c_1&quot;</span>;</div>
<div class="line"><span class="lineno">  131</span>        }</div>
<div class="line"><span class="lineno">  132</span>        </div>
<div class="line"><span class="lineno">  133</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="driver__manager_8h_source.html#l00064">driver_timeout_</a>, <a class="el" href="driver__manager_8h_source.html#l00061">em_</a>, <a class="el" href="driver__manager_8cpp_source.html#l00035">evaluate_sensor()</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00047">health_monitor::EntryManager::get_entries()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00105">health_monitor::EntryManager::is_camera_entry_required()</a>, <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00078">health_monitor::EntryManager::is_entry_required()</a>, and <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00090">health_monitor::EntryManager::is_lidar_gps_entry_required()</a>.</p>

<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00211">handleSpin()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_cgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_cgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_cgraph" id="aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_cgraph">
<area shape="rect" title="Check if all critical drivers are operational for truck." alt="" coords="5,136,248,177"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0" title="Evaluate if the sensor is available." alt="" coords="296,5,493,47"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e" title="Get all registed entries as a list." alt="" coords="299,71,491,112"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79" title=" " alt="" coords="299,136,491,177"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8" title="Check if the entry is required." alt="" coords="299,201,491,243"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d" title="Check if the entry is required." alt="" coords="299,267,491,308"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_icgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_icgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_icgraph" id="aclasshealth__monitor_1_1DriverManager_a39a657e4039414f06c43625633f281c2_icgraph">
<area shape="rect" title="Check if all critical drivers are operational for truck." alt="" coords="251,5,493,47"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a75bc9cac7e2d7690021175f01efef726" title="Handle the spin and publisher." alt="" coords="5,5,203,47"/>
</map>
</div>

</div>
</div>
<a id="a89d3ffc516df63bf934d59f8e787dfd0" name="a89d3ffc516df63bf934d59f8e787dfd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d3ffc516df63bf934d59f8e787dfd0">&#9670;&nbsp;</a></span>evaluate_sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void health_monitor::DriverManager::evaluate_sensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classint.html">int</a> &amp;&#160;</td>
          <td class="paramname"><em>sensor_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>available</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>driver_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate if the sensor is available. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00035">35</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>    {</div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">if</span>((!available) || (current_time-timestamp &gt; driver_timeout))</div>
<div class="line"><span class="lineno">   38</span>        {</div>
<div class="line"><span class="lineno">   39</span>            sensor_input=0;</div>
<div class="line"><span class="lineno">   40</span>        }</div>
<div class="line"><span class="lineno">   41</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   42</span>        {</div>
<div class="line"><span class="lineno">   43</span>            sensor_input=1;</div>
<div class="line"><span class="lineno">   44</span>        }</div>
<div class="line"><span class="lineno">   45</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00136">are_critical_drivers_operational_car()</a>, and <a class="el" href="driver__manager_8cpp_source.html#l00047">are_critical_drivers_operational_truck()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_a89d3ffc516df63bf934d59f8e787dfd0_icgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_a89d3ffc516df63bf934d59f8e787dfd0_icgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_a89d3ffc516df63bf934d59f8e787dfd0_icgraph" id="aclasshealth__monitor_1_1DriverManager_a89d3ffc516df63bf934d59f8e787dfd0_icgraph">
<area shape="rect" title="Evaluate if the sensor is available." alt="" coords="541,39,739,80"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7" title="Check if all critical drivers are operational for car." alt="" coords="256,5,488,47"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2" title="Check if all critical drivers are operational for truck." alt="" coords="251,71,493,112"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a75bc9cac7e2d7690021175f01efef726" title="Handle the spin and publisher." alt="" coords="5,39,203,80"/>
</map>
</div>

</div>
</div>
<a id="a75bc9cac7e2d7690021175f01efef726" name="a75bc9cac7e2d7690021175f01efef726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75bc9cac7e2d7690021175f01efef726">&#9670;&nbsp;</a></span>handleSpin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cav_msgs::SystemAlert health_monitor::DriverManager::handleSpin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>truck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>car</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>time_now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>start_up_timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>startup_duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the spin and publisher. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00211">211</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  212</span>    {</div>
<div class="line"><span class="lineno">  213</span>        cav_msgs::SystemAlert alert;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">if</span>(truck==<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  216</span>        {</div>
<div class="line"><span class="lineno">  217</span>            std::string status = <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2">are_critical_drivers_operational_truck</a>(time_now);</div>
<div class="line"><span class="lineno">  218</span>            <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l1_1_l2_1_g_1_c_1&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  219</span>            {</div>
<div class="line"><span class="lineno">  220</span>                <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">starting_up_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  221</span>                alert.description = <span class="stringliteral">&quot;All essential drivers are ready&quot;</span>;</div>
<div class="line"><span class="lineno">  222</span>                alert.type = cav_msgs::SystemAlert::DRIVERS_READY;</div>
<div class="line"><span class="lineno">  223</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  224</span>            } </div>
<div class="line"><span class="lineno">  225</span>           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">starting_up_</a> &amp;&amp; (time_now - start_up_timestamp &lt;= start_duration))</div>
<div class="line"><span class="lineno">  226</span>            {</div>
<div class="line"><span class="lineno">  227</span>                alert.description = <span class="stringliteral">&quot;System is starting up...&quot;</span>;</div>
<div class="line"><span class="lineno">  228</span>                alert.type = cav_msgs::SystemAlert::NOT_READY;</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  230</span>            }</div>
<div class="line"><span class="lineno">  231</span>             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l1_1_l2_1_g_1_c_0&quot;</span>)==0)</div>
<div class="line"><span class="lineno">  232</span>            {</div>
<div class="line"><span class="lineno">  233</span>                alert.description = <span class="stringliteral">&quot;Camera Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  234</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  235</span>            }</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((status.compare(<span class="stringliteral">&quot;s_1_l1_0_l2_1_g_1&quot;</span>) == 0) || (status.compare(<span class="stringliteral">&quot;s_1_l1_1_l2_0_g_1&quot;</span>) == 0))</div>
<div class="line"><span class="lineno">  237</span>            {</div>
<div class="line"><span class="lineno">  238</span>            </div>
<div class="line"><span class="lineno">  239</span>                alert.description = <span class="stringliteral">&quot;One LIDAR Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  240</span>                alert.type = cav_msgs::SystemAlert::CAUTION;</div>
<div class="line"><span class="lineno">  241</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  242</span>            }</div>
<div class="line"><span class="lineno">  243</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((status.compare(<span class="stringliteral">&quot;s_1_l1_0_l2_1_g_0&quot;</span>) == 0) || (status.compare(<span class="stringliteral">&quot;s_1_l1_1_l2_0_g_0&quot;</span>) == 0))</div>
<div class="line"><span class="lineno">  244</span>            {   </div>
<div class="line"><span class="lineno">  245</span>                alert.description = <span class="stringliteral">&quot;One Lidar and GPS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  246</span>                alert.type = cav_msgs::SystemAlert::CAUTION;</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  248</span>            } </div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l1_1_l2_1_g_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  250</span>            {</div>
<div class="line"><span class="lineno">  251</span>                alert.description = <span class="stringliteral">&quot;GPS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  252</span>                alert.type = cav_msgs::SystemAlert::CAUTION;</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  254</span>            }</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l1_0_l2_0_g_1&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  256</span>            {</div>
<div class="line"><span class="lineno">  257</span>                alert.description = <span class="stringliteral">&quot;Both LIDARS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  258</span>                alert.type = cav_msgs::SystemAlert::WARNING;</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  260</span>            }</div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l1_0_l2_0_g_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  262</span>            {</div>
<div class="line"><span class="lineno">  263</span>                alert.description = <span class="stringliteral">&quot;LIDARS and GPS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  264</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  266</span>            }</div>
<div class="line"><span class="lineno">  267</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  268</span>            {</div>
<div class="line"><span class="lineno">  269</span>                alert.description = <span class="stringliteral">&quot;SSC Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  270</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  271</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  272</span>            }</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  274</span>            {</div>
<div class="line"><span class="lineno">  275</span>                alert.description = <span class="stringliteral">&quot;Unknown problem assessing essential driver availability&quot;</span>;</div>
<div class="line"><span class="lineno">  276</span>                alert.type = cav_msgs::SystemAlert::FATAL;</div>
<div class="line"><span class="lineno">  277</span>                <span class="keywordflow">return</span> alert;  </div>
<div class="line"><span class="lineno">  278</span>            }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>        }</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(car==<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  282</span>        {</div>
<div class="line"><span class="lineno">  283</span>            std::string status = <a class="code hl_function" href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7">are_critical_drivers_operational_car</a>(time_now);</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_1_g_1_c_1&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  285</span>            {</div>
<div class="line"><span class="lineno">  286</span>                <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">starting_up_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  287</span>                alert.description = <span class="stringliteral">&quot;All essential drivers are ready&quot;</span>;</div>
<div class="line"><span class="lineno">  288</span>                alert.type = cav_msgs::SystemAlert::DRIVERS_READY;</div>
<div class="line"><span class="lineno">  289</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  290</span>            }</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">starting_up_</a> &amp;&amp; (time_now - start_up_timestamp &lt;= start_duration))</div>
<div class="line"><span class="lineno">  292</span>            {</div>
<div class="line"><span class="lineno">  293</span>                alert.description = <span class="stringliteral">&quot;System is starting up...&quot;</span>;</div>
<div class="line"><span class="lineno">  294</span>                alert.type = cav_msgs::SystemAlert::NOT_READY;</div>
<div class="line"><span class="lineno">  295</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  296</span>            }</div>
<div class="line"><span class="lineno">  297</span>            </div>
<div class="line"><span class="lineno">  298</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_1_g_1_c_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  299</span>            {</div>
<div class="line"><span class="lineno">  300</span>                alert.description = <span class="stringliteral">&quot;Camera Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  301</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  302</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  303</span>            } </div>
<div class="line"><span class="lineno">  304</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_1_g_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  305</span>            {</div>
<div class="line"><span class="lineno">  306</span>                alert.description = <span class="stringliteral">&quot;GPS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  307</span>                alert.type = cav_msgs::SystemAlert::CAUTION;</div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  309</span>            }</div>
<div class="line"><span class="lineno">  310</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_0_g_1&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  311</span>            {</div>
<div class="line"><span class="lineno">  312</span>                alert.description = <span class="stringliteral">&quot;LIDAR Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  313</span>                alert.type = cav_msgs::SystemAlert::WARNING;</div>
<div class="line"><span class="lineno">  314</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  315</span>            }</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_0_g_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  317</span>            {</div>
<div class="line"><span class="lineno">  318</span>                alert.description = <span class="stringliteral">&quot;LIDAR, GPS Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  319</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  321</span>            }</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_0_g_1_c_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  323</span>            {</div>
<div class="line"><span class="lineno">  324</span>                alert.description = <span class="stringliteral">&quot;LIDAR, Camera Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  325</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  326</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  327</span>            }</div>
<div class="line"><span class="lineno">  328</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_1_l_1_g_0_c_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  329</span>            {</div>
<div class="line"><span class="lineno">  330</span>                alert.description = <span class="stringliteral">&quot; GPS, Camera Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  331</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  332</span>                <span class="keywordflow">return</span> alert;</div>
<div class="line"><span class="lineno">  333</span>            }</div>
<div class="line"><span class="lineno">  334</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status.compare(<span class="stringliteral">&quot;s_0&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  335</span>            {</div>
<div class="line"><span class="lineno">  336</span>                alert.description = <span class="stringliteral">&quot;SSC Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  337</span>                alert.type = <a class="code hl_enumvalue" href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">cav_msgs::SystemAlert::SHUTDOWN</a>;</div>
<div class="line"><span class="lineno">  338</span>                <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  339</span>            }</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  341</span>            {</div>
<div class="line"><span class="lineno">  342</span>                alert.description = <span class="stringliteral">&quot;Unknown problem assessing essential driver availability&quot;</span>;</div>
<div class="line"><span class="lineno">  343</span>                alert.type = cav_msgs::SystemAlert::FATAL;</div>
<div class="line"><span class="lineno">  344</span>                <span class="keywordflow">return</span> alert;  </div>
<div class="line"><span class="lineno">  345</span>            }</div>
<div class="line"><span class="lineno">  346</span>        }</div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  348</span>        {</div>
<div class="line"><span class="lineno">  349</span>            alert.description = <span class="stringliteral">&quot;Need to set either truck or car flag&quot;</span>;</div>
<div class="line"><span class="lineno">  350</span>            alert.type = cav_msgs::SystemAlert::FATAL;</div>
<div class="line"><span class="lineno">  351</span>            <span class="keywordflow">return</span> alert; </div>
<div class="line"><span class="lineno">  352</span>        }</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_a39a657e4039414f06c43625633f281c2"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2">health_monitor::DriverManager::are_critical_drivers_operational_truck</a></div><div class="ttdeci">std::string are_critical_drivers_operational_truck(long current_time)</div><div class="ttdoc">Check if all critical drivers are operational for truck.</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8cpp_source.html#l00047">driver_manager.cpp:47</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_aa1a77c8e374b30b24fc20958571ab920"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#aa1a77c8e374b30b24fc20958571ab920">health_monitor::DriverManager::starting_up_</a></div><div class="ttdeci">bool starting_up_</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8h_source.html#l00062">driver_manager.h:62</a></div></div>
<div class="ttc" id="aclasshealth__monitor_1_1DriverManager_html_ac09a1e7ae9666784702fe99c35457dd7"><div class="ttname"><a href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7">health_monitor::DriverManager::are_critical_drivers_operational_car</a></div><div class="ttdeci">std::string are_critical_drivers_operational_car(long current_time)</div><div class="ttdoc">Check if all critical drivers are operational for car.</div><div class="ttdef"><b>Definition:</b> <a href="driver__manager_8cpp_source.html#l00136">driver_manager.cpp:136</a></div></div>
<div class="ttc" id="anamespacearbitrator_html_ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211"><div class="ttname"><a href="namespacearbitrator.html#ac55e5abbc531a17975af03c6b0868a22a71d9b235fbf749d1bbc5b783898a4211">arbitrator::SHUTDOWN</a></div><div class="ttdeci">@ SHUTDOWN</div><div class="ttdef"><b>Definition:</b> <a href="arbitrator__state__machine_8hpp_source.html#l00037">arbitrator_state_machine.hpp:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="driver__manager_8cpp_source.html#l00136">are_critical_drivers_operational_car()</a>, <a class="el" href="driver__manager_8cpp_source.html#l00047">are_critical_drivers_operational_truck()</a>, <a class="el" href="arbitrator__state__machine_8hpp_source.html#l00036">arbitrator::SHUTDOWN</a>, and <a class="el" href="driver__manager_8h_source.html#l00062">starting_up_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_a75bc9cac7e2d7690021175f01efef726_cgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_a75bc9cac7e2d7690021175f01efef726_cgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_a75bc9cac7e2d7690021175f01efef726_cgraph" id="aclasshealth__monitor_1_1DriverManager_a75bc9cac7e2d7690021175f01efef726_cgraph">
<area shape="rect" title="Handle the spin and publisher." alt="" coords="5,137,203,179"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#ac09a1e7ae9666784702fe99c35457dd7" title="Check if all critical drivers are operational for car." alt="" coords="256,104,488,145"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a39a657e4039414f06c43625633f281c2" title="Check if all critical drivers are operational for truck." alt="" coords="251,169,493,211"/>
<area shape="rect" href="classhealth__monitor_1_1DriverManager.html#a89d3ffc516df63bf934d59f8e787dfd0" title="Evaluate if the sensor is available." alt="" coords="541,71,739,112"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a3d536a9a44ed582fcd11fa3b4651545e" title="Get all registed entries as a list." alt="" coords="544,136,736,177"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a275bc9653940317f85431dadf4cccc79" title=" " alt="" coords="544,201,736,243"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a1256456c461297157cd3a651190096c8" title="Check if the entry is required." alt="" coords="544,267,736,308"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#a4e33c11ff040905b0b49d9e2f421bb5d" title="Check if the entry is required." alt="" coords="544,5,736,47"/>
</map>
</div>

</div>
</div>
<a id="a52833c1c62820e161714fab489eabdcb" name="a52833c1c62820e161714fab489eabdcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52833c1c62820e161714fab489eabdcb">&#9670;&nbsp;</a></span>update_driver_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void health_monitor::DriverManager::update_driver_status </td>
          <td>(</td>
          <td class="paramtype">const cav_msgs::DriverStatusConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>current_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update driver status. </p>

<p class="definition">Definition at line <a class="el" href="driver__manager_8cpp_source.html#l00027">27</a> of file <a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   28</span>    {</div>
<div class="line"><span class="lineno">   29</span>        Entry driver_status(msg-&gt;status == cav_msgs::DriverStatus::OPERATIONAL || msg-&gt;status == cav_msgs::DriverStatus::DEGRADED,<span class="keyword">true</span>, msg-&gt;name, current_time, 0, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">   30</span>        <a class="code hl_variable" href="classhealth__monitor_1_1DriverManager.html#a2fad75e091aeae2ae3d28e283f2b7a7a">em_</a>.<a class="code hl_function" href="classhealth__monitor_1_1EntryManager.html#aa70731be3af218703bb34f039a32fbd3">update_entry</a>(driver_status);</div>
<div class="line"><span class="lineno">   31</span>        <span class="comment">// NOTE: The following is a temporary hack to allow the lidar driver to be moved to ROS2 which will not use this node</span></div>
<div class="line"><span class="lineno">   32</span>        Entry fake_entry(msg-&gt;status == cav_msgs::DriverStatus::OPERATIONAL,<span class="keyword">true</span>, msg-&gt;name, current_time, 0, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">   33</span>    }</div>
<div class="ttc" id="aclasshealth__monitor_1_1EntryManager_html_aa70731be3af218703bb34f039a32fbd3"><div class="ttname"><a href="classhealth__monitor_1_1EntryManager.html#aa70731be3af218703bb34f039a32fbd3">health_monitor::EntryManager::update_entry</a></div><div class="ttdeci">void update_entry(const Entry &amp;entry)</div><div class="ttdoc">Add a new entry if the given name does not exist. Update an existing entry if the given name exists.</div><div class="ttdef"><b>Definition:</b> <a href="health__monitor_2src_2entry__manager_8cpp_source.html#l00030">entry_manager.cpp:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="driver__manager_8h_source.html#l00061">em_</a>, and <a class="el" href="health__monitor_2src_2entry__manager_8cpp_source.html#l00030">health_monitor::EntryManager::update_entry()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classhealth__monitor_1_1DriverManager_a52833c1c62820e161714fab489eabdcb_cgraph.png" border="0" usemap="#aclasshealth__monitor_1_1DriverManager_a52833c1c62820e161714fab489eabdcb_cgraph" alt=""/></div>
<map name="aclasshealth__monitor_1_1DriverManager_a52833c1c62820e161714fab489eabdcb_cgraph" id="aclasshealth__monitor_1_1DriverManager_a52833c1c62820e161714fab489eabdcb_cgraph">
<area shape="rect" title="Update driver status." alt="" coords="5,5,203,47"/>
<area shape="rect" href="classhealth__monitor_1_1EntryManager.html#aa70731be3af218703bb34f039a32fbd3" title="Add a new entry if the given name does not exist. Update an existing entry if the given name exists." alt="" coords="251,5,443,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a50c806fb500acedf46dc821189fe2e0b" name="a50c806fb500acedf46dc821189fe2e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c806fb500acedf46dc821189fe2e0b">&#9670;&nbsp;</a></span>driver_timeout_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long health_monitor::DriverManager::driver_timeout_ {1000}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="driver__manager_8h_source.html#l00064">64</a> of file <a class="el" href="driver__manager_8h_source.html">driver_manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00136">are_critical_drivers_operational_car()</a>, and <a class="el" href="driver__manager_8cpp_source.html#l00047">are_critical_drivers_operational_truck()</a>.</p>

</div>
</div>
<a id="a2fad75e091aeae2ae3d28e283f2b7a7a" name="a2fad75e091aeae2ae3d28e283f2b7a7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fad75e091aeae2ae3d28e283f2b7a7a">&#9670;&nbsp;</a></span>em_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhealth__monitor_1_1EntryManager.html">EntryManager</a> health_monitor::DriverManager::em_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="driver__manager_8h_source.html#l00061">61</a> of file <a class="el" href="driver__manager_8h_source.html">driver_manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00136">are_critical_drivers_operational_car()</a>, <a class="el" href="driver__manager_8cpp_source.html#l00047">are_critical_drivers_operational_truck()</a>, and <a class="el" href="driver__manager_8cpp_source.html#l00027">update_driver_status()</a>.</p>

</div>
</div>
<a id="aa1a77c8e374b30b24fc20958571ab920" name="aa1a77c8e374b30b24fc20958571ab920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1a77c8e374b30b24fc20958571ab920">&#9670;&nbsp;</a></span>starting_up_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> health_monitor::DriverManager::starting_up_ = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="driver__manager_8h_source.html#l00062">62</a> of file <a class="el" href="driver__manager_8h_source.html">driver_manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="driver__manager_8cpp_source.html#l00211">handleSpin()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>health_monitor/include/<a class="el" href="driver__manager_8h_source.html">driver_manager.h</a></li>
<li>health_monitor/src/<a class="el" href="driver__manager_8cpp_source.html">driver_manager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacehealth__monitor.html">health_monitor</a></li><li class="navelem"><a class="el" href="classhealth__monitor_1_1DriverManager.html">DriverManager</a></li>
    <li class="footer">Generated on Fri May 12 2023 22:02:16 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
