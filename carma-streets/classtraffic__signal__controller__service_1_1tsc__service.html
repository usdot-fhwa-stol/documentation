<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: traffic_signal_controller_service::tsc_service Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtraffic__signal__controller__service_1_1tsc__service.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classtraffic__signal__controller__service_1_1tsc__service-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">traffic_signal_controller_service::tsc_service Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for traffic_signal_controller_service::tsc_service:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service__inherit__graph.png" border="0" usemap="#atraffic__signal__controller__service_1_1tsc__service_inherit__map" alt="Inheritance graph"/></div>
<map name="atraffic__signal__controller__service_1_1tsc__service_inherit__map" id="atraffic__signal__controller__service_1_1tsc__service_inherit__map">
<area shape="rect" title=" " alt="" coords="5,571,256,1484"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html" title="Streets Service is a base class for CARMA&#45;Streets services. It initializes the streets_clock_singleto..." alt="" coords="21,5,240,523"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for traffic_signal_controller_service::tsc_service:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service__coll__graph.png" border="0" usemap="#atraffic__signal__controller__service_1_1tsc__service_coll__map" alt="Collaboration graph"/></div>
<map name="atraffic__signal__controller__service_1_1tsc__service_coll__map" id="atraffic__signal__controller__service_1_1tsc__service_coll__map">
<area shape="rect" title=" " alt="" coords="1795,755,1973,1316"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html" title="Streets Service is a base class for CARMA&#45;Streets services. It initializes the streets_clock_singleto..." alt="" coords="252,175,471,633"/>
<area shape="rect" title=" " alt="" coords="345,13,399,90"/>
<area shape="rect" title=" " alt="" coords="62,13,109,90"/>
<area shape="rect" title=" " alt="" coords="149,5,320,97"/>
<area shape="rect" title=" " alt="" coords="477,5,659,97"/>
<area shape="rect" title=" " alt="" coords="781,358,955,450"/>
<area shape="rect" title=" " alt="" coords="979,351,1151,457"/>
<area shape="rect" title=" " alt="" coords="1175,351,1347,457"/>
<area shape="rect" title=" " alt="" coords="1371,351,1575,457"/>
<area shape="rect" title=" " alt="" coords="1599,351,1771,457"/>
<area shape="rect" title=" " alt="" coords="1796,358,1972,450"/>
<area shape="rect" title=" " alt="" coords="1997,343,2166,465"/>
<area shape="rect" title=" " alt="" coords="2190,351,2357,457"/>
<area shape="rect" title=" " alt="" coords="2381,351,2553,457"/>
<area shape="rect" title=" " alt="" coords="2577,351,2749,457"/>
<area shape="rect" title=" " alt="" coords="2773,365,2811,443"/>
<area shape="rect" title=" " alt="" coords="2849,365,3042,443"/>
<area shape="rect" title=" " alt="" coords="3066,358,3241,450"/>
<area shape="rect" title=" " alt="" coords="3271,365,3326,443"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abfe9b97a69e5c4c8c614ed2f7bfda80d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#abfe9b97a69e5c4c8c614ed2f7bfda80d">tsc_service</a> ()=default</td></tr>
<tr class="separator:abfe9b97a69e5c4c8c614ed2f7bfda80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82f97b9874e91dd19f3557d8fc4905f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa82f97b9874e91dd19f3557d8fc4905f">~tsc_service</a> ()</td></tr>
<tr class="separator:aa82f97b9874e91dd19f3557d8fc4905f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1557609aa8e488d04f646e09cde9414"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#af1557609aa8e488d04f646e09cde9414">tsc_service</a> (const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;)=delete</td></tr>
<tr class="separator:af1557609aa8e488d04f646e09cde9414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d64c3a5157eb5d30cac4e54772e4b90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0d64c3a5157eb5d30cac4e54772e4b90">operator=</a> (const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;)=delete</td></tr>
<tr class="separator:a0d64c3a5157eb5d30cac4e54772e4b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb944363e0d001e15e5a515da611d452"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452">initialize</a> () override</td></tr>
<tr class="memdesc:abb944363e0d001e15e5a515da611d452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to initialize the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452">More...</a><br /></td></tr>
<tr class="separator:abb944363e0d001e15e5a515da611d452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbce68544a01f99199a07fb642342f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">initialize_snmp_client</a> (const std::string &amp;server_ip, const int server_port, const std::string &amp;community, const int snmp_version, const int timeout)</td></tr>
<tr class="memdesc:a0bbce68544a01f99199a07fb642342f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SNMP Client to make SNMP calls to Traffic Signal Controller.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">More...</a><br /></td></tr>
<tr class="separator:a0bbce68544a01f99199a07fb642342f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad711d135587e232d5cd92447b9a5af"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">initialize_tsc_state</a> (const std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt; _snmp_client_ptr)</td></tr>
<tr class="memdesc:adad711d135587e232d5cd92447b9a5af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic Signal Controller including default phase sequence, phase timing information, and phase number to signal group mapping.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">More...</a><br /></td></tr>
<tr class="separator:adad711d135587e232d5cd92447b9a5af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c50831f1ed8f48d8123b05b6724b32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a> () const</td></tr>
<tr class="memdesc:a34c50831f1ed8f48d8123b05b6724b32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to enable spat using the TSC Service SNMP Client.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">More...</a><br /></td></tr>
<tr class="separator:a34c50831f1ed8f48d8123b05b6724b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">initialize_spat_worker</a> (const std::string &amp;udp_socket_ip, const int udp_socket_port, const int timeout, const bool use_tsc_timestamp)</td></tr>
<tr class="memdesc:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic Signal Controller NTCIP UDP SPaT messages and updating the SPaT object using this information.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">More...</a><br /></td></tr>
<tr class="separator:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac8bd449d953386ac8db45dd89a5ec4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">initialize_intersection_client</a> ()</td></tr>
<tr class="memdesc:aac8bd449d953386ac8db45dd89a5ec4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and Intersection ID for SPaT message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">More...</a><br /></td></tr>
<tr class="separator:aac8bd449d953386ac8db45dd89a5ec4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e9845c840c058c682e215fe39a6e0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">initialize_spat</a> (const std::string &amp;intersection_name, const int intersection_id, const std::unordered_map&lt; int, int &gt; &amp;phase_number_to_signal_group)</td></tr>
<tr class="memdesc:a54e9845c840c058c682e215fe39a6e0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapping not provided in NTCIP UDP messages from TSC but required for interpretation.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">More...</a><br /></td></tr>
<tr class="separator:a54e9845c840c058c682e215fe39a6e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a965dba3d0f0cff4d2a36ecc38d2fed17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17">start</a> () override</td></tr>
<tr class="memdesc:a965dba3d0f0cff4d2a36ecc38d2fed17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to start all threads included in the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17">More...</a><br /></td></tr>
<tr class="separator:a965dba3d0f0cff4d2a36ecc38d2fed17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">produce_spat_json</a> () const</td></tr>
<tr class="memdesc:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-streets kafka broker.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">More...</a><br /></td></tr>
<tr class="separator:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae2c7b9e7f0ebd7f62be1f5ffccf65e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e">produce_tsc_config_json</a> () const</td></tr>
<tr class="memdesc:a5ae2c7b9e7f0ebd7f62be1f5ffccf65e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to receive traffic signal controller configuration information from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> and broadcast spat JSON data to the carma-streets kafka broker.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e">More...</a><br /></td></tr>
<tr class="separator:a5ae2c7b9e7f0ebd7f62be1f5ffccf65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee54b7d1fe61af7a3141f56bf234e91e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aee54b7d1fe61af7a3141f56bf234e91e">consume_desired_phase_plan</a> ()</td></tr>
<tr class="separator:aee54b7d1fe61af7a3141f56bf234e91e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c101262fa4c3fec9cf907b9a1f8ffa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9c101262fa4c3fec9cf907b9a1f8ffa4">consume_phase_control_schedule</a> ()</td></tr>
<tr class="memdesc:a9c101262fa4c3fec9cf907b9a1f8ffa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread callback function to run the phase control schedule Kafka consumer to consume phase control schedule JSON message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9c101262fa4c3fec9cf907b9a1f8ffa4">More...</a><br /></td></tr>
<tr class="separator:a9c101262fa4c3fec9cf907b9a1f8ffa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c68ad9bb9fc1a33029f50872687e87d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d">control_tsc_phases</a> ()</td></tr>
<tr class="memdesc:a2c68ad9bb9fc1a33029f50872687e87d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands constructed to follow the desired phase plan. Calls set_tsc_hold_and_omit_forceoff_call.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d">More...</a><br /></td></tr>
<tr class="separator:a2c68ad9bb9fc1a33029f50872687e87d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39fe31f914ae9c860737f5f967aac569"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569">set_tsc_hold_and_omit_forceoff_call</a> ()</td></tr>
<tr class="memdesc:a39fe31f914ae9c860737f5f967aac569"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desired phase plan/phase control schedule.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569">More...</a><br /></td></tr>
<tr class="separator:a39fe31f914ae9c860737f5f967aac569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0e96db941eb4fcd552e8f119a93d48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a4c0e96db941eb4fcd552e8f119a93d48">configure_snmp_cmd_logger</a> () const</td></tr>
<tr class="memdesc:a4c0e96db941eb4fcd552e8f119a93d48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to configure spdlog::logger for logging snmp control commands into daily rotating log file.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a4c0e96db941eb4fcd552e8f119a93d48">More...</a><br /></td></tr>
<tr class="separator:a4c0e96db941eb4fcd552e8f119a93d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c4d4787d47463da9fa9b895c17a8b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae6c4d4787d47463da9fa9b895c17a8b7">configure_veh_ped_call_logger</a> () const</td></tr>
<tr class="memdesc:ae6c4d4787d47463da9fa9b895c17a8b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal controller into daily rotating csvlog file.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae6c4d4787d47463da9fa9b895c17a8b7">More...</a><br /></td></tr>
<tr class="separator:ae6c4d4787d47463da9fa9b895c17a8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa03811146f8317d56ca5e7870a466e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e">log_spat_latency</a> (int &amp;count, uint64_t &amp;spat_processing_time, uint64_t spat_time_stamp) const</td></tr>
<tr class="memdesc:a8aa03811146f8317d56ca5e7870a466e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 messages then resets count and spat_processing_time.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e">More...</a><br /></td></tr>
<tr class="separator:a8aa03811146f8317d56ca5e7870a466e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstreets__service_1_1streets__service"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstreets__service_1_1streets__service')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstreets__service_1_1streets__service.html">streets_service::streets_service</a></td></tr>
<tr class="memitem:a4f8c1a1894494d3b0f3204feef422f19 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a4f8c1a1894494d3b0f3204feef422f19">streets_service</a> ()=default</td></tr>
<tr class="memdesc:a4f8c1a1894494d3b0f3204feef422f19 inherit pub_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classstreets__service_1_1streets__service.html#a4f8c1a1894494d3b0f3204feef422f19">More...</a><br /></td></tr>
<tr class="separator:a4f8c1a1894494d3b0f3204feef422f19 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae20694030798b876b9ef036a546bc560 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#ae20694030798b876b9ef036a546bc560">~streets_service</a> ()</td></tr>
<tr class="memdesc:ae20694030798b876b9ef036a546bc560 inherit pub_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor stop time_consumer kafka producer if not null.  <a href="classstreets__service_1_1streets__service.html#ae20694030798b876b9ef036a546bc560">More...</a><br /></td></tr>
<tr class="separator:ae20694030798b876b9ef036a546bc560 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9e60feaa48f9b122cdd238de25224a inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a2d9e60feaa48f9b122cdd238de25224a">streets_service</a> (const <a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;)=delete</td></tr>
<tr class="separator:a2d9e60feaa48f9b122cdd238de25224a inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5feb24ff7c195740049989ac4f5bd270 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a5feb24ff7c195740049989ac4f5bd270">streets_service</a> (<a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a5feb24ff7c195740049989ac4f5bd270 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11845d5f1691f80860f8fdfac6f54dd3 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a11845d5f1691f80860f8fdfac6f54dd3">operator=</a> (const <a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;)=delete</td></tr>
<tr class="separator:a11845d5f1691f80860f8fdfac6f54dd3 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbcbf07ceab854f963f5050169ed8725 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#afbcbf07ceab854f963f5050169ed8725">operator=</a> (const <a class="el" href="classstreets__service_1_1streets__service.html">streets_service</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:afbcbf07ceab854f963f5050169ed8725 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52fb893726747c22c954ff42d4ff873a inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a">initialize</a> ()</td></tr>
<tr class="memdesc:a52fb893726747c22c954ff42d4ff873a inherit pub_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to initialize services members, singletons, kafka consumers and producers and any other connections required for service. Classes that extend this <a class="el" href="classstreets__service_1_1streets__service.html" title="Streets Service is a base class for CARMA-Streets services. It initializes the streets_clock_singleto...">streets_service</a> need to override this method and call the streets_service::initialize() in the override method.  <a href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a">More...</a><br /></td></tr>
<tr class="separator:a52fb893726747c22c954ff42d4ff873a inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6754199ebc7f244293b496a2fffd548 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548">start</a> ()</td></tr>
<tr class="memdesc:ac6754199ebc7f244293b496a2fffd548 inherit pub_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to start all threads needed for the Streets Service. This includes but is not limited to any threads to consume/produce message to kafka, or poll internal/external resources. Classes that extend this <a class="el" href="classstreets__service_1_1streets__service.html" title="Streets Service is a base class for CARMA-Streets services. It initializes the streets_clock_singleto...">streets_service</a> need to override this method and call the <a class="el" href="namespacesimulate__timestep.html#a8e36b14ddff8cbf3161ee536e30711f5">streets_service::start()</a> in the override method.  <a href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548">More...</a><br /></td></tr>
<tr class="separator:ac6754199ebc7f244293b496a2fffd548 inherit pub_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9ffe9acea466075d864f9dadd7eee7f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9ffe9acea466075d864f9dadd7eee7f1">FRIEND_TEST</a> (<a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>, test_tsc_control)</td></tr>
<tr class="separator:a9ffe9acea466075d864f9dadd7eee7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ccd21aa9cf26fa6de3d444f9b3e7381"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ccd21aa9cf26fa6de3d444f9b3e7381">FRIEND_TEST</a> (<a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>, test_produce_tsc_config_json_timeout)</td></tr>
<tr class="separator:a5ccd21aa9cf26fa6de3d444f9b3e7381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d153a7741a3162fb7a499cbde14425"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad3d153a7741a3162fb7a499cbde14425">FRIEND_TEST</a> (<a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>, test_init_kafka_consumer_producer)</td></tr>
<tr class="separator:ad3d153a7741a3162fb7a499cbde14425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa103b6931f4d186fd8270a213d3096f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#afa103b6931f4d186fd8270a213d3096f">FRIEND_TEST</a> (<a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>, test_configure_snmp_cmd_logger)</td></tr>
<tr class="separator:afa103b6931f4d186fd8270a213d3096f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4292a0afffca6f5ff0f1747bc4ea634c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a4292a0afffca6f5ff0f1747bc4ea634c">FRIEND_TEST</a> (<a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>, test_configure_veh_ped_call_logger)</td></tr>
<tr class="separator:a4292a0afffca6f5ff0f1747bc4ea634c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1dfbd2157cd62094844fb2e1a6d70711"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a></td></tr>
<tr class="memdesc:a1dfbd2157cd62094844fb2e1a6d70711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kafka producer for spat JSON.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">More...</a><br /></td></tr>
<tr class="separator:a1dfbd2157cd62094844fb2e1a6d70711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5338cec3c1e2f4012158c1f949a9fa97"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a></td></tr>
<tr class="memdesc:a5338cec3c1e2f4012158c1f949a9fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kafka producer for tsc_configuration_state JSON.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">More...</a><br /></td></tr>
<tr class="separator:a5338cec3c1e2f4012158c1f949a9fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b452ea6a57d91e96ea8c6d30937828d"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__consumer__worker.html">kafka_clients::kafka_consumer_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a></td></tr>
<tr class="separator:a5b452ea6a57d91e96ea8c6d30937828d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1362a53dbc7f4e91fa256a2f4f45c3e0"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__consumer__worker.html">kafka_clients::kafka_consumer_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1362a53dbc7f4e91fa256a2f4f45c3e0">phase_control_schedule_consumer</a></td></tr>
<tr class="separator:a1362a53dbc7f4e91fa256a2f4f45c3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390a1495b441c84b4ad620113635556f"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a></td></tr>
<tr class="memdesc:a390a1495b441c84b4ad620113635556f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> contains <a class="el" href="classtraffic__signal__controller__service_1_1udp__socket__listener.html">udp_socket_listener</a> and consumes UDP data packets and updates spat accordingly.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">More...</a><br /></td></tr>
<tr class="separator:a390a1495b441c84b4ad620113635556f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a></td></tr>
<tr class="memdesc:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> queries and stores traffic signal controller configurations including phase sequence, signal group (J2735) to phase number (NTCIP) maping and red clearance, yellow change, min/max green times.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">More...</a><br /></td></tr>
<tr class="separator:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5cfe48a5c16ff26bbcaf6f5563a0a1a"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html">monitor_desired_phase_plan</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a></td></tr>
<tr class="memdesc:ac5cfe48a5c16ff26bbcaf6f5563a0a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object used to process and store desired phase plan consumed from kafka,.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">More...</a><br /></td></tr>
<tr class="separator:ac5cfe48a5c16ff26bbcaf6f5563a0a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a></td></tr>
<tr class="memdesc:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from the traffic signal controller.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">More...</a><br /></td></tr>
<tr class="separator:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77457ef9ea248e80a34a2a145a59096"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a></td></tr>
<tr class="memdesc:ae77457ef9ea248e80a34a2a145a59096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to spat object which is updated based on received UDP messsages from the traffic signal controller and broadcast on the carma-streets kafka broker as a JSON message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">More...</a><br /></td></tr>
<tr class="separator:ae77457ef9ea248e80a34a2a145a59096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f73c472c3210f468d0ea451defe4a4"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structstreets__phase__control__schedule_1_1streets__phase__control__schedule.html">streets_phase_control_schedule::streets_phase_control_schedule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae7f73c472c3210f468d0ea451defe4a4">phase_control_schedule_ptr</a></td></tr>
<tr class="memdesc:ae7f73c472c3210f468d0ea451defe4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Point to phase control schedule object which is updated based on the received JSON message from MMITSS Road side processor.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae7f73c472c3210f468d0ea451defe4a4">More...</a><br /></td></tr>
<tr class="separator:ae7f73c472c3210f468d0ea451defe4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365cce2a524c81a204b83a15104b4f4e"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">tsc_config_state_ptr</a></td></tr>
<tr class="memdesc:a365cce2a524c81a204b83a15104b4f4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to tsc_configuration_state object which is traffic signal controller configuration information obtained from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> worker and broadcast on the carma-streets kafka broker as a JSON message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">More...</a><br /></td></tr>
<tr class="separator:a365cce2a524c81a204b83a15104b4f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab618504f0fe46fe639c43e48f9d6a264"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a></td></tr>
<tr class="memdesc:ab618504f0fe46fe639c43e48f9d6a264"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> used to query intersection information including name and id from the <a class="el" href="namespaceintersection__model.html">intersection_model</a> REST API.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">More...</a><br /></td></tr>
<tr class="separator:ab618504f0fe46fe639c43e48f9d6a264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca861e53ecc25e0c144e8fff3801bdf0"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1control__tsc__state.html">control_tsc_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a></td></tr>
<tr class="memdesc:aca861e53ecc25e0c144e8fff3801bdf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the <a class="el" href="classtraffic__signal__controller__service_1_1control__tsc__state.html">control_tsc_state</a> worker responsible for make snmp HOLD and OMIT calls to follow the desired phase plan.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">More...</a><br /></td></tr>
<tr class="separator:aca861e53ecc25e0c144e8fff3801bdf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95f9fb98640cf4121d89518651899f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae95f9fb98640cf4121d89518651899f8">tsc_config_producer_counter_</a> = 0</td></tr>
<tr class="separator:ae95f9fb98640cf4121d89518651899f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f2c089720e5f28c27dd477933585f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa5f2c089720e5f28c27dd477933585f8">tsc_config_send_attempts</a> = 1</td></tr>
<tr class="separator:aa5f2c089720e5f28c27dd477933585f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a251cd72bbcc55b40f7e4fbc78ad81dc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555b">SPAT_PROJECTION_MODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">spat_proj_mode</a> = <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555ba91483675a3807f461a95029ce12500a2">SPAT_PROJECTION_MODE::NO_PROJECTION</a></td></tr>
<tr class="separator:a251cd72bbcc55b40f7e4fbc78ad81dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f864b59a25ba2c0010be48a5f08c14"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="structstreets__snmp__cmd_1_1snmp__cmd__struct.html">streets_snmp_cmd::snmp_cmd_struct</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a></td></tr>
<tr class="separator:ad1f864b59a25ba2c0010be48a5f08c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb9e4af5a21306d19065a0119a13bc08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#afb9e4af5a21306d19065a0119a13bc08">control_tsc_state_sleep_dur_</a> = 0</td></tr>
<tr class="separator:afb9e4af5a21306d19065a0119a13bc08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d7ed6cff78c8b161b71f3cfedabc452"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a7d7ed6cff78c8b161b71f3cfedabc452">enable_snmp_cmd_logging_</a> = false</td></tr>
<tr class="separator:a7d7ed6cff78c8b161b71f3cfedabc452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4be894a6d67bac8bf43ea16b52ca4ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac4be894a6d67bac8bf43ea16b52ca4ea">use_mmitss_mrp</a> = false</td></tr>
<tr class="separator:ac4be894a6d67bac8bf43ea16b52ca4ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aea16beb57894a8087ca8bd67bb320102"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aea16beb57894a8087ca8bd67bb320102">SNMP_COMMAND_LOGGER_NAME</a> = &quot;snmp_command&quot;</td></tr>
<tr class="separator:aea16beb57894a8087ca8bd67bb320102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65ca0f92d5a9826628e5cc03147d600"><td class="memItemLeft" align="right" valign="top">static const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab65ca0f92d5a9826628e5cc03147d600">VEH_PED_CALL_LOGGER_NAME</a> = &quot;veh_ped_call&quot;</td></tr>
<tr class="separator:ab65ca0f92d5a9826628e5cc03147d600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a9af1ee4e631bcf1440ea16a87ff8a6c5"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a></td></tr>
<tr class="separator:a9af1ee4e631bcf1440ea16a87ff8a6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classstreets__service_1_1streets__service"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstreets__service_1_1streets__service')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstreets__service_1_1streets__service.html">streets_service::streets_service</a></td></tr>
<tr class="memitem:aa7f21b164ca06dae441ecb4293ab8728 inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728">initialize_kafka_producer</a> (const std::string &amp;producer_topic, std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a> &gt; &amp;producer)</td></tr>
<tr class="memdesc:aa7f21b164ca06dae441ecb4293ab8728 inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to initialize Kafka producer for a given topic.  <a href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728">More...</a><br /></td></tr>
<tr class="separator:aa7f21b164ca06dae441ecb4293ab8728 inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab4cb4106faf5524004ba6a19d110acc inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#aab4cb4106faf5524004ba6a19d110acc">initialize_kafka_consumer</a> (const std::string &amp;consumer_topic, std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__consumer__worker.html">kafka_clients::kafka_consumer_worker</a> &gt; &amp;consumer)</td></tr>
<tr class="memdesc:aab4cb4106faf5524004ba6a19d110acc inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to initialise Kafka consumer. NOTE: Will assign consumer group id as service_name.  <a href="classstreets__service_1_1streets__service.html#aab4cb4106faf5524004ba6a19d110acc">More...</a><br /></td></tr>
<tr class="separator:aab4cb4106faf5524004ba6a19d110acc inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0882928966e40628bccfc9504be441f4 inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a0882928966e40628bccfc9504be441f4">get_system_config</a> (const char *config_name, const std::string &amp;default_val) const noexcept</td></tr>
<tr class="memdesc:a0882928966e40628bccfc9504be441f4 inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns string value of environment variable with given name. If no value is found, returns default.  <a href="classstreets__service_1_1streets__service.html#a0882928966e40628bccfc9504be441f4">More...</a><br /></td></tr>
<tr class="separator:a0882928966e40628bccfc9504be441f4 inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504f1c93ede0e4a77bf104f0a13c502f inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a504f1c93ede0e4a77bf104f0a13c502f">consume_time_sync_message</a> () const</td></tr>
<tr class="memdesc:a504f1c93ede0e4a77bf104f0a13c502f inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to consume continously consume time sync messages from Kafka topic and update <a class="el" href="classstreets__service_1_1streets__clock__singleton.html" title="Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is cre...">streets_clock_singleton</a> with received data.  <a href="classstreets__service_1_1streets__service.html#a504f1c93ede0e4a77bf104f0a13c502f">More...</a><br /></td></tr>
<tr class="separator:a504f1c93ede0e4a77bf104f0a13c502f inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e19b04345061118af95882b2a468be inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#ab1e19b04345061118af95882b2a468be">get_service_name</a> () const</td></tr>
<tr class="memdesc:ab1e19b04345061118af95882b2a468be inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns service name set in configuration file.  <a href="classstreets__service_1_1streets__service.html#ab1e19b04345061118af95882b2a468be">More...</a><br /></td></tr>
<tr class="separator:ab1e19b04345061118af95882b2a468be inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545456534674e7026082f1585391bc7e inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e">is_simulation_mode</a> () const</td></tr>
<tr class="memdesc:a545456534674e7026082f1585391bc7e inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns boolean if service is currently configured to be in simulation_mode. This corresponsds to the value of the environment variable SIMULATION_MODE. Simulation mode indicates whether the <a class="el" href="classstreets__service_1_1streets__clock__singleton.html" title="Streets Clock Singleton is a singleton that manages a CarmaClock object. The CarmaClock object is cre...">streets_clock_singleton</a> uses simulation time for kafka or system time.  <a href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e">More...</a><br /></td></tr>
<tr class="separator:a545456534674e7026082f1585391bc7e inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a711844530be77c0a19b9cfd999d3cadd inherit pro_methods_classstreets__service_1_1streets__service"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; spdlog::logger &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd">create_daily_logger</a> (const std::string &amp;name, const std::string &amp;extension=&quot;.log&quot;, const std::string &amp;pattern=&quot;[%Y-%m-%d %H:%M:%S.%e] %v&quot;, const spdlog::level::level_enum &amp;level=spdlog::level::info) const</td></tr>
<tr class="memdesc:a711844530be77c0a19b9cfd999d3cadd inherit pro_methods_classstreets__service_1_1streets__service"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to create SPDLOG Daily rotating file logger. The logger is accessible by calling spdlog::get(name). The log files created by this logger will include data and time in name and will be stored in the LOGS_DIRECTORY set path.  <a href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd">More...</a><br /></td></tr>
<tr class="separator:a711844530be77c0a19b9cfd999d3cadd inherit pro_methods_classstreets__service_1_1streets__service"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00029">29</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abfe9b97a69e5c4c8c614ed2f7bfda80d" name="abfe9b97a69e5c4c8c614ed2f7bfda80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe9b97a69e5c4c8c614ed2f7bfda80d">&#9670;&nbsp;</a></span>tsc_service() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::tsc_service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa82f97b9874e91dd19f3557d8fc4905f" name="aa82f97b9874e91dd19f3557d8fc4905f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa82f97b9874e91dd19f3557d8fc4905f">&#9670;&nbsp;</a></span>~tsc_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::~tsc_service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00483">483</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  484</span>    {</div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>)</div>
<div class="line"><span class="lineno">  486</span>        {</div>
<div class="line"><span class="lineno">  487</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping spat producer!&quot;</span>);</div>
<div class="line"><span class="lineno">  488</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>-&gt;stop();</div>
<div class="line"><span class="lineno">  489</span>        }</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a>)</div>
<div class="line"><span class="lineno">  492</span>        {</div>
<div class="line"><span class="lineno">  493</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping tsc config producer!&quot;</span>);</div>
<div class="line"><span class="lineno">  494</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a>-&gt;stop();</div>
<div class="line"><span class="lineno">  495</span>        }</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>) {</div>
<div class="line"><span class="lineno">  497</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping desired phase plan consumer!&quot;</span>);</div>
<div class="line"><span class="lineno">  498</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>-&gt;stop();</div>
<div class="line"><span class="lineno">  499</span>        }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1362a53dbc7f4e91fa256a2f4f45c3e0">phase_control_schedule_consumer</a>) {</div>
<div class="line"><span class="lineno">  502</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping phase control consumer!&quot;</span>);</div>
<div class="line"><span class="lineno">  503</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1362a53dbc7f4e91fa256a2f4f45c3e0">phase_control_schedule_consumer</a>-&gt;stop();</div>
<div class="line"><span class="lineno">  504</span>        }</div>
<div class="line"><span class="lineno">  505</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a1362a53dbc7f4e91fa256a2f4f45c3e0"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a1362a53dbc7f4e91fa256a2f4f45c3e0">traffic_signal_controller_service::tsc_service::phase_control_schedule_consumer</a></div><div class="ttdeci">std::shared_ptr&lt; kafka_clients::kafka_consumer_worker &gt; phase_control_schedule_consumer</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00047">tsc_service.h:47</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a1dfbd2157cd62094844fb2e1a6d70711"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">traffic_signal_controller_service::tsc_service::spat_producer</a></div><div class="ttdeci">std::shared_ptr&lt; kafka_clients::kafka_producer_worker &gt; spat_producer</div><div class="ttdoc">Kafka producer for spat JSON.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00034">tsc_service.h:34</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a5338cec3c1e2f4012158c1f949a9fa97"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">traffic_signal_controller_service::tsc_service::tsc_config_producer</a></div><div class="ttdeci">std::shared_ptr&lt; kafka_clients::kafka_producer_worker &gt; tsc_config_producer</div><div class="ttdoc">Kafka producer for tsc_configuration_state JSON.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00038">tsc_service.h:38</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a5b452ea6a57d91e96ea8c6d30937828d"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">traffic_signal_controller_service::tsc_service::desired_phase_plan_consumer</a></div><div class="ttdeci">std::shared_ptr&lt; kafka_clients::kafka_consumer_worker &gt; desired_phase_plan_consumer</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00042">tsc_service.h:42</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00042">desired_phase_plan_consumer</a>, <a class="el" href="tsc__service_8h_source.html#l00047">phase_control_schedule_consumer</a>, <a class="el" href="tsc__service_8h_source.html#l00034">spat_producer</a>, and <a class="el" href="tsc__service_8h_source.html#l00038">tsc_config_producer</a>.</p>

</div>
</div>
<a id="af1557609aa8e488d04f646e09cde9414" name="af1557609aa8e488d04f646e09cde9414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1557609aa8e488d04f646e09cde9414">&#9670;&nbsp;</a></span>tsc_service() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::tsc_service </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4c0e96db941eb4fcd552e8f119a93d48" name="a4c0e96db941eb4fcd552e8f119a93d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0e96db941eb4fcd552e8f119a93d48">&#9670;&nbsp;</a></span>configure_snmp_cmd_logger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::configure_snmp_cmd_logger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to configure spdlog::logger for logging snmp control commands into daily rotating log file. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00408">408</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  409</span>    {</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  411</span>            <a class="code hl_function" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd">create_daily_logger</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aea16beb57894a8087ca8bd67bb320102">SNMP_COMMAND_LOGGER_NAME</a>, <span class="stringliteral">&quot;.log&quot;</span>, <span class="stringliteral">&quot;[%H:%M:%S:%e ] %v&quot;</span>, spdlog::level::info );</div>
<div class="line"><span class="lineno">  412</span>        }</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> spdlog::spdlog_ex&amp; ex)</div>
<div class="line"><span class="lineno">  414</span>        {</div>
<div class="line"><span class="lineno">  415</span>            SPDLOG_ERROR( <span class="stringliteral">&quot;SNMP Command Logger initialization failed: {0}!&quot;</span>,ex.what());</div>
<div class="line"><span class="lineno">  416</span>        }</div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_a711844530be77c0a19b9cfd999d3cadd"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd">streets_service::streets_service::create_daily_logger</a></div><div class="ttdeci">std::shared_ptr&lt; spdlog::logger &gt; create_daily_logger(const std::string &amp;name, const std::string &amp;extension=&quot;.log&quot;, const std::string &amp;pattern=&quot;[%Y-%m-%d %H:%M:%S.%e] %v&quot;, const spdlog::level::level_enum &amp;level=spdlog::level::info) const</div><div class="ttdoc">Method to create SPDLOG Daily rotating file logger. The logger is accessible by calling spdlog::get(n...</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00040">streets_service.cpp:40</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aea16beb57894a8087ca8bd67bb320102"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aea16beb57894a8087ca8bd67bb320102">traffic_signal_controller_service::tsc_service::SNMP_COMMAND_LOGGER_NAME</a></div><div class="ttdeci">static const std::string SNMP_COMMAND_LOGGER_NAME</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00116">tsc_service.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__service_8cpp_source.html#l00040">streets_service::streets_service::create_daily_logger()</a>, and <a class="el" href="tsc__service_8h_source.html#l00116">SNMP_COMMAND_LOGGER_NAME</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_cgraph">
<area shape="rect" title="Method to configure spdlog::logger for logging snmp control commands into daily rotating log file." alt="" coords="5,5,192,61"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd" title="Method to create SPDLOG Daily rotating file logger. The logger is accessible by calling spdlog::get(n..." alt="" coords="240,13,428,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a4c0e96db941eb4fcd552e8f119a93d48_icgraph">
<area shape="rect" title="Method to configure spdlog::logger for logging snmp control commands into daily rotating log file." alt="" coords="307,5,493,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="ae6c4d4787d47463da9fa9b895c17a8b7" name="ae6c4d4787d47463da9fa9b895c17a8b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c4d4787d47463da9fa9b895c17a8b7">&#9670;&nbsp;</a></span>configure_veh_ped_call_logger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::configure_veh_ped_call_logger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal controller into daily rotating csvlog file. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00419">419</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>    {</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  422</span>            <span class="keyword">auto</span> veh_ped_call_logger = <a class="code hl_function" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd">create_daily_logger</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab65ca0f92d5a9826628e5cc03147d600">VEH_PED_CALL_LOGGER_NAME</a>, <span class="stringliteral">&quot;.csv&quot;</span>, <span class="stringliteral">&quot;%v&quot;</span>, spdlog::level::info );</div>
<div class="line"><span class="lineno">  423</span>        }</div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> spdlog::spdlog_ex&amp; ex)</div>
<div class="line"><span class="lineno">  425</span>        {</div>
<div class="line"><span class="lineno">  426</span>            SPDLOG_ERROR( <span class="stringliteral">&quot;Vehicle Pedestrian Call Logger initialization failed: {0}!&quot;</span>,ex.what());</div>
<div class="line"><span class="lineno">  427</span>        }</div>
<div class="line"><span class="lineno">  428</span>        <span class="comment">// TODO: Figure out how to termine if a new file was created or an existing file appended and only write column headers on new files</span></div>
<div class="line"><span class="lineno">  429</span>        <span class="comment">// veh_ped_call_logger-&gt;info(&quot;Timestamp (ms), Vehicle Calls (Signal Group ID), Pedestrian Calls (Signal Group ID)&quot;);</span></div>
<div class="line"><span class="lineno">  430</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ab65ca0f92d5a9826628e5cc03147d600"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ab65ca0f92d5a9826628e5cc03147d600">traffic_signal_controller_service::tsc_service::VEH_PED_CALL_LOGGER_NAME</a></div><div class="ttdeci">static const std::string VEH_PED_CALL_LOGGER_NAME</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00118">tsc_service.h:118</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__service_8cpp_source.html#l00040">streets_service::streets_service::create_daily_logger()</a>, and <a class="el" href="tsc__service_8h_source.html#l00118">VEH_PED_CALL_LOGGER_NAME</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_cgraph">
<area shape="rect" title="ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal cont..." alt="" coords="5,5,204,61"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd" title="Method to create SPDLOG Daily rotating file logger. The logger is accessible by calling spdlog::get(n..." alt="" coords="252,13,440,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_ae6c4d4787d47463da9fa9b895c17a8b7_icgraph">
<area shape="rect" title="ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal cont..." alt="" coords="307,5,505,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="aee54b7d1fe61af7a3141f56bf234e91e" name="aee54b7d1fe61af7a3141f56bf234e91e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee54b7d1fe61af7a3141f56bf234e91e">&#9670;&nbsp;</a></span>consume_desired_phase_plan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::consume_desired_phase_plan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00271">271</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  271</span>                                                 {</div>
<div class="line"><span class="lineno">  272</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>-&gt;subscribe();</div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">while</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>-&gt;is_running())</div>
<div class="line"><span class="lineno">  274</span>        {</div>
<div class="line"><span class="lineno">  275</span>            <span class="keyword">const</span> std::string payload = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>-&gt;consume(1000);</div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">if</span> (payload.length() != 0)</div>
<div class="line"><span class="lineno">  277</span>            {</div>
<div class="line"><span class="lineno">  278</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Consumed: {0}&quot;</span>, payload);</div>
<div class="line"><span class="lineno">  279</span>                std::scoped_lock&lt;std::mutex&gt; lck{<a class="code hl_variable" href="namespacetraffic__signal__controller__service.html#ac5c3fad3858d8ba9d9fe4d30c1c262a9">dpp_mtx</a>};</div>
<div class="line"><span class="lineno">  280</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a>-&gt;update_desired_phase_plan(payload);</div>
<div class="line"><span class="lineno">  281</span>                </div>
<div class="line"><span class="lineno">  282</span>                <span class="comment">// update command queue</span></div>
<div class="line"><span class="lineno">  283</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a>-&gt;get_desired_phase_plan_ptr()){</div>
<div class="line"><span class="lineno">  284</span>                    <span class="comment">// Send desired phase plan to control_tsc_state</span></div>
<div class="line"><span class="lineno">  285</span>                    std::scoped_lock&lt;std::mutex&gt; snmp_cmd_lck(<a class="code hl_variable" href="namespacetraffic__signal__controller__service.html#a6825b89fdf00e4dd1233ace3a1418a69">snmp_cmd_queue_mtx</a>);</div>
<div class="line"><span class="lineno">  286</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a>-&gt;update_tsc_control_queue(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a>-&gt;get_desired_phase_plan_ptr(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>);</div>
<div class="line"><span class="lineno">  287</span>                    </div>
<div class="line"><span class="lineno">  288</span>                }</div>
<div class="line"><span class="lineno">  289</span>            }</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>        }        </div>
<div class="line"><span class="lineno">  292</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ac5cfe48a5c16ff26bbcaf6f5563a0a1a"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">traffic_signal_controller_service::tsc_service::monitor_dpp_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; monitor_desired_phase_plan &gt; monitor_dpp_ptr</div><div class="ttdoc">Object used to process and store desired phase plan consumed from kafka,.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00063">tsc_service.h:63</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aca861e53ecc25e0c144e8fff3801bdf0"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">traffic_signal_controller_service::tsc_service::control_tsc_state_ptr_</a></div><div class="ttdeci">std::shared_ptr&lt; control_tsc_state &gt; control_tsc_state_ptr_</div><div class="ttdoc">Pointer to the control_tsc_state worker responsible for make snmp HOLD and OMIT calls to follow the d...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00097">tsc_service.h:97</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ad1f864b59a25ba2c0010be48a5f08c14"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">traffic_signal_controller_service::tsc_service::tsc_set_command_queue_</a></div><div class="ttdeci">std::queue&lt; streets_snmp_cmd::snmp_cmd_struct &gt; tsc_set_command_queue_</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00108">tsc_service.h:108</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_a6825b89fdf00e4dd1233ace3a1418a69"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#a6825b89fdf00e4dd1233ace3a1418a69">traffic_signal_controller_service::snmp_cmd_queue_mtx</a></div><div class="ttdeci">std::mutex snmp_cmd_queue_mtx</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00006">tsc_service.cpp:6</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_ac5c3fad3858d8ba9d9fe4d30c1c262a9"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#ac5c3fad3858d8ba9d9fe4d30c1c262a9">traffic_signal_controller_service::dpp_mtx</a></div><div class="ttdeci">std::mutex dpp_mtx</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00005">tsc_service.cpp:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00097">control_tsc_state_ptr_</a>, <a class="el" href="tsc__service_8h_source.html#l00042">desired_phase_plan_consumer</a>, <a class="el" href="tsc__service_8cpp_source.html#l00005">traffic_signal_controller_service::dpp_mtx</a>, <a class="el" href="tsc__service_8h_source.html#l00063">monitor_dpp_ptr</a>, <a class="el" href="tsc__service_8cpp_source.html#l00006">traffic_signal_controller_service::snmp_cmd_queue_mtx</a>, and <a class="el" href="tsc__service_8h_source.html#l00108">tsc_set_command_queue_</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00448">start()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aee54b7d1fe61af7a3141f56bf234e91e_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aee54b7d1fe61af7a3141f56bf234e91e_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aee54b7d1fe61af7a3141f56bf234e91e_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aee54b7d1fe61af7a3141f56bf234e91e_icgraph">
<area shape="rect" title=" " alt="" coords="328,5,525,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a9c101262fa4c3fec9cf907b9a1f8ffa4" name="a9c101262fa4c3fec9cf907b9a1f8ffa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c101262fa4c3fec9cf907b9a1f8ffa4">&#9670;&nbsp;</a></span>consume_phase_control_schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::consume_phase_control_schedule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread callback function to run the phase control schedule Kafka consumer to consume phase control schedule JSON message. </p>

</div>
</div>
<a id="a2c68ad9bb9fc1a33029f50872687e87d" name="a2c68ad9bb9fc1a33029f50872687e87d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c68ad9bb9fc1a33029f50872687e87d">&#9670;&nbsp;</a></span>control_tsc_phases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::control_tsc_phases </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands constructed to follow the desired phase plan. Calls set_tsc_hold_and_omit_forceoff_call. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00316">316</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>    {</div>
<div class="line"><span class="lineno">  318</span>        SPDLOG_INFO(<span class="stringliteral">&quot;Starting TSC Control Phases&quot;</span>);        </div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  320</span>        {</div>
<div class="line"><span class="lineno">  321</span>            <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  322</span>            {</div>
<div class="line"><span class="lineno">  323</span>                SPDLOG_INFO(<span class="stringliteral">&quot;Iterate TSC Control Phases for time {0}&quot;</span>, <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_clock_singleton::time_in_ms</a>());</div>
<div class="line"><span class="lineno">  324</span>                <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569">set_tsc_hold_and_omit_forceoff_call</a>();</div>
<div class="line"><span class="lineno">  325</span>                <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">streets_clock_singleton::sleep_for</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#afb9e4af5a21306d19065a0119a13bc08">control_tsc_state_sleep_dur_</a>);</div>
<div class="line"><span class="lineno">  326</span>            }</div>
<div class="line"><span class="lineno">  327</span>        }</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">catch</span>(<span class="keyword">const</span> control_tsc_state_exception &amp;e){</div>
<div class="line"><span class="lineno">  329</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Encountered exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  330</span>            <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.empty())</div>
<div class="line"><span class="lineno">  331</span>            {</div>
<div class="line"><span class="lineno">  332</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Removing front command from queue :  {0}&quot;</span>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.front().get_cmd_info());</div>
<div class="line"><span class="lineno">  333</span>                std::scoped_lock&lt;std::mutex&gt; snmp_cmd_lck(<a class="code hl_variable" href="namespacetraffic__signal__controller__service.html#a6825b89fdf00e4dd1233ace3a1418a69">snmp_cmd_queue_mtx</a>);</div>
<div class="line"><span class="lineno">  334</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.pop();</div>
<div class="line"><span class="lineno">  335</span>            }</div>
<div class="line"><span class="lineno">  336</span>        }</div>
<div class="line"><span class="lineno">  337</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__clock__singleton_html_a56bd3e7391e279f8a5dc62d2eb6319fa"><div class="ttname"><a href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">streets_service::streets_clock_singleton::sleep_for</a></div><div class="ttdeci">static void sleep_for(uint64_t ms)</div><div class="ttdoc">Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the...</div><div class="ttdef"><b>Definition:</b> <a href="streets__clock__singleton_8cpp_source.html#l00019">streets_clock_singleton.cpp:19</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__clock__singleton_html_ace444a4a74b0cea211bf89ed89371bae"><div class="ttname"><a href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_service::streets_clock_singleton::time_in_ms</a></div><div class="ttdeci">static uint64_t time_in_ms()</div><div class="ttdoc">Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot-fhwa-stol/car...</div><div class="ttdef"><b>Definition:</b> <a href="streets__clock__singleton_8cpp_source.html#l00011">streets_clock_singleton.cpp:11</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a39fe31f914ae9c860737f5f967aac569"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569">traffic_signal_controller_service::tsc_service::set_tsc_hold_and_omit_forceoff_call</a></div><div class="ttdeci">void set_tsc_hold_and_omit_forceoff_call()</div><div class="ttdoc">Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00339">tsc_service.cpp:339</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_afb9e4af5a21306d19065a0119a13bc08"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#afb9e4af5a21306d19065a0119a13bc08">traffic_signal_controller_service::tsc_service::control_tsc_state_sleep_dur_</a></div><div class="ttdeci">int control_tsc_state_sleep_dur_</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00111">tsc_service.h:111</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00111">control_tsc_state_sleep_dur_</a>, <a class="el" href="tsc__service_8cpp_source.html#l00339">set_tsc_hold_and_omit_forceoff_call()</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00019">streets_service::streets_clock_singleton::sleep_for()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00006">traffic_signal_controller_service::snmp_cmd_queue_mtx</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">streets_service::streets_clock_singleton::time_in_ms()</a>, and <a class="el" href="tsc__service_8h_source.html#l00108">tsc_set_command_queue_</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00448">start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_cgraph">
<area shape="rect" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="5,57,160,113"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="208,57,441,113"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="496,5,675,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="489,123,681,164"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="549,71,621,98"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="729,64,932,105"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a2c68ad9bb9fc1a33029f50872687e87d_icgraph">
<area shape="rect" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="328,5,483,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a34c50831f1ed8f48d8123b05b6724b32" name="a34c50831f1ed8f48d8123b05b6724b32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34c50831f1ed8f48d8123b05b6724b32">&#9670;&nbsp;</a></span>enable_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::enable_spat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to enable spat using the TSC Service SNMP Client. </p>
<dl class="section return"><dt>Returns</dt><dd>true if SET operation is successful. </dd>
<dd>
false if SET operation is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00153">153</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>                                       {</div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// Enable SPaT </span></div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_struct" href="structstreets__snmp__cmd_1_1snmp__response__obj.html">streets_snmp_cmd::snmp_response_obj</a> <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>;</div>
<div class="line"><span class="lineno">  156</span>        <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>.type = <a class="code hl_enumvalue" href="namespacestreets__snmp__cmd.html#a6f3945d9a8ecb3f1265d1b3606b02949a5d5cd46919fa987731fb2edefe0f2a0c">streets_snmp_cmd::RESPONSE_TYPE::INTEGER</a>;</div>
<div class="line"><span class="lineno">  157</span>        <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>.val_int = 2;</div>
<div class="line"><span class="lineno">  158</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a>-&gt;process_snmp_request(<a class="code hl_variable" href="namespacentcip__oids.html#ab1f88eabb00f61c8b06fea2deae959b5">ntcip_oids::ENABLE_SPAT_OID</a>, <a class="code hl_enumvalue" href="namespacestreets__snmp__cmd.html#adc71a58a54cd2d720c4a550635f0eba6a8c52684db8f49511e9b44471716bf164">streets_snmp_cmd::REQUEST_TYPE::SET</a>, <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>)){</div>
<div class="line"><span class="lineno">  159</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to enable SPaT broadcasting on Traffic Signal Controller!&quot;</span>);</div>
<div class="line"><span class="lineno">  160</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  161</span>        }</div>
<div class="line"><span class="lineno">  162</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Enabled UDP broadcasting of NTCIP SPaT data from TSC!&quot;</span>);</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a34c50831f1ed8f48d8123b05b6724b32"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">traffic_signal_controller_service::tsc_service::enable_spat</a></div><div class="ttdeci">bool enable_spat() const</div><div class="ttdoc">Method to enable spat using the TSC Service SNMP Client.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00153">tsc_service.cpp:153</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a9e901a004e42f8fd670d54e16f4fb3bb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">traffic_signal_controller_service::tsc_service::snmp_client_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; snmp_client &gt; snmp_client_ptr</div><div class="ttdoc">snmp_client used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00068">tsc_service.h:68</a></div></div>
<div class="ttc" id="anamespacentcip__oids_html_ab1f88eabb00f61c8b06fea2deae959b5"><div class="ttname"><a href="namespacentcip__oids.html#ab1f88eabb00f61c8b06fea2deae959b5">ntcip_oids::ENABLE_SPAT_OID</a></div><div class="ttdeci">static const std::string ENABLE_SPAT_OID</div><div class="ttdoc">OID for ENABLE_SPAT.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00012">ntcip_oids.h:12</a></div></div>
<div class="ttc" id="anamespacestreets__snmp__cmd_html_a6f3945d9a8ecb3f1265d1b3606b02949a5d5cd46919fa987731fb2edefe0f2a0c"><div class="ttname"><a href="namespacestreets__snmp__cmd.html#a6f3945d9a8ecb3f1265d1b3606b02949a5d5cd46919fa987731fb2edefe0f2a0c">streets_snmp_cmd::RESPONSE_TYPE::INTEGER</a></div><div class="ttdeci">@ INTEGER</div></div>
<div class="ttc" id="anamespacestreets__snmp__cmd_html_adc71a58a54cd2d720c4a550635f0eba6a8c52684db8f49511e9b44471716bf164"><div class="ttname"><a href="namespacestreets__snmp__cmd.html#adc71a58a54cd2d720c4a550635f0eba6a8c52684db8f49511e9b44471716bf164">streets_snmp_cmd::REQUEST_TYPE::SET</a></div><div class="ttdeci">@ SET</div></div>
<div class="ttc" id="astructstreets__snmp__cmd_1_1snmp__response__obj_html"><div class="ttname"><a href="structstreets__snmp__cmd_1_1snmp__response__obj.html">streets_snmp_cmd::snmp_response_obj</a></div><div class="ttdoc">A struct to hold the value being sent to the TSC, can be integer or string. Type needs to be defined.</div><div class="ttdef"><b>Definition:</b> <a href="streets__snmp__cmd_8h_source.html#l00034">streets_snmp_cmd.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00153">enable_spat()</a>, <a class="el" href="ntcip__oids_8h_source.html#l00012">ntcip_oids::ENABLE_SPAT_OID</a>, <a class="el" href="namespacestreets__snmp__cmd.html#a6f3945d9a8ecb3f1265d1b3606b02949a5d5cd46919fa987731fb2edefe0f2a0c">streets_snmp_cmd::INTEGER</a>, <a class="el" href="namespacestreets__snmp__cmd.html#adc71a58a54cd2d720c4a550635f0eba6a8c52684db8f49511e9b44471716bf164">streets_snmp_cmd::SET</a>, and <a class="el" href="tsc__service_8h_source.html#l00068">snmp_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00153">enable_spat()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph">
<area shape="rect" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="5,29,160,85"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph">
<area shape="rect" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="307,29,461,85"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,29,259,85"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,44,56,71"/>
</map>
</div>

</div>
</div>
<a id="afa103b6931f4d186fd8270a213d3096f" name="afa103b6931f4d186fd8270a213d3096f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa103b6931f4d186fd8270a213d3096f">&#9670;&nbsp;</a></span>FRIEND_TEST() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_configure_snmp_cmd_logger&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4292a0afffca6f5ff0f1747bc4ea634c" name="a4292a0afffca6f5ff0f1747bc4ea634c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4292a0afffca6f5ff0f1747bc4ea634c">&#9670;&nbsp;</a></span>FRIEND_TEST() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_configure_veh_ped_call_logger&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3d153a7741a3162fb7a499cbde14425" name="ad3d153a7741a3162fb7a499cbde14425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d153a7741a3162fb7a499cbde14425">&#9670;&nbsp;</a></span>FRIEND_TEST() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_init_kafka_consumer_producer&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5ccd21aa9cf26fa6de3d444f9b3e7381" name="a5ccd21aa9cf26fa6de3d444f9b3e7381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ccd21aa9cf26fa6de3d444f9b3e7381">&#9670;&nbsp;</a></span>FRIEND_TEST() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_produce_tsc_config_json_timeout&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ffe9acea466075d864f9dadd7eee7f1" name="a9ffe9acea466075d864f9dadd7eee7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ffe9acea466075d864f9dadd7eee7f1">&#9670;&nbsp;</a></span>FRIEND_TEST() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9af1ee4e631bcf1440ea16a87ff8a6c5">tsc_service_test</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_tsc_control&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abb944363e0d001e15e5a515da611d452" name="abb944363e0d001e15e5a515da611d452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb944363e0d001e15e5a515da611d452">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to initialize the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>true if successful. </dd>
<dd>
false if not successful. </dd></dl>

<p>Reimplemented from <a class="el" href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a">streets_service::streets_service</a>.</p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00008">8</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    8</span>                                 {</div>
<div class="line"><span class="lineno">    9</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a">streets_service::initialize</a>()) {</div>
<div class="line"><span class="lineno">   10</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   11</span>        }</div>
<div class="line"><span class="lineno">   12</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">   13</span>        {</div>
<div class="line"><span class="lineno">   14</span>            <span class="comment">// Initialize SNMP Client</span></div>
<div class="line"><span class="lineno">   15</span>            std::string target_ip = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;target_ip&quot;</span>);</div>
<div class="line"><span class="lineno">   16</span>            <span class="keywordtype">int</span> target_port = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;target_port&quot;</span>);</div>
<div class="line"><span class="lineno">   17</span>            std::string community = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;community&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span>            <span class="keywordtype">int</span> snmp_version = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;snmp_version&quot;</span>);</div>
<div class="line"><span class="lineno">   19</span>            <span class="keywordtype">int</span> timeout = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;snmp_timeout&quot;</span>);</div>
<div class="line"><span class="lineno">   20</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a> &amp;&amp; !<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">initialize_snmp_client</a>(target_ip, target_port, community, snmp_version, timeout)) {    </div>
<div class="line"><span class="lineno">   21</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize snmp_client!&quot;</span>);</div>
<div class="line"><span class="lineno">   22</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   23</span>            }</div>
<div class="line"><span class="lineno">   24</span>            </div>
<div class="line"><span class="lineno">   25</span>            <span class="comment">//  Initialize tsc configuration state kafka producer</span></div>
<div class="line"><span class="lineno">   26</span>            std::string tsc_config_topic_name = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;tsc_config_producer_topic&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a> &amp;&amp; !<a class="code hl_function" href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728">initialize_kafka_producer</a>( tsc_config_topic_name, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a>)) {</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize kafka tsc_config_producer!&quot;</span>);</div>
<div class="line"><span class="lineno">   30</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   31</span>            }</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>            <span class="comment">//Initialize TSC State</span></div>
<div class="line"><span class="lineno">   34</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">initialize_tsc_state</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a>)){</div>
<div class="line"><span class="lineno">   35</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize tsc state&quot;</span>);</div>
<div class="line"><span class="lineno">   36</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   37</span>            }</div>
<div class="line"><span class="lineno">   38</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">tsc_config_state_ptr</a> = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_tsc_config_state();</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>            <span class="comment">// Intialize spat kafka producer</span></div>
<div class="line"><span class="lineno">   41</span>            std::string spat_topic_name = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;spat_producer_topic&quot;</span>);</div>
<div class="line"><span class="lineno">   42</span>            <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a> &amp;&amp; !<a class="code hl_function" href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728">initialize_kafka_producer</a>( spat_topic_name, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>) ) {</div>
<div class="line"><span class="lineno">   43</span>                </div>
<div class="line"><span class="lineno">   44</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize kafka spat_producer!&quot;</span>);</div>
<div class="line"><span class="lineno">   45</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   46</span>                </div>
<div class="line"><span class="lineno">   47</span>            }</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>            std::string dpp_consumer_topic = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;desired_phase_plan_consumer_topic&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>            <span class="comment">// TODO: Remove if no longer necessary for TM/TSP MMITSS Integration</span></div>
<div class="line"><span class="lineno">   51</span>            <span class="comment">// use_mmitss_mrp = streets_configuration::get_boolean_config(&quot;use_mmitss_mrp&quot;); </span></div>
<div class="line"><span class="lineno">   52</span>            <span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">   53</span>            <span class="keyword">auto</span> spat_projection_int = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;spat_projection_mode&quot;</span>);</div>
<div class="line"><span class="lineno">   54</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">spat_proj_mode</a> = <a class="code hl_function" href="namespacetraffic__signal__controller__service.html#aefedfa98a01bc77e012670aa29bbc94f">spat_projection_mode_from_int</a>(spat_projection_int);</div>
<div class="line"><span class="lineno">   55</span>            <span class="comment">// TODO: Remove if no longer necessary for TM/TSP MMITSS Integration</span></div>
<div class="line"><span class="lineno">   56</span>            <span class="comment">// Phase control schedule(PCS) consumer topic</span></div>
<div class="line"><span class="lineno">   57</span>            <span class="comment">// std::string pcs_consumer_topic = streets_configuration::get_string_config(&quot;phase_control_schedule_consumer_topic&quot;);</span></div>
<div class="line"><span class="lineno">   58</span>            <span class="comment">// -----------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>            <span class="comment">// Initialize DPP consumer and monitor</span></div>
<div class="line"><span class="lineno">   61</span>            <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">spat_proj_mode</a> == <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">SPAT_PROJECTION_MODE::DPP_PROJECTION</a> ) {</div>
<div class="line"><span class="lineno">   62</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a> &amp;&amp; !<a class="code hl_function" href="classstreets__service_1_1streets__service.html#aab4cb4106faf5524004ba6a19d110acc">initialize_kafka_consumer</a>( dpp_consumer_topic, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5b452ea6a57d91e96ea8c6d30937828d">desired_phase_plan_consumer</a>)) {</div>
<div class="line"><span class="lineno">   63</span>                    SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize kafka desired_phase_plan_consumer!&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   65</span>                }</div>
<div class="line"><span class="lineno">   66</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a> = std::make_shared&lt;monitor_desired_phase_plan&gt;( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a> );</div>
<div class="line"><span class="lineno">   67</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#afb9e4af5a21306d19065a0119a13bc08">control_tsc_state_sleep_dur_</a> = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;control_tsc_state_sleep_duration&quot;</span>);</div>
<div class="line"><span class="lineno">   68</span>                <span class="comment">// Initialize control_tsc_state ptr</span></div>
<div class="line"><span class="lineno">   69</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a> = std::make_shared&lt;control_tsc_state&gt;(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>            }</div>
<div class="line"><span class="lineno">   72</span>           </div>
<div class="line"><span class="lineno">   73</span>            <span class="comment">// TODO: Remove if no longer necessary for TM/TSP MMITSS Integration</span></div>
<div class="line"><span class="lineno">   74</span>            <span class="comment">// if( SPAT_PROJECTION_MODE::MMITSS_PHASE_SCHEDULE)</span></div>
<div class="line"><span class="lineno">   75</span>            <span class="comment">//     if ( !phase_control_schedule_consumer &amp;&amp; !initialize_kafka_consumer(pcs_consumer_topic, phase_control_schedule_consumer)){</span></div>
<div class="line"><span class="lineno">   76</span>            <span class="comment">//         SPDLOG_ERROR(&quot;Failed to initialize kafka phase_control_schedule_consumer!&quot;);</span></div>
<div class="line"><span class="lineno">   77</span>            <span class="comment">//         return false;</span></div>
<div class="line"><span class="lineno">   78</span>            <span class="comment">//     }</span></div>
<div class="line"><span class="lineno">   79</span>            <span class="comment">//      //Initialize phase control schedule</span></div>
<div class="line"><span class="lineno">   80</span>            <span class="comment">//     phase_control_schedule_ptr = std::make_shared&lt;streets_phase_control_schedule::streets_phase_control_schedule&gt;();</span></div>
<div class="line"><span class="lineno">   81</span>            <span class="comment">//     // Initialize control_tsc_state ptr</span></div>
<div class="line"><span class="lineno">   82</span>            <span class="comment">//     control_tsc_state_sleep_dur_ = streets_configuration::get_int_config(&quot;control_tsc_state_sleep_duration&quot;);</span></div>
<div class="line"><span class="lineno">   83</span>            <span class="comment">//     control_tsc_state_ptr_ = std::make_shared&lt;control_tsc_state&gt;(snmp_client_ptr, tsc_state_ptr);      </span></div>
<div class="line"><span class="lineno">   84</span>            <span class="comment">// }</span></div>
<div class="line"><span class="lineno">   85</span>            <span class="comment">// ------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">   86</span>            </div>
<div class="line"><span class="lineno">   87</span>            <span class="comment">// Initialize spat_worker</span></div>
<div class="line"><span class="lineno">   88</span>            std::string socket_ip = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;udp_socket_ip&quot;</span>);</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordtype">int</span> socket_port = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;udp_socket_port&quot;</span>);</div>
<div class="line"><span class="lineno">   90</span>            <span class="keywordtype">int</span> socket_timeout = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;socket_timeout&quot;</span>);</div>
<div class="line"><span class="lineno">   91</span>            <span class="keywordtype">bool</span> use_msg_timestamp =  <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_configuration::get_boolean_config</a>(<span class="stringliteral">&quot;use_tsc_timestamp&quot;</span>);         </div>
<div class="line"><span class="lineno">   92</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a7d7ed6cff78c8b161b71f3cfedabc452">enable_snmp_cmd_logging_</a> = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_configuration::get_boolean_config</a>(<span class="stringliteral">&quot;enable_snmp_cmd_logging&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">initialize_spat_worker</a>(socket_ip, socket_port, socket_timeout, use_msg_timestamp)) {</div>
<div class="line"><span class="lineno">   94</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize SPaT Worker&quot;</span>);</div>
<div class="line"><span class="lineno">   95</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   96</span>            }</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>            <span class="comment">// Initialize intersection_client</span></div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">initialize_intersection_client</a>()) {</div>
<div class="line"><span class="lineno">  100</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize intersection client&quot;</span>);</div>
<div class="line"><span class="lineno">  101</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  102</span>            }</div>
<div class="line"><span class="lineno">  103</span>            <span class="comment">// Add all phases to a single map</span></div>
<div class="line"><span class="lineno">  104</span>            <span class="keyword">auto</span> all_phases = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_vehicle_phase_map();</div>
<div class="line"><span class="lineno">  105</span>            <span class="keyword">auto</span> ped_phases = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_ped_phase_map();</div>
<div class="line"><span class="lineno">  106</span>            <span class="comment">// Insert pedestrian phases into map of vehicle phases.</span></div>
<div class="line"><span class="lineno">  107</span>            all_phases.insert(ped_phases.begin(), ped_phases.end());</div>
<div class="line"><span class="lineno">  108</span>            <span class="comment">// Initialize spat ptr</span></div>
<div class="line"><span class="lineno">  109</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">initialize_spat</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;get_intersection_name(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;get_intersection_id(), </div>
<div class="line"><span class="lineno">  110</span>                                all_phases);</div>
<div class="line"><span class="lineno">  111</span>            </div>
<div class="line"><span class="lineno">  112</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a7d7ed6cff78c8b161b71f3cfedabc452">enable_snmp_cmd_logging_</a>)</div>
<div class="line"><span class="lineno">  113</span>            {</div>
<div class="line"><span class="lineno">  114</span>                <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a4c0e96db941eb4fcd552e8f119a93d48">configure_snmp_cmd_logger</a>();</div>
<div class="line"><span class="lineno">  115</span>                <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae6c4d4787d47463da9fa9b895c17a8b7">configure_veh_ped_call_logger</a>();</div>
<div class="line"><span class="lineno">  116</span>            }</div>
<div class="line"><span class="lineno">  117</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e">is_simulation_mode</a>()) {</div>
<div class="line"><span class="lineno">  118</span>                <span class="comment">// Trigger spat broadcasting for EVC on startup.</span></div>
<div class="line"><span class="lineno">  119</span>                <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>();</div>
<div class="line"><span class="lineno">  120</span>            }</div>
<div class="line"><span class="lineno">  121</span>            SPDLOG_INFO(<span class="stringliteral">&quot;Traffic Signal Controller Service initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> streets_configuration_exception &amp;ex)</div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Signal Optimization Service Initialization failure: {0} &quot;</span>, ex.what());</div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  128</span>        }</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_a03603871626201e07690effb9f2440bf"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a></div><div class="ttdeci">static std::string get_string_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter string value with provided name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00104">streets_configuration.cpp:104</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_a48f38b0b6ecb3043cc051b624f12824b"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_service::streets_configuration::get_boolean_config</a></div><div class="ttdeci">static bool get_boolean_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter boolean value with provide name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00150">streets_configuration.cpp:150</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_ab33a5d183c0ca2b2f0d757f5466f200b"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a></div><div class="ttdeci">static int get_int_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter integer value with provided name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00119">streets_configuration.cpp:119</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_a52fb893726747c22c954ff42d4ff873a"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a">streets_service::streets_service::initialize</a></div><div class="ttdeci">virtual bool initialize()</div><div class="ttdoc">Method to initialize services members, singletons, kafka consumers and producers and any other connec...</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00012">streets_service.cpp:12</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_a545456534674e7026082f1585391bc7e"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e">streets_service::streets_service::is_simulation_mode</a></div><div class="ttdeci">bool is_simulation_mode() const</div><div class="ttdoc">Returns boolean if service is currently configured to be in simulation_mode. This corresponsds to the...</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00139">streets_service.cpp:139</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_aa7f21b164ca06dae441ecb4293ab8728"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728">streets_service::streets_service::initialize_kafka_producer</a></div><div class="ttdeci">bool initialize_kafka_producer(const std::string &amp;producer_topic, std::shared_ptr&lt; kafka_clients::kafka_producer_worker &gt; &amp;producer)</div><div class="ttdoc">Helper method to initialize Kafka producer for a given topic.</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00055">streets_service.cpp:55</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_aab4cb4106faf5524004ba6a19d110acc"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#aab4cb4106faf5524004ba6a19d110acc">streets_service::streets_service::initialize_kafka_consumer</a></div><div class="ttdeci">bool initialize_kafka_consumer(const std::string &amp;consumer_topic, std::shared_ptr&lt; kafka_clients::kafka_consumer_worker &gt; &amp;consumer)</div><div class="ttdoc">Helper method to initialise Kafka consumer. NOTE: Will assign consumer group id as service_name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00072">streets_service.cpp:72</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a0bbce68544a01f99199a07fb642342f9"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">traffic_signal_controller_service::tsc_service::initialize_snmp_client</a></div><div class="ttdeci">bool initialize_snmp_client(const std::string &amp;server_ip, const int server_port, const std::string &amp;community, const int snmp_version, const int timeout)</div><div class="ttdoc">Initialize SNMP Client to make SNMP calls to Traffic Signal Controller.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00131">tsc_service.cpp:131</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a251cd72bbcc55b40f7e4fbc78ad81dc4"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">traffic_signal_controller_service::tsc_service::spat_proj_mode</a></div><div class="ttdeci">SPAT_PROJECTION_MODE spat_proj_mode</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00105">tsc_service.h:105</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a26027ff7d1a2fdf05a67be10543aa1bd"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">traffic_signal_controller_service::tsc_service::tsc_state_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; tsc_state &gt; tsc_state_ptr</div><div class="ttdoc">tsc_state queries and stores traffic signal controller configurations including phase sequence,...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00059">tsc_service.h:59</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a365cce2a524c81a204b83a15104b4f4e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">traffic_signal_controller_service::tsc_service::tsc_config_state_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; tsc_config_state_ptr</div><div class="ttdoc">Pointer to tsc_configuration_state object which is traffic signal controller configuration informatio...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00085">tsc_service.h:85</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a470c3a6c64e310bc4ac0da205a2aeafb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">traffic_signal_controller_service::tsc_service::initialize_spat_worker</a></div><div class="ttdeci">bool initialize_spat_worker(const std::string &amp;udp_socket_ip, const int udp_socket_port, const int timeout, const bool use_tsc_timestamp)</div><div class="ttdoc">Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00166">tsc_service.cpp:166</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a4c0e96db941eb4fcd552e8f119a93d48"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a4c0e96db941eb4fcd552e8f119a93d48">traffic_signal_controller_service::tsc_service::configure_snmp_cmd_logger</a></div><div class="ttdeci">void configure_snmp_cmd_logger() const</div><div class="ttdoc">Method to configure spdlog::logger for logging snmp control commands into daily rotating log file.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00408">tsc_service.cpp:408</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a54e9845c840c058c682e215fe39a6e0c"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">traffic_signal_controller_service::tsc_service::initialize_spat</a></div><div class="ttdeci">void initialize_spat(const std::string &amp;intersection_name, const int intersection_id, const std::unordered_map&lt; int, int &gt; &amp;phase_number_to_signal_group)</div><div class="ttdoc">Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00189">tsc_service.cpp:189</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a7d7ed6cff78c8b161b71f3cfedabc452"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a7d7ed6cff78c8b161b71f3cfedabc452">traffic_signal_controller_service::tsc_service::enable_snmp_cmd_logging_</a></div><div class="ttdeci">bool enable_snmp_cmd_logging_</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00114">tsc_service.h:114</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aac8bd449d953386ac8db45dd89a5ec4d"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">traffic_signal_controller_service::tsc_service::initialize_intersection_client</a></div><div class="ttdeci">bool initialize_intersection_client()</div><div class="ttdoc">Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00179">tsc_service.cpp:179</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ab618504f0fe46fe639c43e48f9d6a264"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">traffic_signal_controller_service::tsc_service::intersection_client_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; intersection_client &gt; intersection_client_ptr</div><div class="ttdoc">Pointer to intersection_client used to query intersection information including name and id from the ...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00091">tsc_service.h:91</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_adad711d135587e232d5cd92447b9a5af"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">traffic_signal_controller_service::tsc_service::initialize_tsc_state</a></div><div class="ttdeci">bool initialize_tsc_state(const std::shared_ptr&lt; snmp_client &gt; _snmp_client_ptr)</div><div class="ttdoc">Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00144">tsc_service.cpp:144</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ae6c4d4787d47463da9fa9b895c17a8b7"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae6c4d4787d47463da9fa9b895c17a8b7">traffic_signal_controller_service::tsc_service::configure_veh_ped_call_logger</a></div><div class="ttdeci">void configure_veh_ped_call_logger() const</div><div class="ttdoc">ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal cont...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00419">tsc_service.cpp:419</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">traffic_signal_controller_service::SPAT_PROJECTION_MODE::DPP_PROJECTION</a></div><div class="ttdeci">@ DPP_PROJECTION</div><div class="ttdoc">Append future information reflected in received DPP.</div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aefedfa98a01bc77e012670aa29bbc94f"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aefedfa98a01bc77e012670aa29bbc94f">traffic_signal_controller_service::spat_projection_mode_from_int</a></div><div class="ttdeci">SPAT_PROJECTION_MODE spat_projection_mode_from_int(const int i)</div><div class="ttdef"><b>Definition:</b> <a href="spat__projection__mode_8cpp_source.html#l00004">spat_projection_mode.cpp:4</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00408">configure_snmp_cmd_logger()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00419">configure_veh_ped_call_logger()</a>, <a class="el" href="tsc__service_8h_source.html#l00097">control_tsc_state_ptr_</a>, <a class="el" href="tsc__service_8h_source.html#l00111">control_tsc_state_sleep_dur_</a>, <a class="el" href="tsc__service_8h_source.html#l00042">desired_phase_plan_consumer</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">traffic_signal_controller_service::DPP_PROJECTION</a>, <a class="el" href="tsc__service_8h_source.html#l00114">enable_snmp_cmd_logging_</a>, <a class="el" href="tsc__service_8cpp_source.html#l00153">enable_spat()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00150">streets_service::streets_configuration::get_boolean_config()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00119">streets_service::streets_configuration::get_int_config()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00104">streets_service::streets_configuration::get_string_config()</a>, <a class="el" href="streets__service_8cpp_source.html#l00012">streets_service::streets_service::initialize()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00179">initialize_intersection_client()</a>, <a class="el" href="streets__service_8cpp_source.html#l00072">streets_service::streets_service::initialize_kafka_consumer()</a>, <a class="el" href="streets__service_8cpp_source.html#l00055">streets_service::streets_service::initialize_kafka_producer()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00131">initialize_snmp_client()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00189">initialize_spat()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00166">initialize_spat_worker()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00144">initialize_tsc_state()</a>, <a class="el" href="tsc__service_8h_source.html#l00091">intersection_client_ptr</a>, <a class="el" href="streets__service_8cpp_source.html#l00139">streets_service::streets_service::is_simulation_mode()</a>, <a class="el" href="tsc__service_8h_source.html#l00063">monitor_dpp_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00068">snmp_client_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00034">spat_producer</a>, <a class="el" href="tsc__service_8h_source.html#l00105">spat_proj_mode</a>, <a class="el" href="spat__projection__mode_8cpp_source.html#l00004">traffic_signal_controller_service::spat_projection_mode_from_int()</a>, <a class="el" href="tsc__service_8h_source.html#l00038">tsc_config_producer</a>, <a class="el" href="tsc__service_8h_source.html#l00085">tsc_config_state_ptr</a>, and <a class="el" href="tsc__service_8h_source.html#l00059">tsc_state_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__client__service_2src_2main_8cpp_source.html#l00008">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_cgraph">
<area shape="rect" title="Method to initialize the tsc_service." alt="" coords="5,528,160,584"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a4c0e96db941eb4fcd552e8f119a93d48" title="Method to configure spdlog::logger for logging snmp control commands into daily rotating log file." alt="" coords="214,5,401,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae6c4d4787d47463da9fa9b895c17a8b7" title="ethod to configure spdlog::logger for logging vehicle and pedestrian calls on the traffic signal cont..." alt="" coords="208,85,407,141"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="230,189,385,245"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b" title="Retreive configuration parameter boolean value with provide name." alt="" coords="455,237,673,278"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b" title="Retreive configuration parameter integer value with provided name." alt="" coords="470,302,658,343"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf" title="Retreive configuration parameter string value with provided name." alt="" coords="461,546,667,587"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a52fb893726747c22c954ff42d4ff873a" title="Method to initialize services members, singletons, kafka consumers and producers and any other connec..." alt="" coords="229,371,386,413"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d" title="Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In..." alt="" coords="217,488,397,544"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#aab4cb4106faf5524004ba6a19d110acc" title="Helper method to initialise Kafka consumer. NOTE: Will assign consumer group id as service_name." alt="" coords="226,568,389,624"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#aa7f21b164ca06dae441ecb4293ab8728" title="Helper method to initialize Kafka producer for a given topic." alt="" coords="226,648,389,704"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9" title="Initialize SNMP Client to make SNMP calls to Traffic Signal Controller." alt="" coords="230,728,385,784"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c" title="Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp..." alt="" coords="230,808,385,864"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb" title="Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic..." alt="" coords="230,888,385,944"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af" title="Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S..." alt="" coords="230,968,385,1024"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e" title="Returns boolean if service is currently configured to be in simulation_mode. This corresponsds to the..." alt="" coords="211,1047,403,1089"/>
<area shape="rect" href="namespacetraffic__signal__controller__service.html#aefedfa98a01bc77e012670aa29bbc94f" title=" " alt="" coords="225,1112,390,1168"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a711844530be77c0a19b9cfd999d3cadd" title="Method to create SPDLOG Daily rotating file logger. The logger is accessible by calling spdlog::get(n..." alt="" coords="470,53,658,94"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="721,382,907,423"/>
<area shape="rect" href="classstreets__service_1_1streets__singleton.html#a2661e8317c90be8ba5d18b37b5bc3df8" title="Method to intialize streets_singleton with constructor params ...Args of templated class." alt="" coords="477,367,651,438"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a24b078c95a66357880bc7c6377d4c84b" title=" " alt="" coords="457,462,671,503"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_abb944363e0d001e15e5a515da611d452_icgraph">
<area shape="rect" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="aac8bd449d953386ac8db45dd89a5ec4d" name="aac8bd449d953386ac8db45dd89a5ec4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac8bd449d953386ac8db45dd89a5ec4d">&#9670;&nbsp;</a></span>initialize_intersection_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_intersection_client </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and Intersection ID for SPaT message. </p>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00179">179</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>                                                     {</div>
<div class="line"><span class="lineno">  180</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a> = std::make_shared&lt;intersection_client&gt;();</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;request_intersection_info() ) {</div>
<div class="line"><span class="lineno">  182</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to retrieve intersection information from intersection model!&quot;</span>);</div>
<div class="line"><span class="lineno">  183</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  184</span>        }</div>
<div class="line"><span class="lineno">  185</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Intersection client initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  187</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00091">intersection_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph">
<area shape="rect" title="Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In..." alt="" coords="307,5,487,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a0bbce68544a01f99199a07fb642342f9" name="a0bbce68544a01f99199a07fb642342f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bbce68544a01f99199a07fb642342f9">&#9670;&nbsp;</a></span>initialize_snmp_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_snmp_client </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>server_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>community</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>snmp_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SNMP Client to make SNMP calls to Traffic Signal Controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_ip</td><td>of Traffic Signal Controller. </td></tr>
    <tr><td class="paramname">server_port</td><td>of Traffic Signal Controller NTCIP Server. </td></tr>
    <tr><td class="paramname">community</td><td>of SNMP communication used. </td></tr>
    <tr><td class="paramname">snmp_version</td><td>of SNMP communication used. </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout micro seconds of SNMP connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00131">131</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  132</span>                                                                                   {</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  134</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a> = std::make_shared&lt;snmp_client&gt;(server_ip, server_port, community, snmp_version, timeout);</div>
<div class="line"><span class="lineno">  135</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;SNMP Client initialized!&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  137</span>        }</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> snmp_client_exception &amp;e) {</div>
<div class="line"><span class="lineno">  139</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Exception encountered initializing snmp client : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  141</span>        }</div>
<div class="line"><span class="lineno">  142</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00068">snmp_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph">
<area shape="rect" title="Initialize SNMP Client to make SNMP calls to Traffic Signal Controller." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a54e9845c840c058c682e215fe39a6e0c" name="a54e9845c840c058c682e215fe39a6e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e9845c840c058c682e215fe39a6e0c">&#9670;&nbsp;</a></span>initialize_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::initialize_spat </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>intersection_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>intersection_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>phase_number_to_signal_group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapping not provided in NTCIP UDP messages from TSC but required for interpretation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_name</td><td>J2735 Intersection name </td></tr>
    <tr><td class="paramname">intersection_id</td><td>J2735 Intersection ID </td></tr>
    <tr><td class="paramname">phase_number_to_signal_group</td><td>map of phase numbers (NTCIP) to signal groups provided by TSC State </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00189">189</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                                                                               {</div>
<div class="line"><span class="lineno">  191</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a> =  std::make_shared&lt;signal_phase_and_timing::spat&gt;();</div>
<div class="line"><span class="lineno">  192</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;initialize_intersection( intersection_name, intersection_id, phase_number_to_signal_group);</div>
<div class="line"><span class="lineno">  193</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ae77457ef9ea248e80a34a2a145a59096"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">traffic_signal_controller_service::tsc_service::spat_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; signal_phase_and_timing::spat &gt; spat_ptr</div><div class="ttdoc">Pointer to spat object which is updated based on received UDP messsages from the traffic signal contr...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00074">tsc_service.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00074">spat_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph">
<area shape="rect" title="Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a470c3a6c64e310bc4ac0da205a2aeafb" name="a470c3a6c64e310bc4ac0da205a2aeafb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470c3a6c64e310bc4ac0da205a2aeafb">&#9670;&nbsp;</a></span>initialize_spat_worker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_spat_worker </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>udp_socket_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>udp_socket_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>use_tsc_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic Signal Controller NTCIP UDP SPaT messages and updating the SPaT object using this information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">udp_socket_ip</td><td>IP of localhost where UDP packets will be received. </td></tr>
    <tr><td class="paramname">udp_socket_port</td><td>Port of localhost where UDP packets will be received. </td></tr>
    <tr><td class="paramname">timeout</td><td>Timeout in seconds for UDP client. UDP socket will throw an exception if no messages are receive for timeount window. </td></tr>
    <tr><td class="paramname">use_tsc_timestamp</td><td>bool flag to indicate whether to use TSC timestamp provided in UDP packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00166">166</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>                                                                                         {</div>
<div class="line"><span class="lineno">  168</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a> = std::make_shared&lt;spat_worker&gt;(udp_socket_ip, udp_socket_port, timeout, use_tsc_timestamp);</div>
<div class="line"><span class="lineno">  169</span>        <span class="comment">// HTTP request to update intersection information</span></div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a>-&gt;initialize())</div>
<div class="line"><span class="lineno">  171</span>        {</div>
<div class="line"><span class="lineno">  172</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize spat worker!&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  174</span>        }</div>
<div class="line"><span class="lineno">  175</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Spat worker initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">  176</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  177</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a390a1495b441c84b4ad620113635556f"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">traffic_signal_controller_service::tsc_service::spat_worker_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; spat_worker &gt; spat_worker_ptr</div><div class="ttdoc">spat_worker contains udp_socket_listener and consumes UDP data packets and updates spat accordingly.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00053">tsc_service.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00053">spat_worker_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph">
<area shape="rect" title="Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="adad711d135587e232d5cd92447b9a5af" name="adad711d135587e232d5cd92447b9a5af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad711d135587e232d5cd92447b9a5af">&#9670;&nbsp;</a></span>initialize_tsc_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_tsc_state </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td>
          <td class="paramname"><em>_snmp_client_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic Signal Controller including default phase sequence, phase timing information, and phase number to signal group mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_snmp_client_ptr</td><td>SNMP client to use for querying initial information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00144">144</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>                                                                                             {</div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a> = std::make_shared&lt;tsc_state&gt;(_snmp_client_ptr );</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;initialize() ){</div>
<div class="line"><span class="lineno">  147</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize tsc_state!&quot;</span>);</div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  149</span>        }</div>
<div class="line"><span class="lineno">  150</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;TSC State initialized!&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  152</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00059">tsc_state_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph">
<area shape="rect" title="Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#abb944363e0d001e15e5a515da611d452" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a8aa03811146f8317d56ca5e7870a466e" name="a8aa03811146f8317d56ca5e7870a466e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa03811146f8317d56ca5e7870a466e">&#9670;&nbsp;</a></span>log_spat_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::log_spat_latency </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>spat_processing_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>spat_time_stamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 messages then resets count and spat_processing_time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>reference passed in and incremented on each subsequent call. </td></tr>
    <tr><td class="paramname">spat_processing_time</td><td>cumulative spat latency from future event project. Calculated by comparing spat time stamp to current time and summing over 20 messages. </td></tr>
    <tr><td class="paramname">spat_time_stamp</td><td>the timestamp of the most recent processed spat message. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00431">431</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  431</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  432</span>        <span class="comment">// Calculate and average spat processing time over 20 messages sent </span></div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a> &lt;= 20 ) {</div>
<div class="line"><span class="lineno">  434</span>            uint64_t <a class="code hl_variable" href="namespacesimulate__mobilityoperation.html#a53dff21a6d447ca660693de3432b79d0">timestamp</a> = <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_clock_singleton::time_in_ms</a>();</div>
<div class="line"><span class="lineno">  435</span>            spat_processing_time += <a class="code hl_variable" href="namespacesimulate__mobilityoperation.html#a53dff21a6d447ca660693de3432b79d0">timestamp</a> - spat_time_stamp;</div>
<div class="line"><span class="lineno">  436</span>            <a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a>++;</div>
<div class="line"><span class="lineno">  437</span>        }</div>
<div class="line"><span class="lineno">  438</span>        <span class="comment">// Log result at 20 and clear counts  </span></div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a> &gt;= 20 ) {</div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordtype">double</span> total_processing_time = ((double)(spat_processing_time))/20.0;</div>
<div class="line"><span class="lineno">  441</span>            SPDLOG_INFO(<span class="stringliteral">&quot;SPat average processing time over 20 messages is {0} ms and total processing time for 20 messages is {1} ms!&quot;</span>, total_processing_time, spat_processing_time);</div>
<div class="line"><span class="lineno">  442</span>            spat_processing_time = 0;</div>
<div class="line"><span class="lineno">  443</span>            <a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a> = 0;</div>
<div class="line"><span class="lineno">  444</span>        }</div>
<div class="line"><span class="lineno">  445</span>    } </div>
<div class="ttc" id="anamespacesimulate__bsm_html_a76f645adf8af768fa959ecb6f90d7831"><div class="ttname"><a href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">simulate_bsm.count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00018">simulate_bsm.py:18</a></div></div>
<div class="ttc" id="anamespacesimulate__mobilityoperation_html_a53dff21a6d447ca660693de3432b79d0"><div class="ttname"><a href="namespacesimulate__mobilityoperation.html#a53dff21a6d447ca660693de3432b79d0">simulate_mobilityoperation.timestamp</a></div><div class="ttdeci">int timestamp</div><div class="ttdef"><b>Definition:</b> <a href="simulate__mobilityoperation_8py_source.html#l00026">simulate_mobilityoperation.py:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simulate__bsm_8py_source.html#l00018">simulate_bsm::count</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">streets_service::streets_clock_singleton::time_in_ms()</a>, and <a class="el" href="simulate__mobilityoperation_8py_source.html#l00026">simulate_mobilityoperation::timestamp</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_cgraph">
<area shape="rect" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="5,5,160,61"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="208,13,400,54"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="448,13,651,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a8aa03811146f8317d56ca5e7870a466e_icgraph">
<area shape="rect" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="531,5,685,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="328,5,483,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a0d64c3a5157eb5d30cac4e54772e4b90" name="a0d64c3a5157eb5d30cac4e54772e4b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d64c3a5157eb5d30cac4e54772e4b90">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp; traffic_signal_controller_service::tsc_service::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4fb7763e7ae8b9e630fd7fa10bc2479" name="aa4fb7763e7ae8b9e630fd7fa10bc2479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fb7763e7ae8b9e630fd7fa10bc2479">&#9670;&nbsp;</a></span>produce_spat_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::produce_spat_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-streets kafka broker. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00196">196</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  196</span>                                              {</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a> = 0;</div>
<div class="line"><span class="lineno">  199</span>            uint64_t spat_processing_time = 0;</div>
<div class="line"><span class="lineno">  200</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Starting SPaT producer&quot;</span>);</div>
<div class="line"><span class="lineno">  201</span>            <span class="keywordflow">while</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a> &amp;&amp; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a> &amp;&amp; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>) {</div>
<div class="line"><span class="lineno">  202</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  203</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a>-&gt;receive_spat(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>);</div>
<div class="line"><span class="lineno">  204</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;Current SPaT : {0} &quot;</span>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;toJson());  </div>
<div class="line"><span class="lineno">  205</span>                    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">spat_proj_mode</a>)</div>
<div class="line"><span class="lineno">  206</span>                    {</div>
<div class="line"><span class="lineno">  207</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555ba42b5b6830c08e527e4feb2e0be6d388e">SPAT_PROJECTION_MODE::FIXED_TIMING_PROJECTION</a>: {</div>
<div class="line"><span class="lineno">  208</span>                            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;add_future_movement_events(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>);</div>
<div class="line"><span class="lineno">  209</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  210</span>                        }</div>
<div class="line"><span class="lineno">  211</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">SPAT_PROJECTION_MODE::DPP_PROJECTION</a> : {</div>
<div class="line"><span class="lineno">  212</span>                            std::scoped_lock&lt;std::mutex&gt; lck{<a class="code hl_variable" href="namespacetraffic__signal__controller__service.html#ac5c3fad3858d8ba9d9fe4d30c1c262a9">dpp_mtx</a>};</div>
<div class="line"><span class="lineno">  213</span>                            <span class="comment">// throws desired phase plan exception when no previous green information present</span></div>
<div class="line"><span class="lineno">  214</span>                            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">monitor_dpp_ptr</a>-&gt;update_spat_future_movement_events(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>); </div>
<div class="line"><span class="lineno">  215</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  216</span>                        }</div>
<div class="line"><span class="lineno">  217</span>                        <span class="keywordflow">default</span>: {</div>
<div class="line"><span class="lineno">  218</span>                            <span class="comment">// Poll and log vehicle and pedestrian call information every 10 spat messages or at 10 Hz</span></div>
<div class="line"><span class="lineno">  219</span>                            <span class="keywordflow">if</span> ( <a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a>%10 == 0) {</div>
<div class="line"><span class="lineno">  220</span>                                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;poll_vehicle_pedestrian_calls();</div>
<div class="line"><span class="lineno">  221</span>                                <span class="keywordflow">if</span>(<span class="keyword">auto</span> logger = spdlog::get(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab65ca0f92d5a9826628e5cc03147d600">VEH_PED_CALL_LOGGER_NAME</a>); logger != nullptr ){</div>
<div class="line"><span class="lineno">  222</span>                                    logger-&gt;info(<span class="stringliteral">&quot;{0}, {1}, {2}&quot;</span>, <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_clock_singleton::time_in_ms</a>(), </div>
<div class="line"><span class="lineno">  223</span>                                                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;vector_to_string(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_vehicle_calls()),  </div>
<div class="line"><span class="lineno">  224</span>                                                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;vector_to_string(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_pedestrian_calls())</div>
<div class="line"><span class="lineno">  225</span>                                                );</div>
<div class="line"><span class="lineno">  226</span>                                }</div>
<div class="line"><span class="lineno">  227</span>                            }</div>
<div class="line"><span class="lineno">  228</span>                        }</div>
<div class="line"><span class="lineno">  229</span>                    } </div>
<div class="line"><span class="lineno">  230</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a> &amp;&amp; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>) {</div>
<div class="line"><span class="lineno">  231</span>                        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>-&gt;send(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;toJson());</div>
<div class="line"><span class="lineno">  232</span>                        <span class="comment">// No utility in calculating spat latency in simulation mode</span></div>
<div class="line"><span class="lineno">  233</span>                        <span class="keywordflow">if</span> ( !this-&gt;<a class="code hl_function" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e">is_simulation_mode</a>() ) {</div>
<div class="line"><span class="lineno">  234</span>                           <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e">log_spat_latency</a>(count, spat_processing_time, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;get_intersection().get_epoch_timestamp()) ;</div>
<div class="line"><span class="lineno">  235</span>                        }</div>
<div class="line"><span class="lineno">  236</span>                    }     </div>
<div class="line"><span class="lineno">  237</span>                }</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classsignal__phase__and__timing_1_1signal__phase__and__timing__exception.html">signal_phase_and_timing::signal_phase_and_timing_exception</a> &amp;e ) {</div>
<div class="line"><span class="lineno">  239</span>                    SPDLOG_ERROR(<span class="stringliteral">&quot;Encountered exception, spat not published : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  240</span>                }</div>
<div class="line"><span class="lineno">  241</span>                <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan__exception.html">traffic_signal_controller_service::monitor_desired_phase_plan_exception</a> &amp;e) {</div>
<div class="line"><span class="lineno">  242</span>                    SPDLOG_ERROR(<span class="stringliteral">&quot;Could not update movement events, spat not published. Encountered exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  243</span>                }</div>
<div class="line"><span class="lineno">  244</span>                <span class="keywordflow">catch</span>(<span class="keyword">const</span> <a class="code hl_class" href="classtraffic__signal__controller__service_1_1monitor__states__exception.html">traffic_signal_controller_service::monitor_states_exception</a> &amp;e){</div>
<div class="line"><span class="lineno">  245</span>                    SPDLOG_ERROR(<span class="stringliteral">&quot;Could not update movement events, spat not published. Encountered exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  246</span>                }   </div>
<div class="line"><span class="lineno">  247</span>            } </div>
<div class="line"><span class="lineno">  248</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping produce_spat_json! Are pointers null: spat_worker {0}, spat_producer {1}, tsc_state {2}&quot;</span>,</div>
<div class="line"><span class="lineno">  249</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a> == <span class="keyword">nullptr</span>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a> == <span class="keyword">nullptr</span>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a> == <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  250</span>        }</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">catch</span>( <span class="keyword">const</span> udp_socket_listener_exception &amp;e) {</div>
<div class="line"><span class="lineno">  252</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Encountered exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  253</span>        }</div>
<div class="line"><span class="lineno">  254</span>        </div>
<div class="line"><span class="lineno">  255</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1signal__phase__and__timing__exception_html"><div class="ttname"><a href="classsignal__phase__and__timing_1_1signal__phase__and__timing__exception.html">signal_phase_and_timing::signal_phase_and_timing_exception</a></div><div class="ttdoc">Runtime error related to processing signal_phase_and_timing JSON updates.</div><div class="ttdef"><b>Definition:</b> <a href="signal__phase__and__timing__exception_8h_source.html#l00013">signal_phase_and_timing_exception.h:13</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1monitor__desired__phase__plan__exception_html"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan__exception.html">traffic_signal_controller_service::monitor_desired_phase_plan_exception</a></div><div class="ttdoc">Runtime error related to consuming desired phase plan.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__desired__phase__plan__exception_8h_source.html#l00012">monitor_desired_phase_plan_exception.h:12</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1monitor__states__exception_html"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1monitor__states__exception.html">traffic_signal_controller_service::monitor_states_exception</a></div><div class="ttdoc">Runtime error related to SNMP client used to communicate with Traffic Signal Controller (NTCIP).</div><div class="ttdef"><b>Definition:</b> <a href="monitor__states__exception_8h_source.html#l00012">monitor_states_exception.h:12</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a8aa03811146f8317d56ca5e7870a466e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e">traffic_signal_controller_service::tsc_service::log_spat_latency</a></div><div class="ttdeci">void log_spat_latency(int &amp;count, uint64_t &amp;spat_processing_time, uint64_t spat_time_stamp) const</div><div class="ttdoc">Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00431">tsc_service.cpp:431</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_a044f1240240fc221c37e0433174c555ba42b5b6830c08e527e4feb2e0be6d388e"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555ba42b5b6830c08e527e4feb2e0be6d388e">traffic_signal_controller_service::SPAT_PROJECTION_MODE::FIXED_TIMING_PROJECTION</a></div><div class="ttdeci">@ FIXED_TIMING_PROJECTION</div><div class="ttdoc">Append future information assuming fixed time, min vehicle recall on all vehicle phases.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simulate__bsm_8py_source.html#l00018">simulate_bsm::count</a>, <a class="el" href="tsc__service_8cpp_source.html#l00005">traffic_signal_controller_service::dpp_mtx</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">traffic_signal_controller_service::DPP_PROJECTION</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555ba42b5b6830c08e527e4feb2e0be6d388e">traffic_signal_controller_service::FIXED_TIMING_PROJECTION</a>, <a class="el" href="streets__service_8cpp_source.html#l00139">streets_service::streets_service::is_simulation_mode()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00431">log_spat_latency()</a>, <a class="el" href="tsc__service_8h_source.html#l00063">monitor_dpp_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00034">spat_producer</a>, <a class="el" href="tsc__service_8h_source.html#l00105">spat_proj_mode</a>, <a class="el" href="tsc__service_8h_source.html#l00074">spat_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00053">spat_worker_ptr</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">streets_service::streets_clock_singleton::time_in_ms()</a>, <a class="el" href="tsc__service_8h_source.html#l00059">tsc_state_ptr</a>, and <a class="el" href="tsc__service_8h_source.html#l00118">VEH_PED_CALL_LOGGER_NAME</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00448">start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_cgraph">
<area shape="rect" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="5,70,160,126"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e" title="Returns boolean if service is currently configured to be in simulation_mode. This corresponsds to the..." alt="" coords="208,5,400,47"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="227,70,381,126"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="448,111,640,152"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="688,111,891,152"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph">
<area shape="rect" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="328,5,483,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a5ae2c7b9e7f0ebd7f62be1f5ffccf65e" name="a5ae2c7b9e7f0ebd7f62be1f5ffccf65e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e">&#9670;&nbsp;</a></span>produce_tsc_config_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::produce_tsc_config_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to receive traffic signal controller configuration information from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> and broadcast spat JSON data to the carma-streets kafka broker. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00257">257</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  257</span>                                                   {</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  259</span>            </div>
<div class="line"><span class="lineno">  260</span>            <span class="keywordflow">while</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a>-&gt;is_running() &amp;&amp; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">tsc_config_state_ptr</a> )</div>
<div class="line"><span class="lineno">  261</span>            { </div>
<div class="line"><span class="lineno">  262</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5338cec3c1e2f4012158c1f949a9fa97">tsc_config_producer</a>-&gt;send(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a365cce2a524c81a204b83a15104b4f4e">tsc_config_state_ptr</a>-&gt;toJson());</div>
<div class="line"><span class="lineno">  263</span>                <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">streets_clock_singleton::sleep_for</a>(10000); <span class="comment">// Sleep for 10 second between publish   </span></div>
<div class="line"><span class="lineno">  264</span>            }</div>
<div class="line"><span class="lineno">  265</span>        }</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstreets__tsc__configuration_1_1tsc__configuration__state__exception.html">streets_tsc_configuration::tsc_configuration_state_exception</a> &amp;e) {</div>
<div class="line"><span class="lineno">  267</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Encountered exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  268</span>        }</div>
<div class="line"><span class="lineno">  269</span>    }</div>
<div class="ttc" id="aclassstreets__tsc__configuration_1_1tsc__configuration__state__exception_html"><div class="ttname"><a href="classstreets__tsc__configuration_1_1tsc__configuration__state__exception.html">streets_tsc_configuration::tsc_configuration_state_exception</a></div><div class="ttdoc">Runtime error related to processing signal_phase_and_timing JSON updates.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__configuration__state__exception_8h_source.html#l00012">tsc_configuration_state_exception.h:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__clock__singleton_8cpp_source.html#l00019">streets_service::streets_clock_singleton::sleep_for()</a>, <a class="el" href="tsc__service_8h_source.html#l00038">tsc_config_producer</a>, and <a class="el" href="tsc__service_8h_source.html#l00085">tsc_config_state_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00448">start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_cgraph">
<area shape="rect" title="Method to receive traffic signal controller configuration information from the tsc_state and broadcas..." alt="" coords="5,5,171,61"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="219,13,397,54"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="445,13,648,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e_icgraph">
<area shape="rect" title="Method to receive traffic signal controller configuration information from the tsc_state and broadcas..." alt="" coords="328,5,493,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a39fe31f914ae9c860737f5f967aac569" name="a39fe31f914ae9c860737f5f967aac569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39fe31f914ae9c860737f5f967aac569">&#9670;&nbsp;</a></span>set_tsc_hold_and_omit_forceoff_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::set_tsc_hold_and_omit_forceoff_call </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desired phase plan/phase control schedule. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00339">339</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  340</span>    {</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a> &amp;&amp; !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.empty())</div>
<div class="line"><span class="lineno">  342</span>        {</div>
<div class="line"><span class="lineno">  343</span>            <span class="comment">//Clear all phase controls from the traffic signal controller</span></div>
<div class="line"><span class="lineno">  344</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Clear all phase controls from TSC!&quot;</span>);</div>
<div class="line"><span class="lineno">  345</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a>-&gt;run_clear_all_snmp_commands();</div>
<div class="line"><span class="lineno">  346</span>        }</div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">while</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.empty())</div>
<div class="line"><span class="lineno">  348</span>        {   </div>
<div class="line"><span class="lineno">  349</span>            <span class="keyword">auto</span> current_command = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.front();            </div>
<div class="line"><span class="lineno">  350</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Checking if front command {0} is expired&quot;</span>, current_command.get_cmd_info());</div>
<div class="line"><span class="lineno">  351</span>            <span class="comment">//Check if event is expired</span></div>
<div class="line"><span class="lineno">  352</span>            <span class="keywordtype">long</span> duration = current_command.start_time_ - <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_clock_singleton::time_in_ms</a>();</div>
<div class="line"><span class="lineno">  353</span>            <span class="keywordflow">if</span>(duration &lt; 0){</div>
<div class="line"><span class="lineno">  354</span>                <span class="keywordflow">throw</span> control_tsc_state_exception(<span class="stringliteral">&quot;SNMP set command is expired! Start time was &quot;</span> </div>
<div class="line"><span class="lineno">  355</span>                    + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(current_command.start_time_) + <span class="stringliteral">&quot; and current time is &quot;</span> </div>
<div class="line"><span class="lineno">  356</span>                    + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae">streets_clock_singleton::time_in_ms</a>() ) + <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span>            }       </div>
<div class="line"><span class="lineno">  358</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Sleeping for {0}ms.&quot;</span>, duration);</div>
<div class="line"><span class="lineno">  359</span>            <a class="code hl_function" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa">streets_clock_singleton::sleep_for</a>(duration);</div>
<div class="line"><span class="lineno">  360</span>            </div>
<div class="line"><span class="lineno">  361</span>            <span class="comment">//After sleep duration, check the snmp queue again. If empty, stop the current command execution             </span></div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.empty())</div>
<div class="line"><span class="lineno">  363</span>            {</div>
<div class="line"><span class="lineno">  364</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;SNMP command queue is empty, stop the current command execution: {0}&quot;</span>, current_command.get_cmd_info());</div>
<div class="line"><span class="lineno">  365</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  366</span>            }</div>
<div class="line"><span class="lineno">  367</span>            <span class="comment">//Check if queue commands has been updated</span></div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.front().get_cmd_info() != current_command.get_cmd_info())</div>
<div class="line"><span class="lineno">  369</span>            {</div>
<div class="line"><span class="lineno">  370</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;SNMP command queue is updated with new schedule, stop the current command execution: {0}&quot;</span>, current_command.get_cmd_info());</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  372</span>            }</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>            <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a>)</div>
<div class="line"><span class="lineno">  375</span>            {</div>
<div class="line"><span class="lineno">  376</span>                <span class="keywordflow">throw</span> control_tsc_state_exception(<span class="stringliteral">&quot;Control TSC state is not initialized.&quot;</span>);</div>
<div class="line"><span class="lineno">  377</span>            }</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>            <span class="comment">//Checking all the commands from the queue. If there are any commands executed at the same time as the current_command, and execute these commands now.</span></div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">while</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.empty())</div>
<div class="line"><span class="lineno">  381</span>            {   </div>
<div class="line"><span class="lineno">  382</span>                <span class="keyword">auto</span> command_to_execute = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.front();</div>
<div class="line"><span class="lineno">  383</span>                <span class="keywordflow">if</span>(command_to_execute.start_time_ == current_command.start_time_)</div>
<div class="line"><span class="lineno">  384</span>                {</div>
<div class="line"><span class="lineno">  385</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a> &amp;&amp; !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#aca861e53ecc25e0c144e8fff3801bdf0">control_tsc_state_ptr_</a>-&gt;run_snmp_cmd_set_request(command_to_execute))</div>
<div class="line"><span class="lineno">  386</span>                    {</div>
<div class="line"><span class="lineno">  387</span>                        <span class="keywordflow">throw</span> control_tsc_state_exception(<span class="stringliteral">&quot;Could not set state for movement group in desired phase plan/phase control schedule.&quot;</span>);</div>
<div class="line"><span class="lineno">  388</span>                    }</div>
<div class="line"><span class="lineno">  389</span>                    <span class="comment">// Log command info sent</span></div>
<div class="line"><span class="lineno">  390</span>                    SPDLOG_INFO(command_to_execute.get_cmd_info());                </div>
<div class="line"><span class="lineno">  391</span>                    <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a7d7ed6cff78c8b161b71f3cfedabc452">enable_snmp_cmd_logging_</a> ){</div>
<div class="line"><span class="lineno">  392</span>                        <span class="keywordflow">if</span>(<span class="keyword">auto</span> logger = spdlog::get(<span class="stringliteral">&quot;snmp_cmd_logger&quot;</span>); logger != nullptr ){</div>
<div class="line"><span class="lineno">  393</span>                            logger-&gt;info( command_to_execute.get_cmd_info());</div>
<div class="line"><span class="lineno">  394</span>                        }</div>
<div class="line"><span class="lineno">  395</span>                    }</div>
<div class="line"><span class="lineno">  396</span>                    <span class="comment">//SNMP command Queue has no update nor has been cleared, pop the existing front command.</span></div>
<div class="line"><span class="lineno">  397</span>                    std::scoped_lock&lt;std::mutex&gt; snmp_cmd_lck(<a class="code hl_variable" href="namespacetraffic__signal__controller__service.html#a6825b89fdf00e4dd1233ace3a1418a69">snmp_cmd_queue_mtx</a>); </div>
<div class="line"><span class="lineno">  398</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ad1f864b59a25ba2c0010be48a5f08c14">tsc_set_command_queue_</a>.pop();</div>
<div class="line"><span class="lineno">  399</span>                }</div>
<div class="line"><span class="lineno">  400</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  401</span>                { </div>
<div class="line"><span class="lineno">  402</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  403</span>                }                                </div>
<div class="line"><span class="lineno">  404</span>            }</div>
<div class="line"><span class="lineno">  405</span>        }</div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00097">control_tsc_state_ptr_</a>, <a class="el" href="tsc__service_8h_source.html#l00114">enable_snmp_cmd_logging_</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00019">streets_service::streets_clock_singleton::sleep_for()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00006">traffic_signal_controller_service::snmp_cmd_queue_mtx</a>, <a class="el" href="streets__clock__singleton_8cpp_source.html#l00011">streets_service::streets_clock_singleton::time_in_ms()</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="tsc__service_8h_source.html#l00108">tsc_set_command_queue_</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00316">control_tsc_phases()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_cgraph">
<area shape="rect" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="5,63,239,119"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="293,5,472,47"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="287,71,479,112"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="347,137,419,163"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="527,39,729,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a39fe31f914ae9c860737f5f967aac569_icgraph">
<area shape="rect" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="531,5,764,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="328,5,483,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a965dba3d0f0cff4d2a36ecc38d2fed17" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a965dba3d0f0cff4d2a36ecc38d2fed17" name="a965dba3d0f0cff4d2a36ecc38d2fed17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a965dba3d0f0cff4d2a36ecc38d2fed17">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to start all threads included in the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>. </p>

<p>Reimplemented from <a class="el" href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548">streets_service::streets_service</a>.</p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00448">448</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>                            {</div>
<div class="line"><span class="lineno">  449</span>        <a class="code hl_function" href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548">streets_service::streets_service::start</a>();</div>
<div class="line"><span class="lineno">  450</span>        SPDLOG_INFO(<span class="stringliteral">&quot;Starting TSC Service threads&quot;</span>);</div>
<div class="line"><span class="lineno">  451</span>        std::thread tsc_config_thread(&amp;<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e">tsc_service::produce_tsc_config_json</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>        std::thread spat_t(&amp;<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">tsc_service::produce_spat_json</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>        <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a251cd72bbcc55b40f7e4fbc78ad81dc4">spat_proj_mode</a> == <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">SPAT_PROJECTION_MODE::DPP_PROJECTION</a> ) {</div>
<div class="line"><span class="lineno">  456</span>            std::thread desired_phase_plan_t(&amp;<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#aee54b7d1fe61af7a3141f56bf234e91e">tsc_service::consume_desired_phase_plan</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  457</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Thread joined to consume desired phase plan generated by carma-streets SO service.&quot;</span>);</div>
<div class="line"><span class="lineno">  458</span>            desired_phase_plan_t.join();</div>
<div class="line"><span class="lineno">  459</span>            <span class="comment">// Run tsc control phases</span></div>
<div class="line"><span class="lineno">  460</span>            std::thread control_phases_t(&amp;<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d">tsc_service::control_tsc_phases</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  461</span>            control_phases_t.join();</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span>        <span class="comment">// TODO: Remove if no longer necessary for TM/TSP MMITSS Integration</span></div>
<div class="line"><span class="lineno">  464</span>        <span class="comment">// An indicator to control whether launching a thread to consume carma-streets internal desired phase plan generated by singal optimization (SO) service </span></div>
<div class="line"><span class="lineno">  465</span>        <span class="comment">// or a thread to consume MMITSS external phase control schedule generated by MRP (https://github.com/mmitss/mmitss-az)</span></div>
<div class="line"><span class="lineno">  466</span>        <span class="comment">// if ( spat_proj_mode == SPAT_PROJECTION_MODE::MMITSS_PHASE_SCHEDULE ) {</span></div>
<div class="line"><span class="lineno">  467</span>        <span class="comment">//     std::thread consume_phase_control_schedule_t(&amp;tsc_service::consume_phase_control_schedule, this);</span></div>
<div class="line"><span class="lineno">  468</span>        <span class="comment">//     SPDLOG_DEBUG(&quot;Thread joined to consume phase control schedule generated by MRP.&quot;);</span></div>
<div class="line"><span class="lineno">  469</span>        <span class="comment">//     consume_phase_control_schedule_t.join();</span></div>
<div class="line"><span class="lineno">  470</span>        <span class="comment">//     // Run tsc control phases</span></div>
<div class="line"><span class="lineno">  471</span>        <span class="comment">//     std::thread control_phases_t(&amp;tsc_service::control_tsc_phases, this);</span></div>
<div class="line"><span class="lineno">  472</span>        <span class="comment">//     control_phases_t.join();</span></div>
<div class="line"><span class="lineno">  473</span>        <span class="comment">// }</span></div>
<div class="line"><span class="lineno">  474</span>        <span class="comment">// ---------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  475</span>        </div>
<div class="line"><span class="lineno">  476</span>        <span class="comment">// Run threads as joint so that they dont overlap execution </span></div>
<div class="line"><span class="lineno">  477</span>        tsc_config_thread.join();</div>
<div class="line"><span class="lineno">  478</span>        spat_t.join();</div>
<div class="line"><span class="lineno">  479</span>        </div>
<div class="line"><span class="lineno">  480</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__service_html_ac6754199ebc7f244293b496a2fffd548"><div class="ttname"><a href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548">streets_service::streets_service::start</a></div><div class="ttdeci">virtual void start()</div><div class="ttdoc">Method to start all threads needed for the Streets Service. This includes but is not limited to any t...</div><div class="ttdef"><b>Definition:</b> <a href="streets__service_8cpp_source.html#l00110">streets_service.cpp:110</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a2c68ad9bb9fc1a33029f50872687e87d"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d">traffic_signal_controller_service::tsc_service::control_tsc_phases</a></div><div class="ttdeci">void control_tsc_phases()</div><div class="ttdoc">Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00316">tsc_service.cpp:316</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a5ae2c7b9e7f0ebd7f62be1f5ffccf65e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e">traffic_signal_controller_service::tsc_service::produce_tsc_config_json</a></div><div class="ttdeci">void produce_tsc_config_json() const</div><div class="ttdoc">Method to receive traffic signal controller configuration information from the tsc_state and broadcas...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00257">tsc_service.cpp:257</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aa4fb7763e7ae8b9e630fd7fa10bc2479"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">traffic_signal_controller_service::tsc_service::produce_spat_json</a></div><div class="ttdeci">void produce_spat_json() const</div><div class="ttdoc">Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-s...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00196">tsc_service.cpp:196</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aee54b7d1fe61af7a3141f56bf234e91e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aee54b7d1fe61af7a3141f56bf234e91e">traffic_signal_controller_service::tsc_service::consume_desired_phase_plan</a></div><div class="ttdeci">void consume_desired_phase_plan()</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00271">tsc_service.cpp:271</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00271">consume_desired_phase_plan()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00316">control_tsc_phases()</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555badd2f610195dfa99706f138dd5d3ea726">traffic_signal_controller_service::DPP_PROJECTION</a>, <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00257">produce_tsc_config_json()</a>, <a class="el" href="tsc__service_8h_source.html#l00105">spat_proj_mode</a>, and <a class="el" href="streets__service_8cpp_source.html#l00110">streets_service::streets_service::start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__client__service_2src_2main_8cpp_source.html#l00008">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_cgraph">
<area shape="rect" title="Method to start all threads included in the tsc_service." alt="" coords="5,239,181,281"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aee54b7d1fe61af7a3141f56bf234e91e" title=" " alt="" coords="229,49,427,105"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a2c68ad9bb9fc1a33029f50872687e87d" title="Method to control phases on the Traffic Signal Controller by sending OMIT and HOLD commands construct..." alt="" coords="251,232,405,288"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="251,129,405,185"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a5ae2c7b9e7f0ebd7f62be1f5ffccf65e" title="Method to receive traffic signal controller configuration information from the tsc_state and broadcas..." alt="" coords="509,384,674,440"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#ac6754199ebc7f244293b496a2fffd548" title="Method to start all threads needed for the Streets Service. This includes but is not limited to any t..." alt="" coords="249,363,407,405"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a39fe31f914ae9c860737f5f967aac569" title="Method to set HOLD and OMIT, CALL, FORCEOFF on the Traffic signal controller accorording to the desir..." alt="" coords="475,253,708,309"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a56bd3e7391e279f8a5dc62d2eb6319fa" title="Sleep/block calling thread for provided duration in milliseconds. TODO: Add this functionality to the..." alt="" coords="763,322,941,363"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="756,195,948,237"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="816,268,888,295"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="996,261,1199,302"/>
<area shape="rect" href="classstreets__service_1_1streets__service.html#a545456534674e7026082f1585391bc7e" title="Returns boolean if service is currently configured to be in simulation_mode. This corresponsds to the..." alt="" coords="495,137,687,178"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8aa03811146f8317d56ca5e7870a466e" title="Method to log spat latency comparing spat time stamp to current time. Calculates and average over 20 ..." alt="" coords="514,5,669,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a965dba3d0f0cff4d2a36ecc38d2fed17_icgraph">
<area shape="rect" title="Method to start all threads included in the tsc_service." alt="" coords="104,5,280,47"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,39"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a9af1ee4e631bcf1440ea16a87ff8a6c5" name="a9af1ee4e631bcf1440ea16a87ff8a6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af1ee4e631bcf1440ea16a87ff8a6c5">&#9670;&nbsp;</a></span>tsc_service_test</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class tsc_service_test</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00121">121</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aca861e53ecc25e0c144e8fff3801bdf0" name="aca861e53ecc25e0c144e8fff3801bdf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca861e53ecc25e0c144e8fff3801bdf0">&#9670;&nbsp;</a></span>control_tsc_state_ptr_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1control__tsc__state.html">control_tsc_state</a>&gt; traffic_signal_controller_service::tsc_service::control_tsc_state_ptr_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the <a class="el" href="classtraffic__signal__controller__service_1_1control__tsc__state.html">control_tsc_state</a> worker responsible for make snmp HOLD and OMIT calls to follow the desired phase plan. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00097">97</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00271">consume_desired_phase_plan()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00339">set_tsc_hold_and_omit_forceoff_call()</a>.</p>

</div>
</div>
<a id="afb9e4af5a21306d19065a0119a13bc08" name="afb9e4af5a21306d19065a0119a13bc08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb9e4af5a21306d19065a0119a13bc08">&#9670;&nbsp;</a></span>control_tsc_state_sleep_dur_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_service::control_tsc_state_sleep_dur_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00111">111</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00316">control_tsc_phases()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>

</div>
</div>
<a id="a5b452ea6a57d91e96ea8c6d30937828d" name="a5b452ea6a57d91e96ea8c6d30937828d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b452ea6a57d91e96ea8c6d30937828d">&#9670;&nbsp;</a></span>desired_phase_plan_consumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classkafka__clients_1_1kafka__consumer__worker.html">kafka_clients::kafka_consumer_worker</a>&gt; traffic_signal_controller_service::tsc_service::desired_phase_plan_consumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00042">42</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00483">~tsc_service()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00271">consume_desired_phase_plan()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>.</p>

</div>
</div>
<a id="a7d7ed6cff78c8b161b71f3cfedabc452" name="a7d7ed6cff78c8b161b71f3cfedabc452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d7ed6cff78c8b161b71f3cfedabc452">&#9670;&nbsp;</a></span>enable_snmp_cmd_logging_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::enable_snmp_cmd_logging_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00114">114</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00339">set_tsc_hold_and_omit_forceoff_call()</a>.</p>

</div>
</div>
<a id="ab618504f0fe46fe639c43e48f9d6a264" name="ab618504f0fe46fe639c43e48f9d6a264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab618504f0fe46fe639c43e48f9d6a264">&#9670;&nbsp;</a></span>intersection_client_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a>&gt; traffic_signal_controller_service::tsc_service::intersection_client_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> used to query intersection information including name and id from the <a class="el" href="namespaceintersection__model.html">intersection_model</a> REST API. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00091">91</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00179">initialize_intersection_client()</a>.</p>

</div>
</div>
<a id="ac5cfe48a5c16ff26bbcaf6f5563a0a1a" name="ac5cfe48a5c16ff26bbcaf6f5563a0a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5cfe48a5c16ff26bbcaf6f5563a0a1a">&#9670;&nbsp;</a></span>monitor_dpp_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1monitor__desired__phase__plan.html">monitor_desired_phase_plan</a>&gt; traffic_signal_controller_service::tsc_service::monitor_dpp_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Object used to process and store desired phase plan consumed from kafka,. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00063">63</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00271">consume_desired_phase_plan()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a1362a53dbc7f4e91fa256a2f4f45c3e0" name="a1362a53dbc7f4e91fa256a2f4f45c3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1362a53dbc7f4e91fa256a2f4f45c3e0">&#9670;&nbsp;</a></span>phase_control_schedule_consumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classkafka__clients_1_1kafka__consumer__worker.html">kafka_clients::kafka_consumer_worker</a>&gt; traffic_signal_controller_service::tsc_service::phase_control_schedule_consumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00047">47</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00483">~tsc_service()</a>.</p>

</div>
</div>
<a id="ae7f73c472c3210f468d0ea451defe4a4" name="ae7f73c472c3210f468d0ea451defe4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7f73c472c3210f468d0ea451defe4a4">&#9670;&nbsp;</a></span>phase_control_schedule_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="structstreets__phase__control__schedule_1_1streets__phase__control__schedule.html">streets_phase_control_schedule::streets_phase_control_schedule</a>&gt; traffic_signal_controller_service::tsc_service::phase_control_schedule_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Point to phase control schedule object which is updated based on the received JSON message from MMITSS Road side processor. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00079">79</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

</div>
</div>
<a id="a9e901a004e42f8fd670d54e16f4fb3bb" name="a9e901a004e42f8fd670d54e16f4fb3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e901a004e42f8fd670d54e16f4fb3bb">&#9670;&nbsp;</a></span>snmp_client_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>&gt; traffic_signal_controller_service::tsc_service::snmp_client_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from the traffic signal controller. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00068">68</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00153">enable_spat()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00131">initialize_snmp_client()</a>.</p>

</div>
</div>
<a id="aea16beb57894a8087ca8bd67bb320102" name="aea16beb57894a8087ca8bd67bb320102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea16beb57894a8087ca8bd67bb320102">&#9670;&nbsp;</a></span>SNMP_COMMAND_LOGGER_NAME</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string traffic_signal_controller_service::tsc_service::SNMP_COMMAND_LOGGER_NAME = &quot;snmp_command&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00116">116</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00408">configure_snmp_cmd_logger()</a>.</p>

</div>
</div>
<a id="a1dfbd2157cd62094844fb2e1a6d70711" name="a1dfbd2157cd62094844fb2e1a6d70711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfbd2157cd62094844fb2e1a6d70711">&#9670;&nbsp;</a></span>spat_producer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a>&gt; traffic_signal_controller_service::tsc_service::spat_producer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Kafka producer for spat JSON. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00034">34</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00483">~tsc_service()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a251cd72bbcc55b40f7e4fbc78ad81dc4" name="a251cd72bbcc55b40f7e4fbc78ad81dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a251cd72bbcc55b40f7e4fbc78ad81dc4">&#9670;&nbsp;</a></span>spat_proj_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555b">SPAT_PROJECTION_MODE</a> traffic_signal_controller_service::tsc_service::spat_proj_mode = <a class="el" href="namespacetraffic__signal__controller__service.html#a044f1240240fc221c37e0433174c555ba91483675a3807f461a95029ce12500a2">SPAT_PROJECTION_MODE::NO_PROJECTION</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00105">105</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00448">start()</a>.</p>

</div>
</div>
<a id="ae77457ef9ea248e80a34a2a145a59096" name="ae77457ef9ea248e80a34a2a145a59096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77457ef9ea248e80a34a2a145a59096">&#9670;&nbsp;</a></span>spat_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a>&gt; traffic_signal_controller_service::tsc_service::spat_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to spat object which is updated based on received UDP messsages from the traffic signal controller and broadcast on the carma-streets kafka broker as a JSON message. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00074">74</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00189">initialize_spat()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a390a1495b441c84b4ad620113635556f" name="a390a1495b441c84b4ad620113635556f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390a1495b441c84b4ad620113635556f">&#9670;&nbsp;</a></span>spat_worker_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a>&gt; traffic_signal_controller_service::tsc_service::spat_worker_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> contains <a class="el" href="classtraffic__signal__controller__service_1_1udp__socket__listener.html">udp_socket_listener</a> and consumes UDP data packets and updates spat accordingly. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00053">53</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00166">initialize_spat_worker()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a5338cec3c1e2f4012158c1f949a9fa97" name="a5338cec3c1e2f4012158c1f949a9fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5338cec3c1e2f4012158c1f949a9fa97">&#9670;&nbsp;</a></span>tsc_config_producer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a>&gt; traffic_signal_controller_service::tsc_service::tsc_config_producer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Kafka producer for tsc_configuration_state JSON. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00038">38</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00483">~tsc_service()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00257">produce_tsc_config_json()</a>.</p>

</div>
</div>
<a id="ae95f9fb98640cf4121d89518651899f8" name="ae95f9fb98640cf4121d89518651899f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae95f9fb98640cf4121d89518651899f8">&#9670;&nbsp;</a></span>tsc_config_producer_counter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_service::tsc_config_producer_counter_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00100">100</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

</div>
</div>
<a id="aa5f2c089720e5f28c27dd477933585f8" name="aa5f2c089720e5f28c27dd477933585f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f2c089720e5f28c27dd477933585f8">&#9670;&nbsp;</a></span>tsc_config_send_attempts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_service::tsc_config_send_attempts = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00102">102</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

</div>
</div>
<a id="a365cce2a524c81a204b83a15104b4f4e" name="a365cce2a524c81a204b83a15104b4f4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a365cce2a524c81a204b83a15104b4f4e">&#9670;&nbsp;</a></span>tsc_config_state_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a>&gt; traffic_signal_controller_service::tsc_service::tsc_config_state_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to tsc_configuration_state object which is traffic signal controller configuration information obtained from the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> worker and broadcast on the carma-streets kafka broker as a JSON message. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00085">85</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00257">produce_tsc_config_json()</a>.</p>

</div>
</div>
<a id="ad1f864b59a25ba2c0010be48a5f08c14" name="ad1f864b59a25ba2c0010be48a5f08c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f864b59a25ba2c0010be48a5f08c14">&#9670;&nbsp;</a></span>tsc_set_command_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="structstreets__snmp__cmd_1_1snmp__cmd__struct.html">streets_snmp_cmd::snmp_cmd_struct</a>&gt; traffic_signal_controller_service::tsc_service::tsc_set_command_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00108">108</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00271">consume_desired_phase_plan()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00316">control_tsc_phases()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00339">set_tsc_hold_and_omit_forceoff_call()</a>.</p>

</div>
</div>
<a id="a26027ff7d1a2fdf05a67be10543aa1bd" name="a26027ff7d1a2fdf05a67be10543aa1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26027ff7d1a2fdf05a67be10543aa1bd">&#9670;&nbsp;</a></span>tsc_state_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a>&gt; traffic_signal_controller_service::tsc_service::tsc_state_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> queries and stores traffic signal controller configurations including phase sequence, signal group (J2735) to phase number (NTCIP) maping and red clearance, yellow change, min/max green times. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00059">59</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00008">initialize()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00144">initialize_tsc_state()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<a id="ac4be894a6d67bac8bf43ea16b52ca4ea" name="ac4be894a6d67bac8bf43ea16b52ca4ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4be894a6d67bac8bf43ea16b52ca4ea">&#9670;&nbsp;</a></span>use_mmitss_mrp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::use_mmitss_mrp = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00133">133</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

</div>
</div>
<a id="ab65ca0f92d5a9826628e5cc03147d600" name="ab65ca0f92d5a9826628e5cc03147d600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab65ca0f92d5a9826628e5cc03147d600">&#9670;&nbsp;</a></span>VEH_PED_CALL_LOGGER_NAME</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string traffic_signal_controller_service::tsc_service::VEH_PED_CALL_LOGGER_NAME = &quot;veh_ped_call&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00118">118</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00419">configure_veh_ped_call_logger()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00196">produce_spat_json()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tsc_client_service/include/<a class="el" href="tsc__service_8h_source.html">tsc_service.h</a></li>
<li>tsc_client_service/src/<a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetraffic__signal__controller__service.html">traffic_signal_controller_service</a></li><li class="navelem"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a></li>
    <li class="footer">Generated on Mon Dec 18 2023 18:39:43 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
