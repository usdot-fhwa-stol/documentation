<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: Streets Service Configuration Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_streets_utils_streets_service_configuration_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Streets Service <a class="el" href="structConfiguration.html">Configuration</a> Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md96"></a>
Introduction</h1>
<p >This is the <code>streets_service_configuration</code> library meant to provide of each new CARMA-Streets service with utility methods to load configurations. It contains a extensible templated singleton implementation that allows for the creation of singleton scoped objects in CARMA-Streets services with static access. This means that by extending this class you can implement a class of which there can only ever be a single instance and which is statically retrievable using the <code>streets_singleton::get_singleton()</code> method. This library also includes an implemented singleton <code>streets_configuration</code> class which standardizes how CARMA-Streets services will read configuration parameters from <code>manifest.json</code> configuration files. This <code>streets_configuration</code> singleton parses the <code>manifest.json</code> configuration file and then allows for static retrieval of configuration parameters using the <code>get_int_config()</code>,<code>get_double_config</code>,<code>get_string_config()</code>, and <code>get_bool_config()</code> methods.</p>
<h1><a class="anchor" id="autotoc_md97"></a>
Streets Singleton</h1>
<p >Library offers access to the <code>streets_singleton</code> class. This is a templated, extensible class that stores and offers static retrieval of a single instance of itself. To ensure that new instances of this class can not be created the copy and assignment constructors are deleted and the regular constructor is hidden using protected access. Before accessing this object using the static <code>streets_singleton::get_singleton()</code> method, it must first be initialized using the <code>streets_singleon::create( Args ...)</code> method. Args should be the constructor parameter of the class which the singleton will manage an instance of. When implementating a new singleton it is recommended to separately create a class to manage the data and logic and then add this class and it's constructor parameters as the types for the singleton as shown below: <br  />
 </p><div class="fragment"><div class="line">class example_data{</div>
<div class="line"> </div>
<div class="line">    std::string param1;</div>
<div class="line">    int param2;</div>
<div class="line">    void method_1() {</div>
<div class="line">        // DO SOMETHING</div>
<div class="line">    };</div>
<div class="line">    void example_data(const std::string &amp;_param1, int _param2): param1(_param1), param2(_param2) {};</div>
<div class="line">};</div>
<div class="line">class example_singleton : public streets_singleton&lt;example_data, std::string, int&gt; {</div>
<div class="line"> </div>
<div class="line">    public:</div>
<div class="line">        //Provide static access to singleton data methon</div>
<div class="line">        static void method_1() {</div>
<div class="line">            auto &amp;inst = get_instance();</div>
<div class="line">            inst.method_1();</div>
<div class="line">        }</div>
<div class="line">    protected;</div>
<div class="line">        // Hide access to get_instance method</div>
<div class="line">        using streets_singleton::get_instance;</div>
<div class="line">};</div>
<div class="line">// Create singleton</div>
<div class="line">example_singleton::create(&quot;something&quot;, 3);</div>
<div class="line">// Call any singleton method</div>
<div class="line">example_singleton::method_1();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md98"></a>
Streets Configuration</h1>
<p >Library creates <code>streets_configuration</code> singleton which standardizes the <code>manifest.json</code> configuration file parsing and configuration parameter retrieval. Extending <code>streets_singleton</code> allows <code>streets_configuration</code> to be limited to singleton scope ( single instance ) and offer static methods for configuration parameter retrieval. <code>streets_configuration</code> also parses some service required configurations like <b>loglevel</b> and <b>service_name</b> to create and configure a <code>spdlog::async_loggerr</code> with a <code>spdlog::sinks::daily_file_sink_mt</code> and a <code>spdlog::sinks::stdout_color_sink_mt</code>.</p>
<p >Example <code>manifest.json</code> configuration file. </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;service_name&quot;: &quot;test_service&quot;,</div>
<div class="line">    &quot;loglevel&quot;: &quot;info&quot;,</div>
<div class="line">    &quot;configurations&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;param_1&quot;,</div>
<div class="line">            &quot;value&quot;: 1,</div>
<div class="line">            &quot;description&quot;: &quot;Test Parameter 1&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;INTEGER&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;param_2&quot;,</div>
<div class="line">            &quot;value&quot;: &quot;Second Parameter&quot;,</div>
<div class="line">            &quot;description&quot;: &quot;Test Parameter 2&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;STRING&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;param_3&quot;,</div>
<div class="line">            &quot;value&quot;: 123.2,</div>
<div class="line">            &quot;description&quot;: &quot;Test Parameter 3&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;DOUBLE&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;param_4&quot;,</div>
<div class="line">            &quot;value&quot;: true,</div>
<div class="line">            &quot;description&quot;: &quot;Test Parameter 3&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;BOOL&quot;</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md99"></a>
Include streets_service_configuration_lib::streets_service_configuration_lib</h1>
<p >Streets Service Base <code>CMakeList.txt</code> includes an install target which will install this library as a CMake package. The library along with it's dependencies can then be included by simply using the find_package() instruction.</p>
<div class="fragment"><div class="line">find_package(streets_service_configuration_lib COMPONENT streets_service_configuration_lib)</div>
<div class="line">...</div>
<div class="line">target_link_library( target PUBLIC streets_service_configuration_lib::streets_service_configuration_lib)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 14 2023 19:59:54 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
