<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: arbitrator::CostSystemCostFunction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classarbitrator_1_1CostSystemCostFunction.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classarbitrator_1_1CostSystemCostFunction-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">arbitrator::CostSystemCostFunction Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the <a class="el" href="classarbitrator_1_1CostFunction.html" title="Generic interface representing a means of computing cost for plans in the search graph.">CostFunction</a> interface.  
 <a href="classarbitrator_1_1CostSystemCostFunction.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for arbitrator::CostSystemCostFunction:</div>
<div class="dyncontent">
<div class="center"><img src="classarbitrator_1_1CostSystemCostFunction__inherit__graph.png" border="0" usemap="#aarbitrator_1_1CostSystemCostFunction_inherit__map" alt="Inheritance graph"/></div>
<map name="aarbitrator_1_1CostSystemCostFunction_inherit__map" id="aarbitrator_1_1CostSystemCostFunction_inherit__map">
<area shape="rect" title="Implementation of the CostFunction interface." alt="" coords="5,175,195,340"/>
<area shape="rect" href="classarbitrator_1_1CostFunction.html" title="Generic interface representing a means of computing cost for plans in the search graph." alt="" coords="16,5,184,127"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for arbitrator::CostSystemCostFunction:</div>
<div class="dyncontent">
<div class="center"><img src="classarbitrator_1_1CostSystemCostFunction__coll__graph.png" border="0" usemap="#aarbitrator_1_1CostSystemCostFunction_coll__map" alt="Collaboration graph"/></div>
<map name="aarbitrator_1_1CostSystemCostFunction_coll__map" id="aarbitrator_1_1CostSystemCostFunction_coll__map">
<area shape="rect" title="Implementation of the CostFunction interface." alt="" coords="207,189,396,340"/>
<area shape="rect" href="classarbitrator_1_1CostFunction.html" title="Generic interface representing a means of computing cost for plans in the search graph." alt="" coords="5,5,173,127"/>
<area shape="rect" title=" " alt="" coords="198,20,405,112"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="429,27,475,105"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a289212d20ab108e83a6a681b1608d353"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#a289212d20ab108e83a6a681b1608d353">CostSystemCostFunction</a> ()</td></tr>
<tr class="memdesc:a289212d20ab108e83a6a681b1608d353"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classarbitrator_1_1FixedPriorityCostFunction.html" title="Implementation of the CostFunction interface.">FixedPriorityCostFunction</a>.  <a href="classarbitrator_1_1CostSystemCostFunction.html#a289212d20ab108e83a6a681b1608d353">More...</a><br /></td></tr>
<tr class="separator:a289212d20ab108e83a6a681b1608d353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cfe6f1a41592b64f6f4f3bf3f563788"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#a0cfe6f1a41592b64f6f4f3bf3f563788">init</a> (std::shared_ptr&lt; carma_ros2_utils::CarmaLifecycleNode &gt; nh)</td></tr>
<tr class="separator:a0cfe6f1a41592b64f6f4f3bf3f563788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ae16ade44540353bc7341070b64774"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#af4ae16ade44540353bc7341070b64774">compute_total_cost</a> (const carma_planning_msgs::msg::ManeuverPlan &amp;plan)</td></tr>
<tr class="memdesc:af4ae16ade44540353bc7341070b64774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the unit cost over distance of a given maneuver plan.  <a href="classarbitrator_1_1CostSystemCostFunction.html#af4ae16ade44540353bc7341070b64774">More...</a><br /></td></tr>
<tr class="separator:af4ae16ade44540353bc7341070b64774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa827c5beac91951ebbf3d3013d19b56d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#aa827c5beac91951ebbf3d3013d19b56d">compute_cost_per_unit_distance</a> (const carma_planning_msgs::msg::ManeuverPlan &amp;plan)</td></tr>
<tr class="memdesc:aa827c5beac91951ebbf3d3013d19b56d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the unit cost over distance of a given maneuver plan.  <a href="classarbitrator_1_1CostSystemCostFunction.html#aa827c5beac91951ebbf3d3013d19b56d">More...</a><br /></td></tr>
<tr class="separator:aa827c5beac91951ebbf3d3013d19b56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classarbitrator_1_1CostFunction"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classarbitrator_1_1CostFunction')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classarbitrator_1_1CostFunction.html">arbitrator::CostFunction</a></td></tr>
<tr class="memitem:aeb003fdeed7adec852f84c3799bf7f18 inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostFunction.html#aeb003fdeed7adec852f84c3799bf7f18">compute_total_cost</a> (const carma_planning_msgs::msg::ManeuverPlan &amp;plan)=0</td></tr>
<tr class="memdesc:aeb003fdeed7adec852f84c3799bf7f18 inherit pub_methods_classarbitrator_1_1CostFunction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the cost of a given maneuver plan.  <a href="classarbitrator_1_1CostFunction.html#aeb003fdeed7adec852f84c3799bf7f18">More...</a><br /></td></tr>
<tr class="separator:aeb003fdeed7adec852f84c3799bf7f18 inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e43ee76c0948048b639ee1eed3834cb inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostFunction.html#a7e43ee76c0948048b639ee1eed3834cb">compute_cost_per_unit_distance</a> (const carma_planning_msgs::msg::ManeuverPlan &amp;plan)=0</td></tr>
<tr class="memdesc:a7e43ee76c0948048b639ee1eed3834cb inherit pub_methods_classarbitrator_1_1CostFunction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the unit cost over distance of a given maneuver plan.  <a href="classarbitrator_1_1CostFunction.html#a7e43ee76c0948048b639ee1eed3834cb">More...</a><br /></td></tr>
<tr class="separator:a7e43ee76c0948048b639ee1eed3834cb inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d6a92f0bb66cdb2a9f435ef6a2c93c inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostFunction.html#a66d6a92f0bb66cdb2a9f435ef6a2c93c">~CostFunction</a> ()</td></tr>
<tr class="memdesc:a66d6a92f0bb66cdb2a9f435ef6a2c93c inherit pub_methods_classarbitrator_1_1CostFunction"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor provided for memory safety.  <a href="classarbitrator_1_1CostFunction.html#a66d6a92f0bb66cdb2a9f435ef6a2c93c">More...</a><br /></td></tr>
<tr class="separator:a66d6a92f0bb66cdb2a9f435ef6a2c93c inherit pub_methods_classarbitrator_1_1CostFunction"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3f45c512c2d0e822ee9310a5da999cbf"><td class="memItemLeft" align="right" valign="top">carma_ros2_utils::ClientPtr&lt; carma_planning_msgs::srv::ComputePlanCost &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#a3f45c512c2d0e822ee9310a5da999cbf">cost_system_sc_</a></td></tr>
<tr class="separator:a3f45c512c2d0e822ee9310a5da999cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cdc34aaf29c8bfb0f3b4a3edd9ac983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html#a2cdc34aaf29c8bfb0f3b4a3edd9ac983">initialized_</a> = false</td></tr>
<tr class="separator:a2cdc34aaf29c8bfb0f3b4a3edd9ac983"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Implementation of the <a class="el" href="classarbitrator_1_1CostFunction.html" title="Generic interface representing a means of computing cost for plans in the search graph.">CostFunction</a> interface. </p>
<p >Implements costs by utilizing a ROS service call to the CARMA cost plugin system. Passes on the input maneuver plan to the Cost Plugin System for computation of the actual cost and cost per unit distance. </p>

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8hpp_source.html#l00036">36</a> of file <a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a289212d20ab108e83a6a681b1608d353" name="a289212d20ab108e83a6a681b1608d353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a289212d20ab108e83a6a681b1608d353">&#9670;&nbsp;</a></span>CostSystemCostFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">arbitrator::CostSystemCostFunction::CostSystemCostFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="classarbitrator_1_1FixedPriorityCostFunction.html" title="Implementation of the CostFunction interface.">FixedPriorityCostFunction</a>. </p>

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8hpp_source.html#l00042">42</a> of file <a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>{};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa827c5beac91951ebbf3d3013d19b56d" name="aa827c5beac91951ebbf3d3013d19b56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa827c5beac91951ebbf3d3013d19b56d">&#9670;&nbsp;</a></span>compute_cost_per_unit_distance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double arbitrator::CostSystemCostFunction::compute_cost_per_unit_distance </td>
          <td>(</td>
          <td class="paramtype">const carma_planning_msgs::msg::ManeuverPlan &amp;&#160;</td>
          <td class="paramname"><em>plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the unit cost over distance of a given maneuver plan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plan</td><td>The plan to evaluate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double The total cost divided by the total distance of the plan </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::logic_error</td><td>if not initialized </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classarbitrator_1_1CostFunction.html#a7e43ee76c0948048b639ee1eed3834cb">arbitrator::CostFunction</a>.</p>

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8cpp_source.html#l00055">55</a> of file <a class="el" href="cost__system__cost__function_8cpp_source.html">cost_system_cost_function.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>    {</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordtype">double</span> plan_dist = <a class="code hl_function" href="namespacearbitrator__utils.html#a65bbb318c9128fbbefeedc250a79a28a">arbitrator_utils::get_plan_end_distance</a>(plan) - <a class="code hl_function" href="namespacearbitrator__utils.html#a75f1142880156c33285acc3c46a65eb4">arbitrator_utils::get_plan_start_distance</a>(plan);</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classarbitrator_1_1CostSystemCostFunction.html#af4ae16ade44540353bc7341070b64774">compute_total_cost</a>(plan) / plan_dist;</div>
<div class="line"><span class="lineno">   59</span>    }</div>
<div class="ttc" id="aclassarbitrator_1_1CostSystemCostFunction_html_af4ae16ade44540353bc7341070b64774"><div class="ttname"><a href="classarbitrator_1_1CostSystemCostFunction.html#af4ae16ade44540353bc7341070b64774">arbitrator::CostSystemCostFunction::compute_total_cost</a></div><div class="ttdeci">double compute_total_cost(const carma_planning_msgs::msg::ManeuverPlan &amp;plan)</div><div class="ttdoc">Compute the unit cost over distance of a given maneuver plan.</div><div class="ttdef"><b>Definition:</b> <a href="cost__system__cost__function_8cpp_source.html#l00031">cost_system_cost_function.cpp:31</a></div></div>
<div class="ttc" id="anamespacearbitrator__utils_html_a65bbb318c9128fbbefeedc250a79a28a"><div class="ttname"><a href="namespacearbitrator__utils.html#a65bbb318c9128fbbefeedc250a79a28a">arbitrator_utils::get_plan_end_distance</a></div><div class="ttdeci">double get_plan_end_distance(const carma_planning_msgs::msg::ManeuverPlan &amp;)</div><div class="ttdoc">Get the end distance of the first maneuver in the plan.</div><div class="ttdef"><b>Definition:</b> <a href="arbitrator__utils_8cpp_source.html#l00036">arbitrator_utils.cpp:36</a></div></div>
<div class="ttc" id="anamespacearbitrator__utils_html_a75f1142880156c33285acc3c46a65eb4"><div class="ttname"><a href="namespacearbitrator__utils.html#a75f1142880156c33285acc3c46a65eb4">arbitrator_utils::get_plan_start_distance</a></div><div class="ttdeci">double get_plan_start_distance(const carma_planning_msgs::msg::ManeuverPlan &amp;)</div><div class="ttdoc">Get the start distance of the first maneuver in the plan.</div><div class="ttdef"><b>Definition:</b> <a href="arbitrator__utils_8cpp_source.html#l00058">arbitrator_utils.cpp:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cost__system__cost__function_8cpp_source.html#l00031">compute_total_cost()</a>, <a class="el" href="arbitrator__utils_8cpp_source.html#l00036">arbitrator_utils::get_plan_end_distance()</a>, and <a class="el" href="arbitrator__utils_8cpp_source.html#l00058">arbitrator_utils::get_plan_start_distance()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classarbitrator_1_1CostSystemCostFunction_aa827c5beac91951ebbf3d3013d19b56d_cgraph.png" border="0" usemap="#aclassarbitrator_1_1CostSystemCostFunction_aa827c5beac91951ebbf3d3013d19b56d_cgraph" alt=""/></div>
<map name="aclassarbitrator_1_1CostSystemCostFunction_aa827c5beac91951ebbf3d3013d19b56d_cgraph" id="aclassarbitrator_1_1CostSystemCostFunction_aa827c5beac91951ebbf3d3013d19b56d_cgraph">
<area shape="rect" title="Compute the unit cost over distance of a given maneuver plan." alt="" coords="5,63,183,119"/>
<area shape="rect" href="classarbitrator_1_1CostSystemCostFunction.html#af4ae16ade44540353bc7341070b64774" title="Compute the unit cost over distance of a given maneuver plan." alt="" coords="231,5,423,47"/>
<area shape="rect" href="namespacearbitrator__utils.html#a65bbb318c9128fbbefeedc250a79a28a" title="Get the end distance of the first maneuver in the plan." alt="" coords="258,71,395,112"/>
<area shape="rect" href="namespacearbitrator__utils.html#a75f1142880156c33285acc3c46a65eb4" title="Get the start distance of the first maneuver in the plan." alt="" coords="255,136,398,177"/>
<area shape="rect" href="namespacearbitrator__utils.html#a55896d5750ee654556f9496e4d71e6d4" title="Get the end distance of the specified maneuver." alt="" coords="473,71,643,112"/>
<area shape="rect" href="namespacearbitrator__utils.html#a3cbf7c6ae8d6fa35e0106a165706bf0b" title="Get the start distance the specified maneuver." alt="" coords="471,136,645,177"/>
</map>
</div>

</div>
</div>
<a id="af4ae16ade44540353bc7341070b64774" name="af4ae16ade44540353bc7341070b64774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ae16ade44540353bc7341070b64774">&#9670;&nbsp;</a></span>compute_total_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double arbitrator::CostSystemCostFunction::compute_total_cost </td>
          <td>(</td>
          <td class="paramtype">const carma_planning_msgs::msg::ManeuverPlan &amp;&#160;</td>
          <td class="paramname"><em>plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the unit cost over distance of a given maneuver plan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plan</td><td>The plan to evaluate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>double The total cost divided by the total distance of the plan</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::logic_error</td><td>if not initialized </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classarbitrator_1_1CostFunction.html#aeb003fdeed7adec852f84c3799bf7f18">arbitrator::CostFunction</a>.</p>

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8cpp_source.html#l00031">31</a> of file <a class="el" href="cost__system__cost__function_8cpp_source.html">cost_system_cost_function.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>    {</div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classarbitrator_1_1CostSystemCostFunction.html#a2cdc34aaf29c8bfb0f3b4a3edd9ac983">initialized_</a>) {</div>
<div class="line"><span class="lineno">   34</span>            <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;Attempt to use CostSystemCostFunction before initialization.&quot;</span>);</div>
<div class="line"><span class="lineno">   35</span>        }</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordtype">double</span> total_cost = std::numeric_limits&lt;double&gt;::infinity();</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>        <span class="keyword">auto</span> service_message = std::make_shared&lt;carma_planning_msgs::srv::ComputePlanCost::Request&gt;();</div>
<div class="line"><span class="lineno">   40</span>        service_message-&gt;maneuver_plan = plan;</div>
<div class="line"><span class="lineno">   41</span>        </div>
<div class="line"><span class="lineno">   42</span>        <span class="keyword">auto</span> resp = <a class="code hl_variable" href="classarbitrator_1_1CostSystemCostFunction.html#a3f45c512c2d0e822ee9310a5da999cbf">cost_system_sc_</a>-&gt;async_send_request(service_message);</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>        <span class="keyword">auto</span> future_status = resp.wait_for(std::chrono::milliseconds(500));</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">if</span> (future_status == std::future_status::ready){</div>
<div class="line"><span class="lineno">   47</span>            total_cost = resp.get()-&gt;plan_cost;</div>
<div class="line"><span class="lineno">   48</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   49</span>            RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;arbitrator&quot;</span>), <span class="stringliteral">&quot;Unable to get cost for plan from CostPluginSystem due to service call failure.&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>        }</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">return</span> total_cost;</div>
<div class="line"><span class="lineno">   53</span>    }</div>
<div class="ttc" id="aclassarbitrator_1_1CostSystemCostFunction_html_a2cdc34aaf29c8bfb0f3b4a3edd9ac983"><div class="ttname"><a href="classarbitrator_1_1CostSystemCostFunction.html#a2cdc34aaf29c8bfb0f3b4a3edd9ac983">arbitrator::CostSystemCostFunction::initialized_</a></div><div class="ttdeci">bool initialized_</div><div class="ttdef"><b>Definition:</b> <a href="cost__system__cost__function_8hpp_source.html#l00072">cost_system_cost_function.hpp:72</a></div></div>
<div class="ttc" id="aclassarbitrator_1_1CostSystemCostFunction_html_a3f45c512c2d0e822ee9310a5da999cbf"><div class="ttname"><a href="classarbitrator_1_1CostSystemCostFunction.html#a3f45c512c2d0e822ee9310a5da999cbf">arbitrator::CostSystemCostFunction::cost_system_sc_</a></div><div class="ttdeci">carma_ros2_utils::ClientPtr&lt; carma_planning_msgs::srv::ComputePlanCost &gt; cost_system_sc_</div><div class="ttdef"><b>Definition:</b> <a href="cost__system__cost__function_8hpp_source.html#l00071">cost_system_cost_function.hpp:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cost__system__cost__function_8hpp_source.html#l00071">cost_system_sc_</a>, and <a class="el" href="cost__system__cost__function_8hpp_source.html#l00072">initialized_</a>.</p>

<p class="reference">Referenced by <a class="el" href="cost__system__cost__function_8cpp_source.html#l00055">compute_cost_per_unit_distance()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classarbitrator_1_1CostSystemCostFunction_af4ae16ade44540353bc7341070b64774_icgraph.png" border="0" usemap="#aclassarbitrator_1_1CostSystemCostFunction_af4ae16ade44540353bc7341070b64774_icgraph" alt=""/></div>
<map name="aclassarbitrator_1_1CostSystemCostFunction_af4ae16ade44540353bc7341070b64774_icgraph" id="aclassarbitrator_1_1CostSystemCostFunction_af4ae16ade44540353bc7341070b64774_icgraph">
<area shape="rect" title="Compute the unit cost over distance of a given maneuver plan." alt="" coords="231,13,423,54"/>
<area shape="rect" href="classarbitrator_1_1CostSystemCostFunction.html#aa827c5beac91951ebbf3d3013d19b56d" title="Compute the unit cost over distance of a given maneuver plan." alt="" coords="5,5,183,61"/>
</map>
</div>

</div>
</div>
<a id="a0cfe6f1a41592b64f6f4f3bf3f563788" name="a0cfe6f1a41592b64f6f4f3bf3f563788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cfe6f1a41592b64f6f4f3bf3f563788">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arbitrator::CostSystemCostFunction::init </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; carma_ros2_utils::CarmaLifecycleNode &gt;&#160;</td>
          <td class="paramname"><em>nh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize the <a class="el" href="classarbitrator_1_1CostSystemCostFunction.html" title="Implementation of the CostFunction interface.">CostSystemCostFunction</a> to communicate over the network. Sets up any ROS service clients needed to interact with the cost plugin system.</p>
<p >Must be called before using this cost function implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nh</td><td>A publicly namespaced nodehandle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8cpp_source.html#l00025">25</a> of file <a class="el" href="cost__system__cost__function_8cpp_source.html">cost_system_cost_function.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>    {</div>
<div class="line"><span class="lineno">   27</span>        <a class="code hl_variable" href="classarbitrator_1_1CostSystemCostFunction.html#a3f45c512c2d0e822ee9310a5da999cbf">cost_system_sc_</a> = nh-&gt;create_client&lt;carma_planning_msgs::srv::ComputePlanCost&gt;(<span class="stringliteral">&quot;compute_plan_cost&quot;</span>);</div>
<div class="line"><span class="lineno">   28</span>        <a class="code hl_variable" href="classarbitrator_1_1CostSystemCostFunction.html#a2cdc34aaf29c8bfb0f3b4a3edd9ac983">initialized_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   29</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cost__system__cost__function_8hpp_source.html#l00071">cost_system_sc_</a>, and <a class="el" href="cost__system__cost__function_8hpp_source.html#l00072">initialized_</a>.</p>

<p class="reference">Referenced by <a class="el" href="arbitrator__node_8cpp_source.html#l00035">arbitrator::ArbitratorNode::handle_on_configure()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classarbitrator_1_1CostSystemCostFunction_a0cfe6f1a41592b64f6f4f3bf3f563788_icgraph.png" border="0" usemap="#aclassarbitrator_1_1CostSystemCostFunction_a0cfe6f1a41592b64f6f4f3bf3f563788_icgraph" alt=""/></div>
<map name="aclassarbitrator_1_1CostSystemCostFunction_a0cfe6f1a41592b64f6f4f3bf3f563788_icgraph" id="aclassarbitrator_1_1CostSystemCostFunction_a0cfe6f1a41592b64f6f4f3bf3f563788_icgraph">
<area shape="rect" title=" " alt="" coords="216,5,393,47"/>
<area shape="rect" href="classarbitrator_1_1ArbitratorNode.html#aaa0145228e928fcc9a5719e20b39e463" title=" " alt="" coords="5,5,168,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3f45c512c2d0e822ee9310a5da999cbf" name="a3f45c512c2d0e822ee9310a5da999cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f45c512c2d0e822ee9310a5da999cbf">&#9670;&nbsp;</a></span>cost_system_sc_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">carma_ros2_utils::ClientPtr&lt;carma_planning_msgs::srv::ComputePlanCost&gt; arbitrator::CostSystemCostFunction::cost_system_sc_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8hpp_source.html#l00071">71</a> of file <a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="cost__system__cost__function_8cpp_source.html#l00031">compute_total_cost()</a>, and <a class="el" href="cost__system__cost__function_8cpp_source.html#l00025">init()</a>.</p>

</div>
</div>
<a id="a2cdc34aaf29c8bfb0f3b4a3edd9ac983" name="a2cdc34aaf29c8bfb0f3b4a3edd9ac983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cdc34aaf29c8bfb0f3b4a3edd9ac983">&#9670;&nbsp;</a></span>initialized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> arbitrator::CostSystemCostFunction::initialized_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cost__system__cost__function_8hpp_source.html#l00072">72</a> of file <a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="cost__system__cost__function_8cpp_source.html#l00031">compute_total_cost()</a>, and <a class="el" href="cost__system__cost__function_8cpp_source.html#l00025">init()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>arbitrator/include/<a class="el" href="cost__system__cost__function_8hpp_source.html">cost_system_cost_function.hpp</a></li>
<li>arbitrator/src/<a class="el" href="cost__system__cost__function_8cpp_source.html">cost_system_cost_function.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacearbitrator.html">arbitrator</a></li><li class="navelem"><a class="el" href="classarbitrator_1_1CostSystemCostFunction.html">CostSystemCostFunction</a></li>
    <li class="footer">Generated on Wed Mar 29 2023 06:07:28 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
