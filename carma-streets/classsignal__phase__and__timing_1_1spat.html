<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: signal_phase_and_timing::spat Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classsignal__phase__and__timing_1_1spat.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsignal__phase__and__timing_1_1spat-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">signal_phase_and_timing::spat Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="spat_8h_source.html">spat.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for signal_phase_and_timing::spat:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat__coll__graph.png" border="0" usemap="#asignal__phase__and__timing_1_1spat_coll__map" alt="Collaboration graph"/></div>
<map name="asignal__phase__and__timing_1_1spat_coll__map" id="asignal__phase__and__timing_1_1spat_coll__map">
<area shape="rect" title=" " alt="" coords="173,175,371,648"/>
<area shape="rect" title=" " alt="" coords="5,20,80,97"/>
<area shape="rect" title=" " alt="" coords="110,20,165,97"/>
<area shape="rect" title=" " alt="" coords="189,5,355,112"/>
<area shape="rect" title=" " alt="" coords="379,13,519,105"/>
<area shape="rect" title=" " alt="" coords="557,20,659,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af97069bb9821745c89704f1b7ef0f8a5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#af97069bb9821745c89704f1b7ef0f8a5">toJson</a> ()</td></tr>
<tr class="memdesc:af97069bb9821745c89704f1b7ef0f8a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialize SPaT object to rapidjson::Value for writing as JSON string (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#af97069bb9821745c89704f1b7ef0f8a5">More...</a><br /></td></tr>
<tr class="separator:af97069bb9821745c89704f1b7ef0f8a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b4c116c81f46b7747826c8bb9d238a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a55b4c116c81f46b7747826c8bb9d238a">get_intersection</a> ()</td></tr>
<tr class="memdesc:a55b4c116c81f46b7747826c8bb9d238a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get copy of current intersection state. Note: SPaT object currently only supports storing single intersection state (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#a55b4c116c81f46b7747826c8bb9d238a">More...</a><br /></td></tr>
<tr class="separator:a55b4c116c81f46b7747826c8bb9d238a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e3c8a3be68736ff463cdfb2b185e38d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a0e3c8a3be68736ff463cdfb2b185e38d">get_name</a> ()</td></tr>
<tr class="memdesc:a0e3c8a3be68736ff463cdfb2b185e38d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get SPaT name.  <a href="classsignal__phase__and__timing_1_1spat.html#a0e3c8a3be68736ff463cdfb2b185e38d">More...</a><br /></td></tr>
<tr class="separator:a0e3c8a3be68736ff463cdfb2b185e38d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56267b9a334f79513b0c01cf5ef1dbb4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a56267b9a334f79513b0c01cf5ef1dbb4">get_timestamp</a> ()</td></tr>
<tr class="memdesc:a56267b9a334f79513b0c01cf5ef1dbb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get timestamp in minute of the current UTC year (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#a56267b9a334f79513b0c01cf5ef1dbb4">More...</a><br /></td></tr>
<tr class="separator:a56267b9a334f79513b0c01cf5ef1dbb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ec458f5628cf595b6f895eede30daa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a67ec458f5628cf595b6f895eede30daa">set_intersection</a> (const <a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a> &amp;intersection)</td></tr>
<tr class="memdesc:a67ec458f5628cf595b6f895eede30daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update current intersection state (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#a67ec458f5628cf595b6f895eede30daa">More...</a><br /></td></tr>
<tr class="separator:a67ec458f5628cf595b6f895eede30daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034410d8e6254100552d88d21ca5bedd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a034410d8e6254100552d88d21ca5bedd">fromJson</a> (const std::string &amp;json)</td></tr>
<tr class="memdesc:a034410d8e6254100552d88d21ca5bedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserialize SPaT JSON into SPaT object (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#a034410d8e6254100552d88d21ca5bedd">More...</a><br /></td></tr>
<tr class="separator:a034410d8e6254100552d88d21ca5bedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3e0ae490abd77f4c168e34222c21dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#abf3e0ae490abd77f4c168e34222c21dc">update</a> (<a class="el" href="structntcip_1_1ntcip__1202__ext.html">ntcip::ntcip_1202_ext</a> &amp;ntcip_data, bool use_ntcip_timestamp)</td></tr>
<tr class="memdesc:abf3e0ae490abd77f4c168e34222c21dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control whether to use ntcip_1202_ext message provided timestamp or host unix timestamp information (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#abf3e0ae490abd77f4c168e34222c21dc">More...</a><br /></td></tr>
<tr class="separator:abf3e0ae490abd77f4c168e34222c21dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8225fc5b13a6faaf4d1e309dadd76858"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a8225fc5b13a6faaf4d1e309dadd76858">initialize_intersection</a> (const std::string &amp;intersection_name, const int intersection_id, const std::unordered_map&lt; int, int &gt; &amp;phase_number_to_signal_group)</td></tr>
<tr class="memdesc:a8225fc5b13a6faaf4d1e309dadd76858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to initialize intersection information not provided in the ntcip SPaT UDP message but necessary for the J2735 SPaT message. This method must be executed prior to using the update method (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#a8225fc5b13a6faaf4d1e309dadd76858">More...</a><br /></td></tr>
<tr class="separator:a8225fc5b13a6faaf4d1e309dadd76858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f4842ab1588deac2746ecdafcd29b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a59f4842ab1588deac2746ecdafcd29b3">set_timestamp_ntcip</a> (const uint32_t second_of_day, const uint16_t millisecond_of_second)</td></tr>
<tr class="memdesc:a59f4842ab1588deac2746ecdafcd29b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to set SPaT timestamp based on NTCIP message timestamp. The NTCIP message timestamp consists of a seconds_of_day and a milliseconds of second field. This method will get the current day from system time and then apply seconds and milliseconds informat as a offset for the current day.  <a href="classsignal__phase__and__timing_1_1spat.html#a59f4842ab1588deac2746ecdafcd29b3">More...</a><br /></td></tr>
<tr class="separator:a59f4842ab1588deac2746ecdafcd29b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2382404fe3b23725a9a255564cf2b752"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752">update_spat_with_candidate_dpp</a> (const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;candidate_dpp, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; tsc_state)</td></tr>
<tr class="memdesc:a2382404fe3b23725a9a255564cf2b752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update spat <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list with desired phase plan information.  <a href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752">More...</a><br /></td></tr>
<tr class="separator:a2382404fe3b23725a9a255564cf2b752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c64af528dd1d1dcced1dbf2729a593"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593">process_first_desired_green</a> (<a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> &amp;cur_movement_state_ref, const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;desired_sg_green_timing, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; tsc_state) const</td></tr>
<tr class="memdesc:a67c64af528dd1d1dcced1dbf2729a593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process first desired green signal group and duration in desired phase plan. Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list of current <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with movement_events for first entry in desired phase plan.  <a href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593">More...</a><br /></td></tr>
<tr class="separator:a67c64af528dd1d1dcced1dbf2729a593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40277118c7dbeb9f5d1dfe414ea2f28c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c">process_second_onward_desired_green</a> (<a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;cur_movement_state_ref, const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;desired_sg_green_timing, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; tsc_state) const</td></tr>
<tr class="memdesc:a40277118c7dbeb9f5d1dfe414ea2f28c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process all desired green signal group and duration in desired phase plan that are not the first entry. Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list of current <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with movement_events for all entries after first entry in desired phase plan.  <a href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c">More...</a><br /></td></tr>
<tr class="separator:a40277118c7dbeb9f5d1dfe414ea2f28c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae996635c8e4bc134da15362e7813fade"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a> (<a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;movement_event_to_populate, const <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14">signal_phase_and_timing::movement_phase_state</a> &amp;phase_state, const uint64_t start_time_epoch, const uint64_t end_time_epoch) const</td></tr>
<tr class="memdesc:ae996635c8e4bc134da15362e7813fade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> with movement_phase_state, start_time and end_time(min_end_time).  <a href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">More...</a><br /></td></tr>
<tr class="separator:ae996635c8e4bc134da15362e7813fade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdc76328ccf9f1d15d5d15e6241e7d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4">append_full_green_yellow_red_phases_by_desired_green</a> (<a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;cur_movement_state_ref, const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;desired_sg_green_timing, const int desired_yellow_duration, const int desired_red_clearance) const</td></tr>
<tr class="memdesc:abbdc76328ccf9f1d15d5d15e6241e7d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list for given <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with green event, yellow change event, and red clearance event.  <a href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4">More...</a><br /></td></tr>
<tr class="separator:abbdc76328ccf9f1d15d5d15e6241e7d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039ae20f62541487dac614cf260c6ecd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd">find_max_desired_yellow_duration_red_clearance_pair</a> (std::vector&lt; int &gt; desired_signal_groups, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; tsc_state) const</td></tr>
<tr class="memdesc:a039ae20f62541487dac614cf260c6ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the signal group id for the signal group in a pair (movement group) that will have the largest yellow change plus red clearance time interval. This is useful since the largest yellow change plus red clearance will control how long all red events during this time interval will last.  <a href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd">More...</a><br /></td></tr>
<tr class="separator:a039ae20f62541487dac614cf260c6ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac664acbcf145d92f92605e3bfde11ce7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#ac664acbcf145d92f92605e3bfde11ce7">set_timestamp_local</a> ()</td></tr>
<tr class="memdesc:ac664acbcf145d92f92605e3bfde11ce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to set SPaT timestamp based on system time.  <a href="classsignal__phase__and__timing_1_1spat.html#ac664acbcf145d92f92605e3bfde11ce7">More...</a><br /></td></tr>
<tr class="separator:ac664acbcf145d92f92605e3bfde11ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02c2e6b6a732834be0f8472270f7931"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#ae02c2e6b6a732834be0f8472270f7931">update_intersection_state</a> (<a class="el" href="structntcip_1_1ntcip__1202__ext.html">ntcip::ntcip_1202_ext</a> &amp;ntcip_data)</td></tr>
<tr class="memdesc:ae02c2e6b6a732834be0f8472270f7931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to update the front entry in the intersections list of intersection_state(s) with the provided NTCIP SPaT data (Thread Safe).  <a href="classsignal__phase__and__timing_1_1spat.html#ae02c2e6b6a732834be0f8472270f7931">More...</a><br /></td></tr>
<tr class="separator:ae02c2e6b6a732834be0f8472270f7931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09b881219e3f51e7d9839668abbb52e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#ae09b881219e3f51e7d9839668abbb52e">operator==</a> (const <a class="el" href="classsignal__phase__and__timing_1_1spat.html">spat</a> &amp;other) const</td></tr>
<tr class="memdesc:ae09b881219e3f51e7d9839668abbb52e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equals operator to asses whether two objects contain equivalent data.  <a href="classsignal__phase__and__timing_1_1spat.html#ae09b881219e3f51e7d9839668abbb52e">More...</a><br /></td></tr>
<tr class="separator:ae09b881219e3f51e7d9839668abbb52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c73cc279f79a8bfcbd3fbbb1dc31889"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a5c73cc279f79a8bfcbd3fbbb1dc31889">operator!=</a> (const <a class="el" href="classsignal__phase__and__timing_1_1spat.html">spat</a> &amp;other) const</td></tr>
<tr class="memdesc:a5c73cc279f79a8bfcbd3fbbb1dc31889"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the inverse of equals operator.  <a href="classsignal__phase__and__timing_1_1spat.html#a5c73cc279f79a8bfcbd3fbbb1dc31889">More...</a><br /></td></tr>
<tr class="separator:a5c73cc279f79a8bfcbd3fbbb1dc31889"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac08c93a991a59d5d32fb2a363460d874"><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a> = 0</td></tr>
<tr class="memdesc:ac08c93a991a59d5d32fb2a363460d874"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp in minutes of the UTC year (see J2735 SPaT message documentation for reference).  <a href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">More...</a><br /></td></tr>
<tr class="separator:ac08c93a991a59d5d32fb2a363460d874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a562044bd6250986b309068c079ade0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">name</a></td></tr>
<tr class="memdesc:a0a562044bd6250986b309068c079ade0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Descriptive name for this collection.  <a href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">More...</a><br /></td></tr>
<tr class="separator:a0a562044bd6250986b309068c079ade0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab4b5232e535810906b7076d08812ca"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a></td></tr>
<tr class="memdesc:a1ab4b5232e535810906b7076d08812ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets of SPaT data ( one per intersection).  <a href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">More...</a><br /></td></tr>
<tr class="separator:a1ab4b5232e535810906b7076d08812ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2dd359b921afee78e049ee9ce550dd"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">phase_to_signal_group</a></td></tr>
<tr class="memdesc:a2c2dd359b921afee78e049ee9ce550dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of phase number(NTCIP) to signal group(J2735).  <a href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">More...</a><br /></td></tr>
<tr class="separator:a2c2dd359b921afee78e049ee9ce550dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e4d382adf28bea9200a167794b3e31"><td class="memItemLeft" align="right" valign="top">std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a></td></tr>
<tr class="memdesc:a58e4d382adf28bea9200a167794b3e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read/Write lock for concurrent access for read operations and exclusive access for write operations.  <a href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">More...</a><br /></td></tr>
<tr class="separator:a58e4d382adf28bea9200a167794b3e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00022">22</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abbdc76328ccf9f1d15d5d15e6241e7d4" name="abbdc76328ccf9f1d15d5d15e6241e7d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdc76328ccf9f1d15d5d15e6241e7d4">&#9670;&nbsp;</a></span>append_full_green_yellow_red_phases_by_desired_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::append_full_green_yellow_red_phases_by_desired_green </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;&#160;</td>
          <td class="paramname"><em>cur_movement_state_ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;&#160;</td>
          <td class="paramname"><em>desired_sg_green_timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>desired_yellow_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>desired_red_clearance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list for given <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with green event, yellow change event, and red clearance event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur_movement_state_ref</td><td>reference to <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a>. </td></tr>
    <tr><td class="paramname">desired_sg_green_timing</td><td>desired phase plan entry for which to populate green, yellow and red clearance events. </td></tr>
    <tr><td class="paramname">desired_yellow_duration</td><td>yellow duration configured for signal group of <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a>. </td></tr>
    <tr><td class="paramname">desired_red_clearance</td><td>red clearance configured for signal group of <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00372">372</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  376</span>    {</div>
<div class="line"><span class="lineno">  377</span>        <span class="keyword">auto</span> desired_green_start_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a>;</div>
<div class="line"><span class="lineno">  378</span>        <span class="keyword">auto</span> desired_green_end_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a>;</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        <span class="comment">// Add GREEN movement event</span></div>
<div class="line"><span class="lineno">  381</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> green_movement_event;</div>
<div class="line"><span class="lineno">  382</span>        <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(green_movement_event, </div>
<div class="line"><span class="lineno">  383</span>                                <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>, </div>
<div class="line"><span class="lineno">  384</span>                                desired_green_start_time_epoch, desired_green_end_time_epoch);</div>
<div class="line"><span class="lineno">  385</span>        cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(green_movement_event);</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>        <span class="comment">// Add YELLOW movement event</span></div>
<div class="line"><span class="lineno">  388</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> yellow_movement_event;</div>
<div class="line"><span class="lineno">  389</span>        uint64_t calculated_yellow_end_time_epoch = desired_green_end_time_epoch + desired_yellow_duration;</div>
<div class="line"><span class="lineno">  390</span>        <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(yellow_movement_event,</div>
<div class="line"><span class="lineno">  391</span>                                <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>, </div>
<div class="line"><span class="lineno">  392</span>                                desired_green_end_time_epoch, calculated_yellow_end_time_epoch);</div>
<div class="line"><span class="lineno">  393</span>        cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(yellow_movement_event);</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>        <span class="comment">// Add RED movement event</span></div>
<div class="line"><span class="lineno">  396</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> red_movement_event;</div>
<div class="line"><span class="lineno">  397</span>        uint64_t calculated_red_end_time_epoch = calculated_yellow_end_time_epoch + desired_red_clearance;</div>
<div class="line"><span class="lineno">  398</span>        <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(red_movement_event, </div>
<div class="line"><span class="lineno">  399</span>                                <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>, </div>
<div class="line"><span class="lineno">  400</span>                                calculated_yellow_end_time_epoch,</div>
<div class="line"><span class="lineno">  401</span>                                calculated_red_end_time_epoch);</div>
<div class="line"><span class="lineno">  402</span>        cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(red_movement_event);</div>
<div class="line"><span class="lineno">  403</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_ae996635c8e4bc134da15362e7813fade"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">signal_phase_and_timing::spat::populate_movement_event</a></div><div class="ttdeci">void populate_movement_event(signal_phase_and_timing::movement_event &amp;movement_event_to_populate, const signal_phase_and_timing::movement_phase_state &amp;phase_state, const uint64_t start_time_epoch, const uint64_t end_time_epoch) const</div><div class="ttdoc">Populate movement_event with movement_phase_state, start_time and end_time(min_end_time).</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00362">spat.cpp:362</a></div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a></div><div class="ttdeci">@ stop_and_remain</div><div class="ttdoc">e.g. called 'red light' in US. Driver Action: Stop vehicle at stop line. Do not proceed....</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a></div><div class="ttdeci">@ protected_clearance</div><div class="ttdoc">Often called 'protected yellow' in US Driver Action: Prepare to stop. Proceed if unable,...</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a></div><div class="ttdeci">@ protected_movement_allowed</div><div class="ttdoc">Often called 'protected green' in US Driver Action: Proceed, tossing caution to the wind,...</div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a></div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00110">movement_event.h:110</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_a087beaba691971b31df26e90bf4e81c4"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">signal_phase_and_timing::movement_state::state_time_speed</a></div><div class="ttdeci">std::list&lt; movement_event &gt; state_time_speed</div><div class="ttdoc">Consisting of sets of movement data with: SignalPhaseState TimeChangeDetails Advisory Speeds (optiona...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00034">movement_state.h:34</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_a349aa0bbaad1a332ea8b7dc1ee9470da"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a></div><div class="ttdeci">uint64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan.h:19</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_afeaff7b517806a61775cfc161d21cf1c"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a></div><div class="ttdeci">uint64_t end_time</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a>, <a class="el" href="spat_8cpp_source.html#l00362">populate_movement_event()</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, and <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00178">process_first_desired_green()</a>, and <a class="el" href="spat_8cpp_source.html#l00298">process_second_onward_desired_green()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_cgraph" id="aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_cgraph">
<area shape="rect" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="5,45,252,101"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="300,53,515,94"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="563,5,731,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="563,85,731,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="779,38,960,109"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1008,53,1200,94"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="1248,53,1451,94"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_icgraph" id="aclasssignal__phase__and__timing_1_1spat_abbdc76328ccf9f1d15d5d15e6241e7d4_icgraph">
<area shape="rect" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="437,45,684,101"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,85,389,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,45,173,101"/>
</map>
</div>

</div>
</div>
<a id="a039ae20f62541487dac614cf260c6ecd" name="a039ae20f62541487dac614cf260c6ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039ae20f62541487dac614cf260c6ecd">&#9670;&nbsp;</a></span>find_max_desired_yellow_duration_red_clearance_pair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int signal_phase_and_timing::spat::find_max_desired_yellow_duration_red_clearance_pair </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>desired_signal_groups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td>
          <td class="paramname"><em>tsc_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the signal group id for the signal group in a pair (movement group) that will have the largest yellow change plus red clearance time interval. This is useful since the largest yellow change plus red clearance will control how long all red events during this time interval will last. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desired_signal_groups</td><td>a pair of signal groups that make up a movement group. </td></tr>
    <tr><td class="paramname">tsc_state</td><td>A pointer for traffic signal controller configuration informaton including yellow change and red intervals for all signal groups. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int the signal group id which has the largest combination of yellow change and red clearance time interval. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00405">405</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  406</span>    {</div>
<div class="line"><span class="lineno">  407</span>        <span class="keywordtype">int</span> return_sg_id = desired_signal_groups.front();</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordtype">int</span> total = 0;</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> sg : desired_signal_groups)</div>
<div class="line"><span class="lineno">  410</span>        {</div>
<div class="line"><span class="lineno">  411</span>            <span class="keywordtype">int</span> desired_yellow_duration = tsc_state-&gt;tsc_config_list.empty()? 0 :tsc_state-&gt;get_signal_group_configuration_by_sg(sg).yellow_change_duration;</div>
<div class="line"><span class="lineno">  412</span>            <span class="keywordtype">int</span> desired_red_clearance = tsc_state-&gt;tsc_config_list.empty()? 0 :tsc_state-&gt;get_signal_group_configuration_by_sg(sg).red_clearance;</div>
<div class="line"><span class="lineno">  413</span>            <span class="keywordtype">int</span> local_total =  desired_yellow_duration+ desired_red_clearance;</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>            <span class="keywordflow">if</span> (local_total &gt; total)</div>
<div class="line"><span class="lineno">  416</span>            {</div>
<div class="line"><span class="lineno">  417</span>                total = local_total;</div>
<div class="line"><span class="lineno">  418</span>                return_sg_id = sg;</div>
<div class="line"><span class="lineno">  419</span>            }</div>
<div class="line"><span class="lineno">  420</span>        }</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">return</span> return_sg_id;</div>
<div class="line"><span class="lineno">  422</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00178">process_first_desired_green()</a>, and <a class="el" href="spat_8cpp_source.html#l00298">process_second_onward_desired_green()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a039ae20f62541487dac614cf260c6ecd_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a039ae20f62541487dac614cf260c6ecd_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a039ae20f62541487dac614cf260c6ecd_icgraph" id="aclasssignal__phase__and__timing_1_1spat_a039ae20f62541487dac614cf260c6ecd_icgraph">
<area shape="rect" title="Find the signal group id for the signal group in a pair (movement group) that will have the largest y..." alt="" coords="437,45,672,101"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,85,389,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,45,173,101"/>
</map>
</div>

</div>
</div>
<a id="a034410d8e6254100552d88d21ca5bedd" name="a034410d8e6254100552d88d21ca5bedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034410d8e6254100552d88d21ca5bedd">&#9670;&nbsp;</a></span>fromJson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::fromJson </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deserialize SPaT JSON into SPaT object (Thread Safe). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>SPaT JSON. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00035">35</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                                               {</div>
<div class="line"><span class="lineno">   36</span>        rapidjson::Document doc;</div>
<div class="line"><span class="lineno">   37</span>        doc.Parse(json.c_str());</div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">if</span> (doc.HasParseError()) {</div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;SPaT message JSON is misformatted. JSON parsing failed!&quot;</span>);  </div>
<div class="line"><span class="lineno">   40</span>        }</div>
<div class="line"><span class="lineno">   41</span>        <span class="comment">// Write lock</span></div>
<div class="line"><span class="lineno">   42</span>        std::unique_lock  lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">if</span> ( doc.HasMember(<span class="stringliteral">&quot;time_stamp&quot;</span>) &amp;&amp; doc.FindMember(<span class="stringliteral">&quot;time_stamp&quot;</span>)-&gt;value.IsUint64()) {</div>
<div class="line"><span class="lineno">   44</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a> =  (uint32_t) doc[<span class="stringliteral">&quot;time_stamp&quot;</span>].GetUint64(); <span class="comment">// OPTIONAL in J2735 SPaT definition</span></div>
<div class="line"><span class="lineno">   45</span>        } </div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">if</span> (doc.FindMember(<span class="stringliteral">&quot;name&quot;</span>)-&gt;value.IsString() ) {</div>
<div class="line"><span class="lineno">   47</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">name</a> = doc[<span class="stringliteral">&quot;name&quot;</span>].GetString();  <span class="comment">// OPTIONAL see J2735 SPaT definition</span></div>
<div class="line"><span class="lineno">   48</span>        }</div>
<div class="line"><span class="lineno">   49</span>        <span class="keywordflow">if</span> ( doc.FindMember(<span class="stringliteral">&quot;intersections&quot;</span>)-&gt;value.IsArray() ) {</div>
<div class="line"><span class="lineno">   50</span>            <span class="comment">// REQUIRED see J2735 SPaT definition</span></div>
<div class="line"><span class="lineno">   51</span>            <span class="comment">// Clear intersection state list in case it is populated.</span></div>
<div class="line"><span class="lineno">   52</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.clear();</div>
<div class="line"><span class="lineno">   53</span>            <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;intersection : doc[<span class="stringliteral">&quot;intersections&quot;</span>].GetArray() ){</div>
<div class="line"><span class="lineno">   54</span>                intersection_state cur_state;</div>
<div class="line"><span class="lineno">   55</span>                cur_state.fromJson(intersection);</div>
<div class="line"><span class="lineno">   56</span>                <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.push_back(cur_state);</div>
<div class="line"><span class="lineno">   57</span>            }</div>
<div class="line"><span class="lineno">   58</span>        }</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   60</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;SPaT message is missing required intersections property!&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>        }</div>
<div class="line"><span class="lineno">   62</span>            </div>
<div class="line"><span class="lineno">   63</span>        </div>
<div class="line"><span class="lineno">   64</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a0a562044bd6250986b309068c079ade0"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">signal_phase_and_timing::spat::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">Descriptive name for this collection.</div><div class="ttdef"><b>Definition:</b> <a href="spat_8h_source.html#l00032">spat.h:32</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a1ab4b5232e535810906b7076d08812ca"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">signal_phase_and_timing::spat::intersections</a></div><div class="ttdeci">std::list&lt; intersection_state &gt; intersections</div><div class="ttdoc">Sets of SPaT data ( one per intersection).</div><div class="ttdef"><b>Definition:</b> <a href="spat_8h_source.html#l00036">spat.h:36</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a58e4d382adf28bea9200a167794b3e31"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">signal_phase_and_timing::spat::spat_lock</a></div><div class="ttdeci">std::shared_mutex spat_lock</div><div class="ttdoc">Read/Write lock for concurrent access for read operations and exclusive access for write operations.</div><div class="ttdef"><b>Definition:</b> <a href="spat_8h_source.html#l00046">spat.h:46</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_ac08c93a991a59d5d32fb2a363460d874"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">signal_phase_and_timing::spat::timestamp</a></div><div class="ttdeci">u_int32_t timestamp</div><div class="ttdoc">Timestamp in minutes of the UTC year (see J2735 SPaT message documentation for reference).</div><div class="ttdef"><b>Definition:</b> <a href="spat_8h_source.html#l00028">spat.h:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="intersection__state_8cpp_source.html#l00054">signal_phase_and_timing::intersection_state::fromJson()</a>, <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8h_source.html#l00032">name</a>, <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd_cgraph">
<area shape="rect" title="Deserialize SPaT JSON into SPaT object (Thread Safe)." alt="" coords="5,42,173,83"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#ac73d712ab8edf86b8d9c892f6bdff5e0" title="Deserialize Intersection State JSON into Intersection State object." alt="" coords="221,35,389,91"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1connection__maneuver__assist.html#a0a1eb4c8b7054414b2a771d67d78404e" title="Deserialize Connection Maneuver Assist JSON into Connection Maneuver Assist object." alt="" coords="681,5,849,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1movement__state.html#add078711d1cf73ce1f433c4b34532fcc" title="Deserialize Movement State JSON into Movement State object." alt="" coords="437,71,623,113"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1movement__event.html#a9e78abda6f76b9e03a27859d4003fbb6" title="Deserialize Movement Event JSON into Movement Event object." alt="" coords="671,85,859,126"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1advisory__speed.html#ab065b8b1df30b02ea1cddeae8ca6bab6" title="Deserialize Advisory Speed JSON into Advisory Speed object." alt="" coords="907,49,1085,90"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#ae11ac44a006b7b7d43c64b764d8ede52" title="Deserialize Time Change Details JSON into Time Change Details object." alt="" coords="912,113,1080,169"/>
</map>
</div>

</div>
</div>
<a id="a55b4c116c81f46b7747826c8bb9d238a" name="a55b4c116c81f46b7747826c8bb9d238a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b4c116c81f46b7747826c8bb9d238a">&#9670;&nbsp;</a></span>get_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a> signal_phase_and_timing::spat::get_intersection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get copy of current intersection state. Note: SPaT object currently only supports storing single intersection state (Thread Safe). </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00424">424</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  424</span>                                              {</div>
<div class="line"><span class="lineno">  425</span>        std::shared_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty())</div>
<div class="line"><span class="lineno">  427</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;No intersection included currently in SPaT!&quot;</span>); </div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front();</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, and <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>.</p>

</div>
</div>
<a id="a0e3c8a3be68736ff463cdfb2b185e38d" name="a0e3c8a3be68736ff463cdfb2b185e38d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e3c8a3be68736ff463cdfb2b185e38d">&#9670;&nbsp;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string signal_phase_and_timing::spat::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get SPaT name. </p>
<dl class="section return"><dt>Returns</dt><dd>std::string SPaT name. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00432">432</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  432</span>                             {</div>
<div class="line"><span class="lineno">  433</span>        std::shared_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">  434</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">name</a>;</div>
<div class="line"><span class="lineno">  435</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00032">name</a>, and <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>.</p>

</div>
</div>
<a id="a56267b9a334f79513b0c01cf5ef1dbb4" name="a56267b9a334f79513b0c01cf5ef1dbb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56267b9a334f79513b0c01cf5ef1dbb4">&#9670;&nbsp;</a></span>get_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t signal_phase_and_timing::spat::get_timestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get timestamp in minute of the current UTC year (Thread Safe). </p>
<dl class="section return"><dt>Returns</dt><dd>uint32_t timestamp minute of the current UTC year. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00437">437</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  437</span>                                 {</div>
<div class="line"><span class="lineno">  438</span>        std::shared_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a>;</div>
<div class="line"><span class="lineno">  440</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>

</div>
</div>
<a id="a8225fc5b13a6faaf4d1e309dadd76858" name="a8225fc5b13a6faaf4d1e309dadd76858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8225fc5b13a6faaf4d1e309dadd76858">&#9670;&nbsp;</a></span>initialize_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::initialize_intersection </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>intersection_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>intersection_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>phase_number_to_signal_group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to initialize intersection information not provided in the ntcip SPaT UDP message but necessary for the J2735 SPaT message. This method must be executed prior to using the update method (Thread Safe). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_name</td><td>name of intersection </td></tr>
    <tr><td class="paramname">intersection_id</td><td>J2735 intersection ID </td></tr>
    <tr><td class="paramname">phase_number_to_signal_group</td><td>a map of phase numbers (NTCIP) to signal groups (J2735) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00084">84</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>                                                                                                                                                                     {</div>
<div class="line"><span class="lineno">   85</span>        <span class="comment">// Write lock</span></div>
<div class="line"><span class="lineno">   86</span>        std::unique_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty()) {</div>
<div class="line"><span class="lineno">   88</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.clear();</div>
<div class="line"><span class="lineno">   89</span>        }</div>
<div class="line"><span class="lineno">   90</span>        intersection_state cur_state;</div>
<div class="line"><span class="lineno">   91</span>        cur_state.name = intersection_name;</div>
<div class="line"><span class="lineno">   92</span>        cur_state.id =  (uint16_t) intersection_id;</div>
<div class="line"><span class="lineno">   93</span>        <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">phase_to_signal_group</a> = _phase_number_to_signal_group;</div>
<div class="line"><span class="lineno">   94</span>        cur_state.initialize_movement_states( <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">phase_to_signal_group</a> );</div>
<div class="line"><span class="lineno">   95</span>        <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.push_back(cur_state);</div>
<div class="line"><span class="lineno">   96</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a2c2dd359b921afee78e049ee9ce550dd"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">signal_phase_and_timing::spat::phase_to_signal_group</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; phase_to_signal_group</div><div class="ttdoc">Map of phase number(NTCIP) to signal group(J2735).</div><div class="ttdef"><b>Definition:</b> <a href="spat_8h_source.html#l00041">spat.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="intersection__state_8h_source.html#l00032">signal_phase_and_timing::intersection_state::id</a>, <a class="el" href="intersection__state_8cpp_source.html#l00194">signal_phase_and_timing::intersection_state::initialize_movement_states()</a>, <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="intersection__state_8h_source.html#l00025">signal_phase_and_timing::intersection_state::name</a>, <a class="el" href="spat_8h_source.html#l00041">phase_to_signal_group</a>, and <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858_cgraph">
<area shape="rect" title="Method to initialize intersection information not provided in the ntcip SPaT UDP message but necessar..." alt="" coords="5,13,184,54"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#aca7f3528dc9e42b152c0e4537468fd79" title="Initialize list&lt;movement_state&gt; to include a movement for each phase_numer/signal_group entry in the ..." alt="" coords="232,5,411,61"/>
</map>
</div>

</div>
</div>
<a id="a5c73cc279f79a8bfcbd3fbbb1dc31889" name="a5c73cc279f79a8bfcbd3fbbb1dc31889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c73cc279f79a8bfcbd3fbbb1dc31889">&#9670;&nbsp;</a></span>operator!=()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool signal_phase_and_timing::spat::operator!= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsignal__phase__and__timing_1_1spat.html">spat</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the inverse of equals operator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>second object to compare current object with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if both objects do not contain equivalent data. </dd>
<dd>
false if both objects do contain equivalent data. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00453">453</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  453</span>                                                {</div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordflow">return</span> !<a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae09b881219e3f51e7d9839668abbb52e">operator==</a>(other);</div>
<div class="line"><span class="lineno">  455</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_ae09b881219e3f51e7d9839668abbb52e"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#ae09b881219e3f51e7d9839668abbb52e">signal_phase_and_timing::spat::operator==</a></div><div class="ttdeci">bool operator==(const spat &amp;other) const</div><div class="ttdoc">Equals operator to asses whether two objects contain equivalent data.</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00449">spat.cpp:449</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8cpp_source.html#l00449">operator==()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889_cgraph">
<area shape="rect" title="Returns the inverse of equals operator." alt="" coords="5,5,173,47"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae09b881219e3f51e7d9839668abbb52e" title="Equals operator to asses whether two objects contain equivalent data." alt="" coords="221,5,389,47"/>
</map>
</div>

</div>
</div>
<a id="ae09b881219e3f51e7d9839668abbb52e" name="ae09b881219e3f51e7d9839668abbb52e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09b881219e3f51e7d9839668abbb52e">&#9670;&nbsp;</a></span>operator==()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool signal_phase_and_timing::spat::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsignal__phase__and__timing_1_1spat.html">spat</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Equals operator to asses whether two objects contain equivalent data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">compare</td><td>second object to compare current object with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if both object contain equivalent data. </dd>
<dd>
false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00449">449</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  449</span>                                                {</div>
<div class="line"><span class="lineno">  450</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a> == other.timestamp &amp;&amp; <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">name</a> == other.name &amp;&amp; <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a> == other.intersections;</div>
<div class="line"><span class="lineno">  451</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8h_source.html#l00032">name</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00453">operator!=()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e_icgraph" id="aclasssignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e_icgraph">
<area shape="rect" title="Equals operator to asses whether two objects contain equivalent data." alt="" coords="221,5,389,47"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a5c73cc279f79a8bfcbd3fbbb1dc31889" title="Returns the inverse of equals operator." alt="" coords="5,5,173,47"/>
</map>
</div>

</div>
</div>
<a id="ae996635c8e4bc134da15362e7813fade" name="ae996635c8e4bc134da15362e7813fade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae996635c8e4bc134da15362e7813fade">&#9670;&nbsp;</a></span>populate_movement_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::populate_movement_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;&#160;</td>
          <td class="paramname"><em>movement_event_to_populate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14">signal_phase_and_timing::movement_phase_state</a> &amp;&#160;</td>
          <td class="paramname"><em>phase_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>start_time_epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>end_time_epoch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> with movement_phase_state, start_time and end_time(min_end_time). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">movement_event_to_populate</td><td>reference to <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> to populate. </td></tr>
    <tr><td class="paramname">phase_state</td><td>enumeration to describe phase state. </td></tr>
    <tr><td class="paramname">start_time_epoch</td><td>start time of movement event in milliseconds epoch time. </td></tr>
    <tr><td class="paramname">end_time_epoch</td><td>end time of movement event in milliseconds epoch time. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00362">362</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>    {</div>
<div class="line"><span class="lineno">  367</span>        movemnet_event_to_populate.event_state = phase_state;</div>
<div class="line"><span class="lineno">  368</span>        movemnet_event_to_populate.timing.set_start_time(start_time_epoch);</div>
<div class="line"><span class="lineno">  369</span>        movemnet_event_to_populate.timing.set_min_end_time(end_time_epoch);</div>
<div class="line"><span class="lineno">  370</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="movement__event_8h_source.html#l00115">signal_phase_and_timing::movement_event::event_state</a>, <a class="el" href="time__change__details_8cpp_source.html#l00157">signal_phase_and_timing::time_change_details::set_min_end_time()</a>, <a class="el" href="time__change__details_8cpp_source.html#l00153">signal_phase_and_timing::time_change_details::set_start_time()</a>, and <a class="el" href="movement__event_8h_source.html#l00121">signal_phase_and_timing::movement_event::timing</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00372">append_full_green_yellow_red_phases_by_desired_green()</a>, and <a class="el" href="spat_8cpp_source.html#l00178">process_first_desired_green()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_cgraph" id="aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_cgraph">
<area shape="rect" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="5,53,220,94"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="268,5,436,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="268,85,436,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="484,38,665,109"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="713,53,905,94"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="953,53,1156,94"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_icgraph" id="aclasssignal__phase__and__timing_1_1spat_ae996635c8e4bc134da15362e7813fade_icgraph">
<area shape="rect" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="732,46,947,87"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="437,71,684,127"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,85,389,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,45,173,101"/>
</map>
</div>

</div>
</div>
<a id="a67c64af528dd1d1dcced1dbf2729a593" name="a67c64af528dd1d1dcced1dbf2729a593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c64af528dd1d1dcced1dbf2729a593">&#9670;&nbsp;</a></span>process_first_desired_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::process_first_desired_green </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;&#160;</td>
          <td class="paramname"><em>cur_movement_state_ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;&#160;</td>
          <td class="paramname"><em>desired_sg_green_timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td>
          <td class="paramname"><em>tsc_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process first desired green signal group and duration in desired phase plan. Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list of current <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with movement_events for first entry in desired phase plan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur_movement_state_ref</td><td>reference to <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> inside SPaT for which to populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list. </td></tr>
    <tr><td class="paramname">desired_sg_green_timing</td><td>first entry in desired phase plan which contains information about a green duration and the signal groups to which it applies. </td></tr>
    <tr><td class="paramname">tsc_state</td><td>tsc state and signal group mapping information for red clearance and yellow change duraction. </td></tr>
  </table>
  </dd>
</dl>
<p >If the SPAT current movement event is GREEN event state,</p><ul>
<li>Updating the currnet GREEN event end time with desired green end time.</li>
<li>Add YELLOW movement event with start time equals to desired green end time, and end time equals to start time plus desired yellow duration</li>
<li>Add RED movement event with start time equals to the above YELLOW end time, and end time equals to start time plus desired red clearance</li>
</ul>
<p >If the SPAT current movement state is RED,</p><ul>
<li>Updating the current RED movement event end time equals to desired green end time + yellow duration + red clearance</li>
</ul>
<p >If the SPAT current movement state is YELLOW,</p><ul>
<li>Updating the YELLOW movement event end time equals to YELLOW start time + yellow duration of current spat movement state signal group id.</li>
<li>Add RED movement event start time equals to the above YELLOW start time and end with desired green end time + desired yellow duration + desired red clearance.</li>
</ul>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00178">178</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  181</span>    {</div>
<div class="line"><span class="lineno">  182</span>        <span class="keyword">auto</span> desired_green_signal_group_ids = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>;</div>
<div class="line"><span class="lineno">  183</span>        <span class="keyword">auto</span> desired_green_start_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a>;</div>
<div class="line"><span class="lineno">  184</span>        <span class="keyword">auto</span> desired_green_end_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a>;       </div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>        <span class="comment">// If SPAT Current signal group id is in the current desired phase plan signal group ids, process desired green event for the SPAT </span></div>
<div class="line"><span class="lineno">  187</span>        <span class="comment">// current movement event</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordtype">int</span> current_signal_group_id = cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>;</div>
<div class="line"><span class="lineno">  189</span>        <span class="comment">// Get yellow change and red clearance time interval for signal group in movement group with the largest combination</span></div>
<div class="line"><span class="lineno">  190</span>        <span class="comment">// of yellow change and red clearance time interval.</span></div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordtype">int</span> signal_group_with_largest_clearance = <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd">find_max_desired_yellow_duration_red_clearance_pair</a>(desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>, tsc_state);</div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordtype">int</span> desired_yellow_duration = tsc_state-&gt;tsc_config_list.empty() ? 0 : tsc_state-&gt;get_signal_group_configuration_by_sg(signal_group_with_largest_clearance).yellow_change_duration;</div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordtype">int</span> desired_red_clearance = tsc_state-&gt;tsc_config_list.empty() ? 0 : tsc_state-&gt;get_signal_group_configuration_by_sg(signal_group_with_largest_clearance).red_clearance;</div>
<div class="line"><span class="lineno">  194</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;process signal group = {0} \t AND First desired sg ids = [{1} , {2}]&quot;</span>, </div>
<div class="line"><span class="lineno">  195</span>                    current_signal_group_id, desired_green_signal_group_ids.front(), </div>
<div class="line"><span class="lineno">  196</span>                    desired_green_signal_group_ids.back());        </div>
<div class="line"><span class="lineno">  197</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;desired sg id={0} \tdesired_yellow_duration = {1} \t AND desired_red_clearance = {2}&quot;</span>,signal_group_with_largest_clearance, desired_yellow_duration, desired_red_clearance);</div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">std::count</a>(desired_green_signal_group_ids.begin(), desired_green_signal_group_ids.end(), current_signal_group_id))</div>
<div class="line"><span class="lineno">  199</span>        {</div>
<div class="line"><span class="lineno">  206</span>            <span class="comment">// GREEN</span></div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>) <span class="comment">// GREEN</span></div>
<div class="line"><span class="lineno">  208</span>            {</div>
<div class="line"><span class="lineno">  209</span>                <span class="comment">// Updating GREEN movement event</span></div>
<div class="line"><span class="lineno">  210</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().timing.set_min_end_time(desired_green_end_time_epoch);</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>                <span class="comment">// Add YELLOW movement event</span></div>
<div class="line"><span class="lineno">  213</span>                <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> yellow_movement_event;</div>
<div class="line"><span class="lineno">  214</span>                uint64_t calculated_yellow_end_time_epoch = desired_green_end_time_epoch + desired_yellow_duration;</div>
<div class="line"><span class="lineno">  215</span>                <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(yellow_movement_event, </div>
<div class="line"><span class="lineno">  216</span>                                        <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>, </div>
<div class="line"><span class="lineno">  217</span>                                        desired_green_end_time_epoch, </div>
<div class="line"><span class="lineno">  218</span>                                        calculated_yellow_end_time_epoch);</div>
<div class="line"><span class="lineno">  219</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(yellow_movement_event);</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>                <span class="comment">// Add RED movement event</span></div>
<div class="line"><span class="lineno">  222</span>                <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> red_movement_event;</div>
<div class="line"><span class="lineno">  223</span>                <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(red_movement_event, </div>
<div class="line"><span class="lineno">  224</span>                                        <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>, </div>
<div class="line"><span class="lineno">  225</span>                                        calculated_yellow_end_time_epoch,</div>
<div class="line"><span class="lineno">  226</span>                                        calculated_yellow_end_time_epoch + desired_red_clearance);</div>
<div class="line"><span class="lineno">  227</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(red_movement_event);</div>
<div class="line"><span class="lineno">  228</span>            }</div>
<div class="line"><span class="lineno">  229</span><span class="comment">            /****</span></div>
<div class="line"><span class="lineno">  230</span><span class="comment">             * If SPAT current movement state is RED event state,</span></div>
<div class="line"><span class="lineno">  231</span><span class="comment">             * - Updating red event state end time to desired green start time.</span></div>
<div class="line"><span class="lineno">  232</span><span class="comment">             * - Adding GREEN event state start time to desired green start time and end time equals to desired green end time.</span></div>
<div class="line"><span class="lineno">  233</span><span class="comment">             * - Add YELLOW event state start time to desired green end time and end time euqals to start time + desired yellow duration.</span></div>
<div class="line"><span class="lineno">  234</span><span class="comment">             * - Add RED event state start time to the above YELLO end time and end time euqals to start time + desired red clearance.</span></div>
<div class="line"><span class="lineno">  235</span><span class="comment">             * ***/</span></div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>) <span class="comment">// RED</span></div>
<div class="line"><span class="lineno">  237</span>            {</div>
<div class="line"><span class="lineno">  238</span>                <span class="comment">// Updating RED movement event</span></div>
<div class="line"><span class="lineno">  239</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().timing.set_min_end_time(desired_green_start_time_epoch);</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>                <span class="comment">// Append GREEN, YELLOW, and RED movement events</span></div>
<div class="line"><span class="lineno">  242</span>                <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4">append_full_green_yellow_red_phases_by_desired_green</a>(cur_movement_state_ref, </div>
<div class="line"><span class="lineno">  243</span>                                                                    desired_sg_green_timing, </div>
<div class="line"><span class="lineno">  244</span>                                                                    desired_yellow_duration, </div>
<div class="line"><span class="lineno">  245</span>                                                                    desired_red_clearance);</div>
<div class="line"><span class="lineno">  246</span>            }</div>
<div class="line"><span class="lineno">  247</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  248</span>            {</div>
<div class="line"><span class="lineno">  249</span>                <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;SPAT current movement event has to be green or red event state!&quot;</span>);</div>
<div class="line"><span class="lineno">  250</span>            }</div>
<div class="line"><span class="lineno">  251</span>        }</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  253</span>        {</div>
<div class="line"><span class="lineno">  254</span>            <span class="comment">// SPAT Current signal group id is NOT in the current desired phase plan signal group ids</span></div>
<div class="line"><span class="lineno">  259</span><span class="comment"></span>            <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>) <span class="comment">// RED</span></div>
<div class="line"><span class="lineno">  260</span>            {</div>
<div class="line"><span class="lineno">  261</span>                <span class="comment">// Updating the current RED event state</span></div>
<div class="line"><span class="lineno">  262</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().timing.set_min_end_time(desired_green_end_time_epoch + </div>
<div class="line"><span class="lineno">  263</span>                                                                                        desired_yellow_duration + </div>
<div class="line"><span class="lineno">  264</span>                                                                                        desired_red_clearance);</div>
<div class="line"><span class="lineno">  265</span>            }</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>) <span class="comment">// YELLOW</span></div>
<div class="line"><span class="lineno">  273</span>            {</div>
<div class="line"><span class="lineno">  274</span>                <span class="comment">// Updating the current YELLOW movement event</span></div>
<div class="line"><span class="lineno">  275</span>                <span class="keywordtype">int</span> spat_current_yellow_duration = tsc_state-&gt;tsc_config_list.empty()? 0 : tsc_state-&gt;get_signal_group_configuration_by_sg(current_signal_group_id).yellow_change_duration;</div>
<div class="line"><span class="lineno">  276</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;signal_group_with_largest_clearance={0} \tdesired_yellow_duration = {1} \t AND desired_red_clearance = {2}&quot;</span>,signal_group_with_largest_clearance, desired_yellow_duration, desired_red_clearance);</div>
<div class="line"><span class="lineno">  277</span>       </div>
<div class="line"><span class="lineno">  278</span>                uint64_t calculated_yellow_end_time_epoch = cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().timing.get_epoch_start_time() </div>
<div class="line"><span class="lineno">  279</span>                                                            + spat_current_yellow_duration;</div>
<div class="line"><span class="lineno">  280</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.front().timing.set_min_end_time(calculated_yellow_end_time_epoch);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>                <span class="comment">// Add RED movement event</span></div>
<div class="line"><span class="lineno">  283</span>                <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> red_movement_event;</div>
<div class="line"><span class="lineno">  284</span>                uint64_t calculated_red_end_time_epoch = desired_green_end_time_epoch + desired_yellow_duration + desired_red_clearance;</div>
<div class="line"><span class="lineno">  285</span>                <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade">populate_movement_event</a>(red_movement_event, </div>
<div class="line"><span class="lineno">  286</span>                                        <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>, </div>
<div class="line"><span class="lineno">  287</span>                                        calculated_yellow_end_time_epoch, </div>
<div class="line"><span class="lineno">  288</span>                                        calculated_red_end_time_epoch);</div>
<div class="line"><span class="lineno">  289</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.push_back(red_movement_event);</div>
<div class="line"><span class="lineno">  290</span>            }</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  292</span>            {</div>
<div class="line"><span class="lineno">  293</span>                <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;SPAT current movement event has to be red or yellow if its signal group id is not in desired signal group ids!&quot;</span>);</div>
<div class="line"><span class="lineno">  294</span>            }</div>
<div class="line"><span class="lineno">  295</span>        }</div>
<div class="line"><span class="lineno">  296</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a039ae20f62541487dac614cf260c6ecd"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd">signal_phase_and_timing::spat::find_max_desired_yellow_duration_red_clearance_pair</a></div><div class="ttdeci">int find_max_desired_yellow_duration_red_clearance_pair(std::vector&lt; int &gt; desired_signal_groups, const std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; tsc_state) const</div><div class="ttdoc">Find the signal group id for the signal group in a pair (movement group) that will have the largest y...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00405">spat.cpp:405</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_abbdc76328ccf9f1d15d5d15e6241e7d4"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4">signal_phase_and_timing::spat::append_full_green_yellow_red_phases_by_desired_green</a></div><div class="ttdeci">void append_full_green_yellow_red_phases_by_desired_green(signal_phase_and_timing::movement_state &amp;cur_movement_state_ref, const streets_desired_phase_plan::signal_group2green_phase_timing &amp;desired_sg_green_timing, const int desired_yellow_duration, const int desired_red_clearance) const</div><div class="ttdoc">Populate movement_event list for given movement_state with green event, yellow change event,...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00372">spat.cpp:372</a></div></div>
<div class="ttc" id="anamespacesimulate__bsm_html_a76f645adf8af768fa959ecb6f90d7831"><div class="ttname"><a href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">simulate_bsm.count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00018">simulate_bsm.py:18</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_ad403f25c761b6ef77b4bbc6bacbfc888"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_phase_and_timing::movement_state::signal_group</a></div><div class="ttdeci">uint8_t signal_group</div><div class="ttdoc">The group id is used to map to list of lanes (and their descriptions) which this MovementState data a...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00025">movement_state.h:25</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_a6987d5d817d188e2928481c0a0c2b1b0"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">streets_desired_phase_plan::signal_group2green_phase_timing::signal_groups</a></div><div class="ttdeci">std::vector&lt; int &gt; signal_groups</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00021">streets_desired_phase_plan.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8cpp_source.html#l00372">append_full_green_yellow_red_phases_by_desired_green()</a>, <a class="el" href="simulate__bsm_8py_source.html#l00018">simulate_bsm::count</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a>, <a class="el" href="spat_8cpp_source.html#l00405">find_max_desired_yellow_duration_red_clearance_pair()</a>, <a class="el" href="spat_8cpp_source.html#l00362">populate_movement_event()</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="movement__state_8h_source.html#l00025">signal_phase_and_timing::movement_state::signal_group</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00021">streets_desired_phase_plan::signal_group2green_phase_timing::signal_groups</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, and <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00134">update_spat_with_candidate_dpp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_cgraph">
<area shape="rect" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="5,77,173,133"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="221,12,468,68"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="516,53,731,94"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd" title="Find the signal group id for the signal group in a pair (movement group) that will have the largest y..." alt="" coords="227,143,462,199"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="779,5,947,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="779,85,947,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="995,38,1176,109"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1224,53,1416,94"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="1464,53,1667,94"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_icgraph" id="aclasssignal__phase__and__timing_1_1spat_a67c64af528dd1d1dcced1dbf2729a593_icgraph">
<area shape="rect" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="a40277118c7dbeb9f5d1dfe414ea2f28c" name="a40277118c7dbeb9f5d1dfe414ea2f28c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40277118c7dbeb9f5d1dfe414ea2f28c">&#9670;&nbsp;</a></span>process_second_onward_desired_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::process_second_onward_desired_green </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> &amp;&#160;</td>
          <td class="paramname"><em>cur_movement_state_ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> &amp;&#160;</td>
          <td class="paramname"><em>desired_sg_green_timing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td>
          <td class="paramname"><em>tsc_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process all desired green signal group and duration in desired phase plan that are not the first entry. Populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list of current <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> with movement_events for all entries after first entry in desired phase plan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur_movement_state_ref</td><td>reference to <a class="el" href="structsignal__phase__and__timing_1_1movement__state.html">movement_state</a> inside SPaT for which to populate <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list. </td></tr>
    <tr><td class="paramname">desired_sg_green_timing</td><td>entry in desired phase plan which contains information about a green duration and the signal groups to which it applies. </td></tr>
    <tr><td class="paramname">tsc_state</td><td>tsc state and signal group mapping information for red clearance and yellow change duraction. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00298">298</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>    {</div>
<div class="line"><span class="lineno">  303</span>        <span class="keyword">auto</span> desired_green_signal_group_ids = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>;</div>
<div class="line"><span class="lineno">  304</span>        <span class="keyword">auto</span> desired_green_start_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a>;</div>
<div class="line"><span class="lineno">  305</span>        <span class="keyword">auto</span> desired_green_end_time_epoch = desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a>;</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>        </div>
<div class="line"><span class="lineno">  308</span><span class="comment">        /***</span></div>
<div class="line"><span class="lineno">  309</span><span class="comment">         * If current signal group id is in the current desired phase plan signal group ids,</span></div>
<div class="line"><span class="lineno">  310</span><span class="comment">         * - Updating the last RED movement event from movement event list. Updating the last RED movement event end time equals to desired green start time.</span></div>
<div class="line"><span class="lineno">  311</span><span class="comment">         * - Adding GREEN event state start time to desired green start time and end time equals to desired green end time.</span></div>
<div class="line"><span class="lineno">  312</span><span class="comment">         * - Adding YELLOW event state start time to desired green end time and end time euqals to start time + yellow duration.</span></div>
<div class="line"><span class="lineno">  313</span><span class="comment">         * - Adding RED event state start time to the above YELLO end time and end time euqals to start time + red clearance.</span></div>
<div class="line"><span class="lineno">  314</span><span class="comment">         **/</span></div>
<div class="line"><span class="lineno">  315</span>        <span class="keywordtype">int</span> current_signal_group_id = cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>;</div>
<div class="line"><span class="lineno">  316</span>        <span class="comment">// Get yellow change and red clearance time interval for signal group in movement group with the largest combination</span></div>
<div class="line"><span class="lineno">  317</span>        <span class="comment">// of yellow change and red clearance time interval.</span></div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordtype">int</span> signal_group_with_largest_clearance = <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd">find_max_desired_yellow_duration_red_clearance_pair</a>(desired_sg_green_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>, tsc_state);</div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordtype">int</span> desired_yellow_duration = tsc_state-&gt;tsc_config_list.empty() ? 0 : tsc_state-&gt;get_signal_group_configuration_by_sg(signal_group_with_largest_clearance).yellow_change_duration;</div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordtype">int</span> desired_red_clearance = tsc_state-&gt;tsc_config_list.empty() ? 0 : tsc_state-&gt;get_signal_group_configuration_by_sg(signal_group_with_largest_clearance).red_clearance;</div>
<div class="line"><span class="lineno">  321</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;process signal group = {0} \t AND second and onwards desired sg ids = [{1} , {2}]&quot;</span>, </div>
<div class="line"><span class="lineno">  322</span>                    current_signal_group_id, </div>
<div class="line"><span class="lineno">  323</span>                    desired_green_signal_group_ids.front(), </div>
<div class="line"><span class="lineno">  324</span>                    desired_green_signal_group_ids.back());</div>
<div class="line"><span class="lineno">  325</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;desired sg id={0} \tdesired_yellow_duration = {1} \t AND desired_red_clearance = {2}&quot;</span>,signal_group_with_largest_clearance, desired_yellow_duration, desired_red_clearance);</div>
<div class="line"><span class="lineno">  326</span>       </div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">std::count</a>(desired_green_signal_group_ids.begin(), desired_green_signal_group_ids.end(), current_signal_group_id))</div>
<div class="line"><span class="lineno">  328</span>        {</div>
<div class="line"><span class="lineno">  329</span>            <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.back().event_state != <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>)</div>
<div class="line"><span class="lineno">  330</span>            {</div>
<div class="line"><span class="lineno">  331</span>                <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;The last movement event has to be red to turn green again&quot;</span>);</div>
<div class="line"><span class="lineno">  332</span>            }</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>            <span class="comment">//  Updating the last RED movement end time</span></div>
<div class="line"><span class="lineno">  335</span>            cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.back().timing.set_min_end_time(desired_green_start_time_epoch);</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>            <span class="comment">// Append GREEN, YELLOW, and RED movement events</span></div>
<div class="line"><span class="lineno">  338</span>            <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4">append_full_green_yellow_red_phases_by_desired_green</a>(cur_movement_state_ref, </div>
<div class="line"><span class="lineno">  339</span>                                                                desired_sg_green_timing, </div>
<div class="line"><span class="lineno">  340</span>                                                                desired_yellow_duration, </div>
<div class="line"><span class="lineno">  341</span>                                                                desired_red_clearance);</div>
<div class="line"><span class="lineno">  342</span>        }</div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  344</span>        {</div>
<div class="line"><span class="lineno">  345</span><span class="comment">            /***</span></div>
<div class="line"><span class="lineno">  346</span><span class="comment">             * If current signal group id is NOT in the current desired phase plan signal group ids,</span></div>
<div class="line"><span class="lineno">  347</span><span class="comment">             ***/</span></div>
<div class="line"><span class="lineno">  348</span>            <span class="keywordflow">if</span> (cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.back().event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>) <span class="comment">// RED</span></div>
<div class="line"><span class="lineno">  349</span>            {</div>
<div class="line"><span class="lineno">  350</span>                <span class="comment">// Updating the current RED event state end time equals to desired green phase end time + desired yellow duration + desired red clearance</span></div>
<div class="line"><span class="lineno">  351</span>                cur_movement_state_ref.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.back().timing.set_min_end_time(desired_green_end_time_epoch </div>
<div class="line"><span class="lineno">  352</span>                                                                                        + desired_yellow_duration </div>
<div class="line"><span class="lineno">  353</span>                                                                                        + desired_red_clearance);</div>
<div class="line"><span class="lineno">  354</span>            }</div>
<div class="line"><span class="lineno">  355</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  356</span>            {</div>
<div class="line"><span class="lineno">  357</span>                <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;For processing future movement events, the movement event has to be red if its signal group is not in the desired signal groups.&quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>            }</div>
<div class="line"><span class="lineno">  359</span>        }</div>
<div class="line"><span class="lineno">  360</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8cpp_source.html#l00372">append_full_green_yellow_red_phases_by_desired_green()</a>, <a class="el" href="simulate__bsm_8py_source.html#l00018">simulate_bsm::count</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a>, <a class="el" href="spat_8cpp_source.html#l00405">find_max_desired_yellow_duration_red_clearance_pair()</a>, <a class="el" href="movement__state_8h_source.html#l00025">signal_phase_and_timing::movement_state::signal_group</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00021">streets_desired_phase_plan::signal_group2green_phase_timing::signal_groups</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, and <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00134">update_spat_with_candidate_dpp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_cgraph">
<area shape="rect" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="5,85,173,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="221,45,468,101"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd" title="Find the signal group id for the signal group in a pair (movement group) that will have the largest y..." alt="" coords="227,125,462,181"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="516,53,731,94"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="779,5,947,61"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="779,85,947,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="995,38,1176,109"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1224,53,1416,94"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="1464,53,1667,94"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_icgraph" id="aclasssignal__phase__and__timing_1_1spat_a40277118c7dbeb9f5d1dfe414ea2f28c_icgraph">
<area shape="rect" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a2382404fe3b23725a9a255564cf2b752" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="a67ec458f5628cf595b6f895eede30daa" name="a67ec458f5628cf595b6f895eede30daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ec458f5628cf595b6f895eede30daa">&#9670;&nbsp;</a></span>set_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::set_intersection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a> &amp;&#160;</td>
          <td class="paramname"><em>intersection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update current intersection state (Thread Safe). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection</td><td>intersection state update. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00442">442</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  442</span>                                                                      {</div>
<div class="line"><span class="lineno">  443</span>        <span class="comment">// Write lock</span></div>
<div class="line"><span class="lineno">  444</span>        std::unique_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">  445</span>        <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.clear();</div>
<div class="line"><span class="lineno">  446</span>        <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.push_front(intersection);</div>
<div class="line"><span class="lineno">  447</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, and <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>.</p>

</div>
</div>
<a id="ac664acbcf145d92f92605e3bfde11ce7" name="ac664acbcf145d92f92605e3bfde11ce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac664acbcf145d92f92605e3bfde11ce7">&#9670;&nbsp;</a></span>set_timestamp_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::set_timestamp_local </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to set SPaT timestamp based on system time. </p>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00109">109</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  109</span>                                   {</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty() ) {</div>
<div class="line"><span class="lineno">  111</span>            intersection_state &amp;<a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a> = <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front();</div>
<div class="line"><span class="lineno">  112</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.set_timestamp_local();</div>
<div class="line"><span class="lineno">  113</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a> =  <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.moy;</div>
<div class="line"><span class="lineno">  114</span>        }</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  116</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Intersection State List is empty! Cannot populate timestamp information!&quot;</span>);</div>
<div class="line"><span class="lineno">  117</span>        }</div>
<div class="line"><span class="lineno">  118</span>    }</div>
<div class="ttc" id="anamespaceintersection__model_html_a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4"><div class="ttname"><a href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection_model::map_type::intersection</a></div><div class="ttdeci">@ intersection</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00066">update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7_icgraph" id="aclasssignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7_icgraph">
<area shape="rect" title="Method to set SPaT timestamp based on system time." alt="" coords="221,5,400,47"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abf3e0ae490abd77f4c168e34222c21dc" title="Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control wheth..." alt="" coords="5,5,173,47"/>
</map>
</div>

</div>
</div>
<a id="a59f4842ab1588deac2746ecdafcd29b3" name="a59f4842ab1588deac2746ecdafcd29b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f4842ab1588deac2746ecdafcd29b3">&#9670;&nbsp;</a></span>set_timestamp_ntcip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::set_timestamp_ntcip </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>second_of_day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>millisecond_of_second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to set SPaT timestamp based on NTCIP message timestamp. The NTCIP message timestamp consists of a seconds_of_day and a milliseconds of second field. This method will get the current day from system time and then apply seconds and milliseconds informat as a offset for the current day. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">second_of_day</td><td>NTCIP message timestamp information (seconds of the current UTC day). </td></tr>
    <tr><td class="paramname">millisecond_of_second</td><td>NTCIP message timestamp information (millisecond of the current second). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00098">98</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>                                                                                                      {</div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty()) {</div>
<div class="line"><span class="lineno">  100</span>            intersection_state &amp;<a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a> = <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front();</div>
<div class="line"><span class="lineno">  101</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.set_timestamp_ntcip(second_of_day, millisecond_of_second);</div>
<div class="line"><span class="lineno">  102</span>            <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a> = <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.moy;</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  105</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Intersection State List is empty! Cannot populate timestamp information!&quot;</span>);</div>
<div class="line"><span class="lineno">  106</span>        }</div>
<div class="line"><span class="lineno">  107</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00066">update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3_icgraph" id="aclasssignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3_icgraph">
<area shape="rect" title="Method to set SPaT timestamp based on NTCIP message timestamp. The NTCIP message timestamp consists o..." alt="" coords="221,5,401,47"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abf3e0ae490abd77f4c168e34222c21dc" title="Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control wheth..." alt="" coords="5,5,173,47"/>
</map>
</div>

</div>
</div>
<a id="af97069bb9821745c89704f1b7ef0f8a5" name="af97069bb9821745c89704f1b7ef0f8a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97069bb9821745c89704f1b7ef0f8a5">&#9670;&nbsp;</a></span>toJson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string signal_phase_and_timing::spat::toJson </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serialize SPaT object to rapidjson::Value for writing as JSON string (Thread Safe). </p>
<dl class="section return"><dt>Returns</dt><dd>rapidjson::Value serialize SPaT object </dd></dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00005">5</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    5</span>                           {</div>
<div class="line"><span class="lineno">    6</span>        rapidjson::Document doc;</div>
<div class="line"><span class="lineno">    7</span>        <span class="keyword">auto</span> allocator = doc.GetAllocator();</div>
<div class="line"><span class="lineno">    8</span>        <span class="comment">// Create SPaT JSON value</span></div>
<div class="line"><span class="lineno">    9</span>        rapidjson::Value spat(rapidjson::kObjectType);</div>
<div class="line"><span class="lineno">   10</span>        <span class="comment">// Read lock</span></div>
<div class="line"><span class="lineno">   11</span>        std::shared_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">   12</span>        <span class="comment">// Populate SPat JSON</span></div>
<div class="line"><span class="lineno">   13</span>        spat.AddMember(<span class="stringliteral">&quot;time_stamp&quot;</span>, <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#ac08c93a991a59d5d32fb2a363460d874">timestamp</a>, allocator);</div>
<div class="line"><span class="lineno">   14</span>        spat.AddMember( <span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a0a562044bd6250986b309068c079ade0">name</a>, allocator);</div>
<div class="line"><span class="lineno">   15</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty() ) {</div>
<div class="line"><span class="lineno">   16</span>            rapidjson::Value list(rapidjson::kArrayType);</div>
<div class="line"><span class="lineno">   17</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;intersection : <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a> ) {</div>
<div class="line"><span class="lineno">   18</span>                list.PushBack(<a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.toJson(allocator), allocator);</div>
<div class="line"><span class="lineno">   19</span>            }</div>
<div class="line"><span class="lineno">   20</span>            spat.AddMember(<span class="stringliteral">&quot;intersections&quot;</span>, list, allocator);</div>
<div class="line"><span class="lineno">   21</span>        }<span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   22</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;SPaT message is missing required intersections property!&quot;</span>);</div>
<div class="line"><span class="lineno">   23</span>        }</div>
<div class="line"><span class="lineno">   24</span>        rapidjson::StringBuffer buffer;</div>
<div class="line"><span class="lineno">   25</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   26</span>            rapidjson::Writer&lt;rapidjson::StringBuffer&gt; writer(buffer);</div>
<div class="line"><span class="lineno">   27</span>            spat.Accept(writer);</div>
<div class="line"><span class="lineno">   28</span>        }</div>
<div class="line"><span class="lineno">   29</span>        <span class="keywordflow">catch</span>( <span class="keyword">const</span> std::exception &amp;e ) {</div>
<div class="line"><span class="lineno">   30</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(e.what());</div>
<div class="line"><span class="lineno">   31</span>        }</div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">return</span> buffer.GetString();</div>
<div class="line"><span class="lineno">   33</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8h_source.html#l00032">name</a>, <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>, and <a class="el" href="spat_8h_source.html#l00028">timestamp</a>.</p>

</div>
</div>
<a id="abf3e0ae490abd77f4c168e34222c21dc" name="abf3e0ae490abd77f4c168e34222c21dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3e0ae490abd77f4c168e34222c21dc">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structntcip_1_1ntcip__1202__ext.html">ntcip::ntcip_1202_ext</a> &amp;&#160;</td>
          <td class="paramname"><em>ntcip_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_ntcip_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control whether to use ntcip_1202_ext message provided timestamp or host unix timestamp information (Thread Safe). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ntcip_data</td><td>bytes from UDP socket, read into a struct </td></tr>
    <tr><td class="paramname">use_ntcip_timestamp</td><td>Bool flag to control whether to use ntcip_1202_ext message provided timestamp or host unix timestamp information. If true will use message timestamp. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00066">66</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>                                                                                {</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">phase_to_signal_group</a>.empty() || <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front().name.empty() || <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front().id == 0) {</div>
<div class="line"><span class="lineno">   68</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Before updating SPAT with NTCIP information spat::initialize() must be called! See README documentation!&quot;</span>);</div>
<div class="line"><span class="lineno">   69</span>        }</div>
<div class="line"><span class="lineno">   70</span>        <span class="comment">// Write lock</span></div>
<div class="line"><span class="lineno">   71</span>        std::unique_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">   72</span>        <span class="keywordflow">if</span> ( use_ntcip_timestamp ) {</div>
<div class="line"><span class="lineno">   73</span>            <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#a59f4842ab1588deac2746ecdafcd29b3">set_timestamp_ntcip</a>( ntcip_data.<a class="code hl_function" href="structntcip_1_1ntcip__1202__ext.html#af186e0f2ed0ef770ecc230c4af031a59">get_timestamp_seconds_of_day</a>(), ntcip_data.<a class="code hl_variable" href="structntcip_1_1ntcip__1202__ext.html#a8d066489dfd3a7b29753c91066e39f5d">spat_timestamp_msec</a>);</div>
<div class="line"><span class="lineno">   74</span>        } </div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   76</span>            <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ac664acbcf145d92f92605e3bfde11ce7">set_timestamp_local</a>();</div>
<div class="line"><span class="lineno">   77</span>        }</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#ae02c2e6b6a732834be0f8472270f7931">update_intersection_state</a>( ntcip_data );</div>
<div class="line"><span class="lineno">   79</span>        </div>
<div class="line"><span class="lineno">   80</span>        </div>
<div class="line"><span class="lineno">   81</span>        </div>
<div class="line"><span class="lineno">   82</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a59f4842ab1588deac2746ecdafcd29b3"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a59f4842ab1588deac2746ecdafcd29b3">signal_phase_and_timing::spat::set_timestamp_ntcip</a></div><div class="ttdeci">void set_timestamp_ntcip(const uint32_t second_of_day, const uint16_t millisecond_of_second)</div><div class="ttdoc">Method to set SPaT timestamp based on NTCIP message timestamp. The NTCIP message timestamp consists o...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00098">spat.cpp:98</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_ac664acbcf145d92f92605e3bfde11ce7"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#ac664acbcf145d92f92605e3bfde11ce7">signal_phase_and_timing::spat::set_timestamp_local</a></div><div class="ttdeci">void set_timestamp_local()</div><div class="ttdoc">Method to set SPaT timestamp based on system time.</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00109">spat.cpp:109</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_ae02c2e6b6a732834be0f8472270f7931"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#ae02c2e6b6a732834be0f8472270f7931">signal_phase_and_timing::spat::update_intersection_state</a></div><div class="ttdeci">void update_intersection_state(ntcip::ntcip_1202_ext &amp;ntcip_data)</div><div class="ttdoc">Method to update the front entry in the intersections list of intersection_state(s) with the provided...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00120">spat.cpp:120</a></div></div>
<div class="ttc" id="astructntcip_1_1ntcip__1202__ext_html_a8d066489dfd3a7b29753c91066e39f5d"><div class="ttname"><a href="structntcip_1_1ntcip__1202__ext.html#a8d066489dfd3a7b29753c91066e39f5d">ntcip::ntcip_1202_ext::spat_timestamp_msec</a></div><div class="ttdeci">uint16_t spat_timestamp_msec</div><div class="ttdoc">milliseconds of current second</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__1202__ext_8h_source.html#l00055">ntcip_1202_ext.h:55</a></div></div>
<div class="ttc" id="astructntcip_1_1ntcip__1202__ext_html_af186e0f2ed0ef770ecc230c4af031a59"><div class="ttname"><a href="structntcip_1_1ntcip__1202__ext.html#af186e0f2ed0ef770ecc230c4af031a59">ntcip::ntcip_1202_ext::get_timestamp_seconds_of_day</a></div><div class="ttdeci">uint32_t get_timestamp_seconds_of_day() const</div><div class="ttdoc">Returns 3 bytes translated into seconds of the UTC day message timestamp.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__1202__ext_8cpp_source.html#l00090">ntcip_1202_ext.cpp:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__1202__ext_8cpp_source.html#l00090">ntcip::ntcip_1202_ext::get_timestamp_seconds_of_day()</a>, <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8h_source.html#l00041">phase_to_signal_group</a>, <a class="el" href="spat_8cpp_source.html#l00109">set_timestamp_local()</a>, <a class="el" href="spat_8cpp_source.html#l00098">set_timestamp_ntcip()</a>, <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>, <a class="el" href="ntcip__1202__ext_8h_source.html#l00055">ntcip::ntcip_1202_ext::spat_timestamp_msec</a>, and <a class="el" href="spat_8cpp_source.html#l00120">update_intersection_state()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc_cgraph" id="aclasssignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc_cgraph">
<area shape="rect" title="Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control wheth..." alt="" coords="5,118,173,159"/>
<area shape="rect" href="structntcip_1_1ntcip__1202__ext.html#af186e0f2ed0ef770ecc230c4af031a59" title="Returns 3 bytes translated into seconds of the UTC day message timestamp." alt="" coords="240,5,411,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ac664acbcf145d92f92605e3bfde11ce7" title="Method to set SPaT timestamp based on system time." alt="" coords="236,85,415,126"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a59f4842ab1588deac2746ecdafcd29b3" title="Method to set SPaT timestamp based on NTCIP message timestamp. The NTCIP message timestamp consists o..." alt="" coords="235,150,415,191"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae02c2e6b6a732834be0f8472270f7931" title="Method to update the front entry in the intersections list of intersection_state(s) with the provided..." alt="" coords="221,215,429,257"/>
</map>
</div>

</div>
</div>
<a id="ae02c2e6b6a732834be0f8472270f7931" name="ae02c2e6b6a732834be0f8472270f7931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02c2e6b6a732834be0f8472270f7931">&#9670;&nbsp;</a></span>update_intersection_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::update_intersection_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structntcip_1_1ntcip__1202__ext.html">ntcip::ntcip_1202_ext</a> &amp;&#160;</td>
          <td class="paramname"><em>ntcip_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to update the front entry in the intersections list of intersection_state(s) with the provided NTCIP SPaT data (Thread Safe). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ntcip_data</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00120">120</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>                                                                          {</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.empty() ) {</div>
<div class="line"><span class="lineno">  122</span>            intersection_state &amp;<a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a> = <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front();</div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.update_movements(ntcip_data, <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a2c2dd359b921afee78e049ee9ce550dd">phase_to_signal_group</a>);</div>
<div class="line"><span class="lineno">  124</span>            <span class="comment">// Update Intersection Status</span></div>
<div class="line"><span class="lineno">  125</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.status = ntcip_data.<a class="code hl_variable" href="structntcip_1_1ntcip__1202__ext.html#a494df3028a1a0d9b6463401cf01f5b54">spat_intersection_status</a>;</div>
<div class="line"><span class="lineno">  126</span>            <span class="comment">// From V2X-Hub TODO: Investigate</span></div>
<div class="line"><span class="lineno">  127</span>            <a class="code hl_enumvalue" href="namespaceintersection__model.html#a9665ff9720af0b25d1c6a216e7bf66b4a26fef4087b2c10cb5ab7e4a5f5436ff4">intersection</a>.revision = 1;</div>
<div class="line"><span class="lineno">  128</span>        }</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Intersection State List is empty! Cannot populate status information!&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>        }</div>
<div class="line"><span class="lineno">  132</span>    }</div>
<div class="ttc" id="astructntcip_1_1ntcip__1202__ext_html_a494df3028a1a0d9b6463401cf01f5b54"><div class="ttname"><a href="structntcip_1_1ntcip__1202__ext.html#a494df3028a1a0d9b6463401cf01f5b54">ntcip::ntcip_1202_ext::spat_intersection_status</a></div><div class="ttdeci">uint8_t spat_intersection_status</div><div class="ttdoc">bit string for intersection status</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__1202__ext_8h_source.html#l00043">ntcip_1202_ext.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8h_source.html#l00041">phase_to_signal_group</a>, and <a class="el" href="ntcip__1202__ext_8h_source.html#l00043">ntcip::ntcip_1202_ext::spat_intersection_status</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00066">update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931_icgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931_icgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931_icgraph" id="aclasssignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931_icgraph">
<area shape="rect" title="Method to update the front entry in the intersections list of intersection_state(s) with the provided..." alt="" coords="221,5,429,47"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abf3e0ae490abd77f4c168e34222c21dc" title="Update spat object data using ntcip_1202_ext data received via UDP socket. Bool flag to control wheth..." alt="" coords="5,5,173,47"/>
</map>
</div>

</div>
</div>
<a id="a2382404fe3b23725a9a255564cf2b752" name="a2382404fe3b23725a9a255564cf2b752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2382404fe3b23725a9a255564cf2b752">&#9670;&nbsp;</a></span>update_spat_with_candidate_dpp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signal_phase_and_timing::spat::update_spat_with_candidate_dpp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;&#160;</td>
          <td class="paramname"><em>candidate_dpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt;&#160;</td>
          <td class="paramname"><em>tsc_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update spat <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">movement_event</a> list with desired phase plan information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">candidate_dpp</td><td>desired phase plan . </td></tr>
    <tr><td class="paramname">tsc_state</td><td>tsc state and signal group mapping information. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spat_8cpp_source.html#l00134">134</a> of file <a class="el" href="spat_8cpp_source.html">spat.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>    {</div>
<div class="line"><span class="lineno">  137</span>        std::unique_lock lock(<a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a58e4d382adf28bea9200a167794b3e31">spat_lock</a>);</div>
<div class="line"><span class="lineno">  138</span>        <span class="comment">//Removing all the future movement events from each intersection state because the future movements event should be recalculated using desired phase plan</span></div>
<div class="line"><span class="lineno">  139</span>        <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front().clear_future_movement_events();</div>
<div class="line"><span class="lineno">  140</span>        <span class="keyword">auto</span> states = <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front().states;</div>
<div class="line"><span class="lineno">  141</span>        <span class="comment">// Loop through desired phase plan</span></div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordtype">bool</span> is_processing_first_desired_green = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;desired_sg_green_timing : candidate_dpp.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>)</div>
<div class="line"><span class="lineno">  144</span>        {</div>
<div class="line"><span class="lineno">  145</span>            <span class="keywordflow">if</span> (desired_sg_green_timing.signal_groups.empty())</div>
<div class="line"><span class="lineno">  146</span>            {</div>
<div class="line"><span class="lineno">  147</span>                <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Desired phase plan signal group ids list is empty. No update.&quot;</span>);</div>
<div class="line"><span class="lineno">  148</span>            }</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>            <span class="comment">// Loop through current spat and assuming that current spat only has the current movement event and does not contain future movement events</span></div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;movement_state : states)</div>
<div class="line"><span class="lineno">  152</span>            {</div>
<div class="line"><span class="lineno">  153</span>                <span class="keywordtype">int</span> current_signal_group_id = movement_state.signal_group;</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>                <span class="comment">// Before we add future movement events to the movement event list, the current movement event list should only contains the current movement event</span></div>
<div class="line"><span class="lineno">  156</span>                <span class="keywordflow">if</span> (movement_state.state_time_speed.size() &gt; 1)</div>
<div class="line"><span class="lineno">  157</span>                {</div>
<div class="line"><span class="lineno">  158</span>                    <span class="keywordflow">throw</span> signal_phase_and_timing_exception(<span class="stringliteral">&quot;Movement event list has more than one events, not usable when adding future movement events. Associated with Signal Group: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(current_signal_group_id));</div>
<div class="line"><span class="lineno">  159</span>                }</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>                <span class="comment">// Get movement_state by reference. With this reference, it can update the original SPAT movement state list</span></div>
<div class="line"><span class="lineno">  162</span>                <span class="keyword">auto</span> &amp;cur_movement_state_ref = <a class="code hl_variable" href="classsignal__phase__and__timing_1_1spat.html#a1ab4b5232e535810906b7076d08812ca">intersections</a>.front().get_movement(current_signal_group_id);</div>
<div class="line"><span class="lineno">  163</span>                <span class="comment">// Processing the next current or first desired future movement event from the desired phase plan</span></div>
<div class="line"><span class="lineno">  164</span>                <span class="keywordflow">if</span> (is_processing_first_desired_green)</div>
<div class="line"><span class="lineno">  165</span>                {</div>
<div class="line"><span class="lineno">  166</span>                   <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593">process_first_desired_green</a>(cur_movement_state_ref, desired_sg_green_timing, tsc_state);</div>
<div class="line"><span class="lineno">  167</span>                }</div>
<div class="line"><span class="lineno">  168</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  169</span>                {</div>
<div class="line"><span class="lineno">  170</span>                    <span class="comment">// Processing the next future desired future movement event from the desired phase plan</span></div>
<div class="line"><span class="lineno">  171</span>                    <a class="code hl_function" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c">process_second_onward_desired_green</a>(cur_movement_state_ref, desired_sg_green_timing, tsc_state);</div>
<div class="line"><span class="lineno">  172</span>                }</div>
<div class="line"><span class="lineno">  173</span>            }</div>
<div class="line"><span class="lineno">  174</span>            is_processing_first_desired_green = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  175</span>        }</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a40277118c7dbeb9f5d1dfe414ea2f28c"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c">signal_phase_and_timing::spat::process_second_onward_desired_green</a></div><div class="ttdeci">void process_second_onward_desired_green(signal_phase_and_timing::movement_state &amp;cur_movement_state_ref, const streets_desired_phase_plan::signal_group2green_phase_timing &amp;desired_sg_green_timing, const std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; tsc_state) const</div><div class="ttdoc">Process all desired green signal group and duration in desired phase plan that are not the first entr...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00298">spat.cpp:298</a></div></div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1spat_html_a67c64af528dd1d1dcced1dbf2729a593"><div class="ttname"><a href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593">signal_phase_and_timing::spat::process_first_desired_green</a></div><div class="ttdeci">void process_first_desired_green(movement_state &amp;cur_movement_state_ref, const streets_desired_phase_plan::signal_group2green_phase_timing &amp;desired_sg_green_timing, const std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; tsc_state) const</div><div class="ttdoc">Process first desired green signal group and duration in desired phase plan. Populate movement_event ...</div><div class="ttdef"><b>Definition:</b> <a href="spat_8cpp_source.html#l00178">spat.cpp:178</a></div></div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1streets__desired__phase__plan_html_a03eca534118891c3c183eed332b33810"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a></div><div class="ttdeci">std::vector&lt; signal_group2green_phase_timing &gt; desired_phase_plan</div><div class="ttdoc">Descriptive name for this collection.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a>, <a class="el" href="spat_8h_source.html#l00036">intersections</a>, <a class="el" href="spat_8cpp_source.html#l00178">process_first_desired_green()</a>, <a class="el" href="spat_8cpp_source.html#l00298">process_second_onward_desired_green()</a>, <a class="el" href="movement__state_8h_source.html#l00025">signal_phase_and_timing::movement_state::signal_group</a>, <a class="el" href="spat_8h_source.html#l00046">spat_lock</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsignal__phase__and__timing_1_1spat_a2382404fe3b23725a9a255564cf2b752_cgraph.png" border="0" usemap="#aclasssignal__phase__and__timing_1_1spat_a2382404fe3b23725a9a255564cf2b752_cgraph" alt=""/></div>
<map name="aclasssignal__phase__and__timing_1_1spat_a2382404fe3b23725a9a255564cf2b752_cgraph" id="aclasssignal__phase__and__timing_1_1spat_a2382404fe3b23725a9a255564cf2b752_cgraph">
<area shape="rect" title="Update spat movement_event list with desired phase plan information." alt="" coords="5,85,173,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a67c64af528dd1d1dcced1dbf2729a593" title="Process first desired green signal group and duration in desired phase plan. Populate movement_event ..." alt="" coords="221,85,389,141"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a40277118c7dbeb9f5d1dfe414ea2f28c" title="Process all desired green signal group and duration in desired phase plan that are not the first entr..." alt="" coords="221,5,389,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="269,165,341,192"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#abbdc76328ccf9f1d15d5d15e6241e7d4" title="Populate movement_event list for given movement_state with green event, yellow change event,..." alt="" coords="437,5,684,61"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#ae996635c8e4bc134da15362e7813fade" title="Populate movement_event with movement_phase_state, start_time and end_time(min_end_time)." alt="" coords="732,86,947,127"/>
<area shape="rect" href="classsignal__phase__and__timing_1_1spat.html#a039ae20f62541487dac614cf260c6ecd" title="Find the signal group id for the signal group in a pair (movement group) that will have the largest y..." alt="" coords="443,85,678,141"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#a2db5c3a1b3948f6e6e75ce2ae7311f68" title="Set min_end_time for movement event. Method expects epoch time in milliseconds and converts to tenths..." alt="" coords="995,39,1163,95"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#aeeff6dd233876204f6758aaf09d532c6" title="Set start_time for movement_event. Method expects epoch time in milliseconds and converts to tenths o..." alt="" coords="995,119,1163,175"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1time__change__details.html#acf7978bdb4500f5d084b0d814a28f9c4" title="Convert epoch timestamp in milliseconds into tenths of seconds of the current UTC hour...." alt="" coords="1211,71,1392,142"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#ace444a4a74b0cea211bf89ed89371bae" title="Static access to the CarmaClock timeInMilliseconds method (see https://github.com/usdot&#45;fhwa&#45;stol/car..." alt="" coords="1440,86,1632,127"/>
<area shape="rect" href="classstreets__service_1_1streets__clock__singleton.html#a9421907fc5114a7d1077cef450ca5c94" title=" " alt="" coords="1680,86,1883,127"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1ab4b5232e535810906b7076d08812ca" name="a1ab4b5232e535810906b7076d08812ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab4b5232e535810906b7076d08812ca">&#9670;&nbsp;</a></span>intersections</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">intersection_state</a>&gt; signal_phase_and_timing::spat::intersections</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets of SPaT data ( one per intersection). </p>

<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00036">36</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00035">fromJson()</a>, <a class="el" href="spat_8cpp_source.html#l00424">get_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00084">initialize_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00449">operator==()</a>, <a class="el" href="spat_8cpp_source.html#l00442">set_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00109">set_timestamp_local()</a>, <a class="el" href="spat_8cpp_source.html#l00098">set_timestamp_ntcip()</a>, <a class="el" href="spat_8cpp_source.html#l00005">toJson()</a>, <a class="el" href="spat_8cpp_source.html#l00066">update()</a>, <a class="el" href="spat_8cpp_source.html#l00120">update_intersection_state()</a>, and <a class="el" href="spat_8cpp_source.html#l00134">update_spat_with_candidate_dpp()</a>.</p>

</div>
</div>
<a id="a0a562044bd6250986b309068c079ade0" name="a0a562044bd6250986b309068c079ade0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a562044bd6250986b309068c079ade0">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string signal_phase_and_timing::spat::name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Descriptive name for this collection. </p>

<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00032">32</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00035">fromJson()</a>, <a class="el" href="spat_8cpp_source.html#l00432">get_name()</a>, <a class="el" href="spat_8cpp_source.html#l00449">operator==()</a>, and <a class="el" href="spat_8cpp_source.html#l00005">toJson()</a>.</p>

</div>
</div>
<a id="a2c2dd359b921afee78e049ee9ce550dd" name="a2c2dd359b921afee78e049ee9ce550dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2dd359b921afee78e049ee9ce550dd">&#9670;&nbsp;</a></span>phase_to_signal_group</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, int&gt; signal_phase_and_timing::spat::phase_to_signal_group</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of phase number(NTCIP) to signal group(J2735). </p>

<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00041">41</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00084">initialize_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00066">update()</a>, and <a class="el" href="spat_8cpp_source.html#l00120">update_intersection_state()</a>.</p>

</div>
</div>
<a id="a58e4d382adf28bea9200a167794b3e31" name="a58e4d382adf28bea9200a167794b3e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e4d382adf28bea9200a167794b3e31">&#9670;&nbsp;</a></span>spat_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_mutex signal_phase_and_timing::spat::spat_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read/Write lock for concurrent access for read operations and exclusive access for write operations. </p>

<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00046">46</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00035">fromJson()</a>, <a class="el" href="spat_8cpp_source.html#l00424">get_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00432">get_name()</a>, <a class="el" href="spat_8cpp_source.html#l00437">get_timestamp()</a>, <a class="el" href="spat_8cpp_source.html#l00084">initialize_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00442">set_intersection()</a>, <a class="el" href="spat_8cpp_source.html#l00005">toJson()</a>, <a class="el" href="spat_8cpp_source.html#l00066">update()</a>, and <a class="el" href="spat_8cpp_source.html#l00134">update_spat_with_candidate_dpp()</a>.</p>

</div>
</div>
<a id="ac08c93a991a59d5d32fb2a363460d874" name="ac08c93a991a59d5d32fb2a363460d874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac08c93a991a59d5d32fb2a363460d874">&#9670;&nbsp;</a></span>timestamp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t signal_phase_and_timing::spat::timestamp = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timestamp in minutes of the UTC year (see J2735 SPaT message documentation for reference). </p>

<p class="definition">Definition at line <a class="el" href="spat_8h_source.html#l00028">28</a> of file <a class="el" href="spat_8h_source.html">spat.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spat_8cpp_source.html#l00035">fromJson()</a>, <a class="el" href="spat_8cpp_source.html#l00437">get_timestamp()</a>, <a class="el" href="spat_8cpp_source.html#l00449">operator==()</a>, <a class="el" href="spat_8cpp_source.html#l00109">set_timestamp_local()</a>, <a class="el" href="spat_8cpp_source.html#l00098">set_timestamp_ntcip()</a>, and <a class="el" href="spat_8cpp_source.html#l00005">toJson()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>streets_utils/streets_signal_phase_and_timing/include/<a class="el" href="spat_8h_source.html">spat.h</a></li>
<li>streets_utils/streets_signal_phase_and_timing/src/models/<a class="el" href="spat_8cpp_source.html">spat.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesignal__phase__and__timing.html">signal_phase_and_timing</a></li><li class="navelem"><a class="el" href="classsignal__phase__and__timing_1_1spat.html">spat</a></li>
    <li class="footer">Generated on Wed Aug 21 2024 18:29:55 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
