<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: route/src/route_generator_worker.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('route__generator__worker_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">route_generator_worker.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="route__generator__worker_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (C) 2020-2022 LEIDOS.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * use this file except in compliance with the License. You may obtain a copy of</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * the License at</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> *</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> * License for the specific language governing permissions and limitations under</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> * the License.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> */</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="route__generator__worker_8hpp.html">route/route_generator_worker.hpp</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceroute.html">route</a> {</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#ab839738019c76473ec1b80ba7511fe85">   21</a></span>    <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ab839738019c76473ec1b80ba7511fe85">RouteGeneratorWorker::RouteGeneratorWorker</a>(tf2_ros::Buffer&amp; tf2_buffer)</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>        : tf2_buffer_(tf2_buffer) {}</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a3e4d9bf3a216ce81a72dd740a3b180f7">   24</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a3e4d9bf3a216ce81a72dd740a3b180f7">RouteGeneratorWorker::setWorldModelPtr</a>(<a class="code hl_typedef" href="namespacecarma__wm.html#a3ac653959e0b6198cae274d68b343228">carma_wm::WorldModelConstPtr</a> wm)</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    {</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a> = wm;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    }</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a389da36d31257b271cf1753f3dc0eb4d">   29</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a389da36d31257b271cf1753f3dc0eb4d">RouteGeneratorWorker::setLoggerInterface</a>(rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger)</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    {</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a> = logger;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a799d0334b2de692ba0a7364f568f6e5e">setLoggerInterface</a>(logger);</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    }</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a54b231365dda2e27fb4242deb35b8abf">   35</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a54b231365dda2e27fb4242deb35b8abf">RouteGeneratorWorker::setClock</a>(rclcpp::Clock::SharedPtr clock)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae050e9501499b6017955f8b4f963a87e">clock_</a> = clock;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#ac63761bf325459098e5efce7879d4c56">   40</a></span>    lanelet::Optional&lt;lanelet::routing::Route&gt; <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ac63761bf325459098e5efce7879d4c56">RouteGeneratorWorker::routing</a>(<span class="keyword">const</span> lanelet::BasicPoint2d start,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>                                                                             <span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; via,</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>                                                                             <span class="keyword">const</span> lanelet::BasicPoint2d end,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>                                                                             <span class="keyword">const</span> lanelet::LaneletMapConstPtr map_pointer,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>                                                                             <span class="keyword">const</span> <a class="code hl_typedef" href="namespacecarma__wm.html#adf411948c7e36aa0fb3071195e103015">carma_wm::LaneletRoutingGraphConstPtr</a> graph_pointer)<span class="keyword"> const</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>        <span class="comment">// find start lanelet</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        <span class="keyword">auto</span> start_lanelet_vector = lanelet::geometry::findNearest(map_pointer-&gt;laneletLayer, start, 1);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        <span class="comment">// check if there are any lanelets in the map</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        <span class="keywordflow">if</span>(start_lanelet_vector.empty())</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Found no lanelets in the map. Routing cannot be done.&quot;</span>);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>            <span class="keywordflow">return</span> lanelet::Optional&lt;lanelet::routing::Route&gt;();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        }</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <span class="comment">// extract starting lanelet</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <span class="keyword">auto</span> start_lanelet = lanelet::ConstLanelet(start_lanelet_vector[0].second.constData());</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <span class="comment">// find end lanelet</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <span class="keyword">auto</span> end_lanelet_vector = lanelet::geometry::findNearest(map_pointer-&gt;laneletLayer, end, 1);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="comment">// extract end lanelet</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        <span class="keyword">auto</span> end_lanelet = lanelet::ConstLanelet(end_lanelet_vector[0].second.constData());</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        <span class="comment">// find all via lanelets</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        lanelet::ConstLanelets via_lanelets_vector;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <span class="keywordflow">for</span>(lanelet::BasicPoint2d <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a> : via)</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>            <span class="keyword">auto</span> via_lanelet_vector = lanelet::geometry::findNearest(map_pointer-&gt;laneletLayer, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, 1);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>            via_lanelets_vector.emplace_back(lanelet::ConstLanelet(via_lanelet_vector[0].second.constData()));</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        }</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        <span class="comment">// routing</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <span class="keywordflow">return</span> graph_pointer-&gt;getRouteVia(start_lanelet, via_lanelets_vector, end_lanelet);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a5d8196aea1d3046c46054724a044bace">   71</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a5d8196aea1d3046c46054724a044bace">RouteGeneratorWorker::setReroutingChecker</a>(<span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>()&gt; inputFunction)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#abe0f8dcb6f408e0891923385c57b55f7">reroutingChecker</a>=inputFunction;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a1f1c08a9230de2d00cdd48aa65cdf3cf">   76</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a1f1c08a9230de2d00cdd48aa65cdf3cf">RouteGeneratorWorker::getAvailableRouteCb</a>(<span class="keyword">const</span> std::shared_ptr&lt;rmw_request_id_t&gt;,</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                                <span class="keyword">const</span> std::shared_ptr&lt;carma_planning_msgs::srv::GetAvailableRoutes::Request&gt;,</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                                std::shared_ptr&lt;carma_planning_msgs::srv::GetAvailableRoutes::Response&gt; resp)</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    {   </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="comment">// Return if the the directory specified by route_file_path_ does not exist</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">if</span>(!boost::filesystem::exists(boost::filesystem::path(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route_file_path_</a>)))</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;No directory exists at &quot;</span> &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route_file_path_</a>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <span class="comment">// Read all route files in the given directory</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        boost::filesystem::directory_iterator end_point;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">for</span>(boost::filesystem::directory_iterator itr(boost::filesystem::path(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route_file_path_</a>)); itr != end_point; ++itr)</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            <span class="comment">// Skip if the iterator has landed on a folder</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>            <span class="keywordflow">if</span>(boost::filesystem::is_directory(itr-&gt;status()))</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>            {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            }</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            <span class="keyword">auto</span> full_file_name = itr-&gt;path().filename().generic_string();</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>            carma_planning_msgs::msg::Route route_msg;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            <span class="comment">// Skip if &#39;.csv&#39; is not found in the file name</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            <span class="keywordflow">if</span>(full_file_name.find(<span class="stringliteral">&quot;.csv&quot;</span>) == std::string::npos)</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            { </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            }          </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            <span class="comment">// Assume route files ending with &quot;.csv&quot;, before that is the actual route name</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            route_msg.route_id = full_file_name.substr(0, full_file_name.find(<span class="stringliteral">&quot;.csv&quot;</span>));</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            std::ifstream fin(itr-&gt;path().generic_string());</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            std::string dest_name;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            <span class="keywordflow">if</span>(fin.is_open())</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>            {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                <span class="keywordflow">while</span> (!fin.eof())</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                    std::string temp;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                    std::getline(fin, temp);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                    <span class="keywordflow">if</span>(temp != <span class="stringliteral">&quot;&quot;</span>) dest_name = temp;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                fin.close();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>            } </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;File open failed...&quot;</span>);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>            }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            <span class="keyword">auto</span> last_comma = dest_name.find_last_of(<span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>            <span class="keywordflow">if</span>(!std::isdigit(dest_name.substr(last_comma + 1).at(0)))</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>            {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                route_msg.route_name = dest_name.substr(last_comma + 1);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                resp-&gt;available_routes.push_back(move(route_msg));</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>            }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        }</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>            </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="comment">//after route path object is available to select, worker will able to transit state and provide route selection service</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">if</span>(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">getRouteState</a>() == RouteStateWorker::RouteState::LOADING) </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_LOADED);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_LOADED);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a4876f5b46ea96d75ff731358d015c351">  142</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a4876f5b46ea96d75ff731358d015c351">RouteGeneratorWorker::setRouteFilePath</a>(<span class="keyword">const</span> std::string&amp; path)</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route_file_path_</a> = path;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <span class="comment">// after route path is set, worker will able to transit state and provide route selection service</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_LOADED);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_LOADED);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    }</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a">  150</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a">RouteGeneratorWorker::setActiveRouteCb</a>(<span class="keyword">const</span> std::shared_ptr&lt;rmw_request_id_t&gt;,</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                                <span class="keyword">const</span> std::shared_ptr&lt;carma_planning_msgs::srv::SetActiveRoute::Request&gt; req,</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                                std::shared_ptr&lt;carma_planning_msgs::srv::SetActiveRoute::Response&gt; resp)</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    {   </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="comment">// only allow a new route to be activated in route selection state</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <span class="keywordflow">if</span>(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">getRouteState</a>() != RouteStateWorker::RouteState::SELECTION)</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;System is already following a route.&quot;</span>);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ALREADY_FOLLOWING_ROUTE;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        }</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Valid state proceeding with selection&quot;</span>);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <span class="comment">// entering to routing state once destinations are picked</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_SELECTED);</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_SELECTED);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>) {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;No vehicle position. Routing cannot be completed.&quot;</span>);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTING_FAILURE;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        }</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        <span class="comment">// Check if the map projection is available</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a7ebc86730c27ae902e84dd172fe6a59a">map_proj_</a>) {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Could not generate route as there was no map projection available&quot;</span>);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTING_FAILURE;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="comment">// load destination points in map frame</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        std::vector&lt;lanelet::BasicPoint3d&gt; destination_points;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">if</span>(req-&gt;choice == carma_planning_msgs::srv::SetActiveRoute::Request::ROUTE_ID)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        {   </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            RCLCPP_INFO_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;set_active_route_cb: Selected Route ID: &quot;</span> &lt;&lt; req-&gt;route_id);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            std::vector&lt;carma_v2x_msgs::msg::Position3D&gt; gps_destination_points = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ac73746bfbb1465b31651bcfe2481b1d1">loadRouteDestinationGpsPointsFromRouteId</a>(req-&gt;route_id);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            destination_points = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#abb4a34fba858902068cede9dcdfa67cf">loadRouteDestinationsInMapFrame</a>(gps_destination_points);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(req-&gt;choice == carma_planning_msgs::srv::SetActiveRoute::Request::DESTINATION_POINTS_ARRAY)</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            RCLCPP_INFO_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;set_active_route_cb: Destination Points array of size &quot;</span> &lt;&lt; req-&gt;destination_points.size());</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            destination_points = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#abb4a34fba858902068cede9dcdfa67cf">loadRouteDestinationsInMapFrame</a>(req-&gt;destination_points);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="comment">// Check that the requested route is valid with at least one destination point</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        <span class="keywordflow">if</span>(destination_points.size() &lt; 1)</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Provided route contains no destination points. Routing cannot be completed.&quot;</span>);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTE_FILE_ERROR;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        }</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a> || !<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap()) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;World model has not been initialized.&quot;</span>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTING_FAILURE;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="comment">// convert points in 2d to map frame</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a> = lanelet::utils::transform(destination_points, [](<span class="keyword">auto</span> <a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>) { <span class="keywordflow">return</span> lanelet::traits::to2D(<a class="code hl_variable" href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a>); });</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="comment">// Add vehicle as first destination point</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="keyword">auto</span> destination_points_in_map_with_vehicle = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        lanelet::BasicPoint2d vehicle_position(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>-&gt;pose.position.x, <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>-&gt;pose.position.y);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        destination_points_in_map_with_vehicle.insert(destination_points_in_map_with_vehicle.begin(), vehicle_position);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="comment">// validate if the points are geometrically in the map</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> pt : destination_points_in_map_with_vehicle)</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        {</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getLaneletsFromPoint(pt, 1)).empty())</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Route Generator: &quot;</span> &lt;&lt; idx </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                        &lt;&lt; <span class="stringliteral">&quot;th destination point is not in the map, x: &quot;</span> &lt;&lt; pt.x() &lt;&lt; <span class="stringliteral">&quot; y: &quot;</span> &lt;&lt; pt.y());</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTE_FILE_ERROR;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            }</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            idx ++;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <span class="comment">// get route graph from world model object</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        <span class="keyword">auto</span> p = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMapRoutingGraph();</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        <span class="comment">// generate a route</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keyword">auto</span> <a class="code hl_namespace" href="namespaceroute.html">route</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ac63761bf325459098e5efce7879d4c56">routing</a>(destination_points_in_map_with_vehicle.front(),</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                            std::vector&lt;lanelet::BasicPoint2d&gt;(destination_points_in_map_with_vehicle.begin() + 1, destination_points_in_map_with_vehicle.end() - 1),</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                            destination_points_in_map_with_vehicle.back(),</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap(), <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMapRoutingGraph());</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="comment">// check if route succeeded</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keywordflow">if</span>(!<a class="code hl_namespace" href="namespaceroute.html">route</a>)</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Cannot find a route passing all destinations.&quot;</span>);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTING_FAILURE;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#af67153a36940ea3e4dda5e90101f5b2d">checkForDuplicateLaneletsInShortestPath</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>.get()))</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;At least one duplicate Lanelet ID occurs in the shortest path. Routing cannot be completed.&quot;</span>);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            resp-&gt;error_status = carma_planning_msgs::srv::SetActiveRoute::Response::ROUTING_FAILURE;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        }</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="comment">// Specify the end point of the route that is inside the last lanelet</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        lanelet::Point3d end_point{lanelet::utils::getId(), destination_points_in_map_with_vehicle.back().x(), destination_points_in_map_with_vehicle.back().y(), 0};</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <a class="code hl_namespace" href="namespaceroute.html">route</a>-&gt;setEndPoint(end_point);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="comment">// update route message</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#acf66ad1c4a68e68b769c2aec9d45efd7">composeRouteMsg</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keywordtype">id</span> : <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_path_lanelet_ids)</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            <span class="keyword">auto</span> ll = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap()-&gt;laneletLayer.get(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae4d01228e938867a13cf505fb35b16c6">route_llts</a>.push_back(ll);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name = req-&gt;route_id;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route_marker_msg_</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b">composeRouteMarkerMsg</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.header.stamp = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae050e9501499b6017955f8b4f963a87e">clock_</a>-&gt;now();</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.header.frame_id = <span class="stringliteral">&quot;map&quot;</span>;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.map_version = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMapVersion();</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <span class="comment">// since routing is done correctly, transit to route following state</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_STARTED);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_STARTED);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="comment">// set publish flag such that updated msg will be published in the next spin</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a235892b04febaed76747202c64340f90">new_route_msg_generated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#af67153a36940ea3e4dda5e90101f5b2d">  296</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#af67153a36940ea3e4dda5e90101f5b2d">RouteGeneratorWorker::checkForDuplicateLaneletsInShortestPath</a>(<span class="keyword">const</span> lanelet::routing::Route&amp; <a class="code hl_namespace" href="namespaceroute.html">route</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="comment">// Create a vector for the lanelet IDs in the shortest path</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        std::vector&lt;lanelet::Id&gt; shortest_path_lanelet_ids;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <span class="comment">// Iterate through the shortest path to populate shortest_path_lanelet_ids with lanelet IDs</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll : <a class="code hl_namespace" href="namespaceroute.html">route</a>.shortestPath())</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        {</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            shortest_path_lanelet_ids.push_back(ll.id());</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="comment">// Verify that there are no duplicate lanelet IDs in the shortest path</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        std::sort(shortest_path_lanelet_ids.begin(), shortest_path_lanelet_ids.end());</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="keywordflow">if</span> (std::adjacent_find(shortest_path_lanelet_ids.begin(), shortest_path_lanelet_ids.end()) != shortest_path_lanelet_ids.end())</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>            <span class="comment">// Route&#39;s shortest path contains duplicate lanelet IDs</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="comment">// Route&#39;s shortest path does not duplicate lanelet IDs</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#abb4a34fba858902068cede9dcdfa67cf">  320</a></span>    std::vector&lt;lanelet::BasicPoint3d&gt; <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#abb4a34fba858902068cede9dcdfa67cf">RouteGeneratorWorker::loadRouteDestinationsInMapFrame</a>(<span class="keyword">const</span> std::vector&lt;carma_v2x_msgs::msg::Position3D&gt;&amp; destinations)<span class="keyword"> const</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a7ebc86730c27ae902e84dd172fe6a59a">map_proj_</a>) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;loadRouteDestinationsInMapFrame (using destination points array) before map projection was set&quot;</span>);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        }</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        lanelet::projection::LocalFrameProjector projector(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a7ebc86730c27ae902e84dd172fe6a59a">map_proj_</a>.get().c_str()); <span class="comment">// Build map projector</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="comment">// Process each point in &#39;destinations&#39;</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        std::vector&lt;lanelet::BasicPoint3d&gt; destination_points;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; destination : destinations)</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            lanelet::GPSPoint coordinate;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            coordinate.lon = destination.longitude;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            coordinate.lat = destination.latitude;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="keywordflow">if</span>(destination.elevation_exists)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                coordinate.ele = destination.elevation;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                coordinate.ele = 0.0;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>            }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>            destination_points.emplace_back(projector.forward(coordinate));</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keywordflow">return</span> destination_points;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#ac73746bfbb1465b31651bcfe2481b1d1">  351</a></span>    std::vector&lt;carma_v2x_msgs::msg::Position3D&gt; <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ac73746bfbb1465b31651bcfe2481b1d1">RouteGeneratorWorker::loadRouteDestinationGpsPointsFromRouteId</a>(<span class="keyword">const</span> std::string&amp; route_id)<span class="keyword"> const</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="comment">// compose full path of the route file</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        std::string route_file_name = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route_file_path_</a> + route_id + <span class="stringliteral">&quot;.csv&quot;</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        std::ifstream fs(route_file_name);</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        std::string line;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <span class="comment">// read each line in route file (if any)</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        std::vector&lt;carma_v2x_msgs::msg::Position3D&gt; destination_points;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="keywordflow">while</span>(std::getline(fs, line))</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>            carma_v2x_msgs::msg::Position3D gps_point;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            <span class="comment">// lat lon and elev is seperated by comma</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <span class="keyword">auto</span> comma = line.find(<span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            <span class="comment">// convert lon value in degrees from string</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            gps_point.longitude = std::stof(line.substr(0, comma));</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            line.erase(0, comma + 1);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            comma = line.find(<span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="comment">// convert lat value in degrees from string</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            gps_point.latitude = std::stof(line.substr(0, comma));</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <span class="comment">// elevation is in meters</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            line.erase(0, comma + 1);</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            comma = line.find(<span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            gps_point.elevation = std::stof(line.substr(0, comma));</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            gps_point.elevation_exists = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            destination_points.push_back(gps_point);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordflow">return</span> destination_points;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    }</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b">  384</a></span>    visualization_msgs::msg::Marker <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b">RouteGeneratorWorker::composeRouteMarkerMsg</a>(<span class="keyword">const</span> lanelet::Optional&lt;lanelet::routing::Route&gt;&amp; <a class="code hl_namespace" href="namespaceroute.html">route</a>)</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        std::vector&lt;lanelet::ConstPoint3d&gt; points;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="keyword">auto</span> end_point_3d = <a class="code hl_namespace" href="namespaceroute.html">route</a>.get().getEndPoint();</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="keyword">auto</span> last_ll = <a class="code hl_namespace" href="namespaceroute.html">route</a>.get().shortestPath().back();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        <span class="keywordtype">double</span> end_point_downtrack = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a>(last_ll, {end_point_3d.x(), end_point_3d.y()}).downtrack;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        <span class="keywordtype">double</span> lanelet_downtrack = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a>(last_ll, last_ll.centerline().back().basicPoint2d()).<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <span class="comment">// get number of points to display using ratio of the downtracks</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <span class="keyword">auto</span> points_until_end_point = <a class="code hl_class" href="classint.html">int</a> (last_ll.centerline().size() * (end_point_downtrack / lanelet_downtrack));</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>  </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll : <a class="code hl_namespace" href="namespaceroute.html">route</a>.get().shortestPath())</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            <span class="keywordflow">if</span> (ll.id() == last_ll.id())</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; points_until_end_point; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                    points.push_back(ll.centerline()[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>]);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                }</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>            <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pt : ll.centerline())</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>                points.push_back(pt);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>            }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route_marker_msg_</a>.points={};</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        <span class="comment">// create the marker msgs</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        visualization_msgs::msg::Marker marker;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        marker.header.frame_id = <span class="stringliteral">&quot;map&quot;</span>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        marker.header.stamp = rclcpp::Time();</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        marker.type = visualization_msgs::msg::Marker::SPHERE_LIST;<span class="comment">//</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        marker.action = visualization_msgs::msg::Marker::ADD;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        marker.ns = <span class="stringliteral">&quot;route_visualizer&quot;</span>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        marker.scale.x = 0.65;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        marker.scale.y = 0.65;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        marker.scale.z = 0.65;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        marker.frame_locked = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        marker.id = 0;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        marker.color.r = 1.0F;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        marker.color.g = 1.0F;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        marker.color.b = 1.0F;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        marker.color.a = 1.0F;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <span class="keywordflow">if</span> (points.empty())</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            RCLCPP_WARN_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;No central line points! Returning&quot;</span>);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route_marker_msg_</a>;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        }</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; points.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>=<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>+5)</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            geometry_msgs::msg::Point temp_point;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            temp_point.x = points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].x();</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            temp_point.y = points[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].y();</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            temp_point.z = 1; <span class="comment">//to show up on top of the lanelet lines</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>            </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>            marker.points.push_back(temp_point);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        }</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a44d2aa8c2f5818ab20a5edf541dc4da3">new_route_marker_generated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <span class="keywordflow">return</span> marker;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#acf66ad1c4a68e68b769c2aec9d45efd7">  450</a></span>    carma_planning_msgs::msg::Route <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#acf66ad1c4a68e68b769c2aec9d45efd7">RouteGeneratorWorker::composeRouteMsg</a>(<span class="keyword">const</span> lanelet::Optional&lt;lanelet::routing::Route&gt;&amp; <a class="code hl_namespace" href="namespaceroute.html">route</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        carma_planning_msgs::msg::Route msg;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="comment">// iterate through the shortest path to populate shortest_path_lanelet_ids</span></div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll : <a class="code hl_namespace" href="namespaceroute.html">route</a>.get().shortestPath())</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            msg.shortest_path_lanelet_ids.push_back(ll.id());</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        }</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        <span class="comment">// iterate through all lanelet in the route to populate route_path_lanelet_ids</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll : <a class="code hl_namespace" href="namespaceroute.html">route</a>.get().laneletSubmap()-&gt;laneletLayer)</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        {</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            msg.route_path_lanelet_ids.push_back(ll.id());</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        }</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        msg.end_point.x  = <a class="code hl_namespace" href="namespaceroute.html">route</a>-&gt;getEndPoint().x();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        msg.end_point.y  = <a class="code hl_namespace" href="namespaceroute.html">route</a>-&gt;getEndPoint().y();</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        msg.end_point.z  = <a class="code hl_namespace" href="namespaceroute.html">route</a>-&gt;getEndPoint().z();</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        <span class="keywordflow">return</span> msg;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#af36eb1766ecdb1016d366b80921591cd">  470</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#af36eb1766ecdb1016d366b80921591cd">RouteGeneratorWorker::abortActiveRouteCb</a>(<span class="keyword">const</span> std::shared_ptr&lt;rmw_request_id_t&gt;,</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                                <span class="keyword">const</span> std::shared_ptr&lt;carma_planning_msgs::srv::AbortActiveRoute::Request&gt;,</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                                std::shared_ptr&lt;carma_planning_msgs::srv::AbortActiveRoute::Response&gt; resp)</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <span class="comment">// only make sense to abort when it is in route following state</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keywordflow">if</span>(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">getRouteState</a>() == RouteStateWorker::RouteState::FOLLOWING)</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_ABORTED);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>            resp-&gt;error_status = carma_planning_msgs::srv::AbortActiveRoute::Response::NO_ERROR;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>            <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_ABORTED);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a> = carma_planning_msgs::msg::Route{};</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>            <span class="comment">// service call successed but there is not active route</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            resp-&gt;error_status = carma_planning_msgs::srv::AbortActiveRoute::Response::NO_ACTIVE_ROUTE;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a514b8cc7bc6aa5c4ae2d27df0ddef94a">  488</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a514b8cc7bc6aa5c4ae2d27df0ddef94a">RouteGeneratorWorker::initializeBumperTransformLookup</a>() </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    {</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae980619fe99f3ea60a45ec5774e461f6">tf2_listener_</a>.reset(<span class="keyword">new</span> tf2_ros::TransformListener(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a53569dd054ade6a662823c01922b3370">tf2_buffer_</a>));</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a53569dd054ade6a662823c01922b3370">tf2_buffer_</a>.setUsingDedicatedThread(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    }</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span> </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c">  494</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c">RouteGeneratorWorker::bumperPoseCb</a>()</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    {</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        <span class="keywordflow">try</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab491a71c75d615cca99c396c27835097">tf_</a> = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a53569dd054ade6a662823c01922b3370">tf2_buffer_</a>.lookupTransform(<span class="stringliteral">&quot;map&quot;</span>, <span class="stringliteral">&quot;vehicle_front&quot;</span>, rclcpp::Time(0,0), rclcpp::Duration(1.0*1e9)); <span class="comment">//save to local copy of transform 0.1 sec timeout</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            tf2::fromMsg(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab491a71c75d615cca99c396c27835097">tf_</a>, <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a07b8d989c4d7954ae672ed81f597e924">frontbumper_transform_</a>);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        }</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> tf2::TransformException &amp;ex)</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        {</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            RCLCPP_WARN_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), ex.what());</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        }</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        geometry_msgs::msg::PoseStamped updated_vehicle_pose;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        updated_vehicle_pose.pose.position.x = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a07b8d989c4d7954ae672ed81f597e924">frontbumper_transform_</a>.getOrigin().getX();</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        updated_vehicle_pose.pose.position.y = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a07b8d989c4d7954ae672ed81f597e924">frontbumper_transform_</a>.getOrigin().getY();</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        updated_vehicle_pose.pose.position.z = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a07b8d989c4d7954ae672ed81f597e924">frontbumper_transform_</a>.getOrigin().getZ();</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a> = updated_vehicle_pose; </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="keywordflow">if</span>(this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">getRouteState</a>() == RouteStateWorker::RouteState::FOLLOWING) {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <span class="comment">// convert from pose stamp into lanelet basic 2D point</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">current_loc_</a> = lanelet::BasicPoint2d(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>-&gt;pose.position.x, <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>-&gt;pose.position.y);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>            <span class="comment">// get dt ct from world model</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a> track(0.0, 0.0);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>                track = this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;routeTrackPos(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">current_loc_</a>);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            } <span class="keywordflow">catch</span> (std::invalid_argument ex) {</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>                RCLCPP_WARN_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Routing has finished but carma_wm has not receive it!&quot;</span>);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            <span class="comment">// Return if world model has not yet been updated with the current active route</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <span class="keywordflow">if</span> ((this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getRouteName()).compare(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name) != 0) {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                RCLCPP_WARN_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Current active route name is &quot;</span> &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name &lt;&lt; <span class="stringliteral">&quot;, WorldModel is using &quot;</span> &lt;&lt; this-&gt;world_model_-&gt;getRouteName());</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <span class="keyword">auto</span> current_lanelet = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a7420856098c0e78666aaf273e4b05c9b">getClosestLaneletFromRouteLanelets</a>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">current_loc_</a>);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            <span class="keyword">auto</span> lanelet_track = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a>(current_lanelet, <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">current_loc_</a>);</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a92e86f0c67f26362158d716f26fbe0a7">ll_id_</a> = current_lanelet.id();</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a3e669f19a6626ed0d1654c9af5e25542">ll_crosstrack_distance_</a> = lanelet_track.crosstrack;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afe4917f0c7a2e80aa2a55e471d3ee088">ll_downtrack_distance_</a> = lanelet_track.downtrack;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afeeb1db33f0545125fc0be2a6db83ffa">current_crosstrack_distance_</a> = track.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a> = track.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <span class="comment">// Determine speed limit</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>            lanelet::Optional&lt;carma_wm::TrafficRulesConstPtr&gt; traffic_rules = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getTrafficRules();</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <span class="keywordflow">if</span> (traffic_rules) </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                <span class="keyword">auto</span> laneletIterator = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap()-&gt;laneletLayer.find(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a92e86f0c67f26362158d716f26fbe0a7">ll_id_</a>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>                <span class="keywordflow">if</span> (laneletIterator != <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap()-&gt;laneletLayer.end()) {</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                    <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a45537c64bab7dd4a2be7a51ac169601b">speed_limit_</a> = (*traffic_rules)-&gt;speedLimit(*laneletIterator).speedLimit.value();</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                } </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                <span class="keywordflow">else</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                    RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Failed to set the current speed limit. The lanelet_id: &quot;</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                        &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a92e86f0c67f26362158d716f26fbe0a7">ll_id_</a> &lt;&lt; <span class="stringliteral">&quot; could not be matched with a lanelet in the map. The previous speed limit of &quot;</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                        &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a45537c64bab7dd4a2be7a51ac169601b">speed_limit_</a> &lt;&lt; <span class="stringliteral">&quot; will be used.&quot;</span>);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>                }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>                </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            } </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <span class="keywordflow">else</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Failed to set the current speed limit. Valid traffic rules object could not be built.&quot;</span>);</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>            std::shared_ptr&lt;geometry_msgs::msg::PoseStamped&gt; pose_ptr(<span class="keyword">new</span> geometry_msgs::msg::PoseStamped(*<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">vehicle_pose_</a>));</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            <span class="comment">// check if we left the seleted route by cross track error</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ae9b745465dd2cc6c7ae50299a422edd3">crosstrackErrorCheck</a>(pose_ptr, current_lanelet))</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>            {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_DEPARTED);</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_DEPARTED);</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>            }</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>            <span class="comment">// check if we reached our destination be remaining down track distance            </span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>            <span class="keywordtype">double</span> route_length_2d = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getRouteEndTrackPos().downtrack;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>            <span class="keywordflow">if</span>((<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a> &gt; route_length_2d - <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab286767e7537a7a78ef6ebdaea161c76">down_track_target_range_</a> &amp;&amp; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a353b99f1fcdeb96cb2abe9fa4a8f1082">current_speed_</a> &lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a0a5942e7a78bf076b2a8f2e736285022">epsilon_</a>) || (<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a> &gt; route_length_2d))</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>            {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_COMPLETED);</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_COMPLETED);</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        }</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#ab6bc2462403bfe98ea151323c80bb365">  577</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ab6bc2462403bfe98ea151323c80bb365">RouteGeneratorWorker::twistCb</a>(geometry_msgs::msg::TwistStamped::UniquePtr msg)</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a353b99f1fcdeb96cb2abe9fa4a8f1082">current_speed_</a> = msg-&gt;twist.linear.x;</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    }</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#aedd23f179bb3a7e4e71c4cd896a2a6f5">  582</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#aedd23f179bb3a7e4e71c4cd896a2a6f5">RouteGeneratorWorker::georeferenceCb</a>(std_msgs::msg::String::UniquePtr msg)</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a7ebc86730c27ae902e84dd172fe6a59a">map_proj_</a> = msg-&gt;data;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#adbdd0289789956c0fc2f21250c478ed6">  587</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#adbdd0289789956c0fc2f21250c478ed6">RouteGeneratorWorker::setPublishers</a>(<span class="keyword">const</span> carma_ros2_utils::PubPtr&lt;carma_planning_msgs::msg::RouteEvent&gt;&amp; route_event_pub,</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                        <span class="keyword">const</span> carma_ros2_utils::PubPtr&lt;carma_planning_msgs::msg::RouteState&gt;&amp; route_state_pub,</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>                        <span class="keyword">const</span> carma_ros2_utils::PubPtr&lt;carma_planning_msgs::msg::Route&gt;&amp; route_pub,</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                        <span class="keyword">const</span> carma_ros2_utils::PubPtr&lt;visualization_msgs::msg::Marker&gt;&amp; route_marker_pub)</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    {</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aba2d9af3ac79bbb1282ce4cfc2a10b4c">route_event_pub_</a> = route_event_pub;</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#abc73cf7031f9a70b11163bb2c8166932">route_state_pub_</a> = route_state_pub;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a8d5d1ba9f82d9b19a54f850b45cbc37e">route_pub_</a> = route_pub;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af11d8688934843a1ddaffa618ab8abbd">route_marker_pub_</a>= route_marker_pub;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a6f3b2f571f084cb9981aecd64e3daba4">  598</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a6f3b2f571f084cb9981aecd64e3daba4">RouteGeneratorWorker::setDowntrackDestinationRange</a>(<span class="keywordtype">double</span> dt_dest_range)</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab286767e7537a7a78ef6ebdaea161c76">down_track_target_range_</a> = dt_dest_range;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    }</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">  603</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">RouteGeneratorWorker::publishRouteEvent</a>(<a class="code hl_typedef" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> event_type)</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    {</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afa38ea39324bfd7de79382ebdfaa3b79">route_event_queue</a>.push(event_type);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    }</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a67f9c465f5873765f118ec9a858fd9ed">  608</a></span>    lanelet::Optional&lt;lanelet::routing::Route&gt; <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a67f9c465f5873765f118ec9a858fd9ed">RouteGeneratorWorker::rerouteAfterRouteInvalidation</a>(<span class="keyword">const</span> std::vector&lt;lanelet::BasicPoint2d&gt;&amp; destination_points_in_map)</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    {</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>        std::vector&lt;lanelet::BasicPoint2d&gt; destination_points_in_map_temp;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>        </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>:destination_points_in_map) <span class="comment">// Identify all route points that we have not yet passed</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>        {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            <span class="keywordtype">double</span> destination_down_track=<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;routeTrackPos(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>).downtrack;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a>&lt; destination_down_track)</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>            {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>                destination_points_in_map_temp.push_back(<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>                RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;current_downtrack_distance_:&quot;</span> &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a>);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>                RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;destination_down_track:&quot;</span> &lt;&lt; destination_down_track);</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>            }</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        }  </div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a> = destination_points_in_map_temp; <span class="comment">// Update our route point list</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        </div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;New destination_points_in_map.size:&quot;</span> &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>.size());</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span> </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>        <span class="keyword">auto</span> <a class="code hl_namespace" href="namespaceroute.html">route</a>=<a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ac63761bf325459098e5efce7879d4c56">routing</a>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">current_loc_</a>, <span class="comment">// Route from current location through future destinations</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>                            std::vector&lt;lanelet::BasicPoint2d&gt;(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>.begin(), <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>.end() - 1),</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>                            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>.back(),</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMap(), <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMapRoutingGraph());</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <span class="keywordflow">return</span> <a class="code hl_namespace" href="namespaceroute.html">route</a>;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span> </div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28">  636</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28">RouteGeneratorWorker::spinCallback</a>()</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="comment">// Update vehicle position</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c">bumperPoseCb</a>();</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#abe0f8dcb6f408e0891923385c57b55f7">reroutingChecker</a>()==<span class="keyword">true</span>)</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>           RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Rerouting required&quot;</span>);</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>           this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_INVALIDATION);</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>           <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_INVALIDATION);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>           <span class="keyword">auto</span> <a class="code hl_namespace" href="namespaceroute.html">route</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a67f9c465f5873765f118ec9a858fd9ed">rerouteAfterRouteInvalidation</a>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">destination_points_in_map_</a>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>           <span class="comment">// check if route successed</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>           <span class="keywordflow">if</span>(!<a class="code hl_namespace" href="namespaceroute.html">route</a>)</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Cannot find a route passing all destinations.&quot;</span>);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            }</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#af67153a36940ea3e4dda5e90101f5b2d">checkForDuplicateLaneletsInShortestPath</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>.get()))</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>            {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                RCLCPP_ERROR_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;At least one duplicate Lanelet ID occurs in the shortest path. Routing cannot be completed.&quot;</span>);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_GEN_FAILED);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>            }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>            {</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">onRouteEvent</a>(RouteStateWorker::RouteEvent::ROUTE_STARTED);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">publishRouteEvent</a>(carma_planning_msgs::msg::RouteEvent::ROUTE_STARTED);  </div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>            }    </div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            std::string original_route_name = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#acf66ad1c4a68e68b769c2aec9d45efd7">composeRouteMsg</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name = original_route_name;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.is_rerouted = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.map_version = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">world_model_</a>-&gt;getMapVersion();</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route_marker_msg_</a> = <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b">composeRouteMarkerMsg</a>(<a class="code hl_namespace" href="namespaceroute.html">route</a>);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a235892b04febaed76747202c64340f90">new_route_msg_generated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a44d2aa8c2f5818ab20a5edf541dc4da3">new_route_marker_generated_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        }</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        </div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="comment">// publish new route and set new route flag back to false</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a235892b04febaed76747202c64340f90">new_route_msg_generated_</a> &amp;&amp; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a44d2aa8c2f5818ab20a5edf541dc4da3">new_route_marker_generated_</a>)</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        {</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a8d5d1ba9f82d9b19a54f850b45cbc37e">route_pub_</a>-&gt;publish(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>);</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#af11d8688934843a1ddaffa618ab8abbd">route_marker_pub_</a>-&gt;publish(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route_marker_msg_</a>);</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a235892b04febaed76747202c64340f90">new_route_msg_generated_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a44d2aa8c2f5818ab20a5edf541dc4da3">new_route_marker_generated_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.is_rerouted = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        }</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="comment">// publish route state messsage if a route is selected</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            carma_planning_msgs::msg::RouteState state_msg;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>            state_msg.header.stamp = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae050e9501499b6017955f8b4f963a87e">clock_</a>-&gt;now();</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            state_msg.route_id = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route_msg_</a>.route_name;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>            state_msg.cross_track = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afeeb1db33f0545125fc0be2a6db83ffa">current_crosstrack_distance_</a>;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            state_msg.down_track = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">current_downtrack_distance_</a>;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>            state_msg.lanelet_downtrack = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afe4917f0c7a2e80aa2a55e471d3ee088">ll_downtrack_distance_</a>;            </div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>            state_msg.state = this-&gt;<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">rs_worker_</a>.<a class="code hl_function" href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">getRouteState</a>();</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>            state_msg.lanelet_id = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a92e86f0c67f26362158d716f26fbe0a7">ll_id_</a>;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>            state_msg.speed_limit = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a45537c64bab7dd4a2be7a51ac169601b">speed_limit_</a>;</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#abc73cf7031f9a70b11163bb2c8166932">route_state_pub_</a>-&gt;publish(state_msg);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        }</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <span class="comment">// publish route event in order if any</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        <span class="keywordflow">while</span>(!<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afa38ea39324bfd7de79382ebdfaa3b79">route_event_queue</a>.empty())</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        {</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac2f629b9947e3933f2c4c5a2e4457f44">route_event_msg_</a>.event = <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afa38ea39324bfd7de79382ebdfaa3b79">route_event_queue</a>.front();</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>            RCLCPP_INFO_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Publishing a route event!&quot;</span>);</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#aba2d9af3ac79bbb1282ce4cfc2a10b4c">route_event_pub_</a>-&gt;publish(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ac2f629b9947e3933f2c4c5a2e4457f44">route_event_msg_</a>);</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#afa38ea39324bfd7de79382ebdfaa3b79">route_event_queue</a>.pop();</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>; </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#ae9b745465dd2cc6c7ae50299a422edd3">  712</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#ae9b745465dd2cc6c7ae50299a422edd3">RouteGeneratorWorker::crosstrackErrorCheck</a>(<span class="keyword">const</span> std::shared_ptr&lt;geometry_msgs::msg::PoseStamped&gt;&amp; msg, lanelet::ConstLanelet current)</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    {</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>        lanelet::BasicPoint2d position;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        position.x()= msg-&gt;pose.position.x;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>        position.y()= msg-&gt;pose.position.y;</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>        <span class="keywordflow">if</span>(boost::geometry::within(position, current.polygon2d())) <span class="comment">//If vehicle is inside current_lanelet, there is no crosstrack error</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        {</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>            <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">cte_count_</a> = 0;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>        }</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;LLt Polygon Dimensions1: &quot;</span> &lt;&lt; current.polygon2d().front().x()&lt;&lt; <span class="stringliteral">&quot;, &quot;</span>&lt;&lt; current.polygon2d().front().y());</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;LLt Polygon Dimensions2: &quot;</span> &lt;&lt; current.polygon2d().back().x()&lt;&lt; <span class="stringliteral">&quot;, &quot;</span>&lt;&lt; current.polygon2d().back().y());</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>        RCLCPP_DEBUG_STREAM(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">logger_</a>-&gt;get_logger(), <span class="stringliteral">&quot;Distance1: &quot;</span> &lt;&lt; boost::geometry::distance(position, current.polygon2d()) &lt;&lt; <span class="stringliteral">&quot; Max allowed Crosstrack: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab3a7c28334710a379497afe8f8eba301">cross_track_dist_</a> );</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <span class="keywordflow">if</span> (boost::geometry::distance(position, current.polygon2d()) &gt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab3a7c28334710a379497afe8f8eba301">cross_track_dist_</a>) <span class="comment">//Evaluate lanelet crosstrack distance from vehicle</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>            {</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>                <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">cte_count_</a>++;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">cte_count_</a> &gt; <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae6451873d51f65b1362093e800bcf09f">cte_count_max_</a>) <span class="comment">//If the distance exceeds the crosstrack distance a certain number of times, report that the route has been departed</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                    {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>                        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">cte_count_</a> = 0;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                    }</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                <span class="keywordflow">else</span> </div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>            }</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>            {</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">cte_count_</a> = 0;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>            }</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span> </div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    }</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span> </div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a7420856098c0e78666aaf273e4b05c9b">  751</a></span>    lanelet::ConstLanelet <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a7420856098c0e78666aaf273e4b05c9b">RouteGeneratorWorker::getClosestLaneletFromRouteLanelets</a>(lanelet::BasicPoint2d position)<span class="keyword"> const</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        <span class="keywordtype">double</span> min = std::numeric_limits&lt;double&gt;::infinity();</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        lanelet::ConstLanelet min_llt;</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>: <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae4d01228e938867a13cf505fb35b16c6">route_llts</a>)</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>         {</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            <span class="keywordtype">double</span> dist = boost::geometry::distance(position, <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>.polygon2d());</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>            <span class="keywordflow">if</span> (dist &lt; min)</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>            {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                min = dist;</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                min_llt = <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>;</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>            }</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>     }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <span class="keywordflow">return</span> min_llt;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a0c9555f3240a01e8425cc0f307103c84">  767</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a0c9555f3240a01e8425cc0f307103c84">RouteGeneratorWorker::setCrosstrackErrorDistance</a>(<span class="keywordtype">double</span> cte_dist)</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ab3a7c28334710a379497afe8f8eba301">cross_track_dist_</a> = cte_dist;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a6b295acbfa4c3b0b5d2ba6da1fbdec8c">  772</a></span>     <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a6b295acbfa4c3b0b5d2ba6da1fbdec8c">RouteGeneratorWorker::setCrosstrackErrorCountMax</a>(<span class="keywordtype">int</span> cte_max)</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae6451873d51f65b1362093e800bcf09f">cte_count_max_</a> = cte_max;</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno"><a class="line" href="classroute_1_1RouteGeneratorWorker.html#a245d09874b6985f1af1adc53b918dd3c">  778</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classroute_1_1RouteGeneratorWorker.html#a245d09874b6985f1af1adc53b918dd3c">RouteGeneratorWorker::addLanelet</a>(lanelet::ConstLanelet llt)</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    {</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <a class="code hl_variable" href="classroute_1_1RouteGeneratorWorker.html#ae4d01228e938867a13cf505fb35b16c6">route_llts</a>.push_back(llt);</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    }</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span> </div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>} <span class="comment">// route</span></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a></div><div class="ttdoc">Position in a track based coordinate system where the axis are downtrack and crosstrack....</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00034">TrackPos.hpp:35</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a60c766fa11f68e1d8832d79cd2d292c2"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">carma_wm::TrackPos::crosstrack</a></div><div class="ttdeci">double crosstrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00038">TrackPos.hpp:38</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a6ea99bbb9c6a75685ceaaf370d58ea24"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">carma_wm::TrackPos::downtrack</a></div><div class="ttdeci">double downtrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00037">TrackPos.hpp:37</a></div></div>
<div class="ttc" id="aclassint_html"><div class="ttname"><a href="classint.html">int</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a07b8d989c4d7954ae672ed81f597e924"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a07b8d989c4d7954ae672ed81f597e924">route::RouteGeneratorWorker::frontbumper_transform_</a></div><div class="ttdeci">tf2::Stamped&lt; tf2::Transform &gt; frontbumper_transform_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00344">route_generator_worker.hpp:344</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a0a5942e7a78bf076b2a8f2e736285022"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a0a5942e7a78bf076b2a8f2e736285022">route::RouteGeneratorWorker::epsilon_</a></div><div class="ttdeci">static constexpr double epsilon_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00311">route_generator_worker.hpp:311</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a0ac499df9ad47fb4c66e7163c9611a6a"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a0ac499df9ad47fb4c66e7163c9611a6a">route::RouteGeneratorWorker::setActiveRouteCb</a></div><div class="ttdeci">bool setActiveRouteCb(const std::shared_ptr&lt; rmw_request_id_t &gt;, const std::shared_ptr&lt; carma_planning_msgs::srv::SetActiveRoute::Request &gt; req, std::shared_ptr&lt; carma_planning_msgs::srv::SetActiveRoute::Response &gt; resp)</div><div class="ttdoc">Set_active_route service callback. User can select a route to start following by calling this service...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00150">route_generator_worker.cpp:150</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a0c9555f3240a01e8425cc0f307103c84"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a0c9555f3240a01e8425cc0f307103c84">route::RouteGeneratorWorker::setCrosstrackErrorDistance</a></div><div class="ttdeci">void setCrosstrackErrorDistance(double cte_dist)</div><div class="ttdoc">set the maximum crosstrack error distance</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00767">route_generator_worker.cpp:767</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a1f1c08a9230de2d00cdd48aa65cdf3cf"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a1f1c08a9230de2d00cdd48aa65cdf3cf">route::RouteGeneratorWorker::getAvailableRouteCb</a></div><div class="ttdeci">bool getAvailableRouteCb(const std::shared_ptr&lt; rmw_request_id_t &gt;, const std::shared_ptr&lt; carma_planning_msgs::srv::GetAvailableRoutes::Request &gt;, std::shared_ptr&lt; carma_planning_msgs::srv::GetAvailableRoutes::Response &gt; resp)</div><div class="ttdoc">Get_available_route service callback. Calls to this service will respond with a list of route names f...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00076">route_generator_worker.cpp:76</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a235892b04febaed76747202c64340f90"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a235892b04febaed76747202c64340f90">route::RouteGeneratorWorker::new_route_msg_generated_</a></div><div class="ttdeci">bool new_route_msg_generated_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00320">route_generator_worker.hpp:320</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a245d09874b6985f1af1adc53b918dd3c"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a245d09874b6985f1af1adc53b918dd3c">route::RouteGeneratorWorker::addLanelet</a></div><div class="ttdeci">void addLanelet(lanelet::ConstLanelet llt)</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00778">route_generator_worker.cpp:778</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a2c2ea5458d5f6b679cccef1ac0d27fc0"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a2c2ea5458d5f6b679cccef1ac0d27fc0">route::RouteGeneratorWorker::current_downtrack_distance_</a></div><div class="ttdeci">double current_downtrack_distance_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00293">route_generator_worker.hpp:293</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a31e3be137af80a1fa2be0e80fb8dd423"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a31e3be137af80a1fa2be0e80fb8dd423">route::RouteGeneratorWorker::rs_worker_</a></div><div class="ttdeci">RouteStateWorker rs_worker_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00267">route_generator_worker.hpp:267</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a353b99f1fcdeb96cb2abe9fa4a8f1082"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a353b99f1fcdeb96cb2abe9fa4a8f1082">route::RouteGeneratorWorker::current_speed_</a></div><div class="ttdeci">double current_speed_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00309">route_generator_worker.hpp:309</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a389da36d31257b271cf1753f3dc0eb4d"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a389da36d31257b271cf1753f3dc0eb4d">route::RouteGeneratorWorker::setLoggerInterface</a></div><div class="ttdeci">void setLoggerInterface(rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger)</div><div class="ttdoc">Dependency injection for logger interface.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00029">route_generator_worker.cpp:29</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a3e4d9bf3a216ce81a72dd740a3b180f7"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a3e4d9bf3a216ce81a72dd740a3b180f7">route::RouteGeneratorWorker::setWorldModelPtr</a></div><div class="ttdeci">void setWorldModelPtr(carma_wm::WorldModelConstPtr wm)</div><div class="ttdoc">Dependency injection for world model pointer.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00024">route_generator_worker.cpp:24</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a3e669f19a6626ed0d1654c9af5e25542"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a3e669f19a6626ed0d1654c9af5e25542">route::RouteGeneratorWorker::ll_crosstrack_distance_</a></div><div class="ttdeci">double ll_crosstrack_distance_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00299">route_generator_worker.hpp:299</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a4470bd4b326e2d0c30a6bf6914147c15"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a4470bd4b326e2d0c30a6bf6914147c15">route::RouteGeneratorWorker::cte_count_</a></div><div class="ttdeci">int cte_count_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00333">route_generator_worker.hpp:333</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a44d2aa8c2f5818ab20a5edf541dc4da3"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a44d2aa8c2f5818ab20a5edf541dc4da3">route::RouteGeneratorWorker::new_route_marker_generated_</a></div><div class="ttdeci">bool new_route_marker_generated_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00321">route_generator_worker.hpp:321</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a45537c64bab7dd4a2be7a51ac169601b"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a45537c64bab7dd4a2be7a51ac169601b">route::RouteGeneratorWorker::speed_limit_</a></div><div class="ttdeci">double speed_limit_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00307">route_generator_worker.hpp:307</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a4611f3c3dd1daad9b2b33590d950ef6d"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a4611f3c3dd1daad9b2b33590d950ef6d">route::RouteGeneratorWorker::destination_points_in_map_</a></div><div class="ttdeci">std::vector&lt; lanelet::BasicPoint2d &gt; destination_points_in_map_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00338">route_generator_worker.hpp:338</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a4876f5b46ea96d75ff731358d015c351"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a4876f5b46ea96d75ff731358d015c351">route::RouteGeneratorWorker::setRouteFilePath</a></div><div class="ttdeci">void setRouteFilePath(const std::string &amp;path)</div><div class="ttdoc">Set method for configurable parameter.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00142">route_generator_worker.cpp:142</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a514b8cc7bc6aa5c4ae2d27df0ddef94a"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a514b8cc7bc6aa5c4ae2d27df0ddef94a">route::RouteGeneratorWorker::initializeBumperTransformLookup</a></div><div class="ttdeci">void initializeBumperTransformLookup()</div><div class="ttdoc">Initialize transform lookup from front bumper to map.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00488">route_generator_worker.cpp:488</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a53569dd054ade6a662823c01922b3370"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a53569dd054ade6a662823c01922b3370">route::RouteGeneratorWorker::tf2_buffer_</a></div><div class="ttdeci">tf2_ros::Buffer &amp; tf2_buffer_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00347">route_generator_worker.hpp:347</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a54b231365dda2e27fb4242deb35b8abf"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a54b231365dda2e27fb4242deb35b8abf">route::RouteGeneratorWorker::setClock</a></div><div class="ttdeci">void setClock(rclcpp::Clock::SharedPtr clock)</div><div class="ttdoc">Dependency injection for clock object.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00035">route_generator_worker.cpp:35</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a5be98218cbc7d5c5fdc8d7f8c8c0b12c"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a5be98218cbc7d5c5fdc8d7f8c8c0b12c">route::RouteGeneratorWorker::bumperPoseCb</a></div><div class="ttdeci">void bumperPoseCb()</div><div class="ttdoc">Callback for the front bumper pose transform.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00494">route_generator_worker.cpp:494</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a5d8196aea1d3046c46054724a044bace"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a5d8196aea1d3046c46054724a044bace">route::RouteGeneratorWorker::setReroutingChecker</a></div><div class="ttdeci">void setReroutingChecker(const std::function&lt; bool()&gt; inputFunction)</div><div class="ttdoc">setReroutingChecker function to set the rerouting flag</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00071">route_generator_worker.cpp:71</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a67f9c465f5873765f118ec9a858fd9ed"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a67f9c465f5873765f118ec9a858fd9ed">route::RouteGeneratorWorker::rerouteAfterRouteInvalidation</a></div><div class="ttdeci">lanelet::Optional&lt; lanelet::routing::Route &gt; rerouteAfterRouteInvalidation(const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;destination_points_in_map)</div><div class="ttdoc">After route is invalidated, this function returns a new route based on the destinations points.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00608">route_generator_worker.cpp:608</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a6b295acbfa4c3b0b5d2ba6da1fbdec8c"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a6b295acbfa4c3b0b5d2ba6da1fbdec8c">route::RouteGeneratorWorker::setCrosstrackErrorCountMax</a></div><div class="ttdeci">void setCrosstrackErrorCountMax(int cte_max)</div><div class="ttdoc">set the crosstrack error counter maximum limit</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00772">route_generator_worker.cpp:772</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a6f3b2f571f084cb9981aecd64e3daba4"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a6f3b2f571f084cb9981aecd64e3daba4">route::RouteGeneratorWorker::setDowntrackDestinationRange</a></div><div class="ttdeci">void setDowntrackDestinationRange(double dt_dest_range)</div><div class="ttdoc">Set method for configurable parameter.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00598">route_generator_worker.cpp:598</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a7420856098c0e78666aaf273e4b05c9b"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a7420856098c0e78666aaf273e4b05c9b">route::RouteGeneratorWorker::getClosestLaneletFromRouteLanelets</a></div><div class="ttdeci">lanelet::ConstLanelet getClosestLaneletFromRouteLanelets(lanelet::BasicPoint2d position) const</div><div class="ttdoc">&quot;Get the closest lanelet on the route relative to the vehicle's current position. If the input list d...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00751">route_generator_worker.cpp:751</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a74593089699e2d1bbd5bdd1f4495be04"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a74593089699e2d1bbd5bdd1f4495be04">route::RouteGeneratorWorker::logger_</a></div><div class="ttdeci">rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00351">route_generator_worker.hpp:351</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a7ebc86730c27ae902e84dd172fe6a59a"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a7ebc86730c27ae902e84dd172fe6a59a">route::RouteGeneratorWorker::map_proj_</a></div><div class="ttdeci">boost::optional&lt; std::string &gt; map_proj_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00341">route_generator_worker.hpp:341</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a8bd1257e2b6df3b4a41bc0c2c26ae31b"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a8bd1257e2b6df3b4a41bc0c2c26ae31b">route::RouteGeneratorWorker::composeRouteMarkerMsg</a></div><div class="ttdeci">visualization_msgs::msg::Marker composeRouteMarkerMsg(const lanelet::Optional&lt; lanelet::routing::Route &gt; &amp;route)</div><div class="ttdoc">composeRouteMarkerMsg is a function to generate route rviz markers</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00384">route_generator_worker.cpp:384</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a8d5d1ba9f82d9b19a54f850b45cbc37e"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a8d5d1ba9f82d9b19a54f850b45cbc37e">route::RouteGeneratorWorker::route_pub_</a></div><div class="ttdeci">carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::Route &gt; route_pub_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00316">route_generator_worker.hpp:316</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_a92e86f0c67f26362158d716f26fbe0a7"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#a92e86f0c67f26362158d716f26fbe0a7">route::RouteGeneratorWorker::ll_id_</a></div><div class="ttdeci">lanelet::Id ll_id_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00304">route_generator_worker.hpp:304</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_aa1fb1fb2e326a7d58aa8523abe786bcb"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#aa1fb1fb2e326a7d58aa8523abe786bcb">route::RouteGeneratorWorker::route_marker_msg_</a></div><div class="ttdeci">visualization_msgs::msg::Marker route_marker_msg_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00279">route_generator_worker.hpp:279</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_aaa0e672955fabcf13358f07cf5123a28"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#aaa0e672955fabcf13358f07cf5123a28">route::RouteGeneratorWorker::spinCallback</a></div><div class="ttdeci">bool spinCallback()</div><div class="ttdoc">Spin callback which will be called frequently based on spin rate.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00636">route_generator_worker.cpp:636</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab00fe873f0a0d04ed0d2babc402b535a"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab00fe873f0a0d04ed0d2babc402b535a">route::RouteGeneratorWorker::current_loc_</a></div><div class="ttdeci">lanelet::BasicPoint2d current_loc_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00296">route_generator_worker.hpp:296</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab0b4034725516d6fd92d6384a3843555"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab0b4034725516d6fd92d6384a3843555">route::RouteGeneratorWorker::route_file_path_</a></div><div class="ttdeci">std::string route_file_path_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00270">route_generator_worker.hpp:270</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab286767e7537a7a78ef6ebdaea161c76"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab286767e7537a7a78ef6ebdaea161c76">route::RouteGeneratorWorker::down_track_target_range_</a></div><div class="ttdeci">double down_track_target_range_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00287">route_generator_worker.hpp:287</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab3a7c28334710a379497afe8f8eba301"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab3a7c28334710a379497afe8f8eba301">route::RouteGeneratorWorker::cross_track_dist_</a></div><div class="ttdeci">double cross_track_dist_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00330">route_generator_worker.hpp:330</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab491a71c75d615cca99c396c27835097"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab491a71c75d615cca99c396c27835097">route::RouteGeneratorWorker::tf_</a></div><div class="ttdeci">geometry_msgs::msg::TransformStamped tf_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00343">route_generator_worker.hpp:343</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab6bc2462403bfe98ea151323c80bb365"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab6bc2462403bfe98ea151323c80bb365">route::RouteGeneratorWorker::twistCb</a></div><div class="ttdeci">void twistCb(geometry_msgs::msg::TwistStamped::UniquePtr msg)</div><div class="ttdoc">Callback for the twist subscriber, which will store latest twist locally.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00577">route_generator_worker.cpp:577</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ab839738019c76473ec1b80ba7511fe85"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ab839738019c76473ec1b80ba7511fe85">route::RouteGeneratorWorker::RouteGeneratorWorker</a></div><div class="ttdeci">RouteGeneratorWorker(tf2_ros::Buffer &amp;tf2_buffer)</div><div class="ttdoc">Constructor for RouteGeneratorWorker class taking in dependencies via dependency injection.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00021">route_generator_worker.cpp:21</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_aba2d9af3ac79bbb1282ce4cfc2a10b4c"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#aba2d9af3ac79bbb1282ce4cfc2a10b4c">route::RouteGeneratorWorker::route_event_pub_</a></div><div class="ttdeci">carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::RouteEvent &gt; route_event_pub_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00314">route_generator_worker.hpp:314</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_abb4a34fba858902068cede9dcdfa67cf"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#abb4a34fba858902068cede9dcdfa67cf">route::RouteGeneratorWorker::loadRouteDestinationsInMapFrame</a></div><div class="ttdeci">std::vector&lt; lanelet::BasicPoint3d &gt; loadRouteDestinationsInMapFrame(const std::vector&lt; carma_v2x_msgs::msg::Position3D &gt; &amp;destinations) const</div><div class="ttdoc">Function to take route destination points from a vector of 3D points and convert them from lat/lon va...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00320">route_generator_worker.cpp:320</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_abc73cf7031f9a70b11163bb2c8166932"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#abc73cf7031f9a70b11163bb2c8166932">route::RouteGeneratorWorker::route_state_pub_</a></div><div class="ttdeci">carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::RouteState &gt; route_state_pub_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00315">route_generator_worker.hpp:315</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_abe0f8dcb6f408e0891923385c57b55f7"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#abe0f8dcb6f408e0891923385c57b55f7">route::RouteGeneratorWorker::reroutingChecker</a></div><div class="ttdeci">std::function&lt; bool()&gt; reroutingChecker</div><div class="ttdoc">reroutingChecker function to set the rerouting flag locally</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00069">route_generator_worker.hpp:69</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ac25e45bfbb096b1dfd1707637a5b5f43"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ac25e45bfbb096b1dfd1707637a5b5f43">route::RouteGeneratorWorker::world_model_</a></div><div class="ttdeci">carma_wm::WorldModelConstPtr world_model_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00273">route_generator_worker.hpp:273</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ac2f629b9947e3933f2c4c5a2e4457f44"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ac2f629b9947e3933f2c4c5a2e4457f44">route::RouteGeneratorWorker::route_event_msg_</a></div><div class="ttdeci">carma_planning_msgs::msg::RouteEvent route_event_msg_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00277">route_generator_worker.hpp:277</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ac63761bf325459098e5efce7879d4c56"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ac63761bf325459098e5efce7879d4c56">route::RouteGeneratorWorker::routing</a></div><div class="ttdeci">lanelet::Optional&lt; lanelet::routing::Route &gt; routing(const lanelet::BasicPoint2d start, const std::vector&lt; lanelet::BasicPoint2d &gt; &amp;via, const lanelet::BasicPoint2d end, const lanelet::LaneletMapConstPtr map_pointer, const carma_wm::LaneletRoutingGraphConstPtr graph_pointer) const</div><div class="ttdoc">Generate Lanelet2 route based on input destinations.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00040">route_generator_worker.cpp:40</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ac6e56cfad932a0dd03ee0caac97b17b3"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ac6e56cfad932a0dd03ee0caac97b17b3">route::RouteGeneratorWorker::route_msg_</a></div><div class="ttdeci">carma_planning_msgs::msg::Route route_msg_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00276">route_generator_worker.hpp:276</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ac73746bfbb1465b31651bcfe2481b1d1"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ac73746bfbb1465b31651bcfe2481b1d1">route::RouteGeneratorWorker::loadRouteDestinationGpsPointsFromRouteId</a></div><div class="ttdeci">std::vector&lt; carma_v2x_msgs::msg::Position3D &gt; loadRouteDestinationGpsPointsFromRouteId(const std::string &amp;route_id) const</div><div class="ttdoc">Function to load route destination points from a route file and store them in a vector of 3D points.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00351">route_generator_worker.cpp:351</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_acf66ad1c4a68e68b769c2aec9d45efd7"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#acf66ad1c4a68e68b769c2aec9d45efd7">route::RouteGeneratorWorker::composeRouteMsg</a></div><div class="ttdeci">carma_planning_msgs::msg::Route composeRouteMsg(const lanelet::Optional&lt; lanelet::routing::Route &gt; &amp;route) const</div><div class="ttdoc">Helper function to generate a CARMA route message based on planned lanelet route.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00450">route_generator_worker.cpp:450</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_adbdd0289789956c0fc2f21250c478ed6"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#adbdd0289789956c0fc2f21250c478ed6">route::RouteGeneratorWorker::setPublishers</a></div><div class="ttdeci">void setPublishers(const carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::RouteEvent &gt; &amp;route_event_pub, const carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::RouteState &gt; &amp;route_state_pub, const carma_ros2_utils::PubPtr&lt; carma_planning_msgs::msg::Route &gt; &amp;route_pub, const carma_ros2_utils::PubPtr&lt; visualization_msgs::msg::Marker &gt; &amp;route_marker_pub)</div><div class="ttdoc">Method to pass publishers into worker class.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00587">route_generator_worker.cpp:587</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ae050e9501499b6017955f8b4f963a87e"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ae050e9501499b6017955f8b4f963a87e">route::RouteGeneratorWorker::clock_</a></div><div class="ttdeci">rclcpp::Clock::SharedPtr clock_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00353">route_generator_worker.hpp:353</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ae4d01228e938867a13cf505fb35b16c6"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ae4d01228e938867a13cf505fb35b16c6">route::RouteGeneratorWorker::route_llts</a></div><div class="ttdeci">lanelet::ConstLanelets route_llts</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00284">route_generator_worker.hpp:284</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ae6451873d51f65b1362093e800bcf09f"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ae6451873d51f65b1362093e800bcf09f">route::RouteGeneratorWorker::cte_count_max_</a></div><div class="ttdeci">int cte_count_max_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00335">route_generator_worker.hpp:335</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ae980619fe99f3ea60a45ec5774e461f6"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ae980619fe99f3ea60a45ec5774e461f6">route::RouteGeneratorWorker::tf2_listener_</a></div><div class="ttdeci">std::unique_ptr&lt; tf2_ros::TransformListener &gt; tf2_listener_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00348">route_generator_worker.hpp:348</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_ae9b745465dd2cc6c7ae50299a422edd3"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#ae9b745465dd2cc6c7ae50299a422edd3">route::RouteGeneratorWorker::crosstrackErrorCheck</a></div><div class="ttdeci">bool crosstrackErrorCheck(const std::shared_ptr&lt; geometry_msgs::msg::PoseStamped &gt; &amp;msg, lanelet::ConstLanelet current_llt)</div><div class="ttdoc">crosstrackErrorCheck is a function that determines when the vehicle has left the route and reports wh...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00712">route_generator_worker.cpp:712</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_aedd23f179bb3a7e4e71c4cd896a2a6f5"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#aedd23f179bb3a7e4e71c4cd896a2a6f5">route::RouteGeneratorWorker::georeferenceCb</a></div><div class="ttdeci">void georeferenceCb(std_msgs::msg::String::UniquePtr msg)</div><div class="ttdoc">Callback for the georeference subscriber used to set the map projection.</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00582">route_generator_worker.cpp:582</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_af11d8688934843a1ddaffa618ab8abbd"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#af11d8688934843a1ddaffa618ab8abbd">route::RouteGeneratorWorker::route_marker_pub_</a></div><div class="ttdeci">carma_ros2_utils::PubPtr&lt; visualization_msgs::msg::Marker &gt; route_marker_pub_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00317">route_generator_worker.hpp:317</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_af36eb1766ecdb1016d366b80921591cd"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#af36eb1766ecdb1016d366b80921591cd">route::RouteGeneratorWorker::abortActiveRouteCb</a></div><div class="ttdeci">bool abortActiveRouteCb(const std::shared_ptr&lt; rmw_request_id_t &gt;, const std::shared_ptr&lt; carma_planning_msgs::srv::AbortActiveRoute::Request &gt;, std::shared_ptr&lt; carma_planning_msgs::srv::AbortActiveRoute::Response &gt; resp)</div><div class="ttdoc">Abort_active_route service callback. User can call this service to abort a current following route an...</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00470">route_generator_worker.cpp:470</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_af67153a36940ea3e4dda5e90101f5b2d"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#af67153a36940ea3e4dda5e90101f5b2d">route::RouteGeneratorWorker::checkForDuplicateLaneletsInShortestPath</a></div><div class="ttdeci">bool checkForDuplicateLaneletsInShortestPath(const lanelet::routing::Route &amp;route) const</div><div class="ttdoc">Helper function to check whether a route's shortest path contains any duplicate Lanelet IDs....</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00296">route_generator_worker.cpp:296</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_af6f39379cdc597962f95e6ce49e9eda9"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#af6f39379cdc597962f95e6ce49e9eda9">route::RouteGeneratorWorker::vehicle_pose_</a></div><div class="ttdeci">boost::optional&lt; geometry_msgs::msg::PoseStamped &gt; vehicle_pose_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00260">route_generator_worker.hpp:260</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_afa38ea39324bfd7de79382ebdfaa3b79"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#afa38ea39324bfd7de79382ebdfaa3b79">route::RouteGeneratorWorker::route_event_queue</a></div><div class="ttdeci">std::queue&lt; uint8_t &gt; route_event_queue</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00324">route_generator_worker.hpp:324</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_afb3229ca1330570406ad5e766df4ed27"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#afb3229ca1330570406ad5e766df4ed27">route::RouteGeneratorWorker::publishRouteEvent</a></div><div class="ttdeci">void publishRouteEvent(uint8_t event_type)</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8cpp_source.html#l00603">route_generator_worker.cpp:603</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_afe4917f0c7a2e80aa2a55e471d3ee088"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#afe4917f0c7a2e80aa2a55e471d3ee088">route::RouteGeneratorWorker::ll_downtrack_distance_</a></div><div class="ttdeci">double ll_downtrack_distance_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00302">route_generator_worker.hpp:302</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteGeneratorWorker_html_afeeb1db33f0545125fc0be2a6db83ffa"><div class="ttname"><a href="classroute_1_1RouteGeneratorWorker.html#afeeb1db33f0545125fc0be2a6db83ffa">route::RouteGeneratorWorker::current_crosstrack_distance_</a></div><div class="ttdeci">double current_crosstrack_distance_</div><div class="ttdef"><b>Definition:</b> <a href="route__generator__worker_8hpp_source.html#l00290">route_generator_worker.hpp:290</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteStateWorker_html_a1a9c85b2c2349f3fe3c53c074b02f5d5"><div class="ttname"><a href="classroute_1_1RouteStateWorker.html#a1a9c85b2c2349f3fe3c53c074b02f5d5">route::RouteStateWorker::getRouteState</a></div><div class="ttdeci">RouteState getRouteState() const</div><div class="ttdoc">Get current route state machine state.</div><div class="ttdef"><b>Definition:</b> <a href="route__state__worker_8cpp_source.html#l00021">route_state_worker.cpp:21</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteStateWorker_html_a799d0334b2de692ba0a7364f568f6e5e"><div class="ttname"><a href="classroute_1_1RouteStateWorker.html#a799d0334b2de692ba0a7364f568f6e5e">route::RouteStateWorker::setLoggerInterface</a></div><div class="ttdeci">void setLoggerInterface(rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr logger)</div><div class="ttdef"><b>Definition:</b> <a href="route__state__worker_8cpp_source.html#l00070">route_state_worker.cpp:70</a></div></div>
<div class="ttc" id="aclassroute_1_1RouteStateWorker_html_ae8db8fa631f6265a5e552ae45ff79c8d"><div class="ttname"><a href="classroute_1_1RouteStateWorker.html#ae8db8fa631f6265a5e552ae45ff79c8d">route::RouteStateWorker::onRouteEvent</a></div><div class="ttdeci">void onRouteEvent(RouteEvent event)</div><div class="ttdoc">Process route event based on designed state machine diagram.</div><div class="ttdef"><b>Definition:</b> <a href="route__state__worker_8cpp_source.html#l00025">route_state_worker.cpp:25</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aebce986f21c117983313292d5e82b50a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a></div><div class="ttdeci">TrackPos trackPos(const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</div><div class="ttdoc">Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00120">Geometry.cpp:120</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_a3ac653959e0b6198cae274d68b343228"><div class="ttname"><a href="namespacecarma__wm.html#a3ac653959e0b6198cae274d68b343228">carma_wm::WorldModelConstPtr</a></div><div class="ttdeci">std::shared_ptr&lt; const WorldModel &gt; WorldModelConstPtr</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00442">WorldModel.hpp:442</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_adf411948c7e36aa0fb3071195e103015"><div class="ttname"><a href="namespacecarma__wm.html#adf411948c7e36aa0fb3071195e103015">carma_wm::LaneletRoutingGraphConstPtr</a></div><div class="ttdeci">std::shared_ptr&lt; const lanelet::routing::RoutingGraph &gt; LaneletRoutingGraphConstPtr</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00051">WorldModel.hpp:51</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ab81a05c3d1d100117b6781d7dedf8a29"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">process_traj_logs.point</a></div><div class="ttdeci">point</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00126">process_traj_logs.py:126</a></div></div>
<div class="ttc" id="anamespaceroute_html"><div class="ttname"><a href="namespaceroute.html">route</a></div><div class="ttdef"><b>Definition:</b> <a href="route__config_8hpp_source.html#l00022">route_config.hpp:23</a></div></div>
<div class="ttc" id="apointer_8h_html_aeeddce917cf130d62c370b8f216026dd"><div class="ttname"><a href="pointer_8h.html#aeeddce917cf130d62c370b8f216026dd">a</a></div><div class="ttdeci">const GenericPointer&lt; typename T::ValueType &gt; T2 T::AllocatorType &amp; a</div><div class="ttdef"><b>Definition:</b> <a href="pointer_8h_source.html#l01121">pointer.h:1121</a></div></div>
<div class="ttc" id="aroute__generator__worker_8hpp_html"><div class="ttname"><a href="route__generator__worker_8hpp.html">route_generator_worker.hpp</a></div></div>
<div class="ttc" id="astdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00124">stdint.h:124</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4005b166026311c360bb4fe9f8933493.html">route</a></li><li class="navelem"><a class="el" href="dir_2c07a422fdcd2a70cc94750d1ede6178.html">src</a></li><li class="navelem"><a class="el" href="route__generator__worker_8cpp.html">route_generator_worker.cpp</a></li>
    <li class="footer">Generated on Tue Nov 7 2023 14:08:52 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
