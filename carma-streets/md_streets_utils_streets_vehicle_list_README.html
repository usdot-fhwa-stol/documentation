<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: Streets Vehicle List Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_streets_utils_streets_vehicle_list_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Streets Vehicle List Library </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md163"></a>
Introduction</h1>
<p >The <code>streets_vehicle_list_lib</code> is meant to store data objects to store information about vehicles in the intersection received from <code>status_intent_msgs</code>. It also enables extensible update parsing business logic through the abstract class <code>status_intent_processor</code>, allowing for many different implementations of this business logic isolated from the data it modifies.</p>
<h1><a class="anchor" id="autotoc_md164"></a>
Data Objects</h1>
<p >The <code>vehicle</code> struct holds all the kinematic information about vehicles and information about their state and intended path in the intersection. The <code>future_info</code> struct holds kinematic information for a future point in the vehicles path The <code>vehicle_list</code> contains the a map of all the currently active vehicles in the intersection. Vehicles are active as long as the timeout for updates, configured in the status_intent_processor, has not expired. After the timeout expires vehicles are removed from the map. This object offers thread-safe methods to consume json updates <code>void process_update(const std::string &amp;update)</code> and access vehicle information : <code>std::vector&lt;vehicle&gt; get_vehicles_by_state(const vehicle_state state)</code>, <code>std::vector&lt;vehicle&gt; get_vehicles_by_lane(const int lane_id)</code>, and <code>std::unordered_map&lt;std::string, vehicle&gt; get_vehicles()</code>.</p>
<h1><a class="anchor" id="autotoc_md165"></a>
Status Intent Processor</h1>
<p >The <code>vehicle_list</code> object also contains a <code>shared_ptr&lt;status_intent_processor&gt;</code>. The <code>status_intent_processor</code> is a abstract class with one pure virtual method <code>void process_update(const std::string &amp;update)</code>, which allows inheriting classes to implement custom status_intent message parsing and vehicle list updating business logic. Currently the only implementation of this is the <code>all_stop_status_intent_processor</code> which holds logic for considering when vehicles are stopped, determining vehicle state based on kinematic information and other UC1 specific business logic. Eventually we will be able to replace this business logic for UC3 by simply replacing the <code>all_stop_status_intent_processor</code> with another class that inherits from &lsquo;status_intent_process&rsquo; like 'signalized_status_intent_processor<code>. This way we don't need to edit the logic in the class directly and can just set the processor in the</code>vehicle list` and rely on polymorphism.</p>
<h1><a class="anchor" id="autotoc_md166"></a>
Include streets_vehicle_list</h1>
<p >Streets Vehicle List CMakeList.txt includes an install target which will install this library as a CMake package. The library along with it's dependencies can then be included by simply using the <code>find_package()</code> instruction. </p><div class="fragment"><div class="line">find_package(streets_vehicle_list_lib REQUIRED)</div>
<div class="line">...</div>
<div class="line">target_link_library( target PUBLIC streets_vehicle_list)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 18 2023 20:24:36 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
