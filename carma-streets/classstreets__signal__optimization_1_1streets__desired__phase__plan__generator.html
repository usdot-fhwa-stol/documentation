<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: streets_signal_optimization::streets_desired_phase_plan_generator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">streets_signal_optimization::streets_desired_phase_plan_generator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for streets_signal_optimization::streets_desired_phase_plan_generator:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator__coll__graph.png" border="0" usemap="#astreets__signal__optimization_1_1streets__desired__phase__plan__generator_coll__map" alt="Collaboration graph"/></div>
<map name="astreets__signal__optimization_1_1streets__desired__phase__plan__generator_coll__map" id="astreets__signal__optimization_1_1streets__desired__phase__plan__generator_coll__map">
<area shape="rect" title=" " alt="" coords="335,403,539,1213"/>
<area shape="rect" title=" " alt="" coords="5,219,207,325"/>
<area shape="rect" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html" title=" " alt="" coords="231,219,426,325"/>
<area shape="rect" title=" " alt="" coords="99,5,167,83"/>
<area shape="rect" title=" " alt="" coords="299,5,359,83"/>
<area shape="rect" title=" " alt="" coords="397,5,458,83"/>
<area shape="rect" title=" " alt="" coords="451,233,497,311"/>
<area shape="rect" title=" " alt="" coords="521,226,672,318"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae1567c84601fba5a1020329972e54e4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae1567c84601fba5a1020329972e54e4c">streets_desired_phase_plan_generator</a> ()=default</td></tr>
<tr class="memdesc:ae1567c84601fba5a1020329972e54e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new desired phase plan generator object.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae1567c84601fba5a1020329972e54e4c">More...</a><br /></td></tr>
<tr class="separator:ae1567c84601fba5a1020329972e54e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e1ca64b958e4b517484fdca017e6e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa4e1ca64b958e4b517484fdca017e6e3">~streets_desired_phase_plan_generator</a> ()=default</td></tr>
<tr class="memdesc:aa4e1ca64b958e4b517484fdca017e6e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the desired phase plan generator object.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa4e1ca64b958e4b517484fdca017e6e3">More...</a><br /></td></tr>
<tr class="separator:aa4e1ca64b958e4b517484fdca017e6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2ec72377cdaeac42cb8406046516fa"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa">generate_desire_phase_plan_list</a> (const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr, std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles, <a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">signal_phase_and_timing::intersection_state</a> &amp;intersection_state, const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;move_groups, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp;tsc_config_ptr)</td></tr>
<tr class="memdesc:abb2ec72377cdaeac42cb8406046516fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fixed future movement groups from the provided intersection_state and a new movement group with a given duration at the end. An empty desired phase plan list means that the desired phase plan converted from the spat cannot be updated. This can happen in one of the following scenarios:  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa">More...</a><br /></td></tr>
<tr class="separator:abb2ec72377cdaeac42cb8406046516fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80ed21716db2df155ff2d939bc12fae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#af80ed21716db2df155ff2d939bc12fae">convert_spat_to_dpp</a> (<a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">signal_phase_and_timing::intersection_state</a> &amp;intersection_state, const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;move_groups) const</td></tr>
<tr class="memdesc:af80ed21716db2df155ff2d939bc12fae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the provided intersection_state to a desired phase plan. The number of fixed future movement groups shall be at least 1.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#af80ed21716db2df155ff2d939bc12fae">More...</a><br /></td></tr>
<tr class="separator:af80ed21716db2df155ff2d939bc12fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a264d3d1f555c9318dad731cd781520"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a0a264d3d1f555c9318dad731cd781520">find_tbd_start_time</a> (const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;base_desired_phase_plan, const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp;tsc_config_ptr) const</td></tr>
<tr class="memdesc:a0a264d3d1f555c9318dad731cd781520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal to the end time of the last movement event of a given signal group\movement event.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a0a264d3d1f555c9318dad731cd781520">More...</a><br /></td></tr>
<tr class="separator:a0a264d3d1f555c9318dad731cd781520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763e65cd750c9af29c85f654cf259408"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a763e65cd750c9af29c85f654cf259408">configure_scheduler</a> (const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr)</td></tr>
<tr class="memdesc:a763e65cd750c9af29c85f654cf259408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the scheduler pointer.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a763e65cd750c9af29c85f654cf259408">More...</a><br /></td></tr>
<tr class="separator:a763e65cd750c9af29c85f654cf259408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654e5540ba51776be633cdf40e683885"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885">create_signal_group_entry_lane_mapping</a> (const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr)</td></tr>
<tr class="memdesc:a654e5540ba51776be633cdf40e683885"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more than one entry lanes.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885">More...</a><br /></td></tr>
<tr class="separator:a654e5540ba51776be633cdf40e683885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a688263c54d4d2311d26c0085e0b666e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a688263c54d4d2311d26c0085e0b666e9">set_configuration</a> (const uint64_t _initial_green_buffer, const uint64_t _final_green_buffer, const uint64_t _et_inaccuracy_buffer, const uint64_t _queue_max_time_headway, const double _so_radius, const uint64_t _min_green, const uint64_t _max_green, const uint8_t _desired_future_move_group_count)</td></tr>
<tr class="memdesc:a688263c54d4d2311d26c0085e0b666e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the configurable parameters to the desired values.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a688263c54d4d2311d26c0085e0b666e9">More...</a><br /></td></tr>
<tr class="separator:a688263c54d4d2311d26c0085e0b666e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94dacb0548f095eefe92ccb7f888e73f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a94dacb0548f095eefe92ccb7f888e73f">set_initial_green_buffer</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:a94dacb0548f095eefe92ccb7f888e73f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the initial green buffer (ms). This value is used to account for the time it takes a vehicle before entering the intersection box at a green phase.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a94dacb0548f095eefe92ccb7f888e73f">More...</a><br /></td></tr>
<tr class="separator:a94dacb0548f095eefe92ccb7f888e73f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949502c1eeb815669fea831f00259ca1"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a949502c1eeb815669fea831f00259ca1">get_initial_green_buffer</a> () const</td></tr>
<tr class="memdesc:a949502c1eeb815669fea831f00259ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the initial green buffer (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a949502c1eeb815669fea831f00259ca1">More...</a><br /></td></tr>
<tr class="separator:a949502c1eeb815669fea831f00259ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53818b9c9562540f84ba3868b14748e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae53818b9c9562540f84ba3868b14748e">set_final_green_buffer</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:ae53818b9c9562540f84ba3868b14748e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the final green buffer (ms). This value is used to account for safety. The assumption is that no vehicle shall enter the intersection box after the end of a green phase minus the final green buffer.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae53818b9c9562540f84ba3868b14748e">More...</a><br /></td></tr>
<tr class="separator:ae53818b9c9562540f84ba3868b14748e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c889e1844e852a3128e965a732f7a7"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ad1c889e1844e852a3128e965a732f7a7">get_final_green_buffer</a> () const</td></tr>
<tr class="memdesc:ad1c889e1844e852a3128e965a732f7a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the final green buffer (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ad1c889e1844e852a3128e965a732f7a7">More...</a><br /></td></tr>
<tr class="separator:ad1c889e1844e852a3128e965a732f7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc705aba7b1adec0531ef8ed1aa62aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a5bc705aba7b1adec0531ef8ed1aa62aa">set_et_inaccuracy_buffer</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:a5bc705aba7b1adec0531ef8ed1aa62aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the entering time (ET) inaccuracy_buffer (ms). This value is defined to account for entering time (ET) estimation inaccuracy. To find the required green duration for dissipating a queue from an entry lane, the end of the green is set to the estimated ET of the last vehicle in the queue plus this configurable parameter plus final_green_buffer.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a5bc705aba7b1adec0531ef8ed1aa62aa">More...</a><br /></td></tr>
<tr class="separator:a5bc705aba7b1adec0531ef8ed1aa62aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b94207d0de2253c9e96d2012c791714"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a5b94207d0de2253c9e96d2012c791714">get_et_inaccuracy_buffer</a> () const</td></tr>
<tr class="memdesc:a5b94207d0de2253c9e96d2012c791714"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the ET inaccuracy buffer (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a5b94207d0de2253c9e96d2012c791714">More...</a><br /></td></tr>
<tr class="separator:a5b94207d0de2253c9e96d2012c791714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fee113e0414a044ee1a58522dce9bf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2fee113e0414a044ee1a58522dce9bf1">set_queue_max_time_headway</a> (const uint64_t buffer)</td></tr>
<tr class="memdesc:a2fee113e0414a044ee1a58522dce9bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the queue max time headway (ms). This value defines the maximum allowed time headway between the estimated entering times (ETs) of two consecutive vehicles within a queue.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2fee113e0414a044ee1a58522dce9bf1">More...</a><br /></td></tr>
<tr class="separator:a2fee113e0414a044ee1a58522dce9bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d22ce2835c7b2816fbbb893a3c30b53"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7d22ce2835c7b2816fbbb893a3c30b53">get_queue_max_time_headway</a> () const</td></tr>
<tr class="memdesc:a7d22ce2835c7b2816fbbb893a3c30b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the queue max time headway (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7d22ce2835c7b2816fbbb893a3c30b53">More...</a><br /></td></tr>
<tr class="separator:a7d22ce2835c7b2816fbbb893a3c30b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac281457f0740bb0ce70b15dd7198993c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac281457f0740bb0ce70b15dd7198993c">set_so_radius</a> (const double radius)</td></tr>
<tr class="memdesc:ac281457f0740bb0ce70b15dd7198993c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the so area radius (meter). The signal optimization service only considers vehicles that are within the signal optimization area.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac281457f0740bb0ce70b15dd7198993c">More...</a><br /></td></tr>
<tr class="separator:ac281457f0740bb0ce70b15dd7198993c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7444292a2c14f62f6be9e93f7fd33402"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7444292a2c14f62f6be9e93f7fd33402">get_so_radius</a> () const</td></tr>
<tr class="memdesc:a7444292a2c14f62f6be9e93f7fd33402"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the so area radius (meter).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7444292a2c14f62f6be9e93f7fd33402">More...</a><br /></td></tr>
<tr class="separator:a7444292a2c14f62f6be9e93f7fd33402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec5f4548643365d01ac1cb6f2c9b595"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aaec5f4548643365d01ac1cb6f2c9b595">set_min_green</a> (const uint64_t _min_green)</td></tr>
<tr class="memdesc:aaec5f4548643365d01ac1cb6f2c9b595"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the configurable minimum green (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aaec5f4548643365d01ac1cb6f2c9b595">More...</a><br /></td></tr>
<tr class="separator:aaec5f4548643365d01ac1cb6f2c9b595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b71a3cba4fd646fd8e37e534c815471"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2b71a3cba4fd646fd8e37e534c815471">get_min_green</a> () const</td></tr>
<tr class="memdesc:a2b71a3cba4fd646fd8e37e534c815471"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the configurable minimum green (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2b71a3cba4fd646fd8e37e534c815471">More...</a><br /></td></tr>
<tr class="separator:a2b71a3cba4fd646fd8e37e534c815471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffefa3a1923bc7465f9f8f70b022ce5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a9ffefa3a1923bc7465f9f8f70b022ce5">set_max_green</a> (const uint64_t _max_green)</td></tr>
<tr class="memdesc:a9ffefa3a1923bc7465f9f8f70b022ce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the configurable maximum green (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a9ffefa3a1923bc7465f9f8f70b022ce5">More...</a><br /></td></tr>
<tr class="separator:a9ffefa3a1923bc7465f9f8f70b022ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02547ebe4aef8641747111833225a35c"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a02547ebe4aef8641747111833225a35c">get_max_green</a> () const</td></tr>
<tr class="memdesc:a02547ebe4aef8641747111833225a35c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the configurable maximum green (ms).  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a02547ebe4aef8641747111833225a35c">More...</a><br /></td></tr>
<tr class="separator:a02547ebe4aef8641747111833225a35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d0f5d85f0595295cd90225178ab5cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a99d0f5d85f0595295cd90225178ab5cd">set_desired_future_move_group_count</a> (const uint8_t count)</td></tr>
<tr class="memdesc:a99d0f5d85f0595295cd90225178ab5cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the desired number of future movement groups.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a99d0f5d85f0595295cd90225178ab5cd">More...</a><br /></td></tr>
<tr class="separator:a99d0f5d85f0595295cd90225178ab5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d640df400ea645d081b733a3a54ad2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a22d640df400ea645d081b733a3a54ad2">get_desired_future_move_group_count</a> () const</td></tr>
<tr class="memdesc:a22d640df400ea645d081b733a3a54ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the desired number of future movement groups.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a22d640df400ea645d081b733a3a54ad2">More...</a><br /></td></tr>
<tr class="separator:a22d640df400ea645d081b733a3a54ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a161786e28588b6b598f4d7cc043fd54f"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; uint8_t, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a161786e28588b6b598f4d7cc043fd54f">get_signal_group_entry_lane_mapping</a> () const</td></tr>
<tr class="memdesc:a161786e28588b6b598f4d7cc043fd54f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the entry lane to signal group mapping.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a161786e28588b6b598f4d7cc043fd54f">More...</a><br /></td></tr>
<tr class="separator:a161786e28588b6b598f4d7cc043fd54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac62567baf136faa38cdd1abdb038b9cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac62567baf136faa38cdd1abdb038b9cd">verify_movement_group_list</a> (const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr, const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;move_groups) const</td></tr>
<tr class="memdesc:ac62567baf136faa38cdd1abdb038b9cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an intersection_info pointer and a list of possible movement groups, this method checks if all signal groups included in the movement groups list are included in the intersection_info pointer. Basically, a signal group cannot be used if it is not connected to a given link lanelet (i.e., it does not exist in the intersection_info pointer). This method will throw exception if this requirement is not satisfied.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac62567baf136faa38cdd1abdb038b9cd">More...</a><br /></td></tr>
<tr class="separator:ac62567baf136faa38cdd1abdb038b9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba26d0295becc70bb4532f78032cac0"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">streets_vehicle_scheduler::intersection_schedule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2ba26d0295becc70bb4532f78032cac0">get_schedule_plan</a> (std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles) const</td></tr>
<tr class="memdesc:a2ba26d0295becc70bb4532f78032cac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a map of vehicles and vehicle ids, this method will run the signalized_vehicle_scheduler methods to populate the signalized_intersection_schedule with a schedule for all vehicles in the vehicle map based on UC 3 scheduling logic which estimates vehicles' entering times to the intersection box based on the modified spat.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2ba26d0295becc70bb4532f78032cac0">More...</a><br /></td></tr>
<tr class="separator:a2ba26d0295becc70bb4532f78032cac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab974fdb3d73264b38935d5056baba6c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ab974fdb3d73264b38935d5056baba6c0">get_ev_schedules_within_so</a> (const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">streets_vehicle_scheduler::intersection_schedule</a> &gt; &amp;sched_ptr, const std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;vehicles) const</td></tr>
<tr class="memdesc:ab974fdb3d73264b38935d5056baba6c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a populated signalized_intersection_schedule, this method will return a new signalized_intersection_schedule object that includes those EVs that are within the signal optimization area.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ab974fdb3d73264b38935d5056baba6c0">More...</a><br /></td></tr>
<tr class="separator:ab974fdb3d73264b38935d5056baba6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4125643cc359bd85567d9c59b480f640"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a4125643cc359bd85567d9c59b480f640">get_schedules_in_tbd_per_lane</a> (const <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a> &amp;ev_schedules_within_so, const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr, const uint64_t &amp;tbd_start) const</td></tr>
<tr class="memdesc:a4125643cc359bd85567d9c59b480f640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a populated signalized_intersection_schedule object, intersection_info shared pointer, and the start time of TBD area, This method returns a MAP of entry lanes as keys and a list of vehicle schedules for each entry lane as value. Only those vehicles that have an entering time (ET) after the start of the TBD area will be included in this mapping.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a4125643cc359bd85567d9c59b480f640">More...</a><br /></td></tr>
<tr class="separator:a4125643cc359bd85567d9c59b480f640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d6788e1987b9ea4cd6b9408a8ddc568"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568">get_green_end_per_entry_lane</a> (const std::unordered_map&lt; int, std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &gt; &amp;schedules_in_tbd, const uint64_t &amp;tbd_start) const</td></tr>
<tr class="memdesc:a8d6788e1987b9ea4cd6b9408a8ddc568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane, this method will find the last vehicle in the queue, calculates the queue dissipation time, and finally returns the end time for the required green duration to dissipate the queue. The last vehicle in the queue is the vehicle that has entering time (ET) equal to its earliest entering time (EET) and the time headway between its ET and its following vehicle's ET is greater than the configurable queue_max_time_headway parameter. If such a vehicle could not be found, the last vehicle in the entry lane will be considered as the last vehicle in the queue.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568">More...</a><br /></td></tr>
<tr class="separator:a8d6788e1987b9ea4cd6b9408a8ddc568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091cc776db4ad29424a416c97d973e66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66">get_last_vehicle_in_queue</a> (const std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &amp;evs_in_lane) const</td></tr>
<tr class="memdesc:a091cc776db4ad29424a416c97d973e66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicle in the queue. The last vehicle in the queue is the vehicle that has entering time (ET) equal to its earliest entering time (EET) and the time headway between its ET and its following vehicle's ET is greater than the configurable queue_max_time_headway parameter. If such a vehicle could not be found, the last vehicle in the entry lane will be considered as the last vehicle in the queue.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66">More...</a><br /></td></tr>
<tr class="separator:a091cc776db4ad29424a416c97d973e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace90552a55cd49129a6fc49f95f6219c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c">update_desired_phase_plan_list</a> (const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;move_groups, const std::unordered_map&lt; int, uint64_t &gt; &amp;green_end_per_entry_lane, const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;base_desired_phase_plan, std::vector&lt; <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &gt; &amp;desired_phase_plan_list, const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr, const uint64_t &amp;tbd_start)</td></tr>
<tr class="memdesc:ace90552a55cd49129a6fc49f95f6219c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a list of movement groups, a mapping of the end time of required green duration for clearing the queue to entry lane id, and an updated base_desired_phase_plan, this method with create a list of desired phase plans, where each desired phase plan in the list includes the existing fixed future movement groups from the received spat and a new movement group with a given duration at the end. For each movement group, this method first checks if the movement group can be added to the base_desired_phase_plan (i.e., if the movement group has a common signal group with the last movement group in the base_desired_phase_plan). If the movement group can be added, for each entry lane allowed by the subject movement group, this method will add a new desired phase plan to the list, where the last movement group is the subject movement group and the end time of the green is the end time of required green duration for clearing the queue of the subject entry lane.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c">More...</a><br /></td></tr>
<tr class="separator:ace90552a55cd49129a6fc49f95f6219c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6df11e3c45aedd80e543e6ce51105eb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb">find_signal_group_for_entry_lane</a> (const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;intersection_info_ptr, const <a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> &amp;entry_lane_info) const</td></tr>
<tr class="memdesc:ae6df11e3c45aedd80e543e6ce51105eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_scheduler is only capable of understanding intersection where all connection lanes from a single entry lane share a signal_group_id. Therefore, vehicles from an entry lane with different directions at the intersection box shall be able to receive protected green at the same time.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb">More...</a><br /></td></tr>
<tr class="separator:ae6df11e3c45aedd80e543e6ce51105eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79d8437bc6c003de3da09a876b0d1434"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a79d8437bc6c003de3da09a876b0d1434">FRIEND_TEST</a> (test_streets_desired_phase_plan_generator, test_generate_desired_phase_plan_list)</td></tr>
<tr class="separator:a79d8437bc6c003de3da09a876b0d1434"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acc055a2d89797af1b9c701f30c0184b7"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">streets_vehicle_scheduler::signalized_vehicle_scheduler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a></td></tr>
<tr class="memdesc:acc055a2d89797af1b9c701f30c0184b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shared pointer to the signalized vehicle scheduler.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">More...</a><br /></td></tr>
<tr class="separator:acc055a2d89797af1b9c701f30c0184b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92a186620a218690a0ea0cb5866d1c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html">streets_desired_phase_plan_generator_configuration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a></td></tr>
<tr class="memdesc:aa92a186620a218690a0ea0cb5866d1c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">A struct containing the configurable parameters for desired_phsae_plan_generator functions.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">More...</a><br /></td></tr>
<tr class="separator:aa92a186620a218690a0ea0cb5866d1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a3dd61cc27c767677b77d6df890564b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7a3dd61cc27c767677b77d6df890564b">is_configured</a> = false</td></tr>
<tr class="memdesc:a7a3dd61cc27c767677b77d6df890564b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The bool parameter defining whether the configurable parameter are set to their desired values or not.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7a3dd61cc27c767677b77d6df890564b">More...</a><br /></td></tr>
<tr class="separator:a7a3dd61cc27c767677b77d6df890564b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866fa334a545984b8d68981eecc88c99"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; uint8_t, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a></td></tr>
<tr class="memdesc:a866fa334a545984b8d68981eecc88c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of signal group to vector of entry lanes that are served by this signal group.. Each signal group might be assigned to more than one entry lanes.  <a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">More...</a><br /></td></tr>
<tr class="separator:a866fa334a545984b8d68981eecc88c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00024">24</a> of file <a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae1567c84601fba5a1020329972e54e4c" name="ae1567c84601fba5a1020329972e54e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1567c84601fba5a1020329972e54e4c">&#9670;&nbsp;</a></span>streets_desired_phase_plan_generator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_signal_optimization::streets_desired_phase_plan_generator::streets_desired_phase_plan_generator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new desired phase plan generator object. </p>

</div>
</div>
<a id="aa4e1ca64b958e4b517484fdca017e6e3" name="aa4e1ca64b958e4b517484fdca017e6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4e1ca64b958e4b517484fdca017e6e3">&#9670;&nbsp;</a></span>~streets_desired_phase_plan_generator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_signal_optimization::streets_desired_phase_plan_generator::~streets_desired_phase_plan_generator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy the desired phase plan generator object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a763e65cd750c9af29c85f654cf259408" name="a763e65cd750c9af29c85f654cf259408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763e65cd750c9af29c85f654cf259408">&#9670;&nbsp;</a></span>configure_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::configure_scheduler </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the scheduler pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
  </table>
  </dd>
</dl>
<p >configure the signalized_vehicle_scheduler pointer</p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00286">286</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  287</span>                                                                                             {</div>
<div class="line"><span class="lineno">  289</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a> = std::make_shared&lt;streets_vehicle_scheduler::signalized_vehicle_scheduler&gt;();</div>
<div class="line"><span class="lineno">  290</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>-&gt;set_intersection_info(intersection_info_ptr);</div>
<div class="line"><span class="lineno">  291</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>-&gt;set_initial_green_buffer(<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">initial_green_buffer</a>);</div>
<div class="line"><span class="lineno">  292</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>-&gt;set_final_green_buffer(<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a>);</div>
<div class="line"><span class="lineno">  293</span>    }</div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_aa92a186620a218690a0ea0cb5866d1c1"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">streets_signal_optimization::streets_desired_phase_plan_generator::config</a></div><div class="ttdeci">streets_desired_phase_plan_generator_configuration config</div><div class="ttdoc">A struct containing the configurable parameters for desired_phsae_plan_generator functions.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8h_source.html#l00035">streets_desired_phase_plan_generator.h:35</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_acc055a2d89797af1b9c701f30c0184b7"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">streets_signal_optimization::streets_desired_phase_plan_generator::scheduler_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; streets_vehicle_scheduler::signalized_vehicle_scheduler &gt; scheduler_ptr</div><div class="ttdoc">A shared pointer to the signalized vehicle scheduler.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8h_source.html#l00030">streets_desired_phase_plan_generator.h:30</a></div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_a379a98a899ebbb6f41bfe60d1fc4623d"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a></div><div class="ttdeci">uint64_t final_green_buffer</div><div class="ttdoc">The configurable time interval at the end of a green phase in milliseconds that is considered for est...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_desired_phase_plan_generator_configuration.h:22</a></div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_aa9bb51b9b9206a5e7ec16a941f4bce5c"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::initial_green_buffer</a></div><div class="ttdeci">uint64_t initial_green_buffer</div><div class="ttdoc">The configurable time interval at the beginning of a green phase in milliseconds that is considered f...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00016">streets_desired_phase_plan_generator_configuration.h:16</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00016">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::initial_green_buffer</a>, and <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00030">scheduler_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a763e65cd750c9af29c85f654cf259408_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a763e65cd750c9af29c85f654cf259408_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a763e65cd750c9af29c85f654cf259408_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a763e65cd750c9af29c85f654cf259408_icgraph">
<area shape="rect" title="Configure the scheduler pointer." alt="" coords="232,5,411,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="af80ed21716db2df155ff2d939bc12fae" name="af80ed21716db2df155ff2d939bc12fae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af80ed21716db2df155ff2d939bc12fae">&#9670;&nbsp;</a></span>convert_spat_to_dpp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> streets_signal_optimization::streets_desired_phase_plan_generator::convert_spat_to_dpp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">signal_phase_and_timing::intersection_state</a> &amp;&#160;</td>
          <td class="paramname"><em>intersection_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_groups</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the provided intersection_state to a desired phase plan. The number of fixed future movement groups shall be at least 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">move_groups</td><td>Shared pointer to a list of possible movement groups. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> desired phase plan converted from intersection_state. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>a movement state does not have any movement event in its state_time_speed list. </td></tr>
    <tr><td class="paramname">If</td><td>a signal group has a green timing that partially overlaps with a green timing of another signal group. </td></tr>
  </table>
  </dd>
</dl>
<p >is_added parameter checks if mg_green has been added to the base_desired_phase_plan somewhere before the last existing <a class="el" href="structstreets__signal__optimization_1_1movement__group.html" title="A movement group is a combination of signal groups with non-conflicting directions....">movement_group</a>. If this parameter is false at the end of the for loop, mg_green must be added to the end of the list.</p>
<p >If is_added is false, mg_green is not added to the base_desired_phase_plan which means that mg_green must be added to the end of the list!</p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00156">156</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>                                                                                                        {</div>
<div class="line"><span class="lineno">  159</span>        </div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_struct" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> base_desired_phase_plan;</div>
<div class="line"><span class="lineno">  161</span>        base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a6ab5f8258479b528ce1b9b2a4815fb04">timestamp</a> = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::system_clock::now().time_since_epoch()).count();</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        std::vector&lt;streets_desired_phase_plan::signal_group2green_phase_timing&gt; mg_green_list;</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; mg : move_groups-&gt;groups) {</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> move_state_1;</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a> move_state_2;</div>
<div class="line"><span class="lineno">  168</span>            move_state_1 = intersection_state.<a class="code hl_function" href="structsignal__phase__and__timing_1_1intersection__state.html#a0212a92fdea9a7f1f5959d002ba7dda9">get_movement</a>(mg.signal_groups.first); </div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">if</span> (move_state_1.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.empty()) {</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;signal group &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(move_state_1.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>) + <span class="stringliteral">&quot; has empty movement_state list in the provided intersection_state object!&quot;</span>);</div>
<div class="line"><span class="lineno">  171</span>            } </div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordflow">if</span> (mg.signal_groups.second != 0) {</div>
<div class="line"><span class="lineno">  173</span>                move_state_2 = intersection_state.<a class="code hl_function" href="structsignal__phase__and__timing_1_1intersection__state.html#a0212a92fdea9a7f1f5959d002ba7dda9">get_movement</a>(mg.signal_groups.second);</div>
<div class="line"><span class="lineno">  174</span>                <span class="keywordflow">if</span> (move_state_2.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>.empty()) {</div>
<div class="line"><span class="lineno">  175</span>                    <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;signal group &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(move_state_2.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>) + <span class="stringliteral">&quot; has empty movement_state list in the provided intersection_state object!&quot;</span>);</div>
<div class="line"><span class="lineno">  176</span>                } </div>
<div class="line"><span class="lineno">  177</span>            }</div>
<div class="line"><span class="lineno">  178</span>                </div>
<div class="line"><span class="lineno">  179</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; me1 : move_state_1.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>) {</div>
<div class="line"><span class="lineno">  180</span>                <span class="keywordflow">if</span> (me1.event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>) {</div>
<div class="line"><span class="lineno">  181</span>                    <a class="code hl_struct" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> movement_group;</div>
<div class="line"><span class="lineno">  182</span>                    movement_group.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a> = me1.timing.get_epoch_start_time();</div>
<div class="line"><span class="lineno">  183</span>                    movement_group.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a> = me1.timing.get_epoch_min_end_time();</div>
<div class="line"><span class="lineno">  184</span>                    movement_group.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_state_1.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>);</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>                    <span class="keywordflow">if</span> (mg.signal_groups.second == 0) {</div>
<div class="line"><span class="lineno">  187</span>                        mg_green_list.push_back(movement_group);</div>
<div class="line"><span class="lineno">  188</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  189</span>                    }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; me2 : move_state_2.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">state_time_speed</a>) {</div>
<div class="line"><span class="lineno">  192</span>                        <span class="keywordflow">if</span> (me2.event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a> &amp;&amp; </div>
<div class="line"><span class="lineno">  193</span>                                    ((me2.timing.get_epoch_start_time() &lt; me1.timing.get_epoch_start_time() &amp;&amp; </div>
<div class="line"><span class="lineno">  194</span>                                    me2.timing.get_epoch_min_end_time() &gt; me1.timing.get_epoch_start_time()) ||</div>
<div class="line"><span class="lineno">  195</span>                                    (me2.timing.get_epoch_start_time() &lt; me1.timing.get_epoch_min_end_time() &amp;&amp; </div>
<div class="line"><span class="lineno">  196</span>                                    me2.timing.get_epoch_min_end_time() &gt; me1.timing.get_epoch_min_end_time()))) {</div>
<div class="line"><span class="lineno">  197</span>                            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;spat has fixed future signal groups with partially overlapping green durations!&quot;</span>);</div>
<div class="line"><span class="lineno">  198</span>                        }</div>
<div class="line"><span class="lineno">  199</span>                        <span class="keywordflow">if</span> (me2.event_state == <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a> &amp;&amp; </div>
<div class="line"><span class="lineno">  200</span>                                    me2.timing.get_epoch_start_time() == me1.timing.get_epoch_start_time() &amp;&amp; </div>
<div class="line"><span class="lineno">  201</span>                                    me2.timing.get_epoch_min_end_time() == me1.timing.get_epoch_min_end_time()) {</div>
<div class="line"><span class="lineno">  202</span>                            </div>
<div class="line"><span class="lineno">  203</span>                            movement_group.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_state_2.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_group</a>);</div>
<div class="line"><span class="lineno">  204</span>                            mg_green_list.push_back(movement_group);</div>
<div class="line"><span class="lineno">  205</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  206</span>                        }</div>
<div class="line"><span class="lineno">  207</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (me2.timing.get_epoch_start_time() &gt; me1.timing.get_epoch_start_time()) {</div>
<div class="line"><span class="lineno">  208</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  209</span>                        }</div>
<div class="line"><span class="lineno">  210</span>                    }</div>
<div class="line"><span class="lineno">  211</span>                }</div>
<div class="line"><span class="lineno">  212</span>            }</div>
<div class="line"><span class="lineno">  213</span>        }</div>
<div class="line"><span class="lineno">  214</span>        </div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; mg_green : mg_green_list) {</div>
<div class="line"><span class="lineno">  216</span>            <span class="keywordflow">if</span> (base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.empty()) {</div>
<div class="line"><span class="lineno">  217</span>                base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.push_back(mg_green);</div>
<div class="line"><span class="lineno">  218</span>            }</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  225</span>                <span class="keywordtype">bool</span> is_added = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  226</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> index = 0; index &lt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.size(); ++index) {</div>
<div class="line"><span class="lineno">  227</span>                    <span class="keywordflow">if</span> ( (mg_green.start_time &lt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>[index].start_time &amp;&amp; </div>
<div class="line"><span class="lineno">  228</span>                                mg_green.end_time &gt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>[index].start_time) || </div>
<div class="line"><span class="lineno">  229</span>                            (mg_green.start_time &lt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>[index].end_time &amp;&amp; </div>
<div class="line"><span class="lineno">  230</span>                                mg_green.end_time &gt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>[index].end_time) ) {</div>
<div class="line"><span class="lineno">  231</span>                        <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;spat has future movement groups with partially overlapping green durations!&quot;</span>);</div>
<div class="line"><span class="lineno">  232</span>                    }</div>
<div class="line"><span class="lineno">  233</span>                    <span class="keywordflow">if</span> (mg_green.end_time &lt; base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>[index].start_time) {</div>
<div class="line"><span class="lineno">  234</span>                        base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.insert(base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.begin() + index, mg_green);</div>
<div class="line"><span class="lineno">  235</span>                        is_added = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  236</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  237</span>                    }</div>
<div class="line"><span class="lineno">  238</span>                }</div>
<div class="line"><span class="lineno">  243</span>                <span class="keywordflow">if</span> (!is_added) {</div>
<div class="line"><span class="lineno">  244</span>                    base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.push_back(mg_green);</div>
<div class="line"><span class="lineno">  245</span>                }</div>
<div class="line"><span class="lineno">  246</span>            }</div>
<div class="line"><span class="lineno">  247</span>        }</div>
<div class="line"><span class="lineno">  248</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Base desired phase plan converted from the modified spat: {0}&quot;</span>, base_desired_phase_plan.<a class="code hl_function" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#ae2a335d599173d37b8a12abe26948c01">toJson</a>());</div>
<div class="line"><span class="lineno">  249</span>        </div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordflow">return</span> base_desired_phase_plan;</div>
<div class="line"><span class="lineno">  251</span>    }</div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a></div><div class="ttdeci">@ protected_movement_allowed</div><div class="ttdoc">Often called 'protected green' in US Driver Action: Proceed, tossing caution to the wind,...</div></div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1intersection__state_html_a0212a92fdea9a7f1f5959d002ba7dda9"><div class="ttname"><a href="structsignal__phase__and__timing_1_1intersection__state.html#a0212a92fdea9a7f1f5959d002ba7dda9">signal_phase_and_timing::intersection_state::get_movement</a></div><div class="ttdeci">movement_state &amp; get_movement(const int signal_group_id)</div><div class="ttdoc">Return reference to movement_state for signal group.</div><div class="ttdef"><b>Definition:</b> <a href="intersection__state_8cpp_source.html#l00185">intersection_state.cpp:185</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html">signal_phase_and_timing::movement_state</a></div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00015">movement_state.h:15</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_a087beaba691971b31df26e90bf4e81c4"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#a087beaba691971b31df26e90bf4e81c4">signal_phase_and_timing::movement_state::state_time_speed</a></div><div class="ttdeci">std::list&lt; movement_event &gt; state_time_speed</div><div class="ttdoc">Consisting of sets of movement data with: SignalPhaseState TimeChangeDetails Advisory Speeds (optiona...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00034">movement_state.h:34</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__state_html_ad403f25c761b6ef77b4bbc6bacbfc888"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__state.html#ad403f25c761b6ef77b4bbc6bacbfc888">signal_phase_and_timing::movement_state::signal_group</a></div><div class="ttdeci">uint8_t signal_group</div><div class="ttdoc">The group id is used to map to list of lanes (and their descriptions) which this MovementState data a...</div><div class="ttdef"><b>Definition:</b> <a href="movement__state_8h_source.html#l00025">movement_state.h:25</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a></div><div class="ttdoc">Start and end time for traffic signal green phase state assigned to a set of signal groups....</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00017">streets_desired_phase_plan.h:18</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_a349aa0bbaad1a332ea8b7dc1ee9470da"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a></div><div class="ttdeci">uint64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan.h:19</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_a6987d5d817d188e2928481c0a0c2b1b0"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">streets_desired_phase_plan::signal_group2green_phase_timing::signal_groups</a></div><div class="ttdeci">std::vector&lt; int &gt; signal_groups</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00021">streets_desired_phase_plan.h:21</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1signal__group2green__phase__timing_html_afeaff7b517806a61775cfc161d21cf1c"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a></div><div class="ttdeci">uint64_t end_time</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan.h:20</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1streets__desired__phase__plan_html"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a></div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00029">streets_desired_phase_plan.h:30</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1streets__desired__phase__plan_html_a03eca534118891c3c183eed332b33810"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a></div><div class="ttdeci">std::vector&lt; signal_group2green_phase_timing &gt; desired_phase_plan</div><div class="ttdoc">Descriptive name for this collection.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan.h:38</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1streets__desired__phase__plan_html_a6ab5f8258479b528ce1b9b2a4815fb04"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a6ab5f8258479b528ce1b9b2a4815fb04">streets_desired_phase_plan::streets_desired_phase_plan::timestamp</a></div><div class="ttdeci">uint64_t timestamp</div><div class="ttdoc">Unix timestamp when this desired phase plan is generated.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8h_source.html#l00034">streets_desired_phase_plan.h:34</a></div></div>
<div class="ttc" id="astructstreets__desired__phase__plan_1_1streets__desired__phase__plan_html_ae2a335d599173d37b8a12abe26948c01"><div class="ttname"><a href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#ae2a335d599173d37b8a12abe26948c01">streets_desired_phase_plan::streets_desired_phase_plan::toJson</a></div><div class="ttdeci">std::string toJson() const</div><div class="ttdoc">Serialize Desired phase plan object to rapidjson::Value for writing as JSON string.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan_8cpp_source.html#l00006">streets_desired_phase_plan.cpp:6</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a>, <a class="el" href="intersection__state_8cpp_source.html#l00185">signal_phase_and_timing::intersection_state::get_movement()</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="movement__state_8h_source.html#l00025">signal_phase_and_timing::movement_state::signal_group</a>, <a class="el" href="movement__group_8h_source.html#l00017">streets_signal_optimization::movement_group::signal_groups</a>, <a class="el" href="movement__state_8h_source.html#l00034">signal_phase_and_timing::movement_state::state_time_speed</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00034">streets_desired_phase_plan::streets_desired_phase_plan::timestamp</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="streets__desired__phase__plan_8cpp_source.html#l00006">streets_desired_phase_plan::streets_desired_phase_plan::toJson()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_cgraph">
<area shape="rect" title="Convert the provided intersection_state to a desired phase plan. The number of fixed future movement ..." alt="" coords="5,63,184,134"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a0212a92fdea9a7f1f5959d002ba7dda9" title="Return reference to movement_state for signal group." alt="" coords="232,5,400,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="448,53,520,80"/>
<area shape="rect" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#ae2a335d599173d37b8a12abe26948c01" title="Serialize Desired phase plan object to rapidjson::Value for writing as JSON string." alt="" coords="239,136,393,192"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_af80ed21716db2df155ff2d939bc12fae_icgraph">
<area shape="rect" title="Convert the provided intersection_state to a desired phase plan. The number of fixed future movement ..." alt="" coords="232,5,411,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a654e5540ba51776be633cdf40e683885" name="a654e5540ba51776be633cdf40e683885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654e5540ba51776be633cdf40e683885">&#9670;&nbsp;</a></span>create_signal_group_entry_lane_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::create_signal_group_entry_lane_mapping </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more than one entry lanes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00497">497</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  498</span>                                                                                             {</div>
<div class="line"><span class="lineno">  499</span>        </div>
<div class="line"><span class="lineno">  500</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.clear();</div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;lane : intersection_info_ptr-&gt;getEntryLanelets() ) {</div>
<div class="line"><span class="lineno">  502</span>            uint8_t signal_group = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb">find_signal_group_for_entry_lane</a>(intersection_info_ptr, lane);</div>
<div class="line"><span class="lineno">  503</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Creating signal group to entry lane mapping - entry lane id = {0}, signal group id = {1}&quot;</span>, lane.getId(), signal_group);</div>
<div class="line"><span class="lineno">  504</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.find(signal_group) == <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.end()) {</div>
<div class="line"><span class="lineno">  505</span>                std::vector&lt;int&gt; lane_ids;</div>
<div class="line"><span class="lineno">  506</span>                lane_ids.push_back(lane.getId());</div>
<div class="line"><span class="lineno">  507</span>                <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.try_emplace(signal_group, lane_ids);</div>
<div class="line"><span class="lineno">  508</span>            }</div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  510</span>                <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.at(signal_group).push_back(lane.getId());</div>
<div class="line"><span class="lineno">  511</span>            }</div>
<div class="line"><span class="lineno">  512</span>        }</div>
<div class="line"><span class="lineno">  513</span>    }</div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a866fa334a545984b8d68981eecc88c99"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">streets_signal_optimization::streets_desired_phase_plan_generator::signal_group_entry_lane_mapping</a></div><div class="ttdeci">std::unordered_map&lt; uint8_t, std::vector&lt; int &gt; &gt; signal_group_entry_lane_mapping</div><div class="ttdoc">Map of signal group to vector of entry lanes that are served by this signal group....</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8h_source.html#l00046">streets_desired_phase_plan_generator.h:46</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_ae6df11e3c45aedd80e543e6ce51105eb"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb">streets_signal_optimization::streets_desired_phase_plan_generator::find_signal_group_for_entry_lane</a></div><div class="ttdeci">uint8_t find_signal_group_for_entry_lane(const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr, const OpenAPI::OAILanelet_info &amp;entry_lane_info) const</div><div class="ttdoc">Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00516">streets_desired_phase_plan_generator.cpp:516</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00516">find_signal_group_for_entry_lane()</a>, and <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00046">signal_group_entry_lane_mapping</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00415">update_desired_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_cgraph">
<area shape="rect" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ..." alt="" coords="5,56,203,127"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb" title="Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche..." alt="" coords="251,56,432,127"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="480,5,680,47"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="507,71,653,112"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="544,137,616,163"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a654e5540ba51776be633cdf40e683885_icgraph">
<area shape="rect" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ..." alt="" coords="488,5,685,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c" title="Given a list of movement groups, a mapping of the end time of required green duration for clearing th..." alt="" coords="232,5,440,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="ae6df11e3c45aedd80e543e6ce51105eb" name="ae6df11e3c45aedd80e543e6ce51105eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6df11e3c45aedd80e543e6ce51105eb">&#9670;&nbsp;</a></span>find_signal_group_for_entry_lane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t streets_signal_optimization::streets_desired_phase_plan_generator::find_signal_group_for_entry_lane </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOpenAPI_1_1OAILanelet__info.html">OpenAPI::OAILanelet_info</a> &amp;&#160;</td>
          <td class="paramname"><em>entry_lane_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_scheduler is only capable of understanding intersection where all connection lanes from a single entry lane share a signal_group_id. Therefore, vehicles from an entry lane with different directions at the intersection box shall be able to receive protected green at the same time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">entry_lane_info</td><td>entry lanelet lane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t signal group id </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>a connection link lanelet does not have a signal group id. </td></tr>
    <tr><td class="paramname">If</td><td>two or more connection link lanelets from a single entry lane have different signal group ids. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00516">516</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>                                                                         {</div>
<div class="line"><span class="lineno">  519</span>        </div>
<div class="line"><span class="lineno">  520</span>        <span class="comment">// check if all links connected to the entry lane have the same signal ids or not!</span></div>
<div class="line"><span class="lineno">  521</span>        uint8_t signal_group_id = 0;</div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordtype">bool</span> first_link_visited = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  523</span>        <span class="keyword">auto</span> connection_lanelet_ids = entry_lane_info.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9">getConnectingLaneletIds</a>();</div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;lane : intersection_info_ptr-&gt;getLinkLanelets() ) {</div>
<div class="line"><span class="lineno">  525</span>            <span class="comment">// check if the link lanelet&#39;s id (lane.getId()) is included in the list of connecting lanelet ids of the received entry lanelet.</span></div>
<div class="line"><span class="lineno">  526</span>            <span class="keywordflow">if</span> ( std::find(connection_lanelet_ids.begin(), connection_lanelet_ids.end(), lane.getId()) != connection_lanelet_ids.end() ) {</div>
<div class="line"><span class="lineno">  527</span>                <span class="keywordflow">if</span> ( !lane.getSignalGroupId() ) {</div>
<div class="line"><span class="lineno">  528</span>                    <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;The connection link lanelet does not have a group_id!&quot;</span>);</div>
<div class="line"><span class="lineno">  529</span>                }</div>
<div class="line"><span class="lineno">  530</span>                <span class="keywordflow">if</span> (first_link_visited &amp;&amp; lane.getSignalGroupId() != signal_group_id){</div>
<div class="line"><span class="lineno">  531</span>                    <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;The link lanelets connected to the entry lane have different signal_group_ids! The streets_desired_phase_plan_generator is only capable of understanding intersection where all connection lanes from a single entry lane share a signal_group_id!&quot;</span>);</div>
<div class="line"><span class="lineno">  532</span>                }</div>
<div class="line"><span class="lineno">  533</span>                <span class="keywordflow">if</span> (!first_link_visited) {</div>
<div class="line"><span class="lineno">  534</span>                    signal_group_id = lane.getSignalGroupId();</div>
<div class="line"><span class="lineno">  535</span>                    first_link_visited = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  536</span>                }</div>
<div class="line"><span class="lineno">  537</span>            }</div>
<div class="line"><span class="lineno">  538</span>        }</div>
<div class="line"><span class="lineno">  539</span>        <span class="keywordflow">if</span> (signal_group_id == 0) {</div>
<div class="line"><span class="lineno">  540</span>            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;Could not find signal group id for entry lane &quot;</span> + </div>
<div class="line"><span class="lineno">  541</span>                                    <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(entry_lane_info.<a class="code hl_function" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">getId</a>()) + <span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><span class="lineno">  542</span>        }</div>
<div class="line"><span class="lineno">  543</span>        <span class="keywordflow">return</span> signal_group_id;</div>
<div class="line"><span class="lineno">  544</span>    }</div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_a489d1a475686159298697bccabd2bd52"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52">OpenAPI::OAILanelet_info::getId</a></div><div class="ttdeci">qint32 getId() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00121">OAILanelet_info.cpp:121</a></div></div>
<div class="ttc" id="aclassOpenAPI_1_1OAILanelet__info_html_abcfdd002f92a00fc383e2de5027fa7c9"><div class="ttname"><a href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9">OpenAPI::OAILanelet_info::getConnectingLaneletIds</a></div><div class="ttdeci">QList&lt; qint32 &gt; getConnectingLaneletIds() const</div><div class="ttdef"><b>Definition:</b> <a href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00217">OAILanelet_info.cpp:217</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00217">OpenAPI::OAILanelet_info::getConnectingLaneletIds()</a>, <a class="el" href="intersection__client__api_2OAILanelet__info_8cpp_source.html#l00121">OpenAPI::OAILanelet_info::getId()</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00497">create_signal_group_entry_lane_mapping()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_cgraph">
<area shape="rect" title="Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche..." alt="" coords="5,56,187,127"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="235,5,435,47"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="261,71,408,112"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="299,137,371,163"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ae6df11e3c45aedd80e543e6ce51105eb_icgraph">
<area shape="rect" title="Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche..." alt="" coords="733,5,915,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ..." alt="" coords="488,5,685,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c" title="Given a list of movement groups, a mapping of the end time of required green duration for clearing th..." alt="" coords="232,5,440,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a0a264d3d1f555c9318dad731cd781520" name="a0a264d3d1f555c9318dad731cd781520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a264d3d1f555c9318dad731cd781520">&#9670;&nbsp;</a></span>find_tbd_start_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::find_tbd_start_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;&#160;</td>
          <td class="paramname"><em>base_desired_phase_plan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tsc_config_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal to the end time of the last movement event of a given signal group\movement event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base_desired_phase_plan</td><td>The desired_phase_plan converted from the provided intersection_state. </td></tr>
    <tr><td class="paramname">tsc_config_ptr</td><td>shared pointer to tsc configuration state object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint64_t start time of TBD. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">An</td><td>exception if the base_desired_phase_plan converted from spat is empty. </td></tr>
    <tr><td class="paramname">An</td><td>exception if the tsc_config_ptr does not include the configuration parameter for a signal group. </td></tr>
    <tr><td class="paramname">An</td><td>exception if the maximum (yellow_change_interval + red_clearance) for the last movement group stays zero! </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00254">254</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>                                                                                                                 {</div>
<div class="line"><span class="lineno">  257</span>        uint64_t tbd_start = 0;</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">if</span> (base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.empty()) {</div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;No green movement group is found in the spat. base_desired_phase_plan is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">  260</span>        }</div>
<div class="line"><span class="lineno">  261</span>        <span class="comment">// find the last fixed movement group in the base_desired_phase_plan</span></div>
<div class="line"><span class="lineno">  262</span>        <span class="keyword">auto</span> last_movement_group = base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.back();</div>
<div class="line"><span class="lineno">  263</span>        uint64_t yellow_red_interval_local = 0;</div>
<div class="line"><span class="lineno">  264</span>        uint64_t yellow_red_interval_max = 0;</div>
<div class="line"><span class="lineno">  265</span>        <span class="comment">// find the maximum (yellow_change_duration + red_clearance) for the signal groups included in the last fixed movement group</span></div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> sg : last_movement_group.signal_groups) {</div>
<div class="line"><span class="lineno">  267</span>            <span class="keyword">auto</span> sg_config = tsc_config_ptr-&gt;get_signal_group_configuration_by_sg(sg);</div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">if</span> (sg != <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(sg_config.signal_group_id)) {</div>
<div class="line"><span class="lineno">  269</span>                <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;TSC_config does not have signal group &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(sg) + <span class="stringliteral">&quot;&#39;s configuration parameters!&quot;</span>);</div>
<div class="line"><span class="lineno">  270</span>            }</div>
<div class="line"><span class="lineno">  271</span>            yellow_red_interval_local = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(sg_config.yellow_change_duration + sg_config.red_clearance);</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">if</span> (yellow_red_interval_max &lt; yellow_red_interval_local) {</div>
<div class="line"><span class="lineno">  273</span>                yellow_red_interval_max = yellow_red_interval_local;</div>
<div class="line"><span class="lineno">  274</span>            }</div>
<div class="line"><span class="lineno">  275</span>        }</div>
<div class="line"><span class="lineno">  276</span>        <span class="keywordflow">if</span> (yellow_red_interval_max == 0) {</div>
<div class="line"><span class="lineno">  277</span>            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;yellow_red_interval_max that stores the maximum (yellow_change_duration + red_clearance) for the signal groups included in the last fixed movement group, is not updated!&quot;</span>);</div>
<div class="line"><span class="lineno">  278</span>        }</div>
<div class="line"><span class="lineno">  279</span>        tbd_start = last_movement_group.end_time + yellow_red_interval_max;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;TBD start time: {0}&quot;</span>, tbd_start);</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">return</span> tbd_start;</div>
<div class="line"><span class="lineno">  283</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_cgraph">
<area shape="rect" title="Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal ..." alt="" coords="5,5,184,76"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="232,27,304,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a0a264d3d1f555c9318dad731cd781520_icgraph">
<area shape="rect" title="Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal ..." alt="" coords="232,5,411,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a79d8437bc6c003de3da09a876b0d1434" name="a79d8437bc6c003de3da09a876b0d1434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79d8437bc6c003de3da09a876b0d1434">&#9670;&nbsp;</a></span>FRIEND_TEST()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">streets_signal_optimization::streets_desired_phase_plan_generator::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype">test_streets_desired_phase_plan_generator&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_generate_desired_phase_plan_list&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abb2ec72377cdaeac42cb8406046516fa" name="abb2ec72377cdaeac42cb8406046516fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2ec72377cdaeac42cb8406046516fa">&#9670;&nbsp;</a></span>generate_desire_phase_plan_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &gt; streets_signal_optimization::streets_desired_phase_plan_generator::generate_desire_phase_plan_list </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsignal__phase__and__timing_1_1intersection__state.html">signal_phase_and_timing::intersection_state</a> &amp;&#160;</td>
          <td class="paramname"><em>intersection_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_groups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__tsc__configuration_1_1tsc__configuration__state.html">streets_tsc_configuration::tsc_configuration_state</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>tsc_config_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fixed future movement groups from the provided intersection_state and a new movement group with a given duration at the end. An empty desired phase plan list means that the desired phase plan converted from the spat cannot be updated. This can happen in one of the following scenarios: </p>
<ul>
<li>There are no vehicles in the SO area.</li>
<li>All vehicles can enter the intersection box within the already fixed future movement groups (i.e., there are no vehicle with ET greater than the start time of the TBD area.).</li>
<li>No movement group that serves vehicles can be added to the end of the movement event list from the spat due to repeating signal group constraint (i.e., a movement group that has a common signal group with the last fixed future movement group in spat).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">vehicles</td><td>A map of the vehicles to schedule, with vehicle id as keys. </td></tr>
    <tr><td class="paramname">intersection_state</td><td>An intersection_state object from the most recent spat. </td></tr>
    <tr><td class="paramname">move_groups</td><td>Shared pointer to a list of possible movement groups. </td></tr>
    <tr><td class="paramname">tsc_config_ptr</td><td>shared pointer to tsc configuration state object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector&lt;streets_desired_phase_plan::streets_desired_phase_plan&gt; list of desired phase plans. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">if</td><td>the provided intersection_state does not have any fixed future movement group. </td></tr>
  </table>
  </dd>
</dl>
<p >First, check if all signal groups included in the movement group list exist in the intersection_info pointer (i.e., each signal group is connected to at least one link lanelet).</p>
<p >If the configurable parameters are not set, set them to their default values. Default values:</p><ul>
<li>initial_green_buffer = 2,000 ms</li>
<li>final_green_buffer = 2,000 ms</li>
<li>et_inaccuracy_buffer = 2,000 ms</li>
<li>queue_max_time_headway = 3,000 ms</li>
<li>so_radius = 200 meter</li>
<li>min_green = 50,000 ms</li>
<li>max_green = 120,000 ms</li>
<li>desired_future_move_group_count = 1</li>
</ul>
<p >Convert the provided intersection_state to a desired_phase_plan and name it base_desired_phase_plan. If base_desired_phase_plan is empty, then throw exception. If the number of fixed movement group in base_desired_phase_plan is greater than the desired number of fixed movement groups, then there is no need for adding a new movement group to base_desired_phase_plan. Thus, return an empty desired_phase_plan_list. Otherwise, find the start time of the TBD area and continue.</p>
<p >The provided spat have only a configurable number of fixed future movement groups. Any time area after the fixed future movement groups is defined as the to-be-determined (TBD) area. Basically, the TBD area starts from the end time of the red clearance of the last fixed greens. If a vehicle's estimated entering time (ET) is within the TBD area (after the end time of the last movement_state), the vehicle will be considered in the queue calculation.</p>
<p >If the vehicle map is empty, return an empty desired phase plan list.</p>
<p >Create a local spat pointer. Check if the scheduler pointer is configured. Set the spat in the scheduler pointer. Then, schedule all vehicles and get the intersection_scheduler pointer</p>
<p >Then, add the schedule plans for those EVs that are within the SO area to a separate signalized_intersection_schedule object. If the new list is empty (i.e., there is no EV in the SO area), return an empty desired phase plan list.</p>
<p >Then, seperate EV schedules that have estimated entering times (ETs) within TBD area based on their entry lane. The list of EV schedules for each entry lane is sorted based on the estimated ET. If the schedules in TBD per entry lane map is empty (i.e., there is no EV with an estimated ET within TBD area), return an empty desired phase plan list.</p>
<p >For each entry lane, find the last vehicle in the queue, calculate the queue dissipation time, and finally, estimate the end time of the required green for dissipation the queue from the subject entry lane. If the green end time per entry lane map is empty, throw exception (there are EVs with estimated ET within TVD area, but there is no green considered for any vehicle!) and return an empty desired phase plan list.</p>
<p >For each possible movement group, first, check if the movement group can be added to the base desired phase plan, (check if the subject movement group has a common signal group with the last movement group in the base desired phase plan list or not!). If the movement group can be added to the base desired phase plan, for each entry lane included in the subject movement group, add a new desired phase plan to the desired phase plan list where the subject movement group is added to the base desired phsae plan with the green end time calculated for the entry lane. If the desired phase plan list is empty, it means that no movement group that clears a given queue can be added to the base desired phase plan.</p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00006">6</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   11</span>                                                                                                                   {</div>
<div class="line"><span class="lineno">   12</span> </div>
<div class="line"><span class="lineno">   13</span>        std::vector&lt;streets_desired_phase_plan::streets_desired_phase_plan&gt; desired_phase_plan_list;</div>
<div class="line"><span class="lineno">   14</span> </div>
<div class="line"><span class="lineno">   19</span>        <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac62567baf136faa38cdd1abdb038b9cd">verify_movement_group_list</a>(intersection_info_ptr, move_groups);</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7a3dd61cc27c767677b77d6df890564b">is_configured</a>) {</div>
<div class="line"><span class="lineno">   33</span>            SPDLOG_WARN(<span class="stringliteral">&quot;set_configuration was not called. Setting configuration to default!&quot;</span>);</div>
<div class="line"><span class="lineno">   34</span>            <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a688263c54d4d2311d26c0085e0b666e9">set_configuration</a>(2000, 2000, 2000, 3000, 200, 5000, 120000, 1);</div>
<div class="line"><span class="lineno">   35</span>        }</div>
<div class="line"><span class="lineno">   36</span>        </div>
<div class="line"><span class="lineno">   44</span>        <a class="code hl_struct" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> base_desired_phase_plan = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#af80ed21716db2df155ff2d939bc12fae">convert_spat_to_dpp</a>(intersection_state, move_groups);</div>
<div class="line"><span class="lineno">   45</span>        <span class="keywordflow">if</span> (base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.empty()) {</div>
<div class="line"><span class="lineno">   46</span>            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;No green movement group is found in the spat. base_desired_phase_plan is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">   47</span>        }</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">if</span> (base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.size() &gt; <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a>) {</div>
<div class="line"><span class="lineno">   49</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;The number of fixed future movement groups in the modified spat ({0}) is greater than the desired number of fixed future movement groups ({1})!&quot;</span>, base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.size(), <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a>);</div>
<div class="line"><span class="lineno">   50</span>            <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">   51</span>        }</div>
<div class="line"><span class="lineno">   58</span>        uint64_t tbd_start = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a0a264d3d1f555c9318dad731cd781520">find_tbd_start_time</a>(base_desired_phase_plan, tsc_config_ptr);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">if</span> ( vehicles.empty() ) {</div>
<div class="line"><span class="lineno">   63</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;No vehicles to schedule.&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>            <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">   65</span>        }</div>
<div class="line"><span class="lineno">   66</span>        </div>
<div class="line"><span class="lineno">   71</span>        <span class="keyword">auto</span> spat_ptr = std::make_shared&lt;signal_phase_and_timing::spat&gt;();</div>
<div class="line"><span class="lineno">   72</span>        spat_ptr-&gt;set_intersection(intersection_state);</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>) {</div>
<div class="line"><span class="lineno">   74</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;scheduler_ptr is not configured!&quot;</span>);</div>
<div class="line"><span class="lineno">   75</span>            <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a763e65cd750c9af29c85f654cf259408">configure_scheduler</a>(intersection_info_ptr);</div>
<div class="line"><span class="lineno">   76</span>        }</div>
<div class="line"><span class="lineno">   77</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>-&gt;set_spat(spat_ptr);</div>
<div class="line"><span class="lineno">   78</span>        std::shared_ptr&lt;streets_vehicle_scheduler::intersection_schedule&gt; sched_ptr = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2ba26d0295becc70bb4532f78032cac0">get_schedule_plan</a>(vehicles);</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   84</span>        <a class="code hl_struct" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a> ev_schedules_within_so = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ab974fdb3d73264b38935d5056baba6c0">get_ev_schedules_within_so</a>(sched_ptr, vehicles);</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">if</span> (ev_schedules_within_so.<a class="code hl_variable" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html#a3b09d9fc484f0294af2f7ae4fe7b195b">vehicle_schedules</a>.empty()){</div>
<div class="line"><span class="lineno">   86</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;No EV within the SO area.&quot;</span>);</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">   88</span>        }</div>
<div class="line"><span class="lineno">   89</span>        </div>
<div class="line"><span class="lineno">   95</span>        std::unordered_map&lt;int, std::list&lt;streets_vehicle_scheduler::signalized_vehicle_schedule&gt;&gt; schedules_in_tbd = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a4125643cc359bd85567d9c59b480f640">get_schedules_in_tbd_per_lane</a>(ev_schedules_within_so, intersection_info_ptr, tbd_start);            </div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">if</span> (schedules_in_tbd.empty()){</div>
<div class="line"><span class="lineno">   97</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;No EV within the TBD area.&quot;</span>);</div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">   99</span>        }</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  106</span>        std::unordered_map&lt;int, uint64_t&gt; green_end_per_entry_lane = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568">get_green_end_per_entry_lane</a>(schedules_in_tbd, tbd_start);</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordflow">if</span> (green_end_per_entry_lane.empty()) {               </div>
<div class="line"><span class="lineno">  108</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Vehicles schedules in TBD is not empty, green_end_per_entry_lane map is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">  110</span>        }</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  121</span>        <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c">update_desired_phase_plan_list</a>(move_groups, green_end_per_entry_lane, base_desired_phase_plan, desired_phase_plan_list, intersection_info_ptr, tbd_start);</div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">if</span> (desired_phase_plan_list.empty()) {</div>
<div class="line"><span class="lineno">  123</span>            SPDLOG_WARN(<span class="stringliteral">&quot;No movement group could be added and thus, the desired_phase_plan_list is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">return</span> desired_phase_plan_list;</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>    }</div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a0a264d3d1f555c9318dad731cd781520"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a0a264d3d1f555c9318dad731cd781520">streets_signal_optimization::streets_desired_phase_plan_generator::find_tbd_start_time</a></div><div class="ttdeci">uint64_t find_tbd_start_time(const streets_desired_phase_plan::streets_desired_phase_plan &amp;base_desired_phase_plan, const std::shared_ptr&lt; streets_tsc_configuration::tsc_configuration_state &gt; &amp;tsc_config_ptr) const</div><div class="ttdoc">Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00254">streets_desired_phase_plan_generator.cpp:254</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a2ba26d0295becc70bb4532f78032cac0"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2ba26d0295becc70bb4532f78032cac0">streets_signal_optimization::streets_desired_phase_plan_generator::get_schedule_plan</a></div><div class="ttdeci">std::shared_ptr&lt; streets_vehicle_scheduler::intersection_schedule &gt; get_schedule_plan(std::unordered_map&lt; std::string, streets_vehicles::vehicle &gt; &amp;vehicles) const</div><div class="ttdoc">Given a map of vehicles and vehicle ids, this method will run the signalized_vehicle_scheduler method...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00296">streets_desired_phase_plan_generator.cpp:296</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a4125643cc359bd85567d9c59b480f640"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a4125643cc359bd85567d9c59b480f640">streets_signal_optimization::streets_desired_phase_plan_generator::get_schedules_in_tbd_per_lane</a></div><div class="ttdeci">std::unordered_map&lt; int, std::list&lt; streets_vehicle_scheduler::signalized_vehicle_schedule &gt; &gt; get_schedules_in_tbd_per_lane(const streets_vehicle_scheduler::signalized_intersection_schedule &amp;ev_schedules_within_so, const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr, const uint64_t &amp;tbd_start) const</div><div class="ttdoc">Given a populated signalized_intersection_schedule object, intersection_info shared pointer,...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00326">streets_desired_phase_plan_generator.cpp:326</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a688263c54d4d2311d26c0085e0b666e9"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a688263c54d4d2311d26c0085e0b666e9">streets_signal_optimization::streets_desired_phase_plan_generator::set_configuration</a></div><div class="ttdeci">void set_configuration(const uint64_t _initial_green_buffer, const uint64_t _final_green_buffer, const uint64_t _et_inaccuracy_buffer, const uint64_t _queue_max_time_headway, const double _so_radius, const uint64_t _min_green, const uint64_t _max_green, const uint8_t _desired_future_move_group_count)</div><div class="ttdoc">Set the configurable parameters to the desired values.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00547">streets_desired_phase_plan_generator.cpp:547</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a763e65cd750c9af29c85f654cf259408"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a763e65cd750c9af29c85f654cf259408">streets_signal_optimization::streets_desired_phase_plan_generator::configure_scheduler</a></div><div class="ttdeci">void configure_scheduler(const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr)</div><div class="ttdoc">Configure the scheduler pointer.</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00286">streets_desired_phase_plan_generator.cpp:286</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a7a3dd61cc27c767677b77d6df890564b"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7a3dd61cc27c767677b77d6df890564b">streets_signal_optimization::streets_desired_phase_plan_generator::is_configured</a></div><div class="ttdeci">bool is_configured</div><div class="ttdoc">The bool parameter defining whether the configurable parameter are set to their desired values or not...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8h_source.html#l00040">streets_desired_phase_plan_generator.h:40</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a8d6788e1987b9ea4cd6b9408a8ddc568"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568">streets_signal_optimization::streets_desired_phase_plan_generator::get_green_end_per_entry_lane</a></div><div class="ttdeci">std::unordered_map&lt; int, uint64_t &gt; get_green_end_per_entry_lane(const std::unordered_map&lt; int, std::list&lt; streets_vehicle_scheduler::signalized_vehicle_schedule &gt; &gt; &amp;schedules_in_tbd, const uint64_t &amp;tbd_start) const</div><div class="ttdoc">Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane,...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00352">streets_desired_phase_plan_generator.cpp:352</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_ab974fdb3d73264b38935d5056baba6c0"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ab974fdb3d73264b38935d5056baba6c0">streets_signal_optimization::streets_desired_phase_plan_generator::get_ev_schedules_within_so</a></div><div class="ttdeci">streets_vehicle_scheduler::signalized_intersection_schedule get_ev_schedules_within_so(const std::shared_ptr&lt; streets_vehicle_scheduler::intersection_schedule &gt; &amp;sched_ptr, const std::unordered_map&lt; std::string, streets_vehicles::vehicle &gt; &amp;vehicles) const</div><div class="ttdoc">Given a populated signalized_intersection_schedule, this method will return a new signalized_intersec...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00310">streets_desired_phase_plan_generator.cpp:310</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_ac62567baf136faa38cdd1abdb038b9cd"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac62567baf136faa38cdd1abdb038b9cd">streets_signal_optimization::streets_desired_phase_plan_generator::verify_movement_group_list</a></div><div class="ttdeci">void verify_movement_group_list(const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr, const std::shared_ptr&lt; streets_signal_optimization::movement_groups &gt; &amp;move_groups) const</div><div class="ttdoc">Given an intersection_info pointer and a list of possible movement groups, this method checks if all ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00131">streets_desired_phase_plan_generator.cpp:131</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_ace90552a55cd49129a6fc49f95f6219c"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c">streets_signal_optimization::streets_desired_phase_plan_generator::update_desired_phase_plan_list</a></div><div class="ttdeci">void update_desired_phase_plan_list(const std::shared_ptr&lt; streets_signal_optimization::movement_groups &gt; &amp;move_groups, const std::unordered_map&lt; int, uint64_t &gt; &amp;green_end_per_entry_lane, const streets_desired_phase_plan::streets_desired_phase_plan &amp;base_desired_phase_plan, std::vector&lt; streets_desired_phase_plan::streets_desired_phase_plan &gt; &amp;desired_phase_plan_list, const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr, const uint64_t &amp;tbd_start)</div><div class="ttdoc">Given a list of movement groups, a mapping of the end time of required green duration for clearing th...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00415">streets_desired_phase_plan_generator.cpp:415</a></div></div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_af80ed21716db2df155ff2d939bc12fae"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#af80ed21716db2df155ff2d939bc12fae">streets_signal_optimization::streets_desired_phase_plan_generator::convert_spat_to_dpp</a></div><div class="ttdeci">streets_desired_phase_plan::streets_desired_phase_plan convert_spat_to_dpp(signal_phase_and_timing::intersection_state &amp;intersection_state, const std::shared_ptr&lt; streets_signal_optimization::movement_groups &gt; &amp;move_groups) const</div><div class="ttdoc">Convert the provided intersection_state to a desired phase plan. The number of fixed future movement ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00156">streets_desired_phase_plan_generator.cpp:156</a></div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_af1fe0710dcf4720b5edd7c3169cc7a81"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::desired_future_move_group_count</a></div><div class="ttdeci">uint8_t desired_future_move_group_count</div><div class="ttdoc">The configurable parameter that defines the desired number of fixed future movement groups in the spa...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00059">streets_desired_phase_plan_generator_configuration.h:59</a></div></div>
<div class="ttc" id="astructstreets__vehicle__scheduler_1_1signalized__intersection__schedule_html"><div class="ttname"><a href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a></div><div class="ttdoc">Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__intersection__schedule_8h_source.html#l00065">signalized_intersection_schedule.h:65</a></div></div>
<div class="ttc" id="astructstreets__vehicle__scheduler_1_1signalized__intersection__schedule_html_a3b09d9fc484f0294af2f7ae4fe7b195b"><div class="ttname"><a href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html#a3b09d9fc484f0294af2f7ae4fe7b195b">streets_vehicle_scheduler::signalized_intersection_schedule::vehicle_schedules</a></div><div class="ttdeci">std::vector&lt; signalized_vehicle_schedule &gt; vehicle_schedules</div><div class="ttdoc">Vector of all scheduled vehicles.</div><div class="ttdef"><b>Definition:</b> <a href="signalized__intersection__schedule_8h_source.html#l00079">signalized_intersection_schedule.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00286">configure_scheduler()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00156">convert_spat_to_dpp()</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00059">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::desired_future_move_group_count</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00254">find_tbd_start_time()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00310">get_ev_schedules_within_so()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00352">get_green_end_per_entry_lane()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00296">get_schedule_plan()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00326">get_schedules_in_tbd_per_lane()</a>, <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00040">is_configured</a>, <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00030">scheduler_ptr</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00547">set_configuration()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00415">update_desired_phase_plan_list()</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00079">streets_vehicle_scheduler::signalized_intersection_schedule::vehicle_schedules</a>, and <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00131">verify_movement_group_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_abb2ec72377cdaeac42cb8406046516fa_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_abb2ec72377cdaeac42cb8406046516fa_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_abb2ec72377cdaeac42cb8406046516fa_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_abb2ec72377cdaeac42cb8406046516fa_cgraph">
<area shape="rect" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,353,184,424"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a763e65cd750c9af29c85f654cf259408" title="Configure the scheduler pointer." alt="" coords="257,5,435,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#af80ed21716db2df155ff2d939bc12fae" title="Convert the provided intersection_state to a desired phase plan. The number of fixed future movement ..." alt="" coords="528,349,707,420"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a0a264d3d1f555c9318dad731cd781520" title="Find the TBD start time based on the provided modified spat. The start time of the TBD area is equal ..." alt="" coords="776,537,955,608"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ab974fdb3d73264b38935d5056baba6c0" title="Given a populated signalized_intersection_schedule, this method will return a new signalized_intersec..." alt="" coords="233,247,459,317"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568" title="Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane,..." alt="" coords="257,100,435,171"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a2ba26d0295becc70bb4532f78032cac0" title="Given a map of vehicles and vehicle ids, this method will run the signalized_vehicle_scheduler method..." alt="" coords="232,393,460,449"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a4125643cc359bd85567d9c59b480f640" title="Given a populated signalized_intersection_schedule object, intersection_info shared pointer,..." alt="" coords="244,473,448,544"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a688263c54d4d2311d26c0085e0b666e9" title="Set the configurable parameters to the desired values." alt="" coords="237,569,455,625"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ace90552a55cd49129a6fc49f95f6219c" title="Given a list of movement groups, a mapping of the end time of required green duration for clearing th..." alt="" coords="242,700,450,771"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ac62567baf136faa38cdd1abdb038b9cd" title="Given an intersection_info pointer and a list of possible movement groups, this method checks if all ..." alt="" coords="508,240,727,311"/>
<area shape="rect" href="structsignal__phase__and__timing_1_1intersection__state.html#a0212a92fdea9a7f1f5959d002ba7dda9" title="Return reference to movement_state for signal group." alt="" coords="781,393,949,449"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="1068,441,1140,467"/>
<area shape="rect" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#ae2a335d599173d37b8a12abe26948c01" title="Serialize Desired phase plan object to rapidjson::Value for writing as JSON string." alt="" coords="789,313,942,369"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66" title="Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicl..." alt="" coords="528,145,707,216"/>
<area shape="rect" href="namespacestreets__vehicle__scheduler.html#acd0cc54330a871634259b2815cc7750d" title="Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord..." alt="" coords="531,488,704,529"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ..." alt="" coords="519,700,716,771"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb" title="Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche..." alt="" coords="775,659,956,729"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="1004,705,1204,747"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="1031,640,1177,681"/>
</map>
</div>

</div>
</div>
<a id="a22d640df400ea645d081b733a3a54ad2" name="a22d640df400ea645d081b733a3a54ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d640df400ea645d081b733a3a54ad2">&#9670;&nbsp;</a></span>get_desired_future_move_group_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t streets_signal_optimization::streets_desired_phase_plan_generator::get_desired_future_move_group_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the desired number of future movement groups. </p>
<dl class="section return"><dt>Returns</dt><dd>uint8_t desired number of future movement group.. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00634">634</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  634</span>                                                                                            {</div>
<div class="line"><span class="lineno">  635</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a>;</div>
<div class="line"><span class="lineno">  636</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00059">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::desired_future_move_group_count</a>.</p>

</div>
</div>
<a id="a5b94207d0de2253c9e96d2012c791714" name="a5b94207d0de2253c9e96d2012c791714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b94207d0de2253c9e96d2012c791714">&#9670;&nbsp;</a></span>get_et_inaccuracy_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_et_inaccuracy_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the ET inaccuracy buffer (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t ET inaccuracy buffer in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00594">594</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  594</span>                                                                                  {</div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">et_inaccuracy_buffer</a>;</div>
<div class="line"><span class="lineno">  596</span>    }</div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_ad447f7868e4487368649402881e975af"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::et_inaccuracy_buffer</a></div><div class="ttdeci">uint64_t et_inaccuracy_buffer</div><div class="ttdoc">The configurable time interval in milliseconds defined to account for entering time (ET) estimation i...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00029">streets_desired_phase_plan_generator_configuration.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00029">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::et_inaccuracy_buffer</a>.</p>

</div>
</div>
<a id="ab974fdb3d73264b38935d5056baba6c0" name="ab974fdb3d73264b38935d5056baba6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab974fdb3d73264b38935d5056baba6c0">&#9670;&nbsp;</a></span>get_ev_schedules_within_so()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a> streets_signal_optimization::streets_desired_phase_plan_generator::get_ev_schedules_within_so </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">streets_vehicle_scheduler::intersection_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sched_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a populated signalized_intersection_schedule, this method will return a new signalized_intersection_schedule object that includes those EVs that are within the signal optimization area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sched_ptr</td><td>An intersection_schedule shared pointer populated with vehicle schedules. </td></tr>
    <tr><td class="paramname">vehicles</td><td>A map of the vehicles to schedule, with vehicle id as keys. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html" title="Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in millise...">streets_vehicle_scheduler::signalized_intersection_schedule</a> A signalized_intersection_schedule object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00310">310</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  312</span>                                                                                               {</div>
<div class="line"><span class="lineno">  313</span>        </div>
<div class="line"><span class="lineno">  314</span>        <span class="keyword">auto</span> schedule_ptr = std::dynamic_pointer_cast&lt;streets_vehicle_scheduler::signalized_intersection_schedule&gt; (sched_ptr);</div>
<div class="line"><span class="lineno">  315</span>        <a class="code hl_struct" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a> ev_schedules_within_so;</div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; veh_sched : schedule_ptr-&gt;vehicle_schedules) {</div>
<div class="line"><span class="lineno">  317</span>            <span class="keywordflow">if</span> (veh_sched.state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a> &amp;&amp; vehicles.at(veh_sched.v_id)._cur_distance &lt;= <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">so_radius</a>) {</div>
<div class="line"><span class="lineno">  318</span>                ev_schedules_within_so.<a class="code hl_variable" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html#a3b09d9fc484f0294af2f7ae4fe7b195b">vehicle_schedules</a>.push_back(veh_sched);</div>
<div class="line"><span class="lineno">  319</span>            }</div>
<div class="line"><span class="lineno">  320</span>        }</div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">return</span> ev_schedules_within_so;</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="ttc" id="anamespacestreets__vehicles_html_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de"><div class="ttname"><a href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a></div><div class="ttdeci">@ EV</div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_a12b15542431455c37b8cfa602963dc97"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::so_radius</a></div><div class="ttdeci">double so_radius</div><div class="ttdoc">The configurable distance in meters defined as the radius of the signal optimization (SO) area....</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00042">streets_desired_phase_plan_generator_configuration.h:42</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00042">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::so_radius</a>, and <a class="el" href="signalized__intersection__schedule_8h_source.html#l00079">streets_vehicle_scheduler::signalized_intersection_schedule::vehicle_schedules</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ab974fdb3d73264b38935d5056baba6c0_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ab974fdb3d73264b38935d5056baba6c0_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ab974fdb3d73264b38935d5056baba6c0_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ab974fdb3d73264b38935d5056baba6c0_icgraph">
<area shape="rect" title="Given a populated signalized_intersection_schedule, this method will return a new signalized_intersec..." alt="" coords="232,5,457,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="ad1c889e1844e852a3128e965a732f7a7" name="ad1c889e1844e852a3128e965a732f7a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c889e1844e852a3128e965a732f7a7">&#9670;&nbsp;</a></span>get_final_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_final_green_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the final green buffer (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t final green buffer in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00586">586</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  586</span>                                                                                {</div>
<div class="line"><span class="lineno">  587</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a>;</div>
<div class="line"><span class="lineno">  588</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a>.</p>

</div>
</div>
<a id="a8d6788e1987b9ea4cd6b9408a8ddc568" name="a8d6788e1987b9ea4cd6b9408a8ddc568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d6788e1987b9ea4cd6b9408a8ddc568">&#9670;&nbsp;</a></span>get_green_end_per_entry_lane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, uint64_t &gt; streets_signal_optimization::streets_desired_phase_plan_generator::get_green_end_per_entry_lane </td>
          <td>(</td>
          <td class="paramtype">const std::unordered_map&lt; int, std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>schedules_in_tbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t &amp;&#160;</td>
          <td class="paramname"><em>tbd_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane, this method will find the last vehicle in the queue, calculates the queue dissipation time, and finally returns the end time for the required green duration to dissipate the queue. The last vehicle in the queue is the vehicle that has entering time (ET) equal to its earliest entering time (EET) and the time headway between its ET and its following vehicle's ET is greater than the configurable queue_max_time_headway parameter. If such a vehicle could not be found, the last vehicle in the entry lane will be considered as the last vehicle in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">schedules_in_tbd</td><td>A list of signalized_vehicle_schedules to entry lane mapping. </td></tr>
    <tr><td class="paramname">tbd_start</td><td>Start time of the TBD area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unordered_map&lt;int, uint64_t&gt; End time of required green duration for clearing the queue to entry lane id mapping. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00352">352</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  354</span>                                                     {</div>
<div class="line"><span class="lineno">  355</span>        </div>
<div class="line"><span class="lineno">  356</span>        std::unordered_map&lt;int, uint64_t&gt; green_end_per_entry_lane; </div>
<div class="line"><span class="lineno">  357</span>        </div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[entry_lane_id, evs_in_lane] : schedules_in_tbd) {</div>
<div class="line"><span class="lineno">  359</span>        </div>
<div class="line"><span class="lineno">  360</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Calculate green end time for entry lane {0}&quot;</span>, entry_lane_id);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            <span class="comment">// Get last vehicle in queue</span></div>
<div class="line"><span class="lineno">  363</span>            <span class="keywordflow">if</span> (!evs_in_lane.empty()) {</div>
<div class="line"><span class="lineno">  364</span>                </div>
<div class="line"><span class="lineno">  365</span>                <a class="code hl_struct" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> last_ev_in_queue = <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66">get_last_vehicle_in_queue</a>(evs_in_lane);</div>
<div class="line"><span class="lineno">  366</span>                </div>
<div class="line"><span class="lineno">  367</span>                uint64_t et_rounded = uint64_t(std::ceil(<span class="keywordtype">double</span>(last_ev_in_queue.<a class="code hl_variable" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html#a508a6d75fcf630309aa378c4fbeb3171">et</a>)/100.0) * 100);</div>
<div class="line"><span class="lineno">  368</span>                uint64_t green_end_compared_with_min_green = std::max(et_rounded + <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">et_inaccuracy_buffer</a> + <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a>, tbd_start + <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">min_green</a>);</div>
<div class="line"><span class="lineno">  369</span>                uint64_t green_end = std::min(green_end_compared_with_min_green, tbd_start + <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">max_green</a>);</div>
<div class="line"><span class="lineno">  370</span>                <span class="comment">// in case the green_end is overwritten by max_green, check if there is any ET within the new green duration.</span></div>
<div class="line"><span class="lineno">  371</span>                <span class="comment">// if not, skip this entry lane, assuming there is no queue that can be served.</span></div>
<div class="line"><span class="lineno">  372</span>                <span class="keywordflow">if</span> (green_end &lt; green_end_compared_with_min_green &amp;&amp; evs_in_lane.front().et &gt;= green_end - <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a>) {</div>
<div class="line"><span class="lineno">  373</span>                    SPDLOG_WARN(<span class="stringliteral">&quot;The required green duration for dissipation the queue in entry lane &quot;</span> + </div>
<div class="line"><span class="lineno">  374</span>                            <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(entry_lane_id) + </div>
<div class="line"><span class="lineno">  375</span>                            <span class="stringliteral">&quot; is overwritten by max_green which cannot serve any vehicle! green_end without considering max_green: &quot;</span> + </div>
<div class="line"><span class="lineno">  376</span>                            <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(green_end_compared_with_min_green) + </div>
<div class="line"><span class="lineno">  377</span>                            <span class="stringliteral">&quot;, green_end considering max_green: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(green_end) + </div>
<div class="line"><span class="lineno">  378</span>                            <span class="stringliteral">&quot;, first EV&#39;s entering time: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(evs_in_lane.front().et) + <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  379</span>                }</div>
<div class="line"><span class="lineno">  380</span>                <span class="keywordflow">else</span> </div>
<div class="line"><span class="lineno">  381</span>                {</div>
<div class="line"><span class="lineno">  382</span>                    green_end_per_entry_lane.try_emplace(entry_lane_id, green_end);   </div>
<div class="line"><span class="lineno">  383</span>                }</div>
<div class="line"><span class="lineno">  384</span>            }</div>
<div class="line"><span class="lineno">  385</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  386</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;There are no EVs in entry lane {0} that is within the SO area and has an estimated ET after the start time of the TBD area&quot;</span>, entry_lane_id);</div>
<div class="line"><span class="lineno">  387</span>            }</div>
<div class="line"><span class="lineno">  388</span>        }</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>        <span class="keywordflow">return</span> green_end_per_entry_lane;</div>
<div class="line"><span class="lineno">  391</span>    }</div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a091cc776db4ad29424a416c97d973e66"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66">streets_signal_optimization::streets_desired_phase_plan_generator::get_last_vehicle_in_queue</a></div><div class="ttdeci">streets_vehicle_scheduler::signalized_vehicle_schedule get_last_vehicle_in_queue(const std::list&lt; streets_vehicle_scheduler::signalized_vehicle_schedule &gt; &amp;evs_in_lane) const</div><div class="ttdoc">Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicl...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00394">streets_desired_phase_plan_generator.cpp:394</a></div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_a18725f25372677dc176fa039a27cc351"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::max_green</a></div><div class="ttdeci">uint64_t max_green</div><div class="ttdoc">The configurable maximum green duration in milliseconds. This maximum green duration is used for all ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00054">streets_desired_phase_plan_generator_configuration.h:54</a></div></div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_a5733e8220c86e6721fe3f7e2352b7719"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::min_green</a></div><div class="ttdeci">uint64_t min_green</div><div class="ttdoc">The configurable minimum green duration in milliseconds. This minimum green duration is used for all ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00048">streets_desired_phase_plan_generator_configuration.h:48</a></div></div>
<div class="ttc" id="astructstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_html"><div class="ttname"><a href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a></div><div class="ttdoc">Object to represent schedule for single vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="signalized__intersection__schedule_8h_source.html#l00014">signalized_intersection_schedule.h:14</a></div></div>
<div class="ttc" id="astructstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_html_a508a6d75fcf630309aa378c4fbeb3171"><div class="ttname"><a href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html#a508a6d75fcf630309aa378c4fbeb3171">streets_vehicle_scheduler::signalized_vehicle_schedule::et</a></div><div class="ttdeci">u_int64_t et</div><div class="ttdoc">Entering time considering the preceding vehicles and the modified spat. Entering time is the time sin...</div><div class="ttdef"><b>Definition:</b> <a href="signalized__intersection__schedule_8h_source.html#l00035">signalized_intersection_schedule.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00035">streets_vehicle_scheduler::signalized_vehicle_schedule::et</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00029">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::et_inaccuracy_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00394">get_last_vehicle_in_queue()</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00054">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::max_green</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00048">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::min_green</a>, and <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_cgraph">
<area shape="rect" title="Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane,..." alt="" coords="5,43,184,113"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a091cc776db4ad29424a416c97d973e66" title="Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicl..." alt="" coords="232,5,411,76"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="285,101,357,127"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a8d6788e1987b9ea4cd6b9408a8ddc568_icgraph">
<area shape="rect" title="Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane,..." alt="" coords="232,5,411,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a949502c1eeb815669fea831f00259ca1" name="a949502c1eeb815669fea831f00259ca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949502c1eeb815669fea831f00259ca1">&#9670;&nbsp;</a></span>get_initial_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_initial_green_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the initial green buffer (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t initial green buffer in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00578">578</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  578</span>                                                                                  {</div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">initial_green_buffer</a>;</div>
<div class="line"><span class="lineno">  580</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00016">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::initial_green_buffer</a>.</p>

</div>
</div>
<a id="a091cc776db4ad29424a416c97d973e66" name="a091cc776db4ad29424a416c97d973e66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a091cc776db4ad29424a416c97d973e66">&#9670;&nbsp;</a></span>get_last_vehicle_in_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> streets_signal_optimization::streets_desired_phase_plan_generator::get_last_vehicle_in_queue </td>
          <td>(</td>
          <td class="paramtype">const std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>evs_in_lane</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicle in the queue. The last vehicle in the queue is the vehicle that has entering time (ET) equal to its earliest entering time (EET) and the time headway between its ET and its following vehicle's ET is greater than the configurable queue_max_time_headway parameter. If such a vehicle could not be found, the last vehicle in the entry lane will be considered as the last vehicle in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evs_in_lane</td><td>A list of signalized_vehicle_schedules for an entry lane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html" title="Object to represent schedule for single vehicle.">streets_vehicle_scheduler::signalized_vehicle_schedule</a> The schedule of the last vehicle in the queue. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00394">394</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  395</span>                                                                                                            {</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>        <span class="keywordtype">bool</span> is_last_vehicle_in_queue_found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  398</span>        <a class="code hl_struct" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> prev_ev_sched;</div>
<div class="line"><span class="lineno">  399</span>        <a class="code hl_struct" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> last_ev_in_queue;</div>
<div class="line"><span class="lineno">  400</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ev_sched : evs_in_lane) {</div>
<div class="line"><span class="lineno">  401</span>            <span class="keywordflow">if</span> (ev_sched.v_id != evs_in_lane.front().v_id &amp;&amp; ev_sched.et == ev_sched.eet &amp;&amp; (ev_sched.et - prev_ev_sched.<a class="code hl_variable" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html#a508a6d75fcf630309aa378c4fbeb3171">et</a> &gt;= <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">queue_max_time_headway</a>)) {</div>
<div class="line"><span class="lineno">  402</span>                </div>
<div class="line"><span class="lineno">  403</span>                is_last_vehicle_in_queue_found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  404</span>                last_ev_in_queue = prev_ev_sched;</div>
<div class="line"><span class="lineno">  405</span>            }</div>
<div class="line"><span class="lineno">  406</span>            prev_ev_sched = ev_sched;</div>
<div class="line"><span class="lineno">  407</span>        }</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordflow">if</span> (!is_last_vehicle_in_queue_found) {</div>
<div class="line"><span class="lineno">  409</span>            last_ev_in_queue = evs_in_lane.back();</div>
<div class="line"><span class="lineno">  410</span>        }</div>
<div class="line"><span class="lineno">  411</span>        <span class="keywordflow">return</span> last_ev_in_queue;</div>
<div class="line"><span class="lineno">  412</span>    }</div>
<div class="ttc" id="astructstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration_html_a7bcde6da2ae68b8144b52bd60ad0f040"><div class="ttname"><a href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::queue_max_time_headway</a></div><div class="ttdeci">uint64_t queue_max_time_headway</div><div class="ttdoc">The configurable time headway in milliseconds that defines the maximum allowed time headway between t...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00036">streets_desired_phase_plan_generator_configuration.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="signalized__intersection__schedule_8h_source.html#l00035">streets_vehicle_scheduler::signalized_vehicle_schedule::et</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00036">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::queue_max_time_headway</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00352">get_green_end_per_entry_lane()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a091cc776db4ad29424a416c97d973e66_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a091cc776db4ad29424a416c97d973e66_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a091cc776db4ad29424a416c97d973e66_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a091cc776db4ad29424a416c97d973e66_icgraph">
<area shape="rect" title="Given a list of signalized_vehicle_schedules for an entry lane, this method will find the last vehicl..." alt="" coords="459,5,637,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a8d6788e1987b9ea4cd6b9408a8ddc568" title="Given a list of signalized_vehicle_schedules to entry lane id mapping, for each entry lane,..." alt="" coords="232,5,411,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a02547ebe4aef8641747111833225a35c" name="a02547ebe4aef8641747111833225a35c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02547ebe4aef8641747111833225a35c">&#9670;&nbsp;</a></span>get_max_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_max_green </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the configurable maximum green (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t maximum green in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00626">626</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  626</span>                                                                       {</div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">max_green</a>;</div>
<div class="line"><span class="lineno">  628</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00054">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::max_green</a>.</p>

</div>
</div>
<a id="a2b71a3cba4fd646fd8e37e534c815471" name="a2b71a3cba4fd646fd8e37e534c815471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b71a3cba4fd646fd8e37e534c815471">&#9670;&nbsp;</a></span>get_min_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_min_green </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the configurable minimum green (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t minimum green in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00618">618</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  618</span>                                                                       {</div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">min_green</a>;</div>
<div class="line"><span class="lineno">  620</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00048">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::min_green</a>.</p>

</div>
</div>
<a id="a7d22ce2835c7b2816fbbb893a3c30b53" name="a7d22ce2835c7b2816fbbb893a3c30b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d22ce2835c7b2816fbbb893a3c30b53">&#9670;&nbsp;</a></span>get_queue_max_time_headway()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t streets_signal_optimization::streets_desired_phase_plan_generator::get_queue_max_time_headway </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the queue max time headway (ms). </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t queue max time headway in milliseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00602">602</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  602</span>                                                                                    {</div>
<div class="line"><span class="lineno">  603</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">queue_max_time_headway</a>;</div>
<div class="line"><span class="lineno">  604</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00036">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::queue_max_time_headway</a>.</p>

</div>
</div>
<a id="a2ba26d0295becc70bb4532f78032cac0" name="a2ba26d0295becc70bb4532f78032cac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ba26d0295becc70bb4532f78032cac0">&#9670;&nbsp;</a></span>get_schedule_plan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1intersection__schedule.html">streets_vehicle_scheduler::intersection_schedule</a> &gt; streets_signal_optimization::streets_desired_phase_plan_generator::get_schedule_plan </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; std::string, <a class="el" href="structstreets__vehicles_1_1vehicle.html">streets_vehicles::vehicle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicles</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a map of vehicles and vehicle ids, this method will run the signalized_vehicle_scheduler methods to populate the signalized_intersection_schedule with a schedule for all vehicles in the vehicle map based on UC 3 scheduling logic which estimates vehicles' entering times to the intersection box based on the modified spat. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vehicles</td><td>A map of the vehicles to schedule, with vehicle id as keys. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::shared_ptr&lt;streets_vehicle_scheduler::intersection_schedule&gt; An intersection_schedule shared pointer. </dd></dl>
<p >configure the signalized_intersection_schedule pointer</p>
<p >schedule vehicles</p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00296">296</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  297</span>                                                                                         {</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  300</span>        std::shared_ptr&lt;streets_vehicle_scheduler::intersection_schedule&gt; sched_ptr;</div>
<div class="line"><span class="lineno">  301</span>        sched_ptr = std::make_shared&lt;streets_vehicle_scheduler::signalized_intersection_schedule&gt;();</div>
<div class="line"><span class="lineno">  302</span>        sched_ptr-&gt;timestamp = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::system_clock::now().time_since_epoch()).count();</div>
<div class="line"><span class="lineno">  303</span>        </div>
<div class="line"><span class="lineno">  305</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#acc055a2d89797af1b9c701f30c0184b7">scheduler_ptr</a>-&gt;schedule_vehicles(vehicles, sched_ptr);</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">return</span> sched_ptr;</div>
<div class="line"><span class="lineno">  307</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00030">scheduler_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a2ba26d0295becc70bb4532f78032cac0_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a2ba26d0295becc70bb4532f78032cac0_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a2ba26d0295becc70bb4532f78032cac0_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a2ba26d0295becc70bb4532f78032cac0_icgraph">
<area shape="rect" title="Given a map of vehicles and vehicle ids, this method will run the signalized_vehicle_scheduler method..." alt="" coords="232,13,460,69"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a4125643cc359bd85567d9c59b480f640" name="a4125643cc359bd85567d9c59b480f640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4125643cc359bd85567d9c59b480f640">&#9670;&nbsp;</a></span>get_schedules_in_tbd_per_lane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::list&lt; <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule.html">streets_vehicle_scheduler::signalized_vehicle_schedule</a> &gt; &gt; streets_signal_optimization::streets_desired_phase_plan_generator::get_schedules_in_tbd_per_lane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html">streets_vehicle_scheduler::signalized_intersection_schedule</a> &amp;&#160;</td>
          <td class="paramname"><em>ev_schedules_within_so</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t &amp;&#160;</td>
          <td class="paramname"><em>tbd_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a populated signalized_intersection_schedule object, intersection_info shared pointer, and the start time of TBD area, This method returns a MAP of entry lanes as keys and a list of vehicle schedules for each entry lane as value. Only those vehicles that have an entering time (ET) after the start of the TBD area will be included in this mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev_schedules_within_so</td><td>A populated signalized_intersection_schedule object. </td></tr>
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">tbd_start</td><td>Start time of the TBD area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unordered_map&lt;int, vector&lt;streets_vehicle_scheduler::signalized_vehicle_schedule&gt;&gt; entry lane to list of signalized_vehicle_schedule mapping, where the list of signalized_vehicle_schedule includes the schedules that have ETs after the start time of the TBD area. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00326">326</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  329</span>                                                     {</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>        std::unordered_map&lt;int, std::list&lt;streets_vehicle_scheduler::signalized_vehicle_schedule&gt;&gt; schedules_per_lane;</div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry_lane_obj : intersection_info_ptr-&gt;getEntryLanelets() ) {</div>
<div class="line"><span class="lineno">  333</span>            std::list&lt;streets_vehicle_scheduler::signalized_vehicle_schedule&gt; schedules_in_lane;</div>
<div class="line"><span class="lineno">  334</span>            <span class="keywordflow">for</span> ( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;ev_sched : ev_schedules_within_so.<a class="code hl_variable" href="structstreets__vehicle__scheduler_1_1signalized__intersection__schedule.html#a3b09d9fc484f0294af2f7ae4fe7b195b">vehicle_schedules</a> ) {</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordflow">if</span> (ev_sched.state == <a class="code hl_enumvalue" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::vehicle_state::EV</a> &amp;&amp; ev_sched.entry_lane == entry_lane_obj.getId() &amp;&amp; ev_sched.et &gt;= tbd_start) {</div>
<div class="line"><span class="lineno">  336</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;Adding schedule for vehicle {0} to EV schedule list in entry lane {1}&quot;</span>, ev_sched.v_id, ev_sched.entry_lane);</div>
<div class="line"><span class="lineno">  337</span>                    schedules_in_lane.push_back(ev_sched);</div>
<div class="line"><span class="lineno">  338</span>                }</div>
<div class="line"><span class="lineno">  339</span>            }</div>
<div class="line"><span class="lineno">  340</span>            <span class="keywordflow">if</span> ( !schedules_in_lane.empty()) {</div>
<div class="line"><span class="lineno">  341</span>                schedules_in_lane.sort(<a class="code hl_function" href="namespacestreets__vehicle__scheduler.html#acd0cc54330a871634259b2815cc7750d">streets_vehicle_scheduler::et_comparator</a>);</div>
<div class="line"><span class="lineno">  342</span>                schedules_per_lane.try_emplace( entry_lane_obj.getId(), schedules_in_lane );</div>
<div class="line"><span class="lineno">  343</span>            }</div>
<div class="line"><span class="lineno">  344</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  345</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;No EVs in lane {0}.&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(entry_lane_obj.getId()) );</div>
<div class="line"><span class="lineno">  346</span>            }</div>
<div class="line"><span class="lineno">  347</span>        }</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">return</span> schedules_per_lane;</div>
<div class="line"><span class="lineno">  349</span>    }</div>
<div class="ttc" id="anamespacestreets__vehicle__scheduler_html_acd0cc54330a871634259b2815cc7750d"><div class="ttname"><a href="namespacestreets__vehicle__scheduler.html#acd0cc54330a871634259b2815cc7750d">streets_vehicle_scheduler::et_comparator</a></div><div class="ttdeci">bool et_comparator(const signalized_vehicle_schedule &amp;prev_sched, const signalized_vehicle_schedule &amp;next_sched)</div><div class="ttdoc">Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord...</div><div class="ttdef"><b>Definition:</b> <a href="vehicle__sorting_8cpp_source.html#l00037">vehicle_sorting.cpp:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vehicle__sorting_8cpp_source.html#l00037">streets_vehicle_scheduler::et_comparator()</a>, <a class="el" href="namespacestreets__vehicles.html#a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de">streets_vehicles::EV</a>, and <a class="el" href="signalized__intersection__schedule_8h_source.html#l00079">streets_vehicle_scheduler::signalized_intersection_schedule::vehicle_schedules</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_cgraph">
<area shape="rect" title="Given a populated signalized_intersection_schedule object, intersection_info shared pointer,..." alt="" coords="5,5,209,76"/>
<area shape="rect" href="namespacestreets__vehicle__scheduler.html#acd0cc54330a871634259b2815cc7750d" title="Comparator for vehicle collections. Used for sorting vehicle objects in a collection in ascending ord..." alt="" coords="257,20,431,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a4125643cc359bd85567d9c59b480f640_icgraph">
<area shape="rect" title="Given a populated signalized_intersection_schedule object, intersection_info shared pointer,..." alt="" coords="232,5,436,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a161786e28588b6b598f4d7cc043fd54f" name="a161786e28588b6b598f4d7cc043fd54f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a161786e28588b6b598f4d7cc043fd54f">&#9670;&nbsp;</a></span>get_signal_group_entry_lane_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; uint8_t, std::vector&lt; int &gt; &gt; streets_signal_optimization::streets_desired_phase_plan_generator::get_signal_group_entry_lane_mapping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the entry lane to signal group mapping. </p>
<dl class="section return"><dt>Returns</dt><dd>std::unordered_map&lt;uint8_t, std::vector&lt;int&gt;&gt; entry lane to signal group mapping. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00638">638</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  638</span>                                                                                                                              {</div>
<div class="line"><span class="lineno">  639</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>;</div>
<div class="line"><span class="lineno">  640</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00046">signal_group_entry_lane_mapping</a>.</p>

</div>
</div>
<a id="a7444292a2c14f62f6be9e93f7fd33402" name="a7444292a2c14f62f6be9e93f7fd33402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7444292a2c14f62f6be9e93f7fd33402">&#9670;&nbsp;</a></span>get_so_radius()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double streets_signal_optimization::streets_desired_phase_plan_generator::get_so_radius </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the so area radius (meter). </p>
<dl class="section return"><dt>Returns</dt><dd>double so radius in meters. </dd></dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00610">610</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  610</span>                                                                     {</div>
<div class="line"><span class="lineno">  611</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">so_radius</a>;</div>
<div class="line"><span class="lineno">  612</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00042">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::so_radius</a>.</p>

</div>
</div>
<a id="a688263c54d4d2311d26c0085e0b666e9" name="a688263c54d4d2311d26c0085e0b666e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a688263c54d4d2311d26c0085e0b666e9">&#9670;&nbsp;</a></span>set_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_configuration </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_initial_green_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_final_green_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_et_inaccuracy_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_queue_max_time_headway</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>_so_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_min_green</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_max_green</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>_desired_future_move_group_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the configurable parameters to the desired values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_initial_green_buffer</td><td>initial green buffer in milliseconds. </td></tr>
    <tr><td class="paramname">_final_green_buffer</td><td>final green buffer in milliseconds. </td></tr>
    <tr><td class="paramname">_et_inaccuracy_buffer</td><td>ET inaccuracy buffer in milliseconds. </td></tr>
    <tr><td class="paramname">_queue_max_time_headway</td><td>queue max time headway in milliseconds. </td></tr>
    <tr><td class="paramname">_so_radius</td><td>so radius in meters. </td></tr>
    <tr><td class="paramname">_min_green</td><td>maximum green in milliseconds. </td></tr>
    <tr><td class="paramname">_max_green</td><td>minimum green in milliseconds. </td></tr>
    <tr><td class="paramname">_desired_future_move_group_count</td><td>desired number of future movement group. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00547">547</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  554</span>                                                                                                        {</div>
<div class="line"><span class="lineno">  555</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">initial_green_buffer</a> = _initial_green_buffer;</div>
<div class="line"><span class="lineno">  556</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a> = _final_green_buffer; </div>
<div class="line"><span class="lineno">  557</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">et_inaccuracy_buffer</a> = _et_inaccuracy_buffer; </div>
<div class="line"><span class="lineno">  558</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">queue_max_time_headway</a> = _queue_max_time_headway;</div>
<div class="line"><span class="lineno">  559</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">so_radius</a> = _so_radius;</div>
<div class="line"><span class="lineno">  560</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">min_green</a> = _min_green;</div>
<div class="line"><span class="lineno">  561</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">max_green</a> = _max_green;</div>
<div class="line"><span class="lineno">  562</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a> = _desired_future_move_group_count;</div>
<div class="line"><span class="lineno">  563</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a7a3dd61cc27c767677b77d6df890564b">is_configured</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  564</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - initial_green_buffer: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">initial_green_buffer</a>);</div>
<div class="line"><span class="lineno">  565</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - final_green_buffer: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a>);</div>
<div class="line"><span class="lineno">  566</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - et_inaccuracy_buffer: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">et_inaccuracy_buffer</a>);</div>
<div class="line"><span class="lineno">  567</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - queue_max_time_headway: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">queue_max_time_headway</a>);</div>
<div class="line"><span class="lineno">  568</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - so_radius: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">so_radius</a>);</div>
<div class="line"><span class="lineno">  569</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - min_green: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">min_green</a>);</div>
<div class="line"><span class="lineno">  570</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - max_green: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">max_green</a>);</div>
<div class="line"><span class="lineno">  571</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Configuration parameter - desired_future_move_group_count: {0}&quot;</span>, <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a>);</div>
<div class="line"><span class="lineno">  572</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00059">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::desired_future_move_group_count</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00029">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::et_inaccuracy_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00016">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::initial_green_buffer</a>, <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00040">is_configured</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00054">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::max_green</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00048">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::min_green</a>, <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00036">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::queue_max_time_headway</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00042">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::so_radius</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a688263c54d4d2311d26c0085e0b666e9_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a688263c54d4d2311d26c0085e0b666e9_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a688263c54d4d2311d26c0085e0b666e9_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_a688263c54d4d2311d26c0085e0b666e9_icgraph">
<area shape="rect" title="Set the configurable parameters to the desired values." alt="" coords="232,13,451,69"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="a99d0f5d85f0595295cd90225178ab5cd" name="a99d0f5d85f0595295cd90225178ab5cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d0f5d85f0595295cd90225178ab5cd">&#9670;&nbsp;</a></span>set_desired_future_move_group_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_desired_future_move_group_count </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the desired number of future movement groups. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>desired number of future movement group. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00630">630</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  630</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  631</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#af1fe0710dcf4720b5edd7c3169cc7a81">desired_future_move_group_count</a> = <a class="code hl_variable" href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">count</a>;</div>
<div class="line"><span class="lineno">  632</span>    }</div>
<div class="ttc" id="anamespacesimulate__bsm_html_a76f645adf8af768fa959ecb6f90d7831"><div class="ttname"><a href="namespacesimulate__bsm.html#a76f645adf8af768fa959ecb6f90d7831">simulate_bsm.count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00018">simulate_bsm.py:18</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, <a class="el" href="simulate__bsm_8py_source.html#l00018">simulate_bsm::count</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00059">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::desired_future_move_group_count</a>.</p>

</div>
</div>
<a id="a5bc705aba7b1adec0531ef8ed1aa62aa" name="a5bc705aba7b1adec0531ef8ed1aa62aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc705aba7b1adec0531ef8ed1aa62aa">&#9670;&nbsp;</a></span>set_et_inaccuracy_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_et_inaccuracy_buffer </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the entering time (ET) inaccuracy_buffer (ms). This value is defined to account for entering time (ET) estimation inaccuracy. To find the required green duration for dissipating a queue from an entry lane, the end of the green is set to the estimated ET of the last vehicle in the queue plus this configurable parameter plus final_green_buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>ET inaccuracy buffer in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00590">590</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  590</span>                                                                                            {</div>
<div class="line"><span class="lineno">  591</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#ad447f7868e4487368649402881e975af">et_inaccuracy_buffer</a> = buffer;</div>
<div class="line"><span class="lineno">  592</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00029">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::et_inaccuracy_buffer</a>.</p>

</div>
</div>
<a id="ae53818b9c9562540f84ba3868b14748e" name="ae53818b9c9562540f84ba3868b14748e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae53818b9c9562540f84ba3868b14748e">&#9670;&nbsp;</a></span>set_final_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_final_green_buffer </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the final green buffer (ms). This value is used to account for safety. The assumption is that no vehicle shall enter the intersection box after the end of a green phase minus the final green buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>final green buffer in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00582">582</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  582</span>                                                                                          {</div>
<div class="line"><span class="lineno">  583</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a379a98a899ebbb6f41bfe60d1fc4623d">final_green_buffer</a> = buffer;</div>
<div class="line"><span class="lineno">  584</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00022">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::final_green_buffer</a>.</p>

</div>
</div>
<a id="a94dacb0548f095eefe92ccb7f888e73f" name="a94dacb0548f095eefe92ccb7f888e73f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94dacb0548f095eefe92ccb7f888e73f">&#9670;&nbsp;</a></span>set_initial_green_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_initial_green_buffer </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the initial green buffer (ms). This value is used to account for the time it takes a vehicle before entering the intersection box at a green phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>initial green buffer in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00574">574</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  574</span>                                                                                            {</div>
<div class="line"><span class="lineno">  575</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#aa9bb51b9b9206a5e7ec16a941f4bce5c">initial_green_buffer</a> = buffer;</div>
<div class="line"><span class="lineno">  576</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00016">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::initial_green_buffer</a>.</p>

</div>
</div>
<a id="a9ffefa3a1923bc7465f9f8f70b022ce5" name="a9ffefa3a1923bc7465f9f8f70b022ce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ffefa3a1923bc7465f9f8f70b022ce5">&#9670;&nbsp;</a></span>set_max_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_max_green </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_max_green</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the configurable maximum green (ms). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_max_green</td><td>maximum green in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00622">622</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>                                                                                     {</div>
<div class="line"><span class="lineno">  623</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a18725f25372677dc176fa039a27cc351">max_green</a> = _max_green;</div>
<div class="line"><span class="lineno">  624</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00054">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::max_green</a>.</p>

</div>
</div>
<a id="aaec5f4548643365d01ac1cb6f2c9b595" name="aaec5f4548643365d01ac1cb6f2c9b595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec5f4548643365d01ac1cb6f2c9b595">&#9670;&nbsp;</a></span>set_min_green()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_min_green </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>_min_green</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the configurable minimum green (ms). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_min_green</td><td>minimum green in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00614">614</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  614</span>                                                                                     {</div>
<div class="line"><span class="lineno">  615</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a5733e8220c86e6721fe3f7e2352b7719">min_green</a> = _min_green;</div>
<div class="line"><span class="lineno">  616</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00048">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::min_green</a>.</p>

</div>
</div>
<a id="a2fee113e0414a044ee1a58522dce9bf1" name="a2fee113e0414a044ee1a58522dce9bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fee113e0414a044ee1a58522dce9bf1">&#9670;&nbsp;</a></span>set_queue_max_time_headway()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_queue_max_time_headway </td>
          <td>(</td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the queue max time headway (ms). This value defines the maximum allowed time headway between the estimated entering times (ETs) of two consecutive vehicles within a queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>queue max time headway in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00598">598</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  598</span>                                                                                              {</div>
<div class="line"><span class="lineno">  599</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a7bcde6da2ae68b8144b52bd60ad0f040">queue_max_time_headway</a> = buffer;</div>
<div class="line"><span class="lineno">  600</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00036">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::queue_max_time_headway</a>.</p>

</div>
</div>
<a id="ac281457f0740bb0ce70b15dd7198993c" name="ac281457f0740bb0ce70b15dd7198993c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac281457f0740bb0ce70b15dd7198993c">&#9670;&nbsp;</a></span>set_so_radius()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::set_so_radius </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>radius</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the so area radius (meter). The signal optimization service only considers vehicles that are within the signal optimization area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">radius</td><td>so radius in meters. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00606">606</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  606</span>                                                                               {</div>
<div class="line"><span class="lineno">  607</span>        <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#aa92a186620a218690a0ea0cb5866d1c1">config</a>.<a class="code hl_variable" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html#a12b15542431455c37b8cfa602963dc97">so_radius</a> = radius;</div>
<div class="line"><span class="lineno">  608</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">config</a>, and <a class="el" href="streets__desired__phase__plan__generator__configuration_8h_source.html#l00042">streets_signal_optimization::streets_desired_phase_plan_generator_configuration::so_radius</a>.</p>

</div>
</div>
<a id="ace90552a55cd49129a6fc49f95f6219c" name="ace90552a55cd49129a6fc49f95f6219c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace90552a55cd49129a6fc49f95f6219c">&#9670;&nbsp;</a></span>update_desired_phase_plan_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::update_desired_phase_plan_list </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_groups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>green_end_per_entry_lane</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &amp;&#160;</td>
          <td class="paramname"><em>base_desired_phase_plan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html">streets_desired_phase_plan::streets_desired_phase_plan</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>desired_phase_plan_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t &amp;&#160;</td>
          <td class="paramname"><em>tbd_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a list of movement groups, a mapping of the end time of required green duration for clearing the queue to entry lane id, and an updated base_desired_phase_plan, this method with create a list of desired phase plans, where each desired phase plan in the list includes the existing fixed future movement groups from the received spat and a new movement group with a given duration at the end. For each movement group, this method first checks if the movement group can be added to the base_desired_phase_plan (i.e., if the movement group has a common signal group with the last movement group in the base_desired_phase_plan). If the movement group can be added, for each entry lane allowed by the subject movement group, this method will add a new desired phase plan to the list, where the last movement group is the subject movement group and the end time of the green is the end time of required green duration for clearing the queue of the subject entry lane. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move_groups</td><td>Shared pointer to a list of possible movement groups. </td></tr>
    <tr><td class="paramname">green_end_per_entry_lane</td><td>End time of required green duration for clearing the queue to entry lane id mapping. </td></tr>
    <tr><td class="paramname">base_desired_phase_plan</td><td>The desired_phase_plan converted from the provided intersection_state. </td></tr>
    <tr><td class="paramname">desired_phase_plan_list</td><td>An empty desired phase plan list to be populated by this method. </td></tr>
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">tbd_start</td><td>Start time of the TBD area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>the base_desired_phase_plan is empty. </td></tr>
  </table>
  </dd>
</dl>
<p >If the base_desired_phase_plan, it means that either the base_desired_phase_plan is not created based on the spat, or the spat does not have any fixed movement group (even the current active phase timing) in it.</p>
<p >If the signal_group_entry_lane_mapping is empty, call <a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ...">create_signal_group_entry_lane_mapping()</a> function to find the mapping. This mapping maps signal group ids and entry lane ids.</p>
<p >Loop through all candidate movement groups, check if it can be added to the base_desired_phase_plan, and if yes, add it to the base_desired_phase_plan with all different possible green duration options.</p>
<p >Check if the movement group can be added to the end of the base desired phase plan</p>
<p >Loop through the entry lanes connected to the first signal group. For each entry lane, add the movement group to the end of the base desired phase plan with the required green duration calculated for this entry lane.</p>
<p >If the movement group contains 2 signal groups, loop through the entry lanes connected to the second signal group. For each entry lane, add the movement group to the end of the base desired phase plan with the required green duration calculated for this entry lane.</p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00415">415</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  421</span>                                               {</div>
<div class="line"><span class="lineno">  422</span>        </div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">if</span> (base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.empty()) {</div>
<div class="line"><span class="lineno">  427</span>            <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;The base desired phase plan is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">  428</span>        }</div>
<div class="line"><span class="lineno">  432</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.empty()) {</div>
<div class="line"><span class="lineno">  433</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;The signal_group_entry_lane_mapping is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">  434</span>            <a class="code hl_function" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885">create_signal_group_entry_lane_mapping</a>(intersection_info_ptr);</div>
<div class="line"><span class="lineno">  435</span>        }</div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;move_group : move_groups-&gt;groups) {</div>
<div class="line"><span class="lineno">  441</span>            </div>
<div class="line"><span class="lineno">  443</span>            <span class="keywordtype">bool</span> can_mg_be_added = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  444</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;signal_group : base_desired_phase_plan.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1streets__desired__phase__plan.html#a03eca534118891c3c183eed332b33810">desired_phase_plan</a>.back().signal_groups) {</div>
<div class="line"><span class="lineno">  445</span>                <span class="keywordflow">if</span> ( signal_group == move_group.signal_groups.first || (move_group.signal_groups.second != 0 &amp;&amp; signal_group == move_group.signal_groups.second) ) {</div>
<div class="line"><span class="lineno">  446</span>                    can_mg_be_added = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  447</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  448</span>                }</div>
<div class="line"><span class="lineno">  449</span>            }</div>
<div class="line"><span class="lineno">  450</span>            <span class="keywordflow">if</span> (can_mg_be_added) {</div>
<div class="line"><span class="lineno">  451</span>                </div>
<div class="line"><span class="lineno">  456</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry_lane : <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.at(move_group.signal_groups.first)) {</div>
<div class="line"><span class="lineno">  457</span>                    <span class="keywordflow">if</span> (green_end_per_entry_lane.find(entry_lane) != green_end_per_entry_lane.end()) {</div>
<div class="line"><span class="lineno">  458</span>                        desired_phase_plan_list.push_back(base_desired_phase_plan);</div>
<div class="line"><span class="lineno">  459</span>                        <a class="code hl_struct" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> mg_timing;</div>
<div class="line"><span class="lineno">  460</span>                        mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a> = tbd_start;</div>
<div class="line"><span class="lineno">  461</span>                        mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a> = green_end_per_entry_lane.at(entry_lane);</div>
<div class="line"><span class="lineno">  462</span>                        mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_group.signal_groups.first);</div>
<div class="line"><span class="lineno">  463</span>                        <span class="keywordflow">if</span> (move_group.signal_groups.second != 0) {</div>
<div class="line"><span class="lineno">  464</span>                            mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_group.signal_groups.second);</div>
<div class="line"><span class="lineno">  465</span>                        }</div>
<div class="line"><span class="lineno">  466</span>                        desired_phase_plan_list.back().desired_phase_plan.push_back(mg_timing);</div>
<div class="line"><span class="lineno">  467</span>                    }</div>
<div class="line"><span class="lineno">  468</span>                }</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  475</span>                <span class="keywordflow">if</span> (move_group.signal_groups.second != 0) {</div>
<div class="line"><span class="lineno">  476</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry_lane : <a class="code hl_variable" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a866fa334a545984b8d68981eecc88c99">signal_group_entry_lane_mapping</a>.at(move_group.signal_groups.second)) {</div>
<div class="line"><span class="lineno">  477</span>                        <span class="keywordflow">if</span> (green_end_per_entry_lane.find(entry_lane) != green_end_per_entry_lane.end()) {</div>
<div class="line"><span class="lineno">  478</span>                            desired_phase_plan_list.push_back(base_desired_phase_plan);</div>
<div class="line"><span class="lineno">  479</span>                            <a class="code hl_struct" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html">streets_desired_phase_plan::signal_group2green_phase_timing</a> mg_timing;</div>
<div class="line"><span class="lineno">  480</span>                            mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a349aa0bbaad1a332ea8b7dc1ee9470da">start_time</a> = tbd_start;</div>
<div class="line"><span class="lineno">  481</span>                            mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#afeaff7b517806a61775cfc161d21cf1c">end_time</a> = green_end_per_entry_lane.at(entry_lane);</div>
<div class="line"><span class="lineno">  482</span>                            mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_group.signal_groups.first);</div>
<div class="line"><span class="lineno">  483</span>                            mg_timing.<a class="code hl_variable" href="structstreets__desired__phase__plan_1_1signal__group2green__phase__timing.html#a6987d5d817d188e2928481c0a0c2b1b0">signal_groups</a>.push_back(move_group.signal_groups.second);</div>
<div class="line"><span class="lineno">  484</span>                            desired_phase_plan_list.back().desired_phase_plan.push_back(mg_timing);</div>
<div class="line"><span class="lineno">  485</span>                        }</div>
<div class="line"><span class="lineno">  486</span>                    }</div>
<div class="line"><span class="lineno">  487</span>                }</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>            }</div>
<div class="line"><span class="lineno">  490</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  491</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;movement group {0} cannot be added to base_desired_phase_plan since this movement group includes a common signal group with the last fixed movement group in the modified spat!&quot;</span>, move_group.name);</div>
<div class="line"><span class="lineno">  492</span>            }</div>
<div class="line"><span class="lineno">  493</span>        }</div>
<div class="line"><span class="lineno">  494</span>    }</div>
<div class="ttc" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_html_a654e5540ba51776be633cdf40e683885"><div class="ttname"><a href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885">streets_signal_optimization::streets_desired_phase_plan_generator::create_signal_group_entry_lane_mapping</a></div><div class="ttdeci">void create_signal_group_entry_lane_mapping(const std::shared_ptr&lt; OpenAPI::OAIIntersection_info &gt; &amp;intersection_info_ptr)</div><div class="ttdoc">Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ...</div><div class="ttdef"><b>Definition:</b> <a href="streets__desired__phase__plan__generator_8cpp_source.html#l00497">streets_desired_phase_plan_generator.cpp:497</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00497">create_signal_group_entry_lane_mapping()</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00038">streets_desired_phase_plan::streets_desired_phase_plan::desired_phase_plan</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00020">streets_desired_phase_plan::signal_group2green_phase_timing::end_time</a>, <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00046">signal_group_entry_lane_mapping</a>, <a class="el" href="streets__desired__phase__plan_8h_source.html#l00021">streets_desired_phase_plan::signal_group2green_phase_timing::signal_groups</a>, and <a class="el" href="streets__desired__phase__plan_8h_source.html#l00019">streets_desired_phase_plan::signal_group2green_phase_timing::start_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_cgraph">
<area shape="rect" title="Given a list of movement groups, a mapping of the end time of required green duration for clearing th..." alt="" coords="5,56,213,127"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#a654e5540ba51776be633cdf40e683885" title="Create signal group id to list of entry lane id mapping. Each signal group might be assigned to more ..." alt="" coords="261,56,459,127"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#ae6df11e3c45aedd80e543e6ce51105eb" title="Given the entry lane object, this method finds the signal group id. Note: The signalized_vehicle_sche..." alt="" coords="507,56,688,127"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#abcfdd002f92a00fc383e2de5027fa7c9" title=" " alt="" coords="736,5,936,47"/>
<area shape="rect" href="classOpenAPI_1_1OAILanelet__info.html#a489d1a475686159298697bccabd2bd52" title=" " alt="" coords="763,71,909,112"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="800,137,872,163"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ace90552a55cd49129a6fc49f95f6219c_icgraph">
<area shape="rect" title="Given a list of movement groups, a mapping of the end time of required green duration for clearing th..." alt="" coords="232,5,440,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<a id="ac62567baf136faa38cdd1abdb038b9cd" name="ac62567baf136faa38cdd1abdb038b9cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac62567baf136faa38cdd1abdb038b9cd">&#9670;&nbsp;</a></span>verify_movement_group_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void streets_signal_optimization::streets_desired_phase_plan_generator::verify_movement_group_list </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classOpenAPI_1_1OAIIntersection__info.html">OpenAPI::OAIIntersection_info</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersection_info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="structstreets__signal__optimization_1_1movement__groups.html">streets_signal_optimization::movement_groups</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>move_groups</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an intersection_info pointer and a list of possible movement groups, this method checks if all signal groups included in the movement groups list are included in the intersection_info pointer. Basically, a signal group cannot be used if it is not connected to a given link lanelet (i.e., it does not exist in the intersection_info pointer). This method will throw exception if this requirement is not satisfied. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_info_ptr</td><td>An intersection_info pointer. </td></tr>
    <tr><td class="paramname">move_groups</td><td>Shared pointer to a list of possible movement groups. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td>a signal group included in the movement group list does not exist in the intersection_info pointer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00131">131</a> of file <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>    {</div>
<div class="line"><span class="lineno">  135</span>        std::vector&lt;int&gt; signal_group_list;</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;lane : intersection_info_ptr-&gt;getLinkLanelets()) {</div>
<div class="line"><span class="lineno">  137</span>            <span class="keywordflow">if</span> ( std::find(signal_group_list.begin(), signal_group_list.end(), lane.getSignalGroupId()) == signal_group_list.end() ) {</div>
<div class="line"><span class="lineno">  138</span>                signal_group_list.push_back(lane.getSignalGroupId());</div>
<div class="line"><span class="lineno">  139</span>            }</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span>        </div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;mg : move_groups-&gt;groups) {</div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">if</span> (std::find(signal_group_list.begin(), signal_group_list.end(), mg.signal_groups.first) == signal_group_list.end()) {</div>
<div class="line"><span class="lineno">  144</span>                <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;Signal group &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(mg.signal_groups.first) + </div>
<div class="line"><span class="lineno">  145</span>                                                        <span class="stringliteral">&quot; does not exist in intersection_info pointer!&quot;</span>);</div>
<div class="line"><span class="lineno">  146</span>            }</div>
<div class="line"><span class="lineno">  147</span>            <span class="keywordflow">if</span> (mg.signal_groups.second != 0 &amp;&amp; </div>
<div class="line"><span class="lineno">  148</span>                    std::find(signal_group_list.begin(), signal_group_list.end(), mg.signal_groups.second) == signal_group_list.end()) {</div>
<div class="line"><span class="lineno">  149</span>                <span class="keywordflow">throw</span> streets_desired_phase_plan_generator_exception(<span class="stringliteral">&quot;Signal group &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(mg.signal_groups.second) + </div>
<div class="line"><span class="lineno">  150</span>                                                        <span class="stringliteral">&quot; does not exist in intersection_info pointer!&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>            }</div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_cgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_cgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_cgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_cgraph">
<area shape="rect" title="Given an intersection_info pointer and a list of possible movement groups, this method checks if all ..." alt="" coords="5,5,224,76"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="272,27,344,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_icgraph.png" border="0" usemap="#aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_icgraph" alt=""/></div>
<map name="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_icgraph" id="aclassstreets__signal__optimization_1_1streets__desired__phase__plan__generator_ac62567baf136faa38cdd1abdb038b9cd_icgraph">
<area shape="rect" title="Given an intersection_info pointer and a list of possible movement groups, this method checks if all ..." alt="" coords="232,5,451,76"/>
<area shape="rect" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html#abb2ec72377cdaeac42cb8406046516fa" title="Generate a list of desired phase plans. Each desired phase plan in the list includes the existing fix..." alt="" coords="5,5,184,76"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa92a186620a218690a0ea0cb5866d1c1" name="aa92a186620a218690a0ea0cb5866d1c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92a186620a218690a0ea0cb5866d1c1">&#9670;&nbsp;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstreets__signal__optimization_1_1streets__desired__phase__plan__generator__configuration.html">streets_desired_phase_plan_generator_configuration</a> streets_signal_optimization::streets_desired_phase_plan_generator::config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A struct containing the configurable parameters for desired_phsae_plan_generator functions. </p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00035">35</a> of file <a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00286">configure_scheduler()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00634">get_desired_future_move_group_count()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00594">get_et_inaccuracy_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00310">get_ev_schedules_within_so()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00586">get_final_green_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00352">get_green_end_per_entry_lane()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00578">get_initial_green_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00394">get_last_vehicle_in_queue()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00626">get_max_green()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00618">get_min_green()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00602">get_queue_max_time_headway()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00610">get_so_radius()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00547">set_configuration()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00630">set_desired_future_move_group_count()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00590">set_et_inaccuracy_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00582">set_final_green_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00574">set_initial_green_buffer()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00622">set_max_green()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00614">set_min_green()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00598">set_queue_max_time_headway()</a>, and <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00606">set_so_radius()</a>.</p>

</div>
</div>
<a id="a7a3dd61cc27c767677b77d6df890564b" name="a7a3dd61cc27c767677b77d6df890564b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a3dd61cc27c767677b77d6df890564b">&#9670;&nbsp;</a></span>is_configured</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool streets_signal_optimization::streets_desired_phase_plan_generator::is_configured = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The bool parameter defining whether the configurable parameter are set to their desired values or not. </p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00040">40</a> of file <a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>, and <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00547">set_configuration()</a>.</p>

</div>
</div>
<a id="acc055a2d89797af1b9c701f30c0184b7" name="acc055a2d89797af1b9c701f30c0184b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc055a2d89797af1b9c701f30c0184b7">&#9670;&nbsp;</a></span>scheduler_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler.html">streets_vehicle_scheduler::signalized_vehicle_scheduler</a>&gt; streets_signal_optimization::streets_desired_phase_plan_generator::scheduler_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A shared pointer to the signalized vehicle scheduler. </p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00030">30</a> of file <a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00286">configure_scheduler()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00007">generate_desire_phase_plan_list()</a>, and <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00296">get_schedule_plan()</a>.</p>

</div>
</div>
<a id="a866fa334a545984b8d68981eecc88c99" name="a866fa334a545984b8d68981eecc88c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a866fa334a545984b8d68981eecc88c99">&#9670;&nbsp;</a></span>signal_group_entry_lane_mapping</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;uint8_t, std::vector&lt;int&gt; &gt; streets_signal_optimization::streets_desired_phase_plan_generator::signal_group_entry_lane_mapping</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of signal group to vector of entry lanes that are served by this signal group.. Each signal group might be assigned to more than one entry lanes. </p>

<p class="definition">Definition at line <a class="el" href="streets__desired__phase__plan__generator_8h_source.html#l00046">46</a> of file <a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00497">create_signal_group_entry_lane_mapping()</a>, <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00638">get_signal_group_entry_lane_mapping()</a>, and <a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html#l00415">update_desired_phase_plan_list()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>streets_utils/streets_signal_optimization/include/<a class="el" href="streets__desired__phase__plan__generator_8h_source.html">streets_desired_phase_plan_generator.h</a></li>
<li>streets_utils/streets_signal_optimization/src/<a class="el" href="streets__desired__phase__plan__generator_8cpp_source.html">streets_desired_phase_plan_generator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacestreets__signal__optimization.html">streets_signal_optimization</a></li><li class="navelem"><a class="el" href="classstreets__signal__optimization_1_1streets__desired__phase__plan__generator.html">streets_desired_phase_plan_generator</a></li>
    <li class="footer">Generated on Mon Dec 11 2023 22:18:04 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
