<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm::SignalizedIntersectionManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classcarma__wm_1_1SignalizedIntersectionManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classcarma__wm_1_1SignalizedIntersectionManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">carma_wm::SignalizedIntersectionManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class manages and keeps track of all signalized intersections in the map. All of the SPAT and MAP standard's lane ids to lanelet id mapping is recorded here. NOTE: This class functions do not update the map given.  
 <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for carma_wm::SignalizedIntersectionManager:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager__coll__graph.png" border="0" usemap="#acarma__wm_1_1SignalizedIntersectionManager_coll__map" alt="Collaboration graph"/></div>
<map name="acarma__wm_1_1SignalizedIntersectionManager_coll__map" id="acarma__wm_1_1SignalizedIntersectionManager_coll__map">
<area shape="rect" title="This class manages and keeps track of all signalized intersections in the map. All of the SPAT and MA..." alt="" coords="835,263,1053,721"/>
<area shape="rect" title=" " alt="" coords="5,27,163,134"/>
<area shape="rect" title=" " alt="" coords="187,35,344,127"/>
<area shape="rect" title=" " alt="" coords="369,35,519,127"/>
<area shape="rect" title=" " alt="" coords="543,27,694,134"/>
<area shape="rect" title=" " alt="" coords="719,5,935,156"/>
<area shape="rect" title=" " alt="" coords="959,20,1163,141"/>
<area shape="rect" title=" " alt="" coords="1187,13,1389,149"/>
<area shape="rect" title=" " alt="" coords="1413,27,1571,134"/>
<area shape="rect" title=" " alt="" coords="1595,42,1650,119"/>
<area shape="rect" title=" " alt="" coords="1711,42,1771,119"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2807f6b3c80dace7c16ee68a6610bca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae2807f6b3c80dace7c16ee68a6610bca">SignalizedIntersectionManager</a> ()</td></tr>
<tr class="separator:ae2807f6b3c80dace7c16ee68a6610bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1013130683b43bf85c82562d4b733e79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1013130683b43bf85c82562d4b733e79">SignalizedIntersectionManager</a> (const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;other)</td></tr>
<tr class="memdesc:a1013130683b43bf85c82562d4b733e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1013130683b43bf85c82562d4b733e79">More...</a><br /></td></tr>
<tr class="separator:a1013130683b43bf85c82562d4b733e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95be11e340ea8142f93ce8457f20002a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a95be11e340ea8142f93ce8457f20002a">operator=</a> (<a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> other)</td></tr>
<tr class="memdesc:a95be11e340ea8142f93ce8457f20002a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment operator that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a95be11e340ea8142f93ce8457f20002a">More...</a><br /></td></tr>
<tr class="separator:a95be11e340ea8142f93ce8457f20002a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23ad52074c818a8514e2437562f69cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aa23ad52074c818a8514e2437562f69cd">operator==</a> (const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;rhs)</td></tr>
<tr class="memdesc:aa23ad52074c818a8514e2437562f69cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equality operator that checks if every mapping are same except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#aa23ad52074c818a8514e2437562f69cd">More...</a><br /></td></tr>
<tr class="separator:aa23ad52074c818a8514e2437562f69cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb3ce6c267e28708924171cb88f71a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9">createIntersectionFromMapMsg</a> (std::vector&lt; lanelet::SignalizedIntersectionPtr &gt; &amp;intersections, std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt; &amp;traffic_signals, const cav_msgs::MapData &amp;map_msg, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map, std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt; routing_graph)</td></tr>
<tr class="memdesc:aafb3ce6c267e28708924171cb88f71a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create relevant signalized intersection and carma traffic signals based on the MAP.msg and the lanelet_map NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9">More...</a><br /></td></tr>
<tr class="separator:aafb3ce6c267e28708924171cb88f71a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6cbea5773cfcb833826a0293b6e70f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4">convertLaneToLaneletId</a> (std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;entry, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;exit, const cav_msgs::IntersectionGeometry &amp;intersection, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map, std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt; current_routing_graph)</td></tr>
<tr class="memdesc:ad6cbea5773cfcb833826a0293b6e70f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP.msg. This function also records signal_group_id_to its own lanelet id, and also signal group to entry and exit lanelets id mappings.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4">More...</a><br /></td></tr>
<tr class="separator:ad6cbea5773cfcb833826a0293b6e70f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6636ea91dc74edc592263f78f3cd60e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6636ea91dc74edc592263f78f3cd60e">setMaxLaneWidth</a> (double max_lane_width)</td></tr>
<tr class="memdesc:ad6636ea91dc74edc592263f78f3cd60e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max lane width in meters. Map msg points are associated to a lanelet if they are within this distance to a lanelet as map msg points are guaranteed to apply to a single lane.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6636ea91dc74edc592263f78f3cd60e">More...</a><br /></td></tr>
<tr class="separator:ad6636ea91dc74edc592263f78f3cd60e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="memItemLeft" align="right" valign="top">lanelet::Id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">matchSignalizedIntersection</a> (const lanelet::Lanelets &amp;entry_llts, const lanelet::Lanelets &amp;exit_llts)</td></tr>
<tr class="memdesc:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns existing signalized intersection with same entry and exit llts if exists.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">More...</a><br /></td></tr>
<tr class="separator:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22308c4c4213176393ac67be893ad717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a22308c4c4213176393ac67be893ad717">setTargetFrame</a> (const std::string &amp;target_frame)</td></tr>
<tr class="memdesc:a22308c4c4213176393ac67be893ad717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the georeference string to be used for converting MAP.msg coordinates.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a22308c4c4213176393ac67be893ad717">More...</a><br /></td></tr>
<tr class="separator:a22308c4c4213176393ac67be893ad717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; lanelet::CarmaTrafficSignal &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">createTrafficSignalUsingSGID</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> signal_group_id, const lanelet::Lanelets &amp;entry_lanelets, const lanelet::Lanelets &amp;exit_lanelets)</td></tr>
<tr class="memdesc:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">More...</a><br /></td></tr>
<tr class="separator:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0710bb2b856484e222ebeda0a27e98ac"><td class="memItemLeft" align="right" valign="top">lanelet::Lanelets&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">identifyInteriorLanelets</a> (const lanelet::Lanelets &amp;entry_llts, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map)</td></tr>
<tr class="memdesc:a0710bb2b856484e222ebeda0a27e98ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">More...</a><br /></td></tr>
<tr class="separator:a0710bb2b856484e222ebeda0a27e98ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2807f6b3c80dace7c16ee68a6610bca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae2807f6b3c80dace7c16ee68a6610bca">SignalizedIntersectionManager</a> ()</td></tr>
<tr class="separator:ae2807f6b3c80dace7c16ee68a6610bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1013130683b43bf85c82562d4b733e79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1013130683b43bf85c82562d4b733e79">SignalizedIntersectionManager</a> (const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;other)</td></tr>
<tr class="memdesc:a1013130683b43bf85c82562d4b733e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1013130683b43bf85c82562d4b733e79">More...</a><br /></td></tr>
<tr class="separator:a1013130683b43bf85c82562d4b733e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95be11e340ea8142f93ce8457f20002a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a95be11e340ea8142f93ce8457f20002a">operator=</a> (<a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> other)</td></tr>
<tr class="memdesc:a95be11e340ea8142f93ce8457f20002a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment operator that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a95be11e340ea8142f93ce8457f20002a">More...</a><br /></td></tr>
<tr class="separator:a95be11e340ea8142f93ce8457f20002a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23ad52074c818a8514e2437562f69cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aa23ad52074c818a8514e2437562f69cd">operator==</a> (const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;rhs)</td></tr>
<tr class="memdesc:aa23ad52074c818a8514e2437562f69cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equality operator that checks if every mapping are same except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#aa23ad52074c818a8514e2437562f69cd">More...</a><br /></td></tr>
<tr class="separator:aa23ad52074c818a8514e2437562f69cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc92e213d6f983dd69b7f45afef62fa6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6">createIntersectionFromMapMsg</a> (std::vector&lt; lanelet::SignalizedIntersectionPtr &gt; &amp;intersections, std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt; &amp;traffic_signals, const carma_v2x_msgs::msg::MapData &amp;map_msg, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map, std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt; routing_graph)</td></tr>
<tr class="memdesc:adc92e213d6f983dd69b7f45afef62fa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create relevant signalized intersection and carma traffic signals based on the MAP.msg and the lanelet_map NOTE: The function does not update the map with new elements.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#adc92e213d6f983dd69b7f45afef62fa6">More...</a><br /></td></tr>
<tr class="separator:adc92e213d6f983dd69b7f45afef62fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1fa16c2de91cdd5d403954b2c0a6ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea">convertLaneToLaneletId</a> (std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;entry, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;exit, const carma_v2x_msgs::msg::IntersectionGeometry &amp;intersection, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map, std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt; current_routing_graph)</td></tr>
<tr class="memdesc:acc1fa16c2de91cdd5d403954b2c0a6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP.msg. This function also records signal_group_id_to its own lanelet id, and also signal group to entry and exit lanelets id mappings.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#acc1fa16c2de91cdd5d403954b2c0a6ea">More...</a><br /></td></tr>
<tr class="separator:acc1fa16c2de91cdd5d403954b2c0a6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6636ea91dc74edc592263f78f3cd60e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6636ea91dc74edc592263f78f3cd60e">setMaxLaneWidth</a> (double max_lane_width)</td></tr>
<tr class="memdesc:ad6636ea91dc74edc592263f78f3cd60e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max lane width in meters. Map msg points are associated to a lanelet if they are within this distance to a lanelet as map msg points are guaranteed to apply to a single lane.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6636ea91dc74edc592263f78f3cd60e">More...</a><br /></td></tr>
<tr class="separator:ad6636ea91dc74edc592263f78f3cd60e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="memItemLeft" align="right" valign="top">lanelet::Id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">matchSignalizedIntersection</a> (const lanelet::Lanelets &amp;entry_llts, const lanelet::Lanelets &amp;exit_llts)</td></tr>
<tr class="memdesc:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns existing signalized intersection with same entry and exit llts if exists.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">More...</a><br /></td></tr>
<tr class="separator:a0a70ce89fbb9e0f3536a740864c5e1e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22308c4c4213176393ac67be893ad717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a22308c4c4213176393ac67be893ad717">setTargetFrame</a> (const std::string &amp;target_frame)</td></tr>
<tr class="memdesc:a22308c4c4213176393ac67be893ad717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the georeference string to be used for converting MAP.msg coordinates.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a22308c4c4213176393ac67be893ad717">More...</a><br /></td></tr>
<tr class="separator:a22308c4c4213176393ac67be893ad717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; lanelet::CarmaTrafficSignal &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">createTrafficSignalUsingSGID</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> signal_group_id, const lanelet::Lanelets &amp;entry_lanelets, const lanelet::Lanelets &amp;exit_lanelets)</td></tr>
<tr class="memdesc:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">More...</a><br /></td></tr>
<tr class="separator:a74e81f1b27cdeb4e2edfbdf8ff016d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0710bb2b856484e222ebeda0a27e98ac"><td class="memItemLeft" align="right" valign="top">lanelet::Lanelets&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">identifyInteriorLanelets</a> (const lanelet::Lanelets &amp;entry_llts, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map)</td></tr>
<tr class="memdesc:a0710bb2b856484e222ebeda0a27e98ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally.  <a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">More...</a><br /></td></tr>
<tr class="separator:a0710bb2b856484e222ebeda0a27e98ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae640c0bf6ca73471d06bbae8a52480e3"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::pair&lt; double, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a></td></tr>
<tr class="separator:ae640c0bf6ca73471d06bbae8a52480e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df1b50413cb17fddb51f02461440cfe"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, lanelet::Id &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">intersection_id_to_regem_id_</a></td></tr>
<tr class="separator:a1df1b50413cb17fddb51f02461440cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1ed35c99d7ef36981863bf9f55b824"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a></td></tr>
<tr class="separator:a7d1ed35c99d7ef36981863bf9f55b824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cef69fe8ca0210de845cde3be17c004"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::unordered_set&lt; lanelet::Id &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a></td></tr>
<tr class="separator:a8cef69fe8ca0210de845cde3be17c004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5adbf7d15429840496f2e6f099c35c38"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::unordered_set&lt; lanelet::Id &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a></td></tr>
<tr class="separator:a5adbf7d15429840496f2e6f099c35c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1fe15f2871b190b71096e34b2ad00e"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::vector&lt; std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8d1fe15f2871b190b71096e34b2ad00e">traffic_signal_states_</a></td></tr>
<tr class="separator:a8d1fe15f2871b190b71096e34b2ad00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241e862529ce9f3426de0feb7f2c93f0"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::vector&lt; boost::posix_time::ptime &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a241e862529ce9f3426de0feb7f2c93f0">traffic_signal_start_times_</a></td></tr>
<tr class="separator:a241e862529ce9f3426de0feb7f2c93f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaabc53c860c61be5b99b02c9861dfa3"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#abaabc53c860c61be5b99b02c9861dfa3">last_seen_state_</a></td></tr>
<tr class="separator:abaabc53c860c61be5b99b02c9861dfa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe982f620f0c2f428e1a3f2067177c44"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, <a class="el" href="classint.html">int</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#abe982f620f0c2f428e1a3f2067177c44">signal_state_counter_</a></td></tr>
<tr class="separator:abe982f620f0c2f428e1a3f2067177c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a36a652c5658a51bec0117b9b85c7192f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a> = &quot;&quot;</td></tr>
<tr class="separator:a36a652c5658a51bec0117b9b85c7192f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076fb1113160092f5a1c6dfa3e804942"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a076fb1113160092f5a1c6dfa3e804942">max_lane_width_</a> = 4</td></tr>
<tr class="separator:a076fb1113160092f5a1c6dfa3e804942"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class manages and keeps track of all signalized intersections in the map. All of the SPAT and MAP standard's lane ids to lanelet id mapping is recorded here. NOTE: This class functions do not update the map given. </p>

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00049">49</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae2807f6b3c80dace7c16ee68a6610bca" name="ae2807f6b3c80dace7c16ee68a6610bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2807f6b3c80dace7c16ee68a6610bca">&#9670;&nbsp;</a></span>SignalizedIntersectionManager() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::SignalizedIntersectionManager::SignalizedIntersectionManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00052">52</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1013130683b43bf85c82562d4b733e79" name="a1013130683b43bf85c82562d4b733e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1013130683b43bf85c82562d4b733e79">&#9670;&nbsp;</a></span>SignalizedIntersectionManager() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::SignalizedIntersectionManager::SignalizedIntersectionManager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy constructor that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">other</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">447</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>  {</div>
<div class="line"><span class="lineno">  449</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a> = other.signal_group_to_entry_lanelet_ids_;</div>
<div class="line"><span class="lineno">  450</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a> = other.signal_group_to_exit_lanelet_ids_;</div>
<div class="line"><span class="lineno">  451</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">intersection_id_to_regem_id_</a> = other.intersection_id_to_regem_id_;</div>
<div class="line"><span class="lineno">  452</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a> = other.signal_group_to_traffic_light_id_;</div>
<div class="line"><span class="lineno">  453</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a> = other.intersection_coord_correction_;</div>
<div class="line"><span class="lineno">  454</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a1df1b50413cb17fddb51f02461440cfe"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">carma_wm::SignalizedIntersectionManager::intersection_id_to_regem_id_</a></div><div class="ttdeci">std::unordered_map&lt; uint16_t, lanelet::Id &gt; intersection_id_to_regem_id_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00148">SignalizedIntersectionManager.h:148</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a5adbf7d15429840496f2e6f099c35c38"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">carma_wm::SignalizedIntersectionManager::signal_group_to_entry_lanelet_ids_</a></div><div class="ttdeci">std::unordered_map&lt; uint8_t, std::unordered_set&lt; lanelet::Id &gt; &gt; signal_group_to_entry_lanelet_ids_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00157">SignalizedIntersectionManager.h:157</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a7d1ed35c99d7ef36981863bf9f55b824"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">carma_wm::SignalizedIntersectionManager::signal_group_to_traffic_light_id_</a></div><div class="ttdeci">std::unordered_map&lt; uint8_t, lanelet::Id &gt; signal_group_to_traffic_light_id_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00151">SignalizedIntersectionManager.h:151</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a8cef69fe8ca0210de845cde3be17c004"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">carma_wm::SignalizedIntersectionManager::signal_group_to_exit_lanelet_ids_</a></div><div class="ttdeci">std::unordered_map&lt; uint8_t, std::unordered_set&lt; lanelet::Id &gt; &gt; signal_group_to_exit_lanelet_ids_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00154">SignalizedIntersectionManager.h:154</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_ae640c0bf6ca73471d06bbae8a52480e3"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">carma_wm::SignalizedIntersectionManager::intersection_coord_correction_</a></div><div class="ttdeci">std::unordered_map&lt; uint16_t, std::pair&lt; double, double &gt; &gt; intersection_coord_correction_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00145">SignalizedIntersectionManager.h:145</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00145">intersection_coord_correction_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">intersection_id_to_regem_id_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>

</div>
</div>
<a id="ae2807f6b3c80dace7c16ee68a6610bca" name="ae2807f6b3c80dace7c16ee68a6610bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2807f6b3c80dace7c16ee68a6610bca">&#9670;&nbsp;</a></span>SignalizedIntersectionManager() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::SignalizedIntersectionManager::SignalizedIntersectionManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8hpp_source.html#l00056">56</a> of file <a class="el" href="SignalizedIntersectionManager_8hpp_source.html">SignalizedIntersectionManager.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1013130683b43bf85c82562d4b733e79" name="a1013130683b43bf85c82562d4b733e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1013130683b43bf85c82562d4b733e79">&#9670;&nbsp;</a></span>SignalizedIntersectionManager() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::SignalizedIntersectionManager::SignalizedIntersectionManager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy constructor that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">other</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acc1fa16c2de91cdd5d403954b2c0a6ea" name="acc1fa16c2de91cdd5d403954b2c0a6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1fa16c2de91cdd5d403954b2c0a6ea">&#9670;&nbsp;</a></span>convertLaneToLaneletId() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::convertLaneToLaneletId </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;&#160;</td>
          <td class="paramname"><em>exit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const carma_v2x_msgs::msg::IntersectionGeometry &amp;&#160;</td>
          <td class="paramname"><em>intersection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt;&#160;</td>
          <td class="paramname"><em>current_routing_graph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP.msg. This function also records signal_group_id_to its own lanelet id, and also signal group to entry and exit lanelets id mappings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">entry</td><td>lane id to lanelet id mappings to return </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">exit</td><td>lane id to lanelet id mappings to return </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">intersection</td><td>MAP.msg that consists all static data portion of the intersection </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map</td><td>lanelet_map to check </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">routing_graph</td><td>of the lanelet map to accurately detect lanes </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument</td><td>if given coordinates in the msg doesn't exist in the map TODO: Need to think about error buffer in the future. Map msgs are made from google maps or open streets maps normally so this function might run into some errors from that. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ros2_2src_2SignalizedIntersectionManager_8cpp_source.html#l00058">58</a> of file <a class="el" href="ros2_2src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   60</span>  {</div>
<div class="line"><span class="lineno">   61</span>    std::unordered_map&lt;uint8_t, std::unordered_set&lt;uint16_t&gt;&gt; signal_group_to_exit_lanes;</div>
<div class="line"><span class="lineno">   62</span>    std::unordered_map&lt;uint8_t, std::unordered_set&lt;uint16_t&gt;&gt; signal_group_to_entry_lanes;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a> == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">   65</span>    {</div>
<div class="line"><span class="lineno">   66</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not initialized yet as the georeference was not found...&quot;</span>);</div>
<div class="line"><span class="lineno">   67</span>    }</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    lanelet::projection::LocalFrameProjector local_projector(<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a>.c_str());</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    lanelet::GPSPoint gps_point;</div>
<div class="line"><span class="lineno">   72</span>    gps_point.lat = intersection.ref_point.latitude;</div>
<div class="line"><span class="lineno">   73</span>    gps_point.lon = intersection.ref_point.longitude;</div>
<div class="line"><span class="lineno">   74</span>    gps_point.ele = intersection.ref_point.elevation;</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="keyword">auto</span> ref_node  = local_projector.forward(gps_point);</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Reference node in map frame x: &quot;</span> &lt;&lt; ref_node.x() &lt;&lt; <span class="stringliteral">&quot;, y: &quot;</span> &lt;&lt; ref_node.y());</div>
<div class="line"><span class="lineno">   79</span>    </div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> lane : intersection.lane_list)</div>
<div class="line"><span class="lineno">   82</span>    {</div>
<div class="line"><span class="lineno">   83</span>      <span class="keywordflow">if</span> (lane.lane_attributes.lane_type.choice != j2735_v2x_msgs::msg::LaneTypeAttributes::VEHICLE)</div>
<div class="line"><span class="lineno">   84</span>      {</div>
<div class="line"><span class="lineno">   85</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Lane id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id &lt;&lt; <span class="stringliteral">&quot;, is not a lane for vehicle. Only vehicle road is currently supported. Skipping...&quot;</span> );</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   87</span>      }</div>
<div class="line"><span class="lineno">   88</span>      std::vector&lt;lanelet::Point3d&gt; node_list;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>      <span class="keywordtype">double</span> curr_x = ref_node.x();</div>
<div class="line"><span class="lineno">   91</span>      <span class="keywordtype">double</span> curr_y = ref_node.y();</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>.find(intersection.id.id) != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>.end())</div>
<div class="line"><span class="lineno">   94</span>      {</div>
<div class="line"><span class="lineno">   95</span>        curr_x += <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].first;</div>
<div class="line"><span class="lineno">   96</span>        curr_y += <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].second;</div>
<div class="line"><span class="lineno">   97</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Applied reference point correction, delta_x: &quot;</span> &lt;&lt;  <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].first &lt;&lt;</div>
<div class="line"><span class="lineno">   98</span>                          <span class="stringliteral">&quot;, delta_y: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].second &lt;&lt; <span class="stringliteral">&quot;, to intersection id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">   99</span>      }</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Processing Lane id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  102</span>      </div>
<div class="line"><span class="lineno">  103</span>      <span class="keywordtype">size_t</span> min_number_of_points = 2; <span class="comment">// two points minimum are required</span></div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>      <span class="keywordtype">size_t</span> size_of_available_points = lane.node_list.nodes.node_set_xy.size();</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>      <span class="keywordflow">if</span> (size_of_available_points &lt; min_number_of_points)</div>
<div class="line"><span class="lineno">  108</span>      {</div>
<div class="line"><span class="lineno">  109</span>        RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Not enough points are provided to match a lane. Skipping... &quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  111</span>      }</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; size_of_available_points; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++ )</div>
<div class="line"><span class="lineno">  114</span>      {</div>
<div class="line"><span class="lineno">  115</span>        curr_x = lane.node_list.nodes.node_set_xy[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].delta.x + curr_x;</div>
<div class="line"><span class="lineno">  116</span>        curr_y = lane.node_list.nodes.node_set_xy[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].delta.y + curr_y;</div>
<div class="line"><span class="lineno">  117</span>        lanelet::Point3d curr_node{map-&gt;pointLayer.uniqueId(), curr_x, curr_y, 0};</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Current node x: &quot;</span> &lt;&lt; curr_x &lt;&lt; <span class="stringliteral">&quot;, y: &quot;</span> &lt;&lt; curr_y);</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>        node_list.push_back(curr_node);</div>
<div class="line"><span class="lineno">  122</span>      }</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Lane directions: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_attributes.directional_use.lane_direction); </div>
<div class="line"><span class="lineno">  125</span>      </div>
<div class="line"><span class="lineno">  126</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  127</span>      {</div>
<div class="line"><span class="lineno">  128</span>        <span class="comment">// flip direction if ingress to pick up correct lanelets</span></div>
<div class="line"><span class="lineno">  129</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Reversed the node list!&quot;</span>);</div>
<div class="line"><span class="lineno">  130</span>        std::reverse(node_list.begin(), node_list.end());</div>
<div class="line"><span class="lineno">  131</span>      }</div>
<div class="line"><span class="lineno">  132</span>      </div>
<div class="line"><span class="lineno">  133</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : node_list)</div>
<div class="line"><span class="lineno">  134</span>      {</div>
<div class="line"><span class="lineno">  135</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), node.x() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; node.y());</div>
<div class="line"><span class="lineno">  136</span>      }</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>      <span class="comment">// save which signal group connect to which exit lanes</span></div>
<div class="line"><span class="lineno">  139</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> connection : lane.connect_to_list)</div>
<div class="line"><span class="lineno">  140</span>      {</div>
<div class="line"><span class="lineno">  141</span>        signal_group_to_exit_lanes[connection.signal_group].emplace(connection.connecting_lane.lane);</div>
<div class="line"><span class="lineno">  142</span>        </div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  144</span>          signal_group_to_entry_lanes[connection.signal_group].emplace(lane.lane_id);</div>
<div class="line"><span class="lineno">  145</span>      }</div>
<div class="line"><span class="lineno">  146</span>      </div>
<div class="line"><span class="lineno">  147</span>      <span class="comment">// query corresponding lanelet lane from local map</span></div>
<div class="line"><span class="lineno">  148</span>      <span class="keyword">auto</span> affected_llts = <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58">carma_wm::query::getAffectedLaneletOrAreas</a>(node_list, map, current_routing_graph, <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a076fb1113160092f5a1c6dfa3e804942">max_lane_width_</a>);</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>      <span class="keywordflow">if</span> (affected_llts.empty())</div>
<div class="line"><span class="lineno">  151</span>      {</div>
<div class="line"><span class="lineno">  152</span>        <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  153</span>        <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  154</span>        RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Given offset points are not inside the map for lane: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  156</span>      }</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>      lanelet::Id corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  159</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  160</span>      {        </div>
<div class="line"><span class="lineno">  161</span>        corresponding_lanelet_id = affected_llts.front().id(); </div>
<div class="line"><span class="lineno">  162</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Default corresponding_lanelet_id: &quot;</span> &lt;&lt; corresponding_lanelet_id &lt;&lt;<span class="stringliteral">&quot;, in EGRESS&quot;</span>);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>      }</div>
<div class="line"><span class="lineno">  165</span>      <span class="keywordflow">else</span> <span class="comment">//ingress</span></div>
<div class="line"><span class="lineno">  166</span>      {        </div>
<div class="line"><span class="lineno">  167</span>        corresponding_lanelet_id = affected_llts.back().id(); </div>
<div class="line"><span class="lineno">  168</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Default corresponding_lanelet_id: &quot;</span> &lt;&lt; corresponding_lanelet_id &lt;&lt;<span class="stringliteral">&quot;, in INGRESS&quot;</span>);</div>
<div class="line"><span class="lineno">  169</span>      } </div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : affected_llts) <span class="comment">// filter out intersection lanelets</span></div>
<div class="line"><span class="lineno">  172</span>      {</div>
<div class="line"><span class="lineno">  173</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Checking if we can get entry/exit from lanelet &quot;</span> &lt;&lt; llt.id());</div>
<div class="line"><span class="lineno">  174</span>        <span class="comment">//TODO direction of affected_llts may play role, but it should be good</span></div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">if</span> (llt.lanelet().get().hasAttribute(<span class="stringliteral">&quot;turn_direction&quot;</span>) &amp;&amp; </div>
<div class="line"><span class="lineno">  176</span>            (llt.lanelet().get().attribute(<span class="stringliteral">&quot;turn_direction&quot;</span>).value().compare(<span class="stringliteral">&quot;left&quot;</span>) == 0 ||</div>
<div class="line"><span class="lineno">  177</span>            llt.lanelet().get().attribute(<span class="stringliteral">&quot;turn_direction&quot;</span>).value().compare(<span class="stringliteral">&quot;right&quot;</span>) == 0))</div>
<div class="line"><span class="lineno">  178</span>        {</div>
<div class="line"><span class="lineno">  179</span>          std::vector&lt;lanelet::ConstLanelet&gt; connecting_llts;</div>
<div class="line"><span class="lineno">  180</span>          <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  181</span>          {</div>
<div class="line"><span class="lineno">  182</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;lanelet &quot;</span> &lt;&lt; llt.id() &lt;&lt; <span class="stringliteral">&quot; is actually part of the intersecion. Trying to detect EGRESS...&quot;</span>);</div>
<div class="line"><span class="lineno">  183</span>            connecting_llts = current_routing_graph-&gt;following(llt.lanelet().get());</div>
<div class="line"><span class="lineno">  184</span>          }</div>
<div class="line"><span class="lineno">  185</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  186</span>          {</div>
<div class="line"><span class="lineno">  187</span>            RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;lanelet &quot;</span> &lt;&lt; llt.id() &lt;&lt; <span class="stringliteral">&quot; is actually part of the intersecion. Trying to detect INGRESS...&quot;</span>);</div>
<div class="line"><span class="lineno">  188</span>            connecting_llts = current_routing_graph-&gt;previous(llt.lanelet().get());</div>
<div class="line"><span class="lineno">  189</span>          }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>          <span class="keywordflow">if</span> (!connecting_llts.empty()) </div>
<div class="line"><span class="lineno">  192</span>          {</div>
<div class="line"><span class="lineno">  193</span>            corresponding_lanelet_id = connecting_llts[0].id();</div>
<div class="line"><span class="lineno">  194</span>          }</div>
<div class="line"><span class="lineno">  195</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  196</span>          {</div>
<div class="line"><span class="lineno">  197</span>            RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Interestingly, did not detect here&quot;</span>);</div>
<div class="line"><span class="lineno">  198</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  199</span>          }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  202</span>        }</div>
<div class="line"><span class="lineno">  203</span>      }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Found existing lanelet id: &quot;</span> &lt;&lt; corresponding_lanelet_id);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  208</span>      {</div>
<div class="line"><span class="lineno">  209</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Detected INGRESS, &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  210</span>        entry[lane.lane_id] = corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  211</span>      }</div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  213</span>      {</div>
<div class="line"><span class="lineno">  214</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Detected EGRESS, &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  215</span>        exit[lane.lane_id] = corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  216</span>      }</div>
<div class="line"><span class="lineno">  217</span>      <span class="comment">// ignoring types that are neither ingress nor egress </span></div>
<div class="line"><span class="lineno">  218</span>    }</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="comment">// convert and save exit lane ids into lanelet ids with their corresponding signal group ids</span></div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = signal_group_to_exit_lanes.begin(); iter != signal_group_to_exit_lanes.end(); iter++)</div>
<div class="line"><span class="lineno">  222</span>    {</div>
<div class="line"><span class="lineno">  223</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> exit_lane : iter-&gt;second)</div>
<div class="line"><span class="lineno">  224</span>      {</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">if</span> (exit.find(exit_lane) != exit.end())</div>
<div class="line"><span class="lineno">  226</span>        {</div>
<div class="line"><span class="lineno">  227</span>          RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Adding exit_lane id: &quot;</span> &lt;&lt; exit_lane);</div>
<div class="line"><span class="lineno">  228</span>          <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a>[iter-&gt;first].insert(exit[exit_lane]);</div>
<div class="line"><span class="lineno">  229</span>        }</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  231</span>        {</div>
<div class="line"><span class="lineno">  232</span>          <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  233</span>          <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  234</span>          RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Unable to convert exit lane Id: &quot;</span>  + std::to_string((<span class="keywordtype">int</span>)exit_lane) + <span class="stringliteral">&quot;, to lanelet id using the given MAP.msg!&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span>        }</div>
<div class="line"><span class="lineno">  236</span>      }</div>
<div class="line"><span class="lineno">  237</span>    }</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">// convert and save entry lane ids into lanelet ids with their corresponding signal group ids</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = signal_group_to_entry_lanes.begin(); iter != signal_group_to_entry_lanes.end(); iter++)</div>
<div class="line"><span class="lineno">  241</span>    {</div>
<div class="line"><span class="lineno">  242</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> entry_lane : iter-&gt;second)</div>
<div class="line"><span class="lineno">  243</span>      {</div>
<div class="line"><span class="lineno">  244</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Adding entry_lane id: &quot;</span> &lt;&lt; entry_lane);</div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">if</span> (entry.find(entry_lane) != entry.end())</div>
<div class="line"><span class="lineno">  246</span>        {</div>
<div class="line"><span class="lineno">  247</span>          <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[iter-&gt;first].insert(entry[entry_lane]);</div>
<div class="line"><span class="lineno">  248</span>        }</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  250</span>        {</div>
<div class="line"><span class="lineno">  251</span>          <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  252</span>          <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  253</span>          RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Unable to convert entry lane Id: &quot;</span>  + std::to_string((<span class="keywordtype">int</span>)entry_lane) + <span class="stringliteral">&quot;, to lanelet id using the given MAP.msg!&quot;</span>);</div>
<div class="line"><span class="lineno">  254</span>        }</div>
<div class="line"><span class="lineno">  255</span>      }</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a076fb1113160092f5a1c6dfa3e804942"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a076fb1113160092f5a1c6dfa3e804942">carma_wm::SignalizedIntersectionManager::max_lane_width_</a></div><div class="ttdeci">double max_lane_width_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00176">SignalizedIntersectionManager.h:176</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a36a652c5658a51bec0117b9b85c7192f"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">carma_wm::SignalizedIntersectionManager::target_frame_</a></div><div class="ttdeci">std::string target_frame_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00173">SignalizedIntersectionManager.h:173</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1query_html_a9c9935e22582f37c01441115bce72f58"><div class="ttname"><a href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58">carma_wm::query::getAffectedLaneletOrAreas</a></div><div class="ttdeci">lanelet::ConstLaneletOrAreas getAffectedLaneletOrAreas(const lanelet::Points3d &amp;gf_pts, const lanelet::LaneletMapPtr &amp;lanelet_map, std::shared_ptr&lt; const lanelet::routing::RoutingGraph &gt; routing_graph, double max_lane_width)</div><div class="ttdoc">Gets the affected lanelet or areas based on the points in the given map's frame.</div><div class="ttdef"><b>Definition:</b> <a href="src_2WorldModelUtils_8cpp_source.html#l00117">WorldModelUtils.cpp:117</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1LANE__DIRECTION_html_a3e58a5f2f83d786a6600b1b79b7a913b"><div class="ttname"><a href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">carma_wm::LANE_DIRECTION::EGRESS</a></div><div class="ttdeci">static const uint8_t EGRESS</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00040">SignalizedIntersectionManager.h:40</a></div></div>
<div class="ttc" id="astructcarma__wm_1_1LANE__DIRECTION_html_aacf94d08e632652ac4eac1f694ee7bc3"><div class="ttname"><a href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">carma_wm::LANE_DIRECTION::INGRESS</a></div><div class="ttdeci">static const uint8_t INGRESS</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8h_source.html#l00039">SignalizedIntersectionManager.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00040">carma_wm::LANE_DIRECTION::EGRESS</a>, <a class="el" href="src_2WorldModelUtils_8cpp_source.html#l00117">carma_wm::query::getAffectedLaneletOrAreas()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00039">carma_wm::LANE_DIRECTION::INGRESS</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00145">intersection_coord_correction_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00176">max_lane_width_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00173">target_frame_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_acc1fa16c2de91cdd5d403954b2c0a6ea_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_acc1fa16c2de91cdd5d403954b2c0a6ea_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_acc1fa16c2de91cdd5d403954b2c0a6ea_cgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_acc1fa16c2de91cdd5d403954b2c0a6ea_cgraph">
<area shape="rect" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="5,71,224,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="272,71,467,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a382665a2ddc42be06fca9c1f8dfd0489" title="A function that filters successor lanelets of root_lanelets from possible_lanelets." alt="" coords="515,5,729,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="535,71,709,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="549,136,695,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="777,71,923,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="777,136,923,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="971,136,1116,177"/>
</map>
</div>

</div>
</div>
<a id="ad6cbea5773cfcb833826a0293b6e70f4" name="ad6cbea5773cfcb833826a0293b6e70f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6cbea5773cfcb833826a0293b6e70f4">&#9670;&nbsp;</a></span>convertLaneToLaneletId() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::convertLaneToLaneletId </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; &amp;&#160;</td>
          <td class="paramname"><em>exit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cav_msgs::IntersectionGeometry &amp;&#160;</td>
          <td class="paramname"><em>intersection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt;&#160;</td>
          <td class="paramname"><em>current_routing_graph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP.msg. This function also records signal_group_id_to its own lanelet id, and also signal group to entry and exit lanelets id mappings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">entry</td><td>lane id to lanelet id mappings to return </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">exit</td><td>lane id to lanelet id mappings to return </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">intersection</td><td>MAP.msg that consists all static data portion of the intersection </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map</td><td>lanelet_map to check </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">routing_graph</td><td>of the lanelet map to accurately detect lanes </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument</td><td>if given coordinates in the msg doesn't exist in the map TODO: Need to think about error buffer in the future. Map msgs are made from google maps or open streets maps normally so this function might run into some errors from that. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">57</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>  {</div>
<div class="line"><span class="lineno">   60</span>    std::unordered_map&lt;uint8_t, std::unordered_set&lt;uint16_t&gt;&gt; signal_group_to_exit_lanes;</div>
<div class="line"><span class="lineno">   61</span>    std::unordered_map&lt;uint8_t, std::unordered_set&lt;uint16_t&gt;&gt; signal_group_to_entry_lanes;</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a> == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">   64</span>    {</div>
<div class="line"><span class="lineno">   65</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not initialized yet as the georeference was not found...&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span>    }</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    lanelet::projection::LocalFrameProjector local_projector(<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a>.c_str());</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    lanelet::GPSPoint gps_point;</div>
<div class="line"><span class="lineno">   71</span>    gps_point.lat = intersection.ref_point.latitude;</div>
<div class="line"><span class="lineno">   72</span>    gps_point.lon = intersection.ref_point.longitude;</div>
<div class="line"><span class="lineno">   73</span>    gps_point.ele = intersection.ref_point.elevation;</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    <span class="keyword">auto</span> ref_node  = local_projector.forward(gps_point);</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Reference node in map frame x: &quot;</span> &lt;&lt; ref_node.x() &lt;&lt; <span class="stringliteral">&quot;, y: &quot;</span> &lt;&lt; ref_node.y());</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> lane : intersection.lane_list)</div>
<div class="line"><span class="lineno">   80</span>    {</div>
<div class="line"><span class="lineno">   81</span>      <span class="keywordflow">if</span> (lane.lane_attributes.lane_type.choice != j2735_msgs::LaneTypeAttributes::VEHICLE)</div>
<div class="line"><span class="lineno">   82</span>      {</div>
<div class="line"><span class="lineno">   83</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Lane id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id &lt;&lt; <span class="stringliteral">&quot;, is not a lane for vehicle. Only vehicle road is currently supported. Skipping...&quot;</span> );</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   85</span>      }</div>
<div class="line"><span class="lineno">   86</span>      std::vector&lt;lanelet::Point3d&gt; node_list;</div>
<div class="line"><span class="lineno">   87</span>      </div>
<div class="line"><span class="lineno">   88</span>      <span class="keywordtype">double</span> curr_x = ref_node.x();</div>
<div class="line"><span class="lineno">   89</span>      <span class="keywordtype">double</span> curr_y = ref_node.y();</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>.find(intersection.id.id) != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>.end())</div>
<div class="line"><span class="lineno">   92</span>      {</div>
<div class="line"><span class="lineno">   93</span>        curr_x += <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].first;</div>
<div class="line"><span class="lineno">   94</span>        curr_y += <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].second;</div>
<div class="line"><span class="lineno">   95</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Applied reference point correction, delta_x: &quot;</span> &lt;&lt;  <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].first &lt;&lt;</div>
<div class="line"><span class="lineno">   96</span>                          <span class="stringliteral">&quot;, delta_y: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a>[intersection.id.id].second &lt;&lt; <span class="stringliteral">&quot;, to intersection id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">   97</span>      }</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>      ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Processing Lane id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  100</span>      </div>
<div class="line"><span class="lineno">  101</span>      <span class="keywordtype">size_t</span> min_number_of_points = 2; <span class="comment">// two points minimum are required</span></div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>      <span class="keywordtype">size_t</span> size_of_available_points = lane.node_list.nodes.node_set_xy.size();</div>
<div class="line"><span class="lineno">  104</span>      </div>
<div class="line"><span class="lineno">  105</span>      <span class="keywordflow">if</span> (size_of_available_points &lt; min_number_of_points)</div>
<div class="line"><span class="lineno">  106</span>      {</div>
<div class="line"><span class="lineno">  107</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;Not enough points are provided to match a lane. Skipping... &quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  109</span>      }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; size_of_available_points; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> ++ )</div>
<div class="line"><span class="lineno">  112</span>      {</div>
<div class="line"><span class="lineno">  113</span>        curr_x = lane.node_list.nodes.node_set_xy[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].delta.x + curr_x;</div>
<div class="line"><span class="lineno">  114</span>        curr_y = lane.node_list.nodes.node_set_xy[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].delta.y + curr_y;</div>
<div class="line"><span class="lineno">  115</span>        lanelet::Point3d curr_node{map-&gt;pointLayer.uniqueId(), curr_x, curr_y, 0};</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Current node x: &quot;</span> &lt;&lt; curr_x &lt;&lt; <span class="stringliteral">&quot;, y: &quot;</span> &lt;&lt; curr_y);</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        node_list.push_back(curr_node);</div>
<div class="line"><span class="lineno">  120</span>      }</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>      ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Lane directions: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_attributes.directional_use.lane_direction); </div>
<div class="line"><span class="lineno">  123</span>      </div>
<div class="line"><span class="lineno">  124</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  125</span>      {</div>
<div class="line"><span class="lineno">  126</span>        <span class="comment">// flip direction if ingress to pick up correct lanelets</span></div>
<div class="line"><span class="lineno">  127</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Reversed the node list!&quot;</span>);</div>
<div class="line"><span class="lineno">  128</span>        std::reverse(node_list.begin(), node_list.end());</div>
<div class="line"><span class="lineno">  129</span>      }</div>
<div class="line"><span class="lineno">  130</span>      </div>
<div class="line"><span class="lineno">  131</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> node : node_list)</div>
<div class="line"><span class="lineno">  132</span>      {</div>
<div class="line"><span class="lineno">  133</span>        ROS_DEBUG_STREAM(node.x() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; node.y());</div>
<div class="line"><span class="lineno">  134</span>      }</div>
<div class="line"><span class="lineno">  135</span>      </div>
<div class="line"><span class="lineno">  136</span>      <span class="comment">// save which signal group connect to which exit lanes</span></div>
<div class="line"><span class="lineno">  137</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> connection : lane.connect_to_list)</div>
<div class="line"><span class="lineno">  138</span>      {</div>
<div class="line"><span class="lineno">  139</span>        signal_group_to_exit_lanes[connection.signal_group].emplace(connection.connecting_lane.lane);</div>
<div class="line"><span class="lineno">  140</span>        </div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  142</span>          signal_group_to_entry_lanes[connection.signal_group].emplace(lane.lane_id);</div>
<div class="line"><span class="lineno">  143</span>      }</div>
<div class="line"><span class="lineno">  144</span>      </div>
<div class="line"><span class="lineno">  145</span>      <span class="comment">// query corresponding lanelet lane from local map</span></div>
<div class="line"><span class="lineno">  146</span>      <span class="keyword">auto</span> affected_llts = <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58">carma_wm::query::getAffectedLaneletOrAreas</a>(node_list, map, current_routing_graph, <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a076fb1113160092f5a1c6dfa3e804942">max_lane_width_</a>);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>      <span class="keywordflow">if</span> (affected_llts.empty())</div>
<div class="line"><span class="lineno">  149</span>      {</div>
<div class="line"><span class="lineno">  150</span>        <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  151</span>        <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  152</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;Given offset points are not inside the map for lane: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  154</span>      }</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>      lanelet::Id corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  157</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  158</span>      {        </div>
<div class="line"><span class="lineno">  159</span>        corresponding_lanelet_id = affected_llts.front().id(); </div>
<div class="line"><span class="lineno">  160</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Default corresponding_lanelet_id: &quot;</span> &lt;&lt; corresponding_lanelet_id &lt;&lt;<span class="stringliteral">&quot;, in EGRESS&quot;</span>);</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>      }</div>
<div class="line"><span class="lineno">  163</span>      <span class="keywordflow">else</span> <span class="comment">//ingress</span></div>
<div class="line"><span class="lineno">  164</span>      {        </div>
<div class="line"><span class="lineno">  165</span>        corresponding_lanelet_id = affected_llts.back().id(); </div>
<div class="line"><span class="lineno">  166</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Default corresponding_lanelet_id: &quot;</span> &lt;&lt; corresponding_lanelet_id &lt;&lt;<span class="stringliteral">&quot;, in INGRESS&quot;</span>);</div>
<div class="line"><span class="lineno">  167</span>      }</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : affected_llts) <span class="comment">// filter out intersection lanelets</span></div>
<div class="line"><span class="lineno">  170</span>      {</div>
<div class="line"><span class="lineno">  171</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Checking if we can get entry/exit from lanelet &quot;</span> &lt;&lt; llt.id());</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">if</span> (llt.lanelet().get().hasAttribute(<span class="stringliteral">&quot;turn_direction&quot;</span>) &amp;&amp; </div>
<div class="line"><span class="lineno">  174</span>            (llt.lanelet().get().attribute(<span class="stringliteral">&quot;turn_direction&quot;</span>).value().compare(<span class="stringliteral">&quot;left&quot;</span>) == 0 ||</div>
<div class="line"><span class="lineno">  175</span>            llt.lanelet().get().attribute(<span class="stringliteral">&quot;turn_direction&quot;</span>).value().compare(<span class="stringliteral">&quot;right&quot;</span>) == 0))</div>
<div class="line"><span class="lineno">  176</span>        {</div>
<div class="line"><span class="lineno">  177</span>          std::vector&lt;lanelet::ConstLanelet&gt; connecting_llts;</div>
<div class="line"><span class="lineno">  178</span>          <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  179</span>          {</div>
<div class="line"><span class="lineno">  180</span>            ROS_DEBUG_STREAM(<span class="stringliteral">&quot;lanelet &quot;</span> &lt;&lt; llt.id() &lt;&lt; <span class="stringliteral">&quot; is actually part of the intersecion. Trying to detect EGRESS...&quot;</span>);</div>
<div class="line"><span class="lineno">  181</span>            connecting_llts = current_routing_graph-&gt;following(llt.lanelet().get());</div>
<div class="line"><span class="lineno">  182</span>          }</div>
<div class="line"><span class="lineno">  183</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  184</span>          {</div>
<div class="line"><span class="lineno">  185</span>            ROS_DEBUG_STREAM(<span class="stringliteral">&quot;lanelet &quot;</span> &lt;&lt; llt.id() &lt;&lt; <span class="stringliteral">&quot; is actually part of the intersecion. Trying to detect INGRESS...&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>            connecting_llts = current_routing_graph-&gt;previous(llt.lanelet().get());</div>
<div class="line"><span class="lineno">  187</span>          }</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>          <span class="keywordflow">if</span> (!connecting_llts.empty())</div>
<div class="line"><span class="lineno">  190</span>            corresponding_lanelet_id = connecting_llts[0].id();</div>
<div class="line"><span class="lineno">  191</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  192</span>          {</div>
<div class="line"><span class="lineno">  193</span>            ROS_WARN_STREAM(<span class="stringliteral">&quot;Interestingly, did not detect here&quot;</span>);</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  195</span>          }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  198</span>        }</div>
<div class="line"><span class="lineno">  199</span>      }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>      ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Found existing lanelet id: &quot;</span> &lt;&lt; corresponding_lanelet_id);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>      <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#aacf94d08e632652ac4eac1f694ee7bc3">LANE_DIRECTION::INGRESS</a>)</div>
<div class="line"><span class="lineno">  204</span>      {</div>
<div class="line"><span class="lineno">  205</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Detected INGRESS, &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  206</span>        entry[lane.lane_id] = corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  207</span>      }</div>
<div class="line"><span class="lineno">  208</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lane.lane_attributes.directional_use.lane_direction == <a class="code hl_variable" href="structcarma__wm_1_1LANE__DIRECTION.html#a3e58a5f2f83d786a6600b1b79b7a913b">LANE_DIRECTION::EGRESS</a>)</div>
<div class="line"><span class="lineno">  209</span>      {</div>
<div class="line"><span class="lineno">  210</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Detected EGRESS, &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)lane.lane_id);</div>
<div class="line"><span class="lineno">  211</span>        exit[lane.lane_id] = corresponding_lanelet_id;</div>
<div class="line"><span class="lineno">  212</span>      }</div>
<div class="line"><span class="lineno">  213</span>      <span class="comment">// ignoring types that are neither ingress nor egress </span></div>
<div class="line"><span class="lineno">  214</span>    }</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    <span class="comment">// convert and save exit lane ids into lanelet ids with their corresponding signal group ids</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = signal_group_to_exit_lanes.begin(); iter != signal_group_to_exit_lanes.end(); iter++)</div>
<div class="line"><span class="lineno">  218</span>    {</div>
<div class="line"><span class="lineno">  219</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> exit_lane : iter-&gt;second)</div>
<div class="line"><span class="lineno">  220</span>      {</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> (exit.find(exit_lane) != exit.end())</div>
<div class="line"><span class="lineno">  222</span>        {</div>
<div class="line"><span class="lineno">  223</span>          ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Adding exit_lane id: &quot;</span> &lt;&lt; exit_lane);</div>
<div class="line"><span class="lineno">  224</span>          <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a>[iter-&gt;first].insert(exit[exit_lane]);</div>
<div class="line"><span class="lineno">  225</span>        }</div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  227</span>        {</div>
<div class="line"><span class="lineno">  228</span>          <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  229</span>          <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  230</span>          ROS_WARN_STREAM(<span class="stringliteral">&quot;Unable to convert exit lane Id: &quot;</span>  + std::to_string((<span class="keywordtype">int</span>)exit_lane) + <span class="stringliteral">&quot;, to lanelet id using the given MAP.msg!&quot;</span>);</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span>      }</div>
<div class="line"><span class="lineno">  233</span>    }</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <span class="comment">// convert and save entry lane ids into lanelet ids with their corresponding signal group ids</span></div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = signal_group_to_entry_lanes.begin(); iter != signal_group_to_entry_lanes.end(); iter++)</div>
<div class="line"><span class="lineno">  237</span>    {</div>
<div class="line"><span class="lineno">  238</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> entry_lane : iter-&gt;second)</div>
<div class="line"><span class="lineno">  239</span>      {</div>
<div class="line"><span class="lineno">  240</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Adding entry_lane id: &quot;</span> &lt;&lt; entry_lane);</div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">if</span> (entry.find(entry_lane) != entry.end())</div>
<div class="line"><span class="lineno">  242</span>        {</div>
<div class="line"><span class="lineno">  243</span>          <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[iter-&gt;first].insert(entry[entry_lane]);</div>
<div class="line"><span class="lineno">  244</span>        }</div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  246</span>        {</div>
<div class="line"><span class="lineno">  247</span>          <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/1593 </span></div>
<div class="line"><span class="lineno">  248</span>          <span class="comment">// Open issue TODO on how this error is handled</span></div>
<div class="line"><span class="lineno">  249</span>          ROS_WARN_STREAM(<span class="stringliteral">&quot;Unable to convert entry lane Id: &quot;</span>  + std::to_string((<span class="keywordtype">int</span>)entry_lane) + <span class="stringliteral">&quot;, to lanelet id using the given MAP.msg!&quot;</span>);</div>
<div class="line"><span class="lineno">  250</span>        }</div>
<div class="line"><span class="lineno">  251</span>      }</div>
<div class="line"><span class="lineno">  252</span>    }</div>
<div class="line"><span class="lineno">  253</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00040">carma_wm::LANE_DIRECTION::EGRESS</a>, <a class="el" href="src_2WorldModelUtils_8cpp_source.html#l00117">carma_wm::query::getAffectedLaneletOrAreas()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00039">carma_wm::LANE_DIRECTION::INGRESS</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00145">intersection_coord_correction_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00176">max_lane_width_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00173">target_frame_</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_cgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_cgraph">
<area shape="rect" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="5,71,224,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="272,71,467,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a382665a2ddc42be06fca9c1f8dfd0489" title="A function that filters successor lanelets of root_lanelets from possible_lanelets." alt="" coords="515,5,729,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="535,71,709,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="549,136,695,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="777,71,923,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="777,136,923,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="971,136,1116,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_icgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_ad6cbea5773cfcb833826a0293b6e70f4_icgraph">
<area shape="rect" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="316,5,535,47"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,5,268,47"/>
</map>
</div>

</div>
</div>
<a id="adc92e213d6f983dd69b7f45afef62fa6" name="adc92e213d6f983dd69b7f45afef62fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc92e213d6f983dd69b7f45afef62fa6">&#9670;&nbsp;</a></span>createIntersectionFromMapMsg() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::createIntersectionFromMapMsg </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; lanelet::SignalizedIntersectionPtr &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt; &amp;&#160;</td>
          <td class="paramname"><em>traffic_signals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const carma_v2x_msgs::msg::MapData &amp;&#160;</td>
          <td class="paramname"><em>map_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt;&#160;</td>
          <td class="paramname"><em>routing_graph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create relevant signalized intersection and carma traffic signals based on the MAP.msg and the lanelet_map NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">intersections</td><td>to return </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">traffic_signals</td><td>to return </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map_msg</td><td>MAP.msg that consists all static data portion of the intersection </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map</td><td>lanelet_map to check </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">routing_graph</td><td>of the lanelet map to accurately detect lanes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ros2_2src_2SignalizedIntersectionManager_8cpp_source.html#l00348">348</a> of file <a class="el" href="ros2_2src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  350</span>  { </div>
<div class="line"><span class="lineno">  351</span>    </div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; intersection : map_msg.intersections)</div>
<div class="line"><span class="lineno">  353</span>    {</div>
<div class="line"><span class="lineno">  354</span>      std::unordered_map&lt;uint8_t, lanelet::Id&gt; entry;</div>
<div class="line"><span class="lineno">  355</span>      std::unordered_map&lt;uint8_t, lanelet::Id&gt; exit;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>      <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4">convertLaneToLaneletId</a>(entry, exit, intersection, map, routing_graph);</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>      std::vector&lt;lanelet::Lanelet&gt; entry_llts;</div>
<div class="line"><span class="lineno">  360</span>      std::vector&lt;lanelet::Lanelet&gt; exit_llts;</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = entry.begin(); iter != entry.end(); iter++)</div>
<div class="line"><span class="lineno">  363</span>      {</div>
<div class="line"><span class="lineno">  364</span>        entry_llts.push_back(map-&gt;laneletLayer.get(iter-&gt;second));  </div>
<div class="line"><span class="lineno">  365</span>      }</div>
<div class="line"><span class="lineno">  366</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = exit.begin(); iter != exit.end(); iter++)</div>
<div class="line"><span class="lineno">  367</span>      {</div>
<div class="line"><span class="lineno">  368</span>        exit_llts.push_back(map-&gt;laneletLayer.get(iter-&gt;second));  </div>
<div class="line"><span class="lineno">  369</span>      }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>      lanelet::Id intersection_id = <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">matchSignalizedIntersection</a>(entry_llts, exit_llts);</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>      <span class="keywordflow">if</span> (intersection_id == lanelet::InvalId)</div>
<div class="line"><span class="lineno">  374</span>      {</div>
<div class="line"><span class="lineno">  375</span>        RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;No existing intersection found. Creating a new one...&quot;</span>);</div>
<div class="line"><span class="lineno">  376</span>        intersection_id = lanelet::utils::getId();</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>        std::vector&lt;lanelet::Lanelet&gt; interior_llts = <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">identifyInteriorLanelets</a>(entry_llts, map);</div>
<div class="line"><span class="lineno">  379</span>        </div>
<div class="line"><span class="lineno">  380</span>        std::shared_ptr&lt;lanelet::SignalizedIntersection&gt; sig_inter(<span class="keyword">new</span> lanelet::SignalizedIntersection</div>
<div class="line"><span class="lineno">  381</span>                                                          (lanelet::SignalizedIntersection::buildData(intersection_id, entry_llts, exit_llts, interior_llts)));</div>
<div class="line"><span class="lineno">  382</span>        <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">intersection_id_to_regem_id_</a>[intersection.id.id] = intersection_id;</div>
<div class="line"><span class="lineno">  383</span>        sig_intersections.push_back(sig_inter);</div>
<div class="line"><span class="lineno">  384</span>      }</div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <span class="comment">// create signal group for each from the message</span></div>
<div class="line"><span class="lineno">  388</span>    <span class="comment">// check if it already exists</span></div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> sig_grp_pair : <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a>)</div>
<div class="line"><span class="lineno">  390</span>    {</div>
<div class="line"><span class="lineno">  391</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm::SignalizedIntersectionManager&quot;</span>), <span class="stringliteral">&quot;Creating signal for: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)sig_grp_pair.first);</div>
<div class="line"><span class="lineno">  392</span>      <span class="comment">// ignore the traffic signals already inside</span></div>
<div class="line"><span class="lineno">  393</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>.find(sig_grp_pair.first) != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>.end() &amp;&amp;</div>
<div class="line"><span class="lineno">  394</span>           map-&gt;regulatoryElementLayer.exists(<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>[sig_grp_pair.first]))</div>
<div class="line"><span class="lineno">  395</span>      {</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  397</span>      }</div>
<div class="line"><span class="lineno">  398</span>      </div>
<div class="line"><span class="lineno">  399</span>      std::vector&lt;lanelet::Lanelet&gt; exit_lanelets;</div>
<div class="line"><span class="lineno">  400</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = sig_grp_pair.second.begin(); iter != sig_grp_pair.second.end(); iter++)</div>
<div class="line"><span class="lineno">  401</span>      {</div>
<div class="line"><span class="lineno">  402</span>        exit_lanelets.push_back(map-&gt;laneletLayer.get(*iter));</div>
<div class="line"><span class="lineno">  403</span>      }</div>
<div class="line"><span class="lineno">  404</span>      std::vector&lt;lanelet::Lanelet&gt; entry_lanelets;</div>
<div class="line"><span class="lineno">  405</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[sig_grp_pair.first].begin(); iter != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[sig_grp_pair.first].end(); iter++)</div>
<div class="line"><span class="lineno">  406</span>      {</div>
<div class="line"><span class="lineno">  407</span>        entry_lanelets.push_back(map-&gt;laneletLayer.get(*iter));</div>
<div class="line"><span class="lineno">  408</span>      }</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>      traffic_signals.push_back(<a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">createTrafficSignalUsingSGID</a>(sig_grp_pair.first, entry_lanelets, exit_lanelets));</div>
<div class="line"><span class="lineno">  411</span>    }</div>
<div class="line"><span class="lineno">  412</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a0710bb2b856484e222ebeda0a27e98ac"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">carma_wm::SignalizedIntersectionManager::identifyInteriorLanelets</a></div><div class="ttdeci">lanelet::Lanelets identifyInteriorLanelets(const lanelet::Lanelets &amp;entry_llts, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map)</div><div class="ttdoc">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter...</div><div class="ttdef"><b>Definition:</b> <a href="src_2SignalizedIntersectionManager_8cpp_source.html#l00410">SignalizedIntersectionManager.cpp:410</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a0a70ce89fbb9e0f3536a740864c5e1e0"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">carma_wm::SignalizedIntersectionManager::matchSignalizedIntersection</a></div><div class="ttdeci">lanelet::Id matchSignalizedIntersection(const lanelet::Lanelets &amp;entry_llts, const lanelet::Lanelets &amp;exit_llts)</div><div class="ttdoc">Returns existing signalized intersection with same entry and exit llts if exists.</div><div class="ttdef"><b>Definition:</b> <a href="src_2SignalizedIntersectionManager_8cpp_source.html#l00255">SignalizedIntersectionManager.cpp:255</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a74e81f1b27cdeb4e2edfbdf8ff016d19"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">carma_wm::SignalizedIntersectionManager::createTrafficSignalUsingSGID</a></div><div class="ttdeci">std::shared_ptr&lt; lanelet::CarmaTrafficSignal &gt; createTrafficSignalUsingSGID(uint8_t signal_group_id, const lanelet::Lanelets &amp;entry_lanelets, const lanelet::Lanelets &amp;exit_lanelets)</div><div class="ttdoc">Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter...</div><div class="ttdef"><b>Definition:</b> <a href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">SignalizedIntersectionManager.cpp:316</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_ad6cbea5773cfcb833826a0293b6e70f4"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4">carma_wm::SignalizedIntersectionManager::convertLaneToLaneletId</a></div><div class="ttdeci">void convertLaneToLaneletId(std::unordered_map&lt; uint8_t, lanelet::Id &gt; &amp;entry, std::unordered_map&lt; uint8_t, lanelet::Id &gt; &amp;exit, const cav_msgs::IntersectionGeometry &amp;intersection, const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;map, std::shared_ptr&lt; const lanelet::routing::RoutingGraph &gt; current_routing_graph)</div><div class="ttdoc">Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP....</div><div class="ttdef"><b>Definition:</b> <a href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">SignalizedIntersectionManager.cpp:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">createTrafficSignalUsingSGID()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00410">identifyInteriorLanelets()</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">intersection_id_to_regem_id_</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00255">matchSignalizedIntersection()</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_adc92e213d6f983dd69b7f45afef62fa6_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_adc92e213d6f983dd69b7f45afef62fa6_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_adc92e213d6f983dd69b7f45afef62fa6_cgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_adc92e213d6f983dd69b7f45afef62fa6_cgraph">
<area shape="rect" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,169,268,211"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="332,71,551,112"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="316,136,567,177"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="332,201,551,243"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0" title="Returns existing signalized intersection with same entry and exit llts if exists." alt="" coords="321,267,562,308"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="615,71,809,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a382665a2ddc42be06fca9c1f8dfd0489" title="A function that filters successor lanelets of root_lanelets from possible_lanelets." alt="" coords="857,5,1072,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="877,71,1052,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="892,136,1037,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="1120,71,1265,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="1120,136,1265,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="1313,136,1459,177"/>
</map>
</div>

</div>
</div>
<a id="aafb3ce6c267e28708924171cb88f71a9" name="aafb3ce6c267e28708924171cb88f71a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafb3ce6c267e28708924171cb88f71a9">&#9670;&nbsp;</a></span>createIntersectionFromMapMsg() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::createIntersectionFromMapMsg </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; lanelet::SignalizedIntersectionPtr &gt; &amp;&#160;</td>
          <td class="paramname"><em>intersections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt; &amp;&#160;</td>
          <td class="paramname"><em>traffic_signals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cav_msgs::MapData &amp;&#160;</td>
          <td class="paramname"><em>map_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="classlanelet_1_1routing_1_1RoutingGraph.html">lanelet::routing::RoutingGraph</a> &gt;&#160;</td>
          <td class="paramname"><em>routing_graph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create relevant signalized intersection and carma traffic signals based on the MAP.msg and the lanelet_map NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">intersections</td><td>to return </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">traffic_signals</td><td>to return </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map_msg</td><td>MAP.msg that consists all static data portion of the intersection </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">map</td><td>lanelet_map to check </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">routing_graph</td><td>of the lanelet map to accurately detect lanes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">344</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span>  { </div>
<div class="line"><span class="lineno">  347</span>    </div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; intersection : map_msg.intersections)</div>
<div class="line"><span class="lineno">  349</span>    {</div>
<div class="line"><span class="lineno">  350</span>      std::unordered_map&lt;uint8_t, lanelet::Id&gt; entry;</div>
<div class="line"><span class="lineno">  351</span>      std::unordered_map&lt;uint8_t, lanelet::Id&gt; exit;</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>      <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4">convertLaneToLaneletId</a>(entry, exit, intersection, map, routing_graph);</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>      std::vector&lt;lanelet::Lanelet&gt; entry_llts;</div>
<div class="line"><span class="lineno">  356</span>      std::vector&lt;lanelet::Lanelet&gt; exit_llts;</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = entry.begin(); iter != entry.end(); iter++)</div>
<div class="line"><span class="lineno">  359</span>      {</div>
<div class="line"><span class="lineno">  360</span>        entry_llts.push_back(map-&gt;laneletLayer.get(iter-&gt;second));  </div>
<div class="line"><span class="lineno">  361</span>      }</div>
<div class="line"><span class="lineno">  362</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = exit.begin(); iter != exit.end(); iter++)</div>
<div class="line"><span class="lineno">  363</span>      {</div>
<div class="line"><span class="lineno">  364</span>        exit_llts.push_back(map-&gt;laneletLayer.get(iter-&gt;second));  </div>
<div class="line"><span class="lineno">  365</span>      }</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>      lanelet::Id intersection_id = <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0">matchSignalizedIntersection</a>(entry_llts, exit_llts);</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>      <span class="keywordflow">if</span> (intersection_id == lanelet::InvalId)</div>
<div class="line"><span class="lineno">  370</span>      {</div>
<div class="line"><span class="lineno">  371</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;No existing intersection found. Creating a new one...&quot;</span>);</div>
<div class="line"><span class="lineno">  372</span>        intersection_id = lanelet::utils::getId();</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>        std::vector&lt;lanelet::Lanelet&gt; interior_llts = <a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac">identifyInteriorLanelets</a>(entry_llts, map);</div>
<div class="line"><span class="lineno">  375</span>        </div>
<div class="line"><span class="lineno">  376</span>        std::shared_ptr&lt;lanelet::SignalizedIntersection&gt; sig_inter(<span class="keyword">new</span> lanelet::SignalizedIntersection</div>
<div class="line"><span class="lineno">  377</span>                                                          (lanelet::SignalizedIntersection::buildData(intersection_id, entry_llts, exit_llts, interior_llts)));</div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">intersection_id_to_regem_id_</a>[intersection.id.id] = intersection_id;</div>
<div class="line"><span class="lineno">  379</span>        sig_intersections.push_back(sig_inter);</div>
<div class="line"><span class="lineno">  380</span>      }</div>
<div class="line"><span class="lineno">  381</span>    }</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    <span class="comment">// create signal group for each from the message</span></div>
<div class="line"><span class="lineno">  384</span>    <span class="comment">// check if it already exists</span></div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> sig_grp_pair : <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a>)</div>
<div class="line"><span class="lineno">  386</span>    {</div>
<div class="line"><span class="lineno">  387</span>      ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Creating signal for: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)sig_grp_pair.first);</div>
<div class="line"><span class="lineno">  388</span>      <span class="comment">// ignore the traffic signals already inside</span></div>
<div class="line"><span class="lineno">  389</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>.find(sig_grp_pair.first) != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>.end() &amp;&amp;</div>
<div class="line"><span class="lineno">  390</span>           map-&gt;regulatoryElementLayer.exists(<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>[sig_grp_pair.first]))</div>
<div class="line"><span class="lineno">  391</span>      {</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  393</span>      }</div>
<div class="line"><span class="lineno">  394</span>      </div>
<div class="line"><span class="lineno">  395</span>      std::vector&lt;lanelet::Lanelet&gt; exit_lanelets;</div>
<div class="line"><span class="lineno">  396</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = sig_grp_pair.second.begin(); iter != sig_grp_pair.second.end(); iter++)</div>
<div class="line"><span class="lineno">  397</span>      {</div>
<div class="line"><span class="lineno">  398</span>        exit_lanelets.push_back(map-&gt;laneletLayer.get(*iter));</div>
<div class="line"><span class="lineno">  399</span>      }</div>
<div class="line"><span class="lineno">  400</span>      std::vector&lt;lanelet::Lanelet&gt; entry_lanelets;</div>
<div class="line"><span class="lineno">  401</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[sig_grp_pair.first].begin(); iter != <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[sig_grp_pair.first].end(); iter++)</div>
<div class="line"><span class="lineno">  402</span>      {</div>
<div class="line"><span class="lineno">  403</span>        entry_lanelets.push_back(map-&gt;laneletLayer.get(*iter));</div>
<div class="line"><span class="lineno">  404</span>      }</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>      traffic_signals.push_back(<a class="code hl_function" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19">createTrafficSignalUsingSGID</a>(sig_grp_pair.first, entry_lanelets, exit_lanelets));</div>
<div class="line"><span class="lineno">  407</span>    }</div>
<div class="line"><span class="lineno">  408</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">createTrafficSignalUsingSGID()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00410">identifyInteriorLanelets()</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">intersection_id_to_regem_id_</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00255">matchSignalizedIntersection()</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_aafb3ce6c267e28708924171cb88f71a9_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_aafb3ce6c267e28708924171cb88f71a9_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_aafb3ce6c267e28708924171cb88f71a9_cgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_aafb3ce6c267e28708924171cb88f71a9_cgraph">
<area shape="rect" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,169,268,211"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ad6cbea5773cfcb833826a0293b6e70f4" title="Returns mapping of MAP lane id to lanelet id for the given map and intersection.msg in the MAP...." alt="" coords="332,71,551,112"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a74e81f1b27cdeb4e2edfbdf8ff016d19" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="316,136,567,177"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0710bb2b856484e222ebeda0a27e98ac" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="332,201,551,243"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a0a70ce89fbb9e0f3536a740864c5e1e0" title="Returns existing signalized intersection with same entry and exit llts if exists." alt="" coords="321,267,562,308"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a9c9935e22582f37c01441115bce72f58" title="Gets the affected lanelet or areas based on the points in the given map&#39;s frame." alt="" coords="615,71,809,112"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a382665a2ddc42be06fca9c1f8dfd0489" title="A function that filters successor lanelets of root_lanelets from possible_lanelets." alt="" coords="857,5,1072,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#abab7ba4e773f03d6cfc09492742c6b7b" title="Calculates the angle between two vectors." alt="" coords="877,71,1052,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="892,136,1037,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a50c966bd5e6ed00ea0b1a70e93cd0d4a" title="acos method that caps the input x value for 1 or &#45;1 to avoid undefined output. This is meant to preve..." alt="" coords="1120,71,1265,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="1120,136,1265,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="1313,136,1459,177"/>
</map>
</div>

</div>
</div>
<a id="a74e81f1b27cdeb4e2edfbdf8ff016d19" name="a74e81f1b27cdeb4e2edfbdf8ff016d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e81f1b27cdeb4e2edfbdf8ff016d19">&#9670;&nbsp;</a></span>createTrafficSignalUsingSGID() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; lanelet::CarmaTrafficSignal &gt; carma_wm::SignalizedIntersectionManager::createTrafficSignalUsingSGID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>signal_group_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_lanelets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>exit_lanelets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_id</td><td>of the traffic signal </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the signal_group </td></tr>
    <tr><td class="paramname">entry_llts</td><td>of the signal_group </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>traffic signal corresponding to the signal group </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">316</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>  {</div>
<div class="line"><span class="lineno">  318</span>    std::vector&lt;lanelet::LineString3d&gt; stop_lines;</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : entry_lanelets)</div>
<div class="line"><span class="lineno">  320</span>    {</div>
<div class="line"><span class="lineno">  321</span>      std::vector&lt;lanelet::Point3d&gt; points;</div>
<div class="line"><span class="lineno">  322</span>      points.push_back(lanelet::Point3d(lanelet::utils::getId(), llt.leftBound2d().back().x(), llt.leftBound2d().back().y(), 0));</div>
<div class="line"><span class="lineno">  323</span>      points.push_back(lanelet::Point3d(lanelet::utils::getId(), llt.rightBound().back().x(), llt.rightBound().back().y(), 0));</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>      lanelet::LineString3d stop_line(lanelet::utils::getId(), points);</div>
<div class="line"><span class="lineno">  326</span>      stop_lines.push_back(stop_line);</div>
<div class="line"><span class="lineno">  327</span>    }    </div>
<div class="line"><span class="lineno">  328</span>    </div>
<div class="line"><span class="lineno">  329</span>    lanelet::Id traffic_light_id = lanelet::utils::getId();</div>
<div class="line"><span class="lineno">  330</span>    std::shared_ptr&lt;lanelet::CarmaTrafficSignal&gt; traffic_light(<span class="keyword">new</span> lanelet::CarmaTrafficSignal(lanelet::CarmaTrafficSignal::buildData(traffic_light_id, stop_lines, entry_lanelets, exit_lanelets)));</div>
<div class="line"><span class="lineno">  331</span>    <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a>[signal_group_id] =  traffic_light_id;</div>
<div class="line"><span class="lineno">  332</span>    </div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : exit_lanelets)</div>
<div class="line"><span class="lineno">  334</span>    {</div>
<div class="line"><span class="lineno">  335</span>      <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a>[signal_group_id].insert(llt.id());</div>
<div class="line"><span class="lineno">  336</span>    }</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : entry_lanelets)</div>
<div class="line"><span class="lineno">  338</span>    {</div>
<div class="line"><span class="lineno">  339</span>      <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a>[signal_group_id].insert(llt.id());</div>
<div class="line"><span class="lineno">  340</span>    }</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">return</span> traffic_light;</div>
<div class="line"><span class="lineno">  342</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_a74e81f1b27cdeb4e2edfbdf8ff016d19_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_a74e81f1b27cdeb4e2edfbdf8ff016d19_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_a74e81f1b27cdeb4e2edfbdf8ff016d19_icgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_a74e81f1b27cdeb4e2edfbdf8ff016d19_icgraph">
<area shape="rect" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="316,5,567,47"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,5,268,47"/>
</map>
</div>

</div>
</div>
<a id="a74e81f1b27cdeb4e2edfbdf8ff016d19" name="a74e81f1b27cdeb4e2edfbdf8ff016d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e81f1b27cdeb4e2edfbdf8ff016d19">&#9670;&nbsp;</a></span>createTrafficSignalUsingSGID() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; lanelet::CarmaTrafficSignal &gt; carma_wm::SignalizedIntersectionManager::createTrafficSignalUsingSGID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>signal_group_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_lanelets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>exit_lanelets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_id</td><td>of the traffic signal </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the signal_group </td></tr>
    <tr><td class="paramname">entry_llts</td><td>of the signal_group </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>traffic signal corresponding to the signal group </dd></dl>

</div>
</div>
<a id="a0710bb2b856484e222ebeda0a27e98ac" name="a0710bb2b856484e222ebeda0a27e98ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0710bb2b856484e222ebeda0a27e98ac">&#9670;&nbsp;</a></span>identifyInteriorLanelets() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Lanelets carma_wm::SignalizedIntersectionManager::identifyInteriorLanelets </td>
          <td>(</td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_llts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_id</td><td>of the traffic signal </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the signal_group </td></tr>
    <tr><td class="paramname">entry_llts</td><td>of the signal_group </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>traffic signal corresponding to the signal group </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00410">410</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>  {</div>
<div class="line"><span class="lineno">  412</span>    lanelet::BasicLineString2d polygon_corners;</div>
<div class="line"><span class="lineno">  413</span>    </div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">if</span> (entry_llts.size() &lt; 2) <span class="comment">//at least two lanes (1 ingress and 1 egress) needed to form intersection</span></div>
<div class="line"><span class="lineno">  415</span>    {</div>
<div class="line"><span class="lineno">  416</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : entry_llts)</div>
<div class="line"><span class="lineno">  420</span>    {</div>
<div class="line"><span class="lineno">  421</span>      lanelet::BasicPoint2d pt(llt.centerline2d().back().x(), llt.centerline2d().back().y());</div>
<div class="line"><span class="lineno">  422</span>      polygon_corners.push_back(pt);</div>
<div class="line"><span class="lineno">  423</span>    }</div>
<div class="line"><span class="lineno">  424</span>    lanelet::BasicPolygon2d polygon(polygon_corners);</div>
<div class="line"><span class="lineno">  425</span>    <span class="keyword">auto</span> interior_llt_pairs = lanelet::geometry::findWithin2d(map-&gt;laneletLayer, polygon);</div>
<div class="line"><span class="lineno">  426</span>    lanelet::Lanelets interior_llts;</div>
<div class="line"><span class="lineno">  427</span>    </div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> pair : interior_llt_pairs)</div>
<div class="line"><span class="lineno">  429</span>    {</div>
<div class="line"><span class="lineno">  430</span>      <span class="keywordflow">if</span> (std::find(entry_llts.begin(),entry_llts.end(), pair.second) == entry_llts.end())</div>
<div class="line"><span class="lineno">  431</span>        interior_llts.push_back(pair.second);</div>
<div class="line"><span class="lineno">  432</span>    }</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">return</span> interior_llts;</div>
<div class="line"><span class="lineno">  434</span>  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_a0710bb2b856484e222ebeda0a27e98ac_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_a0710bb2b856484e222ebeda0a27e98ac_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_a0710bb2b856484e222ebeda0a27e98ac_icgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_a0710bb2b856484e222ebeda0a27e98ac_icgraph">
<area shape="rect" title="Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) inter..." alt="" coords="316,5,535,47"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,5,268,47"/>
</map>
</div>

</div>
</div>
<a id="a0710bb2b856484e222ebeda0a27e98ac" name="a0710bb2b856484e222ebeda0a27e98ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0710bb2b856484e222ebeda0a27e98ac">&#9670;&nbsp;</a></span>identifyInteriorLanelets() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Lanelets carma_wm::SignalizedIntersectionManager::identifyInteriorLanelets </td>
          <td>(</td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_llts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; lanelet::LaneletMap &gt; &amp;&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns carma traffic signal and saves all id relevant id mappings (signal group to lanelet id) internally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal_group_id</td><td>of the traffic signal </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the signal_group </td></tr>
    <tr><td class="paramname">entry_llts</td><td>of the signal_group </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>traffic signal corresponding to the signal group </dd></dl>

</div>
</div>
<a id="a0a70ce89fbb9e0f3536a740864c5e1e0" name="a0a70ce89fbb9e0f3536a740864c5e1e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a70ce89fbb9e0f3536a740864c5e1e0">&#9670;&nbsp;</a></span>matchSignalizedIntersection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Id carma_wm::SignalizedIntersectionManager::matchSignalizedIntersection </td>
          <td>(</td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_llts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>exit_llts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns existing signalized intersection with same entry and exit llts if exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry_llts</td><td>of the intersection </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the intersection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>id of the matching intersection in the map, or lanelet::InvalId if none exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00255">255</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>  {</div>
<div class="line"><span class="lineno">  257</span>    lanelet::Id matching_id = lanelet::InvalId;</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    std::vector&lt;lanelet::SignalizedIntersectionPtr&gt; existing_si;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : entry_llts)</div>
<div class="line"><span class="lineno">  262</span>    {</div>
<div class="line"><span class="lineno">  263</span>      <span class="keyword">auto</span> intersections = llt.regulatoryElementsAs&lt;lanelet::SignalizedIntersection&gt;();</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>      <span class="keywordflow">if</span> (intersections.empty())</div>
<div class="line"><span class="lineno">  266</span>      {</div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// no match if any of the entry lanelet is not part of any intersection.</span></div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  269</span>      }</div>
<div class="line"><span class="lineno">  270</span>      existing_si.insert(existing_si.end(), intersections.begin(),intersections.end());</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> intersection : existing_si)</div>
<div class="line"><span class="lineno">  274</span>    {</div>
<div class="line"><span class="lineno">  275</span>      <span class="keyword">auto</span> existing_entry_llts = intersection-&gt;getEntryLanelets();</div>
<div class="line"><span class="lineno">  276</span>      <span class="keyword">auto</span> existing_exit_llts = intersection-&gt;getExitLanelets();</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>      <span class="keywordflow">if</span> (existing_exit_llts.size() != exit_llts.size() || existing_entry_llts.size() != entry_llts.size())</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>      <span class="keywordtype">bool</span> is_different = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt: existing_entry_llts)</div>
<div class="line"><span class="lineno">  284</span>      {</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">if</span> (std::find(entry_llts.begin(), entry_llts.end(), llt) == entry_llts.end())</div>
<div class="line"><span class="lineno">  286</span>        {</div>
<div class="line"><span class="lineno">  287</span>          is_different = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  290</span>        }</div>
<div class="line"><span class="lineno">  291</span>      }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt: existing_exit_llts)</div>
<div class="line"><span class="lineno">  294</span>      {</div>
<div class="line"><span class="lineno">  295</span>        <span class="keywordflow">if</span> (std::find(exit_llts.begin(), exit_llts.end(), llt) == exit_llts.end())</div>
<div class="line"><span class="lineno">  296</span>        {</div>
<div class="line"><span class="lineno">  297</span>          is_different = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  300</span>        }</div>
<div class="line"><span class="lineno">  301</span>      }</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>      <span class="keywordflow">if</span> (!is_different)</div>
<div class="line"><span class="lineno">  304</span>      {</div>
<div class="line"><span class="lineno">  305</span>        <span class="comment">// found a match</span></div>
<div class="line"><span class="lineno">  306</span>        matching_id = intersection-&gt;id();</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  309</span>      }</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">return</span> matching_id;</div>
<div class="line"><span class="lineno">  314</span>  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1SignalizedIntersectionManager_a0a70ce89fbb9e0f3536a740864c5e1e0_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1SignalizedIntersectionManager_a0a70ce89fbb9e0f3536a740864c5e1e0_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1SignalizedIntersectionManager_a0a70ce89fbb9e0f3536a740864c5e1e0_icgraph" id="aclasscarma__wm_1_1SignalizedIntersectionManager_a0a70ce89fbb9e0f3536a740864c5e1e0_icgraph">
<area shape="rect" title="Returns existing signalized intersection with same entry and exit llts if exists." alt="" coords="316,5,557,47"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html#aafb3ce6c267e28708924171cb88f71a9" title="Create relevant signalized intersection and carma traffic signals based on the MAP...." alt="" coords="5,5,268,47"/>
</map>
</div>

</div>
</div>
<a id="a0a70ce89fbb9e0f3536a740864c5e1e0" name="a0a70ce89fbb9e0f3536a740864c5e1e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a70ce89fbb9e0f3536a740864c5e1e0">&#9670;&nbsp;</a></span>matchSignalizedIntersection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Id carma_wm::SignalizedIntersectionManager::matchSignalizedIntersection </td>
          <td>(</td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>entry_llts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const lanelet::Lanelets &amp;&#160;</td>
          <td class="paramname"><em>exit_llts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns existing signalized intersection with same entry and exit llts if exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry_llts</td><td>of the intersection </td></tr>
    <tr><td class="paramname">exit_llts</td><td>of the intersection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>id of the matching intersection in the map, or lanelet::InvalId if none exists </dd></dl>

</div>
</div>
<a id="a95be11e340ea8142f93ce8457f20002a" name="a95be11e340ea8142f93ce8457f20002a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95be11e340ea8142f93ce8457f20002a">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp; carma_wm::SignalizedIntersectionManager::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a>&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assignment operator that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">other</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">436</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  437</span>  {</div>
<div class="line"><span class="lineno">  438</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a5adbf7d15429840496f2e6f099c35c38">signal_group_to_entry_lanelet_ids_</a> = other.signal_group_to_entry_lanelet_ids_;</div>
<div class="line"><span class="lineno">  439</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a8cef69fe8ca0210de845cde3be17c004">signal_group_to_exit_lanelet_ids_</a> = other.signal_group_to_exit_lanelet_ids_;</div>
<div class="line"><span class="lineno">  440</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a1df1b50413cb17fddb51f02461440cfe">intersection_id_to_regem_id_</a> = other.intersection_id_to_regem_id_;</div>
<div class="line"><span class="lineno">  441</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a7d1ed35c99d7ef36981863bf9f55b824">signal_group_to_traffic_light_id_</a> = other.signal_group_to_traffic_light_id_;</div>
<div class="line"><span class="lineno">  442</span>    this-&gt;<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ae640c0bf6ca73471d06bbae8a52480e3">intersection_coord_correction_</a> = other.intersection_coord_correction_;</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">  445</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00145">intersection_coord_correction_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">intersection_id_to_regem_id_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>

</div>
</div>
<a id="a95be11e340ea8142f93ce8457f20002a" name="a95be11e340ea8142f93ce8457f20002a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95be11e340ea8142f93ce8457f20002a">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp; carma_wm::SignalizedIntersectionManager::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a>&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assignment operator that copies everything except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">other</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa23ad52074c818a8514e2437562f69cd" name="aa23ad52074c818a8514e2437562f69cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23ad52074c818a8514e2437562f69cd">&#9670;&nbsp;</a></span>operator==() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> carma_wm::SignalizedIntersectionManager::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Equality operator that checks if every mapping are same except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">rhs</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00034">34</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>  {</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordtype">bool</span> is_same = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">if</span> (rhs.intersection_id_to_regem_id_ != this-&gt;intersection_id_to_regem_id_)</div>
<div class="line"><span class="lineno">   38</span>    {</div>
<div class="line"><span class="lineno">   39</span>      is_same = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   40</span>    }</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> (rhs.signal_group_to_entry_lanelet_ids_ != this-&gt;signal_group_to_entry_lanelet_ids_)</div>
<div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>      is_same = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   44</span>    }</div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">if</span> (rhs.signal_group_to_exit_lanelet_ids_ != this-&gt;signal_group_to_exit_lanelet_ids_)</div>
<div class="line"><span class="lineno">   46</span>    {</div>
<div class="line"><span class="lineno">   47</span>      is_same = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   48</span>    }</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">if</span> (rhs.signal_group_to_traffic_light_id_ != this-&gt;signal_group_to_traffic_light_id_)</div>
<div class="line"><span class="lineno">   50</span>    {</div>
<div class="line"><span class="lineno">   51</span>      is_same = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   52</span>    }</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">return</span> is_same;</div>
<div class="line"><span class="lineno">   55</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">intersection_id_to_regem_id_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">signal_group_to_entry_lanelet_ids_</a>, <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">signal_group_to_exit_lanelet_ids_</a>, and <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">signal_group_to_traffic_light_id_</a>.</p>

</div>
</div>
<a id="aa23ad52074c818a8514e2437562f69cd" name="aa23ad52074c818a8514e2437562f69cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23ad52074c818a8514e2437562f69cd">&#9670;&nbsp;</a></span>operator==() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> carma_wm::SignalizedIntersectionManager::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Equality operator that checks if every mapping are same except the traffic signal states. This is to keep the states although the map is updated or a similar event happened NOTE: The function does not update the map with new elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">rhs</td><td>manager </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6636ea91dc74edc592263f78f3cd60e" name="ad6636ea91dc74edc592263f78f3cd60e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6636ea91dc74edc592263f78f3cd60e">&#9670;&nbsp;</a></span>setMaxLaneWidth() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::setMaxLaneWidth </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_lane_width</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max lane width in meters. Map msg points are associated to a lanelet if they are within this distance to a lanelet as map msg points are guaranteed to apply to a single lane. </p>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00029">29</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   30</span>  {</div>
<div class="line"><span class="lineno">   31</span>    <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a076fb1113160092f5a1c6dfa3e804942">max_lane_width_</a> = max_lane_width;</div>
<div class="line"><span class="lineno">   32</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00176">max_lane_width_</a>.</p>

</div>
</div>
<a id="ad6636ea91dc74edc592263f78f3cd60e" name="ad6636ea91dc74edc592263f78f3cd60e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6636ea91dc74edc592263f78f3cd60e">&#9670;&nbsp;</a></span>setMaxLaneWidth() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::setMaxLaneWidth </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_lane_width</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max lane width in meters. Map msg points are associated to a lanelet if they are within this distance to a lanelet as map msg points are guaranteed to apply to a single lane. </p>

</div>
</div>
<a id="a22308c4c4213176393ac67be893ad717" name="a22308c4c4213176393ac67be893ad717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22308c4c4213176393ac67be893ad717">&#9670;&nbsp;</a></span>setTargetFrame() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::setTargetFrame </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>target_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the georeference string to be used for converting MAP.msg coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_frame</td><td>PROJ string of the map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00024">24</a> of file <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>  {</div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a36a652c5658a51bec0117b9b85c7192f">target_frame_</a> = target_frame;</div>
<div class="line"><span class="lineno">   27</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00173">target_frame_</a>.</p>

</div>
</div>
<a id="a22308c4c4213176393ac67be893ad717" name="a22308c4c4213176393ac67be893ad717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22308c4c4213176393ac67be893ad717">&#9670;&nbsp;</a></span>setTargetFrame() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::SignalizedIntersectionManager::setTargetFrame </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>target_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the georeference string to be used for converting MAP.msg coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_frame</td><td>PROJ string of the map </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae640c0bf6ca73471d06bbae8a52480e3" name="ae640c0bf6ca73471d06bbae8a52480e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae640c0bf6ca73471d06bbae8a52480e3">&#9670;&nbsp;</a></span>intersection_coord_correction_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::pair&lt; double, double &gt; &gt; carma_wm::SignalizedIntersectionManager::intersection_coord_correction_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00145">145</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">SignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, and <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">operator=()</a>.</p>

</div>
</div>
<a id="a1df1b50413cb17fddb51f02461440cfe" name="a1df1b50413cb17fddb51f02461440cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df1b50413cb17fddb51f02461440cfe">&#9670;&nbsp;</a></span>intersection_id_to_regem_id_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, lanelet::Id &gt; carma_wm::SignalizedIntersectionManager::intersection_id_to_regem_id_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00148">148</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">SignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>, <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l00083">carma_wm::CARMAWorldModel::getTrafficSignalId()</a>, <a class="el" href="TrafficControl_8h_source.html#l00237">boost::serialization::load()</a>, <a class="el" href="src_2WMListenerWorker_8cpp_source.html#l00118">carma_wm::logSignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">operator=()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00034">operator==()</a>, and <a class="el" href="TrafficControl_8h_source.html#l00190">boost::serialization::save()</a>.</p>

</div>
</div>
<a id="abaabc53c860c61be5b99b02c9861dfa3" name="abaabc53c860c61be5b99b02c9861dfa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaabc53c860c61be5b99b02c9861dfa3">&#9670;&nbsp;</a></span>last_seen_state_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; &gt; carma_wm::SignalizedIntersectionManager::last_seen_state_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00166">166</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01433">carma_wm::CARMAWorldModel::processSpatFromMsg()</a>.</p>

</div>
</div>
<a id="a076fb1113160092f5a1c6dfa3e804942" name="a076fb1113160092f5a1c6dfa3e804942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076fb1113160092f5a1c6dfa3e804942">&#9670;&nbsp;</a></span>max_lane_width_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::SignalizedIntersectionManager::max_lane_width_ = 4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00176">176</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, and <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00029">setMaxLaneWidth()</a>.</p>

</div>
</div>
<a id="a5adbf7d15429840496f2e6f099c35c38" name="a5adbf7d15429840496f2e6f099c35c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5adbf7d15429840496f2e6f099c35c38">&#9670;&nbsp;</a></span>signal_group_to_entry_lanelet_ids_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::unordered_set&lt; lanelet::Id &gt; &gt; carma_wm::SignalizedIntersectionManager::signal_group_to_entry_lanelet_ids_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00157">157</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">SignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">createTrafficSignalUsingSGID()</a>, <a class="el" href="TrafficControl_8h_source.html#l00237">boost::serialization::load()</a>, <a class="el" href="src_2WMListenerWorker_8cpp_source.html#l00118">carma_wm::logSignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">operator=()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00034">operator==()</a>, and <a class="el" href="TrafficControl_8h_source.html#l00190">boost::serialization::save()</a>.</p>

</div>
</div>
<a id="a8cef69fe8ca0210de845cde3be17c004" name="a8cef69fe8ca0210de845cde3be17c004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cef69fe8ca0210de845cde3be17c004">&#9670;&nbsp;</a></span>signal_group_to_exit_lanelet_ids_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::unordered_set&lt; lanelet::Id &gt; &gt; carma_wm::SignalizedIntersectionManager::signal_group_to_exit_lanelet_ids_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00154">154</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">SignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">createTrafficSignalUsingSGID()</a>, <a class="el" href="TrafficControl_8h_source.html#l00237">boost::serialization::load()</a>, <a class="el" href="src_2WMListenerWorker_8cpp_source.html#l00118">carma_wm::logSignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">operator=()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00034">operator==()</a>, and <a class="el" href="TrafficControl_8h_source.html#l00190">boost::serialization::save()</a>.</p>

</div>
</div>
<a id="a7d1ed35c99d7ef36981863bf9f55b824" name="a7d1ed35c99d7ef36981863bf9f55b824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d1ed35c99d7ef36981863bf9f55b824">&#9670;&nbsp;</a></span>signal_group_to_traffic_light_id_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, lanelet::Id &gt; carma_wm::SignalizedIntersectionManager::signal_group_to_traffic_light_id_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00151">151</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00447">SignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00344">createIntersectionFromMapMsg()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00316">createTrafficSignalUsingSGID()</a>, <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l00083">carma_wm::CARMAWorldModel::getTrafficSignalId()</a>, <a class="el" href="TrafficControl_8h_source.html#l00237">boost::serialization::load()</a>, <a class="el" href="src_2WMListenerWorker_8cpp_source.html#l00118">carma_wm::logSignalizedIntersectionManager()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00436">operator=()</a>, <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00034">operator==()</a>, and <a class="el" href="TrafficControl_8h_source.html#l00190">boost::serialization::save()</a>.</p>

</div>
</div>
<a id="abe982f620f0c2f428e1a3f2067177c44" name="abe982f620f0c2f428e1a3f2067177c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe982f620f0c2f428e1a3f2067177c44">&#9670;&nbsp;</a></span>signal_state_counter_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, <a class="el" href="classint.html">int</a> &gt; &gt; carma_wm::SignalizedIntersectionManager::signal_state_counter_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00169">169</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01433">carma_wm::CARMAWorldModel::processSpatFromMsg()</a>.</p>

</div>
</div>
<a id="a36a652c5658a51bec0117b9b85c7192f" name="a36a652c5658a51bec0117b9b85c7192f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a652c5658a51bec0117b9b85c7192f">&#9670;&nbsp;</a></span>target_frame_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string carma_wm::SignalizedIntersectionManager::target_frame_ = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00173">173</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00057">convertLaneToLaneletId()</a>, and <a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html#l00024">setTargetFrame()</a>.</p>

</div>
</div>
<a id="a241e862529ce9f3426de0feb7f2c93f0" name="a241e862529ce9f3426de0feb7f2c93f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a241e862529ce9f3426de0feb7f2c93f0">&#9670;&nbsp;</a></span>traffic_signal_start_times_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::vector&lt; boost::posix_time::ptime &gt; &gt; &gt; carma_wm::SignalizedIntersectionManager::traffic_signal_start_times_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00163">163</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01363">carma_wm::CARMAWorldModel::check_if_seen_before_movement_state()</a>, and <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01433">carma_wm::CARMAWorldModel::processSpatFromMsg()</a>.</p>

</div>
</div>
<a id="a8d1fe15f2871b190b71096e34b2ad00e" name="a8d1fe15f2871b190b71096e34b2ad00e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d1fe15f2871b190b71096e34b2ad00e">&#9670;&nbsp;</a></span>traffic_signal_states_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>, std::unordered_map&lt; <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, std::vector&lt; std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; &gt; &gt; carma_wm::SignalizedIntersectionManager::traffic_signal_states_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SignalizedIntersectionManager_8h_source.html#l00160">160</a> of file <a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01363">carma_wm::CARMAWorldModel::check_if_seen_before_movement_state()</a>, and <a class="el" href="src_2CARMAWorldModel_8cpp_source.html#l01433">carma_wm::CARMAWorldModel::processSpatFromMsg()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>carma_wm/include/carma_wm/<a class="el" href="SignalizedIntersectionManager_8h_source.html">SignalizedIntersectionManager.h</a></li>
<li>carma_wm_ros2/include/carma_wm_ros2/<a class="el" href="SignalizedIntersectionManager_8hpp_source.html">SignalizedIntersectionManager.hpp</a></li>
<li>carma_wm/src/<a class="el" href="src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a></li>
<li>carma_wm_ros2/src/<a class="el" href="ros2_2src_2SignalizedIntersectionManager_8cpp_source.html">SignalizedIntersectionManager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecarma__wm.html">carma_wm</a></li><li class="navelem"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">SignalizedIntersectionManager</a></li>
    <li class="footer">Generated on Tue Mar 28 2023 16:30:25 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
