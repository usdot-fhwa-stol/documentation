<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: Motion computation Node</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_motion_computation_docs_motion_computation_node.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Motion computation Node </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This Node is responsible for predicting environment objects' motion and sharing those predictions with the rest of CARMA Platform. It serves three main functions:</p>
<ul>
<li>Convert incoming BSM, PSM, and mobility path data into <code>ExternalObject</code>s</li>
<li>Predict incoming objects' motion using either the constant velocity (CV) or constant turn-rate and velocity (CTRV) model</li>
<li>Queue and synchronize incoming object information so that it gets published all at once at a specific frequency</li>
</ul>
<p >The following table lists the motion model used for each <code>ExternalObject</code> semantic category</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Object type   </th><th class="markdownTableHeadNone">Motion model    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UNKNOWN</code>   </td><td class="markdownTableBodyNone">CTRV    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MOTORCYCLE</code>   </td><td class="markdownTableBodyNone">CTRV    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SMALL_VEHICLE</code>   </td><td class="markdownTableBodyNone">CTRV    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LARGE_VEHICLE</code>   </td><td class="markdownTableBodyNone">CTRV    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PEDESTRIAN</code>   </td><td class="markdownTableBodyNone">CV    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">default   </td><td class="markdownTableBodyNone">CV   </td></tr>
</table>
<blockquote class="doxtable">
<p >&zwj;[!IMPORTANT]\ This Node requires a valid georeference to do the motion predictions. Until it receives one on the <code>georeference</code> topic, it will not publish any. </p>
</blockquote>
<blockquote class="doxtable">
<p >&zwj;[!IMPORTANT]\ This Node will only publish motion predictions when it receives external object information on the <code>external_objects</code> topic. Messages on the <code>incoming_*</code> topics will be queued until then. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md206"></a>
Subscriptions</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Topic   </th><th class="markdownTableHeadNone">Message Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>external_objects</code>   </td><td class="markdownTableBodyNone"><a href="https://github.com/usdot-fhwa-stol/carma-msgs/blob/develop/carma_perception_msgs/msg/ExternalObjectList.msg"><code>carma_perception_msgs::msg::ExternalObjectList</code></a>   </td><td class="markdownTableBodyNone">Locally-detected objects    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>incoming_mobility_path</code>   </td><td class="markdownTableBodyNone"><a href="https://github.com/usdot-fhwa-stol/carma-msgs/blob/develop/carma_v2x_msgs/msg/MobilityPath.msg"><code>carma_v2x_msgs::msg::MobilityPath</code></a>   </td><td class="markdownTableBodyNone">Self-reported planned motion paths from nearby vehicles    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>incoming_bsm</code>   </td><td class="markdownTableBodyNone"><a href="https://github.com/usdot-fhwa-stol/carma-msgs/blob/develop/carma_v2x_msgs/msg/BSM.msg"><code>carma_v2x_msgs::msg::BSM</code></a>   </td><td class="markdownTableBodyNone">Incoming basic safety messages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>incoming_psm</code>   </td><td class="markdownTableBodyNone"><a href="https://github.com/usdot-fhwa-stol/carma-msgs/blob/develop/carma_v2x_msgs/msg/PSM.msg"><code>carma_v2x_msgs::msg::PSM</code></a>   </td><td class="markdownTableBodyNone">Incoming personal safety messages    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>georeference</code>   </td><td class="markdownTableBodyNone"><a href="http://docs.ros.org/en/api/std_msgs/html/msg/String.html"><code>std_msgs::msg::String</code></a>   </td><td class="markdownTableBodyNone">Georeference point for projecting WGS-84 coordinates to a plane. Assumed and required to be a valid PROJ string.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md207"></a>
Publishers</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Topic   </th><th class="markdownTableHeadNone">Message Type   </th><th class="markdownTableHeadNone">Frequency   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>external_object_predictions</code>   </td><td class="markdownTableBodyNone"><a href="https://github.com/usdot-fhwa-stol/carma-msgs/blob/develop/carma_perception_msgs/msg/ExternalObjectList.msg"><code>carma_perception_msgs::msg::ExternalObjectList</code></a>   </td><td class="markdownTableBodyNone">Subscription-driven   </td><td class="markdownTableBodyNone">This Node will publish predictions only when it receives a message from the <code>external_objects</code> topic. Incoming mobility paths, BSMs, and PSMs will be queued until then.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md208"></a>
Parameters</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Topic   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Default Value   </th><th class="markdownTableHeadNone">Required   </th><th class="markdownTableHeadNone">Read Only   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>prediction_time_step</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>0.1</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Motion prediction time step (in seconds)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mobility_path_time_step</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>0.1</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Time between received mobility path predicted states (in seconds)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>prediction_period</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>2.0</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Prediction horizon (in seconds)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cv_x_accel_noise</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>9.0</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">CV Model X-Axis Acceleration Noise    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>cv_y_accel_noise</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>9.0</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">CV Model Y-Axis Acceleration Noise    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>prediction_process_noise_max</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>1000.0</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Maximum expected process noise; used for mapping noise to confidence in <em>[0,1]</em> range    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>prediction_confidence_drop_rate</code>   </td><td class="markdownTableBodyNone"><code>double</code>   </td><td class="markdownTableBodyNone"><code>0.95</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Percentage of initial confidence to propagate to next time step    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>enable_bsm_processing</code>   </td><td class="markdownTableBodyNone"><code>bool</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">If <code>true</code> then BSM messages will be converted to <code>ExternalObjects</code>. If other object sources are enabled, they will be synchronized but no fusion will occur (objects may be duplicated)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>enable_psm_processing</code>   </td><td class="markdownTableBodyNone"><code>bool</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">If <code>true</code> then PSM messages will be converted to <code>ExternalObjects</code>. If other object sources are enabled, they will be synchronized but no fusion will occur (objects may be duplicated)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>enable_mobility_path_processing</code>   </td><td class="markdownTableBodyNone"><code>bool</code>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">If <code>true</code> then MobilityPath messages will be converted to <code>ExternalObjects</code>. If other object sources are enabled, they will be synchronized but no fusion will occur (objects may be duplicated)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>enable_sensor_processing</code>   </td><td class="markdownTableBodyNone"><code>bool</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">If <code>true</code> then <code>ExternalObjects</code> generated from sensor data will be processed. If other object sources are enabled, they will be synchronized but no fusion will occur (objects may be duplicated)   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md209"></a>
Services</h1>
<p >This Node does not provide services.</p>
<h1><a class="anchor" id="autotoc_md210"></a>
Actions</h1>
<p >This Node does not provide actions. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 21 2023 15:56:05 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
