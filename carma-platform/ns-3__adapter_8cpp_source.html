<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: ns-3_adapter/src/ns-3_adapter.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ns-3__adapter_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ns-3_adapter.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="ns-3__adapter_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="ns-3__adapter_8h.html">ns-3_adapter.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;<a class="code" href="document_8h.html">rapidjson/document.h</a>&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;<a class="code" href="istreamwrapper_8h.html">rapidjson/istreamwrapper.h</a>&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="schema_8h.html">rapidjson/schema.h</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;cav_msgs/ByteArray.h&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a39183974394ca80113e9f0c8caac284e">    9</a></span>std::string <a class="code hl_function" href="classNS3Adapter.html#a39183974394ca80113e9f0c8caac284e">NS3Adapter::uint8_vector_to_hex_string</a>(<span class="keyword">const</span> std::vector&lt;uint8_t&gt;&amp; v) {</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>    std::stringstream ss;</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    ss &lt;&lt; std::hex &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>    std::vector&lt;uint8_t&gt;::const_iterator it;</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>    <span class="keywordflow">for</span> (it = v.begin(); it != v.end(); it++) {</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>        ss &lt;&lt; std::setw(2) &lt;&lt; static_cast&lt;unsigned&gt;(*it);</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>    }</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    <span class="keywordflow">return</span> ss.str();</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>}</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#aae35622ecb9c64566f139fdbbda97abd">   20</a></span><a class="code hl_function" href="classNS3Adapter.html#aae35622ecb9c64566f139fdbbda97abd">NS3Adapter::NS3Adapter</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) : <a class="code hl_namespace" href="namespacecav.html">cav</a>::DriverApplication(argc, argv, <span class="stringliteral">&quot;ns3&quot;</span>)</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>{</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <a class="code hl_variable" href="classNS3Adapter.html#aac0df3306701501cccf0a9885ff6f9e0">queue_size_</a> = 1000;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    cav_msgs::DriverStatus status;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    status.status = <a class="code hl_enumvalue" href="namespacelightbar__manager.html#a91d9a15f8f9254d400b2123adb042c22aa263418aef070612ba69e03cc2325fac">cav_msgs::DriverStatus::OFF</a>;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    status.comms = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <a class="code hl_function" href="classcav_1_1DriverApplication.html#a79115f6edf8f450f435b0e8c5e1de6ed">setStatus</a>(status);</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>}</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#ab2dfb933cc738732c0580b62c233f876">   30</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#ab2dfb933cc738732c0580b62c233f876">NS3Adapter::initialize</a>() {</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    std::string wave_cfg_file;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    ros::NodeHandle pnh(<span class="stringliteral">&quot;~&quot;</span>);</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    pnh.param&lt;std::string&gt;(<span class="stringliteral">&quot;wave_cfg_file&quot;</span>,wave_cfg_file,<span class="stringliteral">&quot;etc/wave.json&quot;</span>);</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">//pnh.param&lt;int&gt;(&quot;listening_port&quot;,config_.listening_port, 5398);</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">//pnh.param&lt;int&gt;(&quot;dsrc_listening_port&quot;,config_.dsrc_listening_port, 1516);</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">//pnh.param&lt;std::string&gt;(&quot;dsrc_address&quot;,config_.dsrc_address, &quot;169.254.1.1&quot;);    </span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <a class="code hl_function" href="classNS3Adapter.html#a5a2b9932882557bda33c58ebd770fe02">loadWaveConfig</a>(wave_cfg_file);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">//comms_api_nh_.reset(new ros::NodeHandle(&quot;comms&quot;));</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">//dyn_cfg_server_.reset(new dynamic_reconfigure::Server&lt;dsrc::DSRCConfig&gt;(dyn_cfg_mutex_));</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="comment">//dyn_cfg_server_-&gt;updateConfig(config_);</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">//dyn_cfg_server_-&gt;setCallback([this](dsrc::DSRCConfig &amp; cfg, uint32_t level) { dynReconfigCB(cfg, level); });</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">//Setup connection handlers</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_variable" href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">ns3_client_error_</a>.clear();</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_variable" href="classNS3Client.html#ab4c65f02bd428eefb28bf4ee1409b763">onConnect</a>.connect([<span class="keyword">this</span>]() { <a class="code hl_function" href="classNS3Adapter.html#afd91fb843d80af26b2b129dd33665d57">onConnectHandler</a>(); });</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_variable" href="classNS3Client.html#a01fe05481fef1f4f16d21ceff007b388">onDisconnect</a>.connect([<span class="keyword">this</span>]() { <a class="code hl_function" href="classNS3Adapter.html#adc385894ac633601f192c7c787b9fb07">onDisconnectHandler</a>(); });</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_variable" href="classNS3Client.html#a3d6ce939c6eaa51b83cf79373dbdbca0">onError</a>.connect([<span class="keyword">this</span>](<span class="keyword">const</span> boost::system::error_code&amp; err){<a class="code hl_variable" href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">ns3_client_error_</a> = err;});</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">//Setup the ROS API</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    std::string node_name = ros::this_node::getName();</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <a class="code hl_variable" href="classNS3Adapter.html#a385f53e1be2909db13e063d36885976b">api_</a>.clear();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">//Comms Subscriber</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <a class="code hl_variable" href="classNS3Adapter.html#a9b5484393f9542f9a270575795074d34">comms_sub_</a> = <a class="code hl_variable" href="classNS3Adapter.html#ae60a8e6d9119097bff36a0ecee3049dd">comms_api_nh_</a>-&gt;subscribe(<span class="stringliteral">&quot;outbound_binary_msg&quot;</span>, <a class="code hl_variable" href="classNS3Adapter.html#aac0df3306701501cccf0a9885ff6f9e0">queue_size_</a>, &amp;<a class="code hl_function" href="classNS3Adapter.html#a677a80e6965180882714e115bc439b61">NS3Adapter::onOutboundMessage</a>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <a class="code hl_variable" href="classNS3Adapter.html#a385f53e1be2909db13e063d36885976b">api_</a>.push_back(<a class="code hl_variable" href="classNS3Adapter.html#a9b5484393f9542f9a270575795074d34">comms_sub_</a>.getTopic());</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">//Comms Publisher</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <a class="code hl_variable" href="classNS3Adapter.html#ab9559c9df64d23e8a1b1441ad2a2f157">comms_pub_</a> = <a class="code hl_variable" href="classNS3Adapter.html#ae60a8e6d9119097bff36a0ecee3049dd">comms_api_nh_</a>-&gt;advertise&lt;cav_msgs::ByteArray&gt;(<span class="stringliteral">&quot;inbound_binary_msg&quot;</span>, <a class="code hl_variable" href="classNS3Adapter.html#aac0df3306701501cccf0a9885ff6f9e0">queue_size_</a>);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_variable" href="classNS3Adapter.html#a385f53e1be2909db13e063d36885976b">api_</a>.push_back(<a class="code hl_variable" href="classNS3Adapter.html#ab9559c9df64d23e8a1b1441ad2a2f157">comms_pub_</a>.getTopic());</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">//Comms Service</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <a class="code hl_variable" href="classNS3Adapter.html#ade083a33c737546ba932726c080a7630">comms_srv_</a> = <a class="code hl_variable" href="classNS3Adapter.html#ae60a8e6d9119097bff36a0ecee3049dd">comms_api_nh_</a>-&gt;advertiseService(<span class="stringliteral">&quot;send&quot;</span>, &amp;<a class="code hl_function" href="classNS3Adapter.html#a1e33b194c9ae9d6eb0454c86cb8d4cc6">NS3Adapter::sendMessageSrv</a>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <a class="code hl_variable" href="classNS3Adapter.html#a385f53e1be2909db13e063d36885976b">api_</a>.push_back(<a class="code hl_variable" href="classNS3Adapter.html#ade083a33c737546ba932726c080a7630">comms_srv_</a>.getService());</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <a class="code hl_variable" href="classNS3Adapter.html#a1d5d28660d9b5b4227f138ad44e53b86">pose_sub_</a> = <a class="code hl_variable" href="classcav_1_1DriverApplication.html#a44af096a67f23f90498df2b86798ed9e">pnh_</a>-&gt;subscribe(<span class="stringliteral">&quot;current_pose&quot;</span>, 1, &amp;<a class="code hl_function" href="classNS3Adapter.html#a1ecefeebe4e8438e2ca8d7ffae517d85">NS3Adapter::pose_cb</a>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <a class="code hl_variable" href="classcav_1_1DriverApplication.html#a44af096a67f23f90498df2b86798ed9e">pnh_</a>-&gt;getParam(<span class="stringliteral">&quot;vehicle_id&quot;</span>, <a class="code hl_variable" href="classNS3Adapter.html#a57cb6f1712587117f5345fdf9fe96e28">vehicle_id_</a>);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_variable" href="classNS3Client.html#a1dbfd25f2ac34075124f69842b6dbecb">onMessageReceived</a>.connect([<span class="keyword">this</span>](std::vector&lt;uint8_t&gt; <span class="keyword">const</span> &amp;msg, <a class="code hl_typedef" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <span class="keywordtype">id</span>) {<a class="code hl_function" href="classNS3Adapter.html#a3e94b6bfa09fc33c410e8329678fd9de">onMessageReceivedHandler</a>(msg, <span class="keywordtype">id</span>); });</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <a class="code hl_variable" href="classcav_1_1DriverApplication.html#abe8b5d05915562fb4cd49cd8281e54e9">spin_rate</a> = 50;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>}</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#afd91fb843d80af26b2b129dd33665d57">   76</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#afd91fb843d80af26b2b129dd33665d57">NS3Adapter::onConnectHandler</a>() {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    ROS_INFO_STREAM(<span class="stringliteral">&quot;NS-3 Adapter Connected&quot;</span>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    cav_msgs::DriverStatus status = <a class="code hl_function" href="classcav_1_1DriverApplication.html#a37a3780fe5edcfea868e5807cadbc779">getStatus</a>();</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    status.status = cav_msgs::DriverStatus::OPERATIONAL;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_function" href="classcav_1_1DriverApplication.html#a79115f6edf8f450f435b0e8c5e1de6ed">setStatus</a>(status);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>}</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#adc385894ac633601f192c7c787b9fb07">   83</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#adc385894ac633601f192c7c787b9fb07">NS3Adapter::onDisconnectHandler</a>() {</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    cav_msgs::DriverStatus status = <a class="code hl_function" href="classcav_1_1DriverApplication.html#a37a3780fe5edcfea868e5807cadbc779">getStatus</a>();</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    status.status = <a class="code hl_enumvalue" href="namespacelightbar__manager.html#a91d9a15f8f9254d400b2123adb042c22aa263418aef070612ba69e03cc2325fac">cav_msgs::DriverStatus::OFF</a>;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <a class="code hl_function" href="classcav_1_1DriverApplication.html#a79115f6edf8f450f435b0e8c5e1de6ed">setStatus</a>(status);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    ROS_WARN_STREAM(<span class="stringliteral">&quot;NS-3 Adapter Disconnected&quot;</span>);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>}</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a3e94b6bfa09fc33c410e8329678fd9de">   96</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#a3e94b6bfa09fc33c410e8329678fd9de">NS3Adapter::onMessageReceivedHandler</a>(<span class="keyword">const</span> std::vector&lt;uint8_t&gt; &amp;<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>, <a class="code hl_typedef" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// Create and populate the message</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keyword">auto</span> it = std::find_if(<a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.begin(),<a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.end(),[<span class="keywordtype">id</span>](<span class="keyword">const</span> <a class="code hl_struct" href="structNS3Adapter_1_1WaveConfigStruct.html">WaveConfigStruct</a>&amp; entry)</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                                                                            {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                                                                               return entry.ns3_id == std::to_string(id);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                                                                            });</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    cav_msgs::ByteArray msg;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    msg.header.stamp = ros::Time::now();</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    msg.header.frame_id = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    msg.message_type = it != <a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.end() ? it-&gt;name : <span class="stringliteral">&quot;Unknown&quot;</span>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    msg.content = <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// Publish it</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_variable" href="classNS3Adapter.html#ab9559c9df64d23e8a1b1441ad2a2f157">comms_pub_</a>.publish(msg);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Application received Data: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>.size() &lt;&lt; <span class="stringliteral">&quot; bytes, message: &quot;</span> &lt;&lt; <a class="code hl_function" href="classNS3Adapter.html#a39183974394ca80113e9f0c8caac284e">uint8_vector_to_hex_string</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">data</a>));</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>}</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a2f06522adf3098b3f9947c93b815ef35">  125</a></span>std::vector&lt;uint8_t&gt; <a class="code hl_function" href="classNS3Adapter.html#a2f06522adf3098b3f9947c93b815ef35">NS3Adapter::packMessage</a>(<span class="keyword">const</span> cav_msgs::ByteArray&amp; <a class="code hl_namespace" href="namespacemessage.html">message</a>) {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    std::stringstream ss;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keyword">auto</span> wave_item = std::find_if(<a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.begin(),<a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.end(),[&amp;<a class="code hl_namespace" href="namespacemessage.html">message</a>](<span class="keyword">const</span> <a class="code hl_struct" href="structNS3Adapter_1_1WaveConfigStruct.html">WaveConfigStruct</a>&amp; entry)</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        return entry.name == message.message_type;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    });</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_struct" href="structNS3Adapter_1_1WaveConfigStruct.html">WaveConfigStruct</a> cfg;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">if</span>(wave_item == <a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.end())</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;No wave config entry for type: &quot;</span> &lt;&lt; <a class="code hl_namespace" href="namespacemessage.html">message</a>.message_type &lt;&lt; <span class="stringliteral">&quot;, using defaults&quot;</span>);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a02455a7de9f3c9746442e08d66df6cfc">name</a> = <a class="code hl_namespace" href="namespacemessage.html">message</a>.message_type;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#ae869ac99169e68b8124deb286229f86c">channel</a> = <span class="stringliteral">&quot;CCH&quot;</span>;  <span class="comment">//Assuming the Default channel is not the safety related info that would be in a BSM message</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a99a796304db56ae037f05213da81fa26">priority</a> = <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a7db62530a2d2baca58bef4535f7474c9">ns3_id</a> = std::to_string((<a class="code hl_namespace" href="namespacemessage.html">message</a>.content[0] &lt;&lt; 8 ) | <a class="code hl_namespace" href="namespacemessage.html">message</a>.content[1]);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a14e22cf37cb29a02710cf7c85320a845">psid</a> = cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a7db62530a2d2baca58bef4535f7474c9">ns3_id</a>;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        cfg = *wave_item;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    ss &lt;&lt; <span class="stringliteral">&quot;Version=0.7&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    ss &lt;&lt; <span class="stringliteral">&quot;Type=&quot;</span> &lt;&lt; cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a02455a7de9f3c9746442e08d66df6cfc">name</a> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    ss &lt;&lt; <span class="stringliteral">&quot;PSID=&quot;</span> &lt;&lt; cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a14e22cf37cb29a02710cf7c85320a845">psid</a> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    ss &lt;&lt; <span class="stringliteral">&quot;VehicleID=&quot;</span> &lt;&lt; <a class="code hl_variable" href="classNS3Adapter.html#a57cb6f1712587117f5345fdf9fe96e28">vehicle_id_</a> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    ss &lt;&lt; <span class="stringliteral">&quot;Priority=&quot;</span> &lt;&lt; cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#a99a796304db56ae037f05213da81fa26">priority</a> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    ss &lt;&lt; <span class="stringliteral">&quot;TxMode=ALT&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    ss &lt;&lt; <span class="stringliteral">&quot;TxChannel=&quot;</span> &lt;&lt; cfg.<a class="code hl_variable" href="structNS3Adapter_1_1WaveConfigStruct.html#ae869ac99169e68b8124deb286229f86c">channel</a> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    ss &lt;&lt; <span class="stringliteral">&quot;TxInterval=0&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    ss &lt;&lt; <span class="stringliteral">&quot;DeliveryStart=&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    ss &lt;&lt; <span class="stringliteral">&quot;DeliveryStop=&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    ss &lt;&lt; <span class="stringliteral">&quot;Signature=False&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    ss &lt;&lt; <span class="stringliteral">&quot;Encryption=False&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    ss &lt;&lt; <span class="stringliteral">&quot;VehiclePosX=&quot;</span> &lt;&lt; <a class="code hl_variable" href="classNS3Adapter.html#a27a92676fc8054ff10a30b3b26ff4f35">pose_msg_</a>.pose.position.x &lt;&lt; std::endl;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    ss &lt;&lt; <span class="stringliteral">&quot;VehiclePosY=&quot;</span> &lt;&lt; <a class="code hl_variable" href="classNS3Adapter.html#a27a92676fc8054ff10a30b3b26ff4f35">pose_msg_</a>.pose.position.y &lt;&lt; std::endl;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    ss &lt;&lt; <span class="stringliteral">&quot;Payload=&quot;</span> &lt;&lt;  <a class="code hl_function" href="classNS3Adapter.html#a39183974394ca80113e9f0c8caac284e">uint8_vector_to_hex_string</a>(<a class="code hl_namespace" href="namespacemessage.html">message</a>.content) &lt;&lt; std::endl;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    std::string str = ss.str();</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="keywordflow">return</span> std::vector&lt;uint8_t&gt;(str.begin(), str.end());</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>}</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a677a80e6965180882714e115bc439b61">  176</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#a677a80e6965180882714e115bc439b61">NS3Adapter::onOutboundMessage</a>(<span class="keyword">const</span> cav_msgs::ByteArrayPtr&amp; <a class="code hl_namespace" href="namespacemessage.html">message</a>) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a1d90d224d73ba13c5a3e5bbac2d19149">connected</a>())</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;Outbound message received but node is not connected to NS-3&quot;</span>);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    std::shared_ptr&lt;std::vector&lt;uint8_t&gt;&gt; message_content = std::make_shared&lt;std::vector&lt;uint8_t&gt;&gt;(std::move(<a class="code hl_function" href="classNS3Adapter.html#a2f06522adf3098b3f9947c93b815ef35">packMessage</a>(*<a class="code hl_namespace" href="namespacemessage.html">message</a>)));</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.push_back(std::move(message_content));</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>}</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#ab9900b0fe8a3f23388749fdc8d72cf89">  190</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#ab9900b0fe8a3f23388749fdc8d72cf89">NS3Adapter::sendMessageFromQueue</a>() {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.empty()) {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Sending message: &quot;</span> &lt;&lt; std::string(<a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.front()-&gt;begin(),<a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.front()-&gt;end()));</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keywordtype">bool</span> success = <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a3085a9d506de03255e3acc00aa778c25">sendNS3Message</a>(<a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.front());</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>.pop_front();</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            ROS_WARN_STREAM(<span class="stringliteral">&quot;Message send failed&quot;</span>);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            ROS_DEBUG(<span class="stringliteral">&quot;Message successfully sent from queue&quot;</span>);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        }</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    }</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>}</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a1e33b194c9ae9d6eb0454c86cb8d4cc6">  209</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNS3Adapter.html#a1e33b194c9ae9d6eb0454c86cb8d4cc6">NS3Adapter::sendMessageSrv</a>(cav_srvs::SendMessage::Request&amp; req, cav_srvs::SendMessage::Response&amp; res) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a1d90d224d73ba13c5a3e5bbac2d19149">connected</a>())</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;Outbound message received but node is not connected to NS-3 Radio&quot;</span>);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        res.errorStatus = 1;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="comment">// Package data into a message shared pointer; this lets packMessage have</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// the same interface for outgoing messages from the topic and service.</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="keyword">const</span> cav_msgs::ByteArray::ConstPtr <a class="code hl_namespace" href="namespacemessage.html">message</a> = cav_msgs::ByteArray::ConstPtr(<span class="keyword">new</span> cav_msgs::ByteArray(req.message_to_send));</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    std::shared_ptr&lt;std::vector&lt;uint8_t&gt;&gt; message_data = std::make_shared&lt;std::vector&lt;uint8_t&gt;&gt;(std::move(<a class="code hl_function" href="classNS3Adapter.html#a2f06522adf3098b3f9947c93b815ef35">packMessage</a>(*<a class="code hl_namespace" href="namespacemessage.html">message</a>)));</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keywordtype">bool</span> success = <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a3085a9d506de03255e3acc00aa778c25">sendNS3Message</a>(message_data);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="keywordflow">if</span> (success) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        ROS_DEBUG(<span class="stringliteral">&quot;SendMessage service returned success&quot;</span>);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        res.errorStatus = 0;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        ROS_WARN_STREAM(<span class="stringliteral">&quot;SendMessage service returned failure&quot;</span>);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        res.errorStatus = 1;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    }</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>}</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#af66defa9e57aff65633881c2aa2b9a7d">  234</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#af66defa9e57aff65633881c2aa2b9a7d">NS3Adapter::pre_spin</a>()</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>{</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="comment">// Adjust output queue size if config changed.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">ns3_client_error_</a>)</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        ROS_ERROR_STREAM(<span class="stringliteral">&quot;NS-3 Client Error : &quot;</span> &lt;&lt; <a class="code hl_variable" href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">ns3_client_error_</a>.message());</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a830020e2b62acf0bcfcd05d26e93f983">close</a>();</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <a class="code hl_variable" href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">ns3_client_error_</a>.clear();</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="comment">//If we are not connected</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="comment">//TODO: Set up functionality for disconnected NS-3</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <span class="comment">/*if (!connecting_ &amp;&amp; !ns3_client_.connected())</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">    {</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment">        connecting_ = true;</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment">        if (connect_thread_)</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">            connect_thread_-&gt;join();</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="comment"></span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="comment">        //We don&#39;t want to block the spin thread because the driver</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment">        //application maintains driver status topic</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="comment">        connect_thread_.reset(new std::thread([this]()</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">        {</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">            dsrc::DSRCConfig cfg;</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">            {</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span><span class="comment">                std::lock_guard&lt;std::mutex&gt; lock(cfg_mutex_);</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment">                cfg = config_;</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="comment">            }</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment">            ROS_INFO(&quot;Attempting to connect to OBU&quot;);</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">            boost::system::error_code ec;</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment">           // ROS_INFO(&quot;Connecting to %s:%u&quot;, cfg.dsrc_address.c_str(), cfg.dsrc_listening_port);</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment">            ROS_INFO(&quot;Local port: %u&quot;, cfg.listening_port);</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment">            try {</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="comment">                if (!ns3_client_.connect(cfg.dsrc_address, cfg.dsrc_listening_port,</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="comment">                                          cfg.listening_port, ec))</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">                {</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment">                    ROS_WARN_STREAM(&quot;Failed to connect, err: &quot; &lt;&lt; ec.message());</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="comment">                }</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="comment">            }catch(std::exception e)</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="comment">            {</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="comment">                ROS_ERROR_STREAM(&quot;Exception connecting to dsrc radio: &quot; &lt;&lt; e.what() &lt;&lt; &quot; error_code: &quot; &lt;&lt; ec.message());</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment">               // ROS_ERROR_STREAM(&quot;Config:\n\tdsrc_address:&quot; &lt;&lt; cfg.dsrc_address</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">                                         &lt;&lt; &quot;\n\tdsrc_listening_port:&quot; &lt;&lt; cfg.dsrc_listening_port</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">                                         &lt;&lt; &quot;\n\tlistening_port:&quot; &lt;&lt; cfg.listening_port);</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="comment">            }</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment"></span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment"></span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">            connecting_ = false;</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment">        }));</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment">    }*/</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>}</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#ab318ceeab58b5039fdc59cbb0f29165f">  285</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#ab318ceeab58b5039fdc59cbb0f29165f">NS3Adapter::post_spin</a>() {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <a class="code hl_function" href="classNS3Adapter.html#ab9900b0fe8a3f23388749fdc8d72cf89">sendMessageFromQueue</a>();</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>}</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="comment">/*void NS3Adapter::dynReconfigCB(dsrc::DSRCConfig &amp; cfg, uint32_t level)</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment">{</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="comment">    std::lock_guard&lt;std::mutex&gt; lock(cfg_mutex_);</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="comment">    if(config_.dsrc_address != cfg.dsrc_address ||</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="comment">       config_.dsrc_listening_port != cfg.dsrc_listening_port ||</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="comment">       config_.listening_port != cfg.listening_port)</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="comment">    {</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="comment">        ROS_INFO_STREAM(&quot;DynReconfig dsrc_address &quot; &lt;&lt; cfg.dsrc_address</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="comment">                                                     &lt;&lt; &quot; dsrc_listening_port &quot;</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="comment">                                                     &lt;&lt; cfg.dsrc_listening_port</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="comment">                                                     &lt;&lt; &quot; listening_port &quot;</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="comment">                                                     &lt;&lt; cfg.listening_port);</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><span class="comment">        config_ = cfg;</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="comment">        ns3_client_.close();</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="comment">    }</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="comment">}*/</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a5a2b9932882557bda33c58ebd770fe02">  306</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#a5a2b9932882557bda33c58ebd770fe02">NS3Adapter::loadWaveConfig</a>(<span class="keyword">const</span> std::string &amp;fileName)</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>{</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Loading wave config&quot;</span>);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* schema = <span class="stringliteral">&quot;{\n&quot;</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                         <span class="stringliteral">&quot; \&quot;$schema\&quot;:\&quot;http://json-schema.org/draft-06/schema\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                         <span class="stringliteral">&quot; \&quot;title\&quot;:\&quot;Wave Config Schema\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                         <span class="stringliteral">&quot; \&quot;description\&quot;:\&quot;A simple schema to describe DSRC/Wave messages\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                         <span class="stringliteral">&quot;  \&quot;type\&quot;: \&quot;array\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                         <span class="stringliteral">&quot;  \&quot;items\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                         <span class="stringliteral">&quot;    \&quot;type\&quot;: \&quot;object\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                         <span class="stringliteral">&quot;    \&quot;properties\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                         <span class="stringliteral">&quot;      \&quot;name\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                         <span class="stringliteral">&quot;        \&quot;description\&quot;: \&quot;message type - abbreviated name\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                         <span class="stringliteral">&quot;        \&quot;type\&quot;: \&quot;string\&quot;\n&quot;</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                         <span class="stringliteral">&quot;      },\n&quot;</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                         <span class="stringliteral">&quot;      \&quot;psid\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                         <span class="stringliteral">&quot;        \&quot;description\&quot;: \&quot;psid assigned to message type in decimal\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                         <span class="stringliteral">&quot;        \&quot;type\&quot;: \&quot;string\&quot;\n&quot;</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                         <span class="stringliteral">&quot;      },\n&quot;</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                         <span class="stringliteral">&quot;      \&quot;ns3_id\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                         <span class="stringliteral">&quot;        \&quot;description\&quot;: \&quot;J2735 NS-3 id assigned to message type in decimal\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                         <span class="stringliteral">&quot;        \&quot;type\&quot;: \&quot;string\&quot;\n&quot;</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>                         <span class="stringliteral">&quot;      },\n&quot;</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                         <span class="stringliteral">&quot;      \&quot;channel\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                         <span class="stringliteral">&quot;        \&quot;description\&quot;: \&quot;DSRC radio channel assigned to message type in decimal\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                         <span class="stringliteral">&quot;        \&quot;type\&quot;: \&quot;string\&quot;\n&quot;</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                         <span class="stringliteral">&quot;      },\n&quot;</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                         <span class="stringliteral">&quot;      \&quot;priority\&quot;: {\n&quot;</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                         <span class="stringliteral">&quot;        \&quot;description\&quot;: \&quot;WSM Priotiy to use assigned to message type in decimal\&quot;,\n&quot;</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                         <span class="stringliteral">&quot;        \&quot;type\&quot;:\&quot;string\&quot;\n&quot;</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                         <span class="stringliteral">&quot;      }\n&quot;</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                         <span class="stringliteral">&quot;    },\n&quot;</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                         <span class="stringliteral">&quot;    \&quot;required\&quot;:[\&quot;name\&quot;,\&quot;psid\&quot;,\&quot;ns3_id\&quot;,\&quot;channel\&quot;,\&quot;priority\&quot;]&quot;</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                         <span class="stringliteral">&quot;  }\n&quot;</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                         <span class="stringliteral">&quot;}\n&quot;</span>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    std::ifstream file;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">try</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        file.open(fileName);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <span class="keywordflow">catch</span> (std::exception&amp; e)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Unable to open file : &quot;</span> &lt;&lt; fileName &lt;&lt; <span class="stringliteral">&quot;, exception: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <a class="code hl_typedef" href="document_8h.html#ac6ea5b168e3fe8c7fa532450fc9391f7">rapidjson::Document</a> sd;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">if</span>(sd.Parse(schema).HasParseError())</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Invalid Wave Config Schema&quot;</span>);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <a class="code hl_typedef" href="fwd_8h.html#a05c97278ec100471e77a4d678957701b">rapidjson::SchemaDocument</a> schemaDocument(sd);</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <a class="code hl_typedef" href="document_8h.html#ac6ea5b168e3fe8c7fa532450fc9391f7">rapidjson::Document</a> doc;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <a class="code hl_typedef" href="istreamwrapper_8h.html#a2b3f48c475480aedd18b5da1b6fafc72">rapidjson::IStreamWrapper</a> isw(file);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="keywordflow">if</span>(doc.ParseStream(isw).HasParseError())</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Error Parsing Wave Config&quot;</span>);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    }</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <a class="code hl_typedef" href="fwd_8h.html#a2c91a2e7dd109dba1803ed2280a2dfa4">rapidjson::SchemaValidator</a> <a class="code hl_variable" href="namespaceguidance__plugin__validator_1_1main.html#ae2f7a8ade6f8e66316ec9756f97bef4a">validator</a>(schemaDocument);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordflow">if</span>(!doc.Accept(<a class="code hl_variable" href="namespaceguidance__plugin__validator_1_1main.html#ae2f7a8ade6f8e66316ec9756f97bef4a">validator</a>))</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Wave Config improperly formatted&quot;</span>);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it : doc.GetArray())</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keyword">auto</span> entry = it.GetObject();</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <a class="code hl_variable" href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">wave_cfg_items_</a>.emplace_back(entry[<span class="stringliteral">&quot;name&quot;</span>].GetString(),</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                                     entry[<span class="stringliteral">&quot;psid&quot;</span>].GetString(),</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                                     entry[<span class="stringliteral">&quot;ns3_id&quot;</span>].GetString(),</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>                                     entry[<span class="stringliteral">&quot;channel&quot;</span>].GetString(),</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                                     entry[<span class="stringliteral">&quot;priority&quot;</span>].GetString());</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>}</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a1bc40c1e3e0f224a9e7a302569ea228c">  388</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#a1bc40c1e3e0f224a9e7a302569ea228c">NS3Adapter::shutdown</a>()</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>{</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    ROS_INFO(<span class="stringliteral">&quot;Shutdown signal received from DriverApplication&quot;</span>);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNS3Adapter.html#afaea86e83cdbaa806ea016dcaf85fe09">connect_thread_</a>)</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        ROS_INFO(<span class="stringliteral">&quot;Cleaning up connection thread&quot;</span>);</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <a class="code hl_variable" href="classNS3Adapter.html#afaea86e83cdbaa806ea016dcaf85fe09">connect_thread_</a>-&gt;join();</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <a class="code hl_variable" href="classNS3Adapter.html#afaea86e83cdbaa806ea016dcaf85fe09">connect_thread_</a>.reset();</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    ROS_INFO(<span class="stringliteral">&quot;Closing connection to radio&quot;</span>);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <a class="code hl_variable" href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">ns3_client_</a>.<a class="code hl_function" href="classNS3Client.html#a830020e2b62acf0bcfcd05d26e93f983">close</a>();</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>}</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#a1ecefeebe4e8438e2ca8d7ffae517d85">  403</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNS3Adapter.html#a1ecefeebe4e8438e2ca8d7ffae517d85">NS3Adapter::pose_cb</a>(geometry_msgs::PoseStamped pose_msg)</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>{</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <a class="code hl_variable" href="classNS3Adapter.html#a27a92676fc8054ff10a30b3b26ff4f35">pose_msg_</a> = pose_msg;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">/*TODO: Add Pose Functionality*/</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>}</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#acc39e0753faf28cce0175d891ce23338">  410</a></span>cav_msgs::DriverStatus <a class="code hl_function" href="classNS3Adapter.html#acc39e0753faf28cce0175d891ce23338">NS3Adapter::getDriverStatus</a>()</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>{</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classcav_1_1DriverApplication.html#a37a3780fe5edcfea868e5807cadbc779">getStatus</a>();</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>}</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="classNS3Adapter.html#aba6e504b8869eb5f14828d713c0bad32">  415</a></span>std::deque&lt;std::shared_ptr&lt;std::vector&lt;uint8_t&gt;&gt;&gt; <a class="code hl_function" href="classNS3Adapter.html#aba6e504b8869eb5f14828d713c0bad32">NS3Adapter::getMsgQueue</a>()</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>{</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">send_msg_queue_</a>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>}</div>
<div class="ttc" id="aclassNS3Adapter_html_a1bc40c1e3e0f224a9e7a302569ea228c"><div class="ttname"><a href="classNS3Adapter.html#a1bc40c1e3e0f224a9e7a302569ea228c">NS3Adapter::shutdown</a></div><div class="ttdeci">virtual void shutdown() override</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00388">ns-3_adapter.cpp:388</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a1d5d28660d9b5b4227f138ad44e53b86"><div class="ttname"><a href="classNS3Adapter.html#a1d5d28660d9b5b4227f138ad44e53b86">NS3Adapter::pose_sub_</a></div><div class="ttdeci">ros::Subscriber pose_sub_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00084">ns-3_adapter.h:84</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a1e33b194c9ae9d6eb0454c86cb8d4cc6"><div class="ttname"><a href="classNS3Adapter.html#a1e33b194c9ae9d6eb0454c86cb8d4cc6">NS3Adapter::sendMessageSrv</a></div><div class="ttdeci">bool sendMessageSrv(cav_srvs::SendMessage::Request &amp;req, cav_srvs::SendMessage::Response &amp;res)</div><div class="ttdoc">Message sending service.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00209">ns-3_adapter.cpp:209</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a1ecefeebe4e8438e2ca8d7ffae517d85"><div class="ttname"><a href="classNS3Adapter.html#a1ecefeebe4e8438e2ca8d7ffae517d85">NS3Adapter::pose_cb</a></div><div class="ttdeci">void pose_cb(geometry_msgs::PoseStamped pose_msg)</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00403">ns-3_adapter.cpp:403</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a27a92676fc8054ff10a30b3b26ff4f35"><div class="ttname"><a href="classNS3Adapter.html#a27a92676fc8054ff10a30b3b26ff4f35">NS3Adapter::pose_msg_</a></div><div class="ttdeci">geometry_msgs::PoseStamped pose_msg_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00089">ns-3_adapter.h:89</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a2f06522adf3098b3f9947c93b815ef35"><div class="ttname"><a href="classNS3Adapter.html#a2f06522adf3098b3f9947c93b815ef35">NS3Adapter::packMessage</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; packMessage(const cav_msgs::ByteArray &amp;message)</div><div class="ttdoc">Packs an outgoing message into J2375 standard.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00125">ns-3_adapter.cpp:125</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a385f53e1be2909db13e063d36885976b"><div class="ttname"><a href="classNS3Adapter.html#a385f53e1be2909db13e063d36885976b">NS3Adapter::api_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; api_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00079">ns-3_adapter.h:79</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a39183974394ca80113e9f0c8caac284e"><div class="ttname"><a href="classNS3Adapter.html#a39183974394ca80113e9f0c8caac284e">NS3Adapter::uint8_vector_to_hex_string</a></div><div class="ttdeci">std::string uint8_vector_to_hex_string(const std::vector&lt; uint8_t &gt; &amp;v)</div><div class="ttdoc">converts a uint8_t vector to an ascii representation</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00009">ns-3_adapter.cpp:9</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a3e94b6bfa09fc33c410e8329678fd9de"><div class="ttname"><a href="classNS3Adapter.html#a3e94b6bfa09fc33c410e8329678fd9de">NS3Adapter::onMessageReceivedHandler</a></div><div class="ttdeci">void onMessageReceivedHandler(const std::vector&lt; uint8_t &gt; &amp;data, uint16_t id)</div><div class="ttdoc">Handles messages received from the NS-3 Client.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00096">ns-3_adapter.cpp:96</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a57cb6f1712587117f5345fdf9fe96e28"><div class="ttname"><a href="classNS3Adapter.html#a57cb6f1712587117f5345fdf9fe96e28">NS3Adapter::vehicle_id_</a></div><div class="ttdeci">std::string vehicle_id_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00091">ns-3_adapter.h:91</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a5a2b9932882557bda33c58ebd770fe02"><div class="ttname"><a href="classNS3Adapter.html#a5a2b9932882557bda33c58ebd770fe02">NS3Adapter::loadWaveConfig</a></div><div class="ttdeci">void loadWaveConfig(const std::string &amp;fileName)</div><div class="ttdoc">Callback for dynamic reconfig service.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00306">ns-3_adapter.cpp:306</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a657e47ea95e9a33e74305408984b7d63"><div class="ttname"><a href="classNS3Adapter.html#a657e47ea95e9a33e74305408984b7d63">NS3Adapter::wave_cfg_items_</a></div><div class="ttdeci">std::vector&lt; WaveConfigStruct &gt; wave_cfg_items_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00105">ns-3_adapter.h:105</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a677a80e6965180882714e115bc439b61"><div class="ttname"><a href="classNS3Adapter.html#a677a80e6965180882714e115bc439b61">NS3Adapter::onOutboundMessage</a></div><div class="ttdeci">void onOutboundMessage(const cav_msgs::ByteArrayPtr &amp;message)</div><div class="ttdoc">Handles outbound messages from the ROS network.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00176">ns-3_adapter.cpp:176</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a96d6a5b462248cb50d631ccd11f68b02"><div class="ttname"><a href="classNS3Adapter.html#a96d6a5b462248cb50d631ccd11f68b02">NS3Adapter::ns3_client_error_</a></div><div class="ttdeci">boost::system::error_code ns3_client_error_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00103">ns-3_adapter.h:103</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_a9b5484393f9542f9a270575795074d34"><div class="ttname"><a href="classNS3Adapter.html#a9b5484393f9542f9a270575795074d34">NS3Adapter::comms_sub_</a></div><div class="ttdeci">ros::Subscriber comms_sub_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00083">ns-3_adapter.h:83</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_aac0df3306701501cccf0a9885ff6f9e0"><div class="ttname"><a href="classNS3Adapter.html#aac0df3306701501cccf0a9885ff6f9e0">NS3Adapter::queue_size_</a></div><div class="ttdeci">uint32_t queue_size_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00106">ns-3_adapter.h:106</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_aae35622ecb9c64566f139fdbbda97abd"><div class="ttname"><a href="classNS3Adapter.html#aae35622ecb9c64566f139fdbbda97abd">NS3Adapter::NS3Adapter</a></div><div class="ttdeci">NS3Adapter(int argc, char **argv)</div><div class="ttdoc">constructor</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00020">ns-3_adapter.cpp:20</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ab2dfb933cc738732c0580b62c233f876"><div class="ttname"><a href="classNS3Adapter.html#ab2dfb933cc738732c0580b62c233f876">NS3Adapter::initialize</a></div><div class="ttdeci">virtual void initialize() override</div><div class="ttdoc">Initializes ROS context for this node.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00030">ns-3_adapter.cpp:30</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ab318ceeab58b5039fdc59cbb0f29165f"><div class="ttname"><a href="classNS3Adapter.html#ab318ceeab58b5039fdc59cbb0f29165f">NS3Adapter::post_spin</a></div><div class="ttdeci">virtual void post_spin() override</div><div class="ttdoc">Called by the base DriverApplication class after spin.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00285">ns-3_adapter.cpp:285</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ab9559c9df64d23e8a1b1441ad2a2f157"><div class="ttname"><a href="classNS3Adapter.html#ab9559c9df64d23e8a1b1441ad2a2f157">NS3Adapter::comms_pub_</a></div><div class="ttdeci">ros::Publisher comms_pub_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00082">ns-3_adapter.h:82</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ab9900b0fe8a3f23388749fdc8d72cf89"><div class="ttname"><a href="classNS3Adapter.html#ab9900b0fe8a3f23388749fdc8d72cf89">NS3Adapter::sendMessageFromQueue</a></div><div class="ttdeci">void sendMessageFromQueue()</div><div class="ttdoc">Sends a message from the queue of outbound messages.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00190">ns-3_adapter.cpp:190</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_aba6e504b8869eb5f14828d713c0bad32"><div class="ttname"><a href="classNS3Adapter.html#aba6e504b8869eb5f14828d713c0bad32">NS3Adapter::getMsgQueue</a></div><div class="ttdeci">std::deque&lt; std::shared_ptr&lt; std::vector&lt; uint8_t &gt; &gt; &gt; getMsgQueue()</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00415">ns-3_adapter.cpp:415</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_acc39e0753faf28cce0175d891ce23338"><div class="ttname"><a href="classNS3Adapter.html#acc39e0753faf28cce0175d891ce23338">NS3Adapter::getDriverStatus</a></div><div class="ttdeci">cav_msgs::DriverStatus getDriverStatus()</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00410">ns-3_adapter.cpp:410</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ad70a68c88df9d286ee02410b30f42102"><div class="ttname"><a href="classNS3Adapter.html#ad70a68c88df9d286ee02410b30f42102">NS3Adapter::ns3_client_</a></div><div class="ttdeci">NS3Client ns3_client_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00098">ns-3_adapter.h:98</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_adc385894ac633601f192c7c787b9fb07"><div class="ttname"><a href="classNS3Adapter.html#adc385894ac633601f192c7c787b9fb07">NS3Adapter::onDisconnectHandler</a></div><div class="ttdeci">void onDisconnectHandler()</div><div class="ttdoc">Handles the NS-3 onDisconnect Event.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00083">ns-3_adapter.cpp:83</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ade083a33c737546ba932726c080a7630"><div class="ttname"><a href="classNS3Adapter.html#ade083a33c737546ba932726c080a7630">NS3Adapter::comms_srv_</a></div><div class="ttdeci">ros::ServiceServer comms_srv_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00085">ns-3_adapter.h:85</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ae0f7851ee96d6b84037542ac883e59cd"><div class="ttname"><a href="classNS3Adapter.html#ae0f7851ee96d6b84037542ac883e59cd">NS3Adapter::send_msg_queue_</a></div><div class="ttdeci">std::deque&lt; std::shared_ptr&lt; std::vector&lt; uint8_t &gt; &gt; &gt; send_msg_queue_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00100">ns-3_adapter.h:100</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_ae60a8e6d9119097bff36a0ecee3049dd"><div class="ttname"><a href="classNS3Adapter.html#ae60a8e6d9119097bff36a0ecee3049dd">NS3Adapter::comms_api_nh_</a></div><div class="ttdeci">std::shared_ptr&lt; ros::NodeHandle &gt; comms_api_nh_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00086">ns-3_adapter.h:86</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_af66defa9e57aff65633881c2aa2b9a7d"><div class="ttname"><a href="classNS3Adapter.html#af66defa9e57aff65633881c2aa2b9a7d">NS3Adapter::pre_spin</a></div><div class="ttdeci">virtual void pre_spin() override</div><div class="ttdoc">Called by the base DriverApplication class prior to Spin.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00234">ns-3_adapter.cpp:234</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_afaea86e83cdbaa806ea016dcaf85fe09"><div class="ttname"><a href="classNS3Adapter.html#afaea86e83cdbaa806ea016dcaf85fe09">NS3Adapter::connect_thread_</a></div><div class="ttdeci">std::shared_ptr&lt; std::thread &gt; connect_thread_</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00102">ns-3_adapter.h:102</a></div></div>
<div class="ttc" id="aclassNS3Adapter_html_afd91fb843d80af26b2b129dd33665d57"><div class="ttname"><a href="classNS3Adapter.html#afd91fb843d80af26b2b129dd33665d57">NS3Adapter::onConnectHandler</a></div><div class="ttdeci">void onConnectHandler()</div><div class="ttdoc">Handles the NS-3 onConnect Event.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8cpp_source.html#l00076">ns-3_adapter.cpp:76</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a01fe05481fef1f4f16d21ceff007b388"><div class="ttname"><a href="classNS3Client.html#a01fe05481fef1f4f16d21ceff007b388">NS3Client::onDisconnect</a></div><div class="ttdeci">boost::signals2::signal&lt; void()&gt; onDisconnect</div><div class="ttdoc">Signaled when client is disconnected from hardware.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8h_source.html#l00076">ns-3_client.h:76</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a1d90d224d73ba13c5a3e5bbac2d19149"><div class="ttname"><a href="classNS3Client.html#a1d90d224d73ba13c5a3e5bbac2d19149">NS3Client::connected</a></div><div class="ttdeci">bool connected()</div><div class="ttdoc">returns connected state</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8h_source.html#l00066">ns-3_client.h:66</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a1dbfd25f2ac34075124f69842b6dbecb"><div class="ttname"><a href="classNS3Client.html#a1dbfd25f2ac34075124f69842b6dbecb">NS3Client::onMessageReceived</a></div><div class="ttdeci">boost::signals2::signal&lt; void(std::vector&lt; uint8_t &gt; const &amp;, uint16_t id)&gt; onMessageReceived</div><div class="ttdoc">Signaled when message received.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8h_source.html#l00086">ns-3_client.h:86</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a3085a9d506de03255e3acc00aa778c25"><div class="ttname"><a href="classNS3Client.html#a3085a9d506de03255e3acc00aa778c25">NS3Client::sendNS3Message</a></div><div class="ttdeci">bool sendNS3Message(const std::shared_ptr&lt; std::vector&lt; uint8_t &gt; &gt; &amp;message)</div><div class="ttdoc">sends a udp message</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8cpp_source.html#l00144">ns-3_client.cpp:144</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a3d6ce939c6eaa51b83cf79373dbdbca0"><div class="ttname"><a href="classNS3Client.html#a3d6ce939c6eaa51b83cf79373dbdbca0">NS3Client::onError</a></div><div class="ttdeci">boost::signals2::signal&lt; void(const boost::system::error_code &amp;)&gt; onError</div><div class="ttdoc">Signaled when client experiences a fatal error. Client should be closed and reconnected.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8h_source.html#l00081">ns-3_client.h:81</a></div></div>
<div class="ttc" id="aclassNS3Client_html_a830020e2b62acf0bcfcd05d26e93f983"><div class="ttname"><a href="classNS3Client.html#a830020e2b62acf0bcfcd05d26e93f983">NS3Client::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Closes connection.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8cpp_source.html#l00086">ns-3_client.cpp:86</a></div></div>
<div class="ttc" id="aclassNS3Client_html_ab4c65f02bd428eefb28bf4ee1409b763"><div class="ttname"><a href="classNS3Client.html#ab4c65f02bd428eefb28bf4ee1409b763">NS3Client::onConnect</a></div><div class="ttdeci">boost::signals2::signal&lt; void()&gt; onConnect</div><div class="ttdoc">Signaled when client is connected to the NS-3 adapter.</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__client_8h_source.html#l00071">ns-3_client.h:71</a></div></div>
<div class="ttc" id="aclasscav_1_1DriverApplication_html_a37a3780fe5edcfea868e5807cadbc779"><div class="ttname"><a href="classcav_1_1DriverApplication.html#a37a3780fe5edcfea868e5807cadbc779">cav::DriverApplication::getStatus</a></div><div class="ttdeci">virtual cav_msgs::DriverStatus getStatus() final</div><div class="ttdoc">Get's status.</div><div class="ttdef"><b>Definition:</b> <a href="driver__application_8h_source.html#l00100">driver_application.h:100</a></div></div>
<div class="ttc" id="aclasscav_1_1DriverApplication_html_a44af096a67f23f90498df2b86798ed9e"><div class="ttname"><a href="classcav_1_1DriverApplication.html#a44af096a67f23f90498df2b86798ed9e">cav::DriverApplication::pnh_</a></div><div class="ttdeci">std::shared_ptr&lt; ros::NodeHandle &gt; pnh_</div><div class="ttdoc">ROS NodeHandle within the private (&quot;~&quot;) namespace.</div><div class="ttdef"><b>Definition:</b> <a href="driver__application_8h_source.html#l00118">driver_application.h:118</a></div></div>
<div class="ttc" id="aclasscav_1_1DriverApplication_html_a79115f6edf8f450f435b0e8c5e1de6ed"><div class="ttname"><a href="classcav_1_1DriverApplication.html#a79115f6edf8f450f435b0e8c5e1de6ed">cav::DriverApplication::setStatus</a></div><div class="ttdeci">virtual void setStatus(cav_msgs::DriverStatus status) final</div><div class="ttdoc">Sets the status of the DriverApplication.</div><div class="ttdef"><b>Definition:</b> <a href="driver__application_8cpp_source.html#l00097">driver_application.cpp:97</a></div></div>
<div class="ttc" id="aclasscav_1_1DriverApplication_html_abe8b5d05915562fb4cd49cd8281e54e9"><div class="ttname"><a href="classcav_1_1DriverApplication.html#abe8b5d05915562fb4cd49cd8281e54e9">cav::DriverApplication::spin_rate</a></div><div class="ttdeci">int spin_rate</div><div class="ttdoc">should be set prior to DriverApplication beginning its control loop. Ideally inheriting classes shoul...</div><div class="ttdef"><b>Definition:</b> <a href="driver__application_8h_source.html#l00107">driver_application.h:107</a></div></div>
<div class="ttc" id="adocument_8h_html"><div class="ttname"><a href="document_8h.html">document.h</a></div></div>
<div class="ttc" id="adocument_8h_html_ac6ea5b168e3fe8c7fa532450fc9391f7"><div class="ttname"><a href="document_8h.html#ac6ea5b168e3fe8c7fa532450fc9391f7">Document</a></div><div class="ttdeci">GenericDocument&lt; UTF8&lt;&gt; &gt; Document</div><div class="ttdoc">GenericDocument with UTF8 encoding.</div><div class="ttdef"><b>Definition:</b> <a href="document_8h_source.html#l02469">document.h:2469</a></div></div>
<div class="ttc" id="afwd_8h_html_a05c97278ec100471e77a4d678957701b"><div class="ttname"><a href="fwd_8h.html#a05c97278ec100471e77a4d678957701b">SchemaDocument</a></div><div class="ttdeci">GenericSchemaDocument&lt; Value, CrtAllocator &gt; SchemaDocument</div><div class="ttdef"><b>Definition:</b> <a href="fwd_8h_source.html#l00138">fwd.h:138</a></div></div>
<div class="ttc" id="afwd_8h_html_a2c91a2e7dd109dba1803ed2280a2dfa4"><div class="ttname"><a href="fwd_8h.html#a2c91a2e7dd109dba1803ed2280a2dfa4">SchemaValidator</a></div><div class="ttdeci">GenericSchemaValidator&lt; SchemaDocument, BaseReaderHandler&lt; UTF8&lt; char &gt;, void &gt;, CrtAllocator &gt; SchemaValidator</div><div class="ttdef"><b>Definition:</b> <a href="fwd_8h_source.html#l00147">fwd.h:147</a></div></div>
<div class="ttc" id="aistreamwrapper_8h_html"><div class="ttname"><a href="istreamwrapper_8h.html">istreamwrapper.h</a></div></div>
<div class="ttc" id="aistreamwrapper_8h_html_a2b3f48c475480aedd18b5da1b6fafc72"><div class="ttname"><a href="istreamwrapper_8h.html#a2b3f48c475480aedd18b5da1b6fafc72">IStreamWrapper</a></div><div class="ttdeci">BasicIStreamWrapper&lt; std::istream &gt; IStreamWrapper</div><div class="ttdef"><b>Definition:</b> <a href="istreamwrapper_8h_source.html#l00106">istreamwrapper.h:106</a></div></div>
<div class="ttc" id="anamespacecav_html"><div class="ttname"><a href="namespacecav.html">cav</a></div><div class="ttdef"><b>Definition:</b> <a href="driver__application_8h_source.html#l00050">driver_application.h:51</a></div></div>
<div class="ttc" id="anamespaceguidance__plugin__validator_1_1main_html_ae2f7a8ade6f8e66316ec9756f97bef4a"><div class="ttname"><a href="namespaceguidance__plugin__validator_1_1main.html#ae2f7a8ade6f8e66316ec9756f97bef4a">guidance_plugin_validator.main.validator</a></div><div class="ttdeci">validator</div><div class="ttdef"><b>Definition:</b> <a href="main_8py_source.html#l00031">main.py:31</a></div></div>
<div class="ttc" id="anamespacelightbar__manager_html_a91d9a15f8f9254d400b2123adb042c22aa263418aef070612ba69e03cc2325fac"><div class="ttname"><a href="namespacelightbar__manager.html#a91d9a15f8f9254d400b2123adb042c22aa263418aef070612ba69e03cc2325fac">lightbar_manager::OFF</a></div><div class="ttdeci">@ OFF</div><div class="ttdef"><b>Definition:</b> <a href="lightbar__manager__sm_8hpp_source.html#l00031">lightbar_manager_sm.hpp:31</a></div></div>
<div class="ttc" id="anamespacemessage_html"><div class="ttname"><a href="namespacemessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="message_8launch_8py_source.html#l00001">message.launch.py:1</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ac70c24fdb487f1aed5b846490501b5f1"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ac70c24fdb487f1aed5b846490501b5f1">process_traj_logs.data</a></div><div class="ttdeci">list data</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00041">process_traj_logs.py:41</a></div></div>
<div class="ttc" id="ans-3__adapter_8h_html"><div class="ttname"><a href="ns-3__adapter_8h.html">ns-3_adapter.h</a></div></div>
<div class="ttc" id="aschema_8h_html"><div class="ttname"><a href="schema_8h.html">schema.h</a></div></div>
<div class="ttc" id="astdint_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00125">stdint.h:125</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html">NS3Adapter::WaveConfigStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00050">ns-3_adapter.h:51</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html_a02455a7de9f3c9746442e08d66df6cfc"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html#a02455a7de9f3c9746442e08d66df6cfc">NS3Adapter::WaveConfigStruct::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00052">ns-3_adapter.h:52</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html_a14e22cf37cb29a02710cf7c85320a845"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html#a14e22cf37cb29a02710cf7c85320a845">NS3Adapter::WaveConfigStruct::psid</a></div><div class="ttdeci">std::string psid</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00052">ns-3_adapter.h:52</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html_a7db62530a2d2baca58bef4535f7474c9"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html#a7db62530a2d2baca58bef4535f7474c9">NS3Adapter::WaveConfigStruct::ns3_id</a></div><div class="ttdeci">std::string ns3_id</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00052">ns-3_adapter.h:52</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html_a99a796304db56ae037f05213da81fa26"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html#a99a796304db56ae037f05213da81fa26">NS3Adapter::WaveConfigStruct::priority</a></div><div class="ttdeci">std::string priority</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00052">ns-3_adapter.h:52</a></div></div>
<div class="ttc" id="astructNS3Adapter_1_1WaveConfigStruct_html_ae869ac99169e68b8124deb286229f86c"><div class="ttname"><a href="structNS3Adapter_1_1WaveConfigStruct.html#ae869ac99169e68b8124deb286229f86c">NS3Adapter::WaveConfigStruct::channel</a></div><div class="ttdeci">std::string channel</div><div class="ttdef"><b>Definition:</b> <a href="ns-3__adapter_8h_source.html#l00052">ns-3_adapter.h:52</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_769cdac628fe9567f4da08b5b54e0c1a.html">ns-3_adapter</a></li><li class="navelem"><a class="el" href="dir_d0eb4f8164b510aec678b982ea2b06bf.html">src</a></li><li class="navelem"><a class="el" href="ns-3__adapter_8cpp.html">ns-3_adapter.cpp</a></li>
    <li class="footer">Generated on Thu Jan 26 2023 14:31:46 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
