<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-platform: carma_wm::CARMAWorldModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-platform<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Platform is built on robot operating system (ROS) and utilizes open source software (OSS) that enables Cooperative Driving Automation (CDA) features to allow Automated Driving Systems to interact and cooperate with infrastructure and other vehicles through communication.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classcarma__wm_1_1CARMAWorldModel.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classcarma__wm_1_1CARMAWorldModel-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">carma_wm::CARMAWorldModel Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class which implements the <a class="el" href="classcarma__wm_1_1WorldModel.html" title="An interface which provides read access to the semantic map and route. This class is not thread safe....">WorldModel</a> interface. In addition this class provides write access to the world model. Write access is achieved through setters for the Map and Route and <a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab2440a153a52460b92cff4017407dcbb" title="Get a mutable version of the current map.">getMutableMap()</a>. NOTE: This class should NOT be used in runtime code by users and is exposed solely for use in unit tests where the <a class="el" href="classcarma__wm_1_1WMListener.html" title="Class which provies automated subscription and threading support for the world model.">WMListener</a> class cannot be instantiated.  
 <a href="classcarma__wm_1_1CARMAWorldModel.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for carma_wm::CARMAWorldModel:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel__inherit__graph.png" border="0" usemap="#acarma__wm_1_1CARMAWorldModel_inherit__map" alt="Inheritance graph"/></div>
<map name="acarma__wm_1_1CARMAWorldModel_inherit__map" id="acarma__wm_1_1CARMAWorldModel_inherit__map">
<area shape="rect" title="Class which implements the WorldModel interface. In addition this class provides write access to the ..." alt="" coords="5,585,212,1777"/>
<area shape="rect" href="classcarma__wm_1_1WorldModel.html" title="An interface which provides read access to the semantic map and route. This class is not thread safe...." alt="" coords="7,5,210,537"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for carma_wm::CARMAWorldModel:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel__coll__graph.png" border="0" usemap="#acarma__wm_1_1CARMAWorldModel_coll__map" alt="Collaboration graph"/></div>
<map name="acarma__wm_1_1CARMAWorldModel_coll__map" id="acarma__wm_1_1CARMAWorldModel_coll__map">
<area shape="rect" title="Class which implements the WorldModel interface. In addition this class provides write access to the ..." alt="" coords="2299,872,2506,1771"/>
<area shape="rect" href="classcarma__wm_1_1WorldModel.html" title="An interface which provides read access to the semantic map and route. This class is not thread safe...." alt="" coords="692,263,895,795"/>
<area shape="rect" title=" " alt="" coords="919,483,1076,575"/>
<area shape="rect" href="classcarma__wm_1_1SignalizedIntersectionManager.html" title="This class manages and keeps track of all signalized intersections in the map. All of the SPAT and MA..." alt="" coords="1100,395,1319,663"/>
<area shape="rect" title=" " alt="" coords="5,27,163,134"/>
<area shape="rect" title=" " alt="" coords="187,35,344,127"/>
<area shape="rect" title=" " alt="" coords="369,35,519,127"/>
<area shape="rect" title=" " alt="" coords="543,27,694,134"/>
<area shape="rect" title=" " alt="" coords="719,5,935,156"/>
<area shape="rect" title=" " alt="" coords="959,20,1163,141"/>
<area shape="rect" title=" " alt="" coords="1187,13,1389,149"/>
<area shape="rect" title=" " alt="" coords="1413,27,1571,134"/>
<area shape="rect" title=" " alt="" coords="1598,42,1653,119"/>
<area shape="rect" title=" " alt="" coords="1725,42,1785,119"/>
<area shape="rect" title=" " alt="" coords="1998,490,2157,567"/>
<area shape="rect" title=" " alt="" coords="2181,483,2313,575"/>
<area shape="rect" title=" " alt="" coords="2337,483,2469,575"/>
<area shape="rect" title=" " alt="" coords="2493,483,2656,575"/>
<area shape="rect" title=" " alt="" coords="2681,490,2855,567"/>
<area shape="rect" title=" " alt="" coords="2880,490,3077,567"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html" title="O(1) distance lookup structure for quickly accessing route distance information. NOTE: This structure..." alt="" coords="3102,424,3317,633"/>
<area shape="rect" title=" " alt="" coords="3050,27,3193,134"/>
<area shape="rect" title=" " alt="" coords="3217,27,3377,134"/>
<area shape="rect" title=" " alt="" coords="3341,490,3459,567"/>
<area shape="rect" title=" " alt="" coords="3483,483,3698,575"/>
<area shape="rect" title=" " alt="" coords="3723,490,3779,567"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abf28fe02756871081ceea8b8aa40a449"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#abf28fe02756871081ceea8b8aa40a449">CARMAWorldModel</a> ()=default</td></tr>
<tr class="memdesc:abf28fe02756871081ceea8b8aa40a449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classcarma__wm_1_1CARMAWorldModel.html#abf28fe02756871081ceea8b8aa40a449">More...</a><br /></td></tr>
<tr class="separator:abf28fe02756871081ceea8b8aa40a449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c325594d148d834fe5d7e11eaa23d7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a4c325594d148d834fe5d7e11eaa23d7b">~CARMAWorldModel</a> ()=default</td></tr>
<tr class="memdesc:a4c325594d148d834fe5d7e11eaa23d7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor as required by interface.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a4c325594d148d834fe5d7e11eaa23d7b">More...</a><br /></td></tr>
<tr class="separator:a4c325594d148d834fe5d7e11eaa23d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe3b961294db12603fe8eb5e7d2ea70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a5fe3b961294db12603fe8eb5e7d2ea70">setMap</a> (lanelet::LaneletMapPtr map, size_t map_version=0, <a class="el" href="classbool.html">bool</a> recompute_routing_graph=true)</td></tr>
<tr class="memdesc:a5fe3b961294db12603fe8eb5e7d2ea70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current map.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a5fe3b961294db12603fe8eb5e7d2ea70">More...</a><br /></td></tr>
<tr class="separator:a5fe3b961294db12603fe8eb5e7d2ea70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c42204d5a7de0cbd8e713ce49aded7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a6c42204d5a7de0cbd8e713ce49aded7f">setRoutingGraph</a> (<a class="el" href="namespacecarma__wm.html#a23411d3d299da623ec379efbc1a5b14a">LaneletRoutingGraphPtr</a> graph)</td></tr>
<tr class="memdesc:a6c42204d5a7de0cbd8e713ce49aded7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the routing graph for the participant type. This function may serve as an optimization to recomputing the routing graph when it is already available.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a6c42204d5a7de0cbd8e713ce49aded7f">More...</a><br /></td></tr>
<tr class="separator:a6c42204d5a7de0cbd8e713ce49aded7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d9510c892eb9f19f462e0576317a69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69">setRoute</a> (<a class="el" href="namespacecarma__wm.html#ae21cba9eaf353a58738fc2c1773c5ffa">LaneletRoutePtr</a> route)</td></tr>
<tr class="memdesc:ad4d9510c892eb9f19f462e0576317a69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current route. This route must match the current map for this class to function properly.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69">More...</a><br /></td></tr>
<tr class="separator:ad4d9510c892eb9f19f462e0576317a69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0707c34b5e4278d809a2a5a53fe456bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a0707c34b5e4278d809a2a5a53fe456bb">setTrafficLightIds</a> (<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> id, lanelet::Id lanelet_id)</td></tr>
<tr class="memdesc:a0707c34b5e4278d809a2a5a53fe456bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the id mapping between intersection/signal group and lanelet::Id for traffic lights in the map.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a0707c34b5e4278d809a2a5a53fe456bb">More...</a><br /></td></tr>
<tr class="separator:a0707c34b5e4278d809a2a5a53fe456bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2440a153a52460b92cff4017407dcbb"><td class="memItemLeft" align="right" valign="top">lanelet::LaneletMapPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab2440a153a52460b92cff4017407dcbb">getMutableMap</a> () const</td></tr>
<tr class="memdesc:ab2440a153a52460b92cff4017407dcbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a mutable version of the current map.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ab2440a153a52460b92cff4017407dcbb">More...</a><br /></td></tr>
<tr class="separator:ab2440a153a52460b92cff4017407dcbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d136b72adf2a85ffd8c2698711673e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ad9d136b72adf2a85ffd8c2698711673e">setRoadwayObjects</a> (const std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; &amp;rw_objs)</td></tr>
<tr class="memdesc:ad9d136b72adf2a85ffd8c2698711673e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update internal records of roadway objects. These objects MUST be guaranteed to be on the road.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ad9d136b72adf2a85ffd8c2698711673e">More...</a><br /></td></tr>
<tr class="separator:ad9d136b72adf2a85ffd8c2698711673e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee7c99de43cbc55ecc6d5fb7a6ac8c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#abee7c99de43cbc55ecc6d5fb7a6ac8c4">processSpatFromMsg</a> (const carma_v2x_msgs::msg::SPAT &amp;spat_msg, <a class="el" href="classbool.html">bool</a> use_sim_time=false)</td></tr>
<tr class="memdesc:abee7c99de43cbc55ecc6d5fb7a6ac8c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">processSpatFromMsg update map's traffic light states with SPAT msg  <a href="classcarma__wm_1_1CARMAWorldModel.html#abee7c99de43cbc55ecc6d5fb7a6ac8c4">More...</a><br /></td></tr>
<tr class="separator:abee7c99de43cbc55ecc6d5fb7a6ac8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a13a3b4f0599ad702745e559619965f"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f">getNearestObjInLane</a> (const lanelet::BasicPoint2d &amp;object_center, const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;section=<a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>) const</td></tr>
<tr class="memdesc:a5a13a3b4f0599ad702745e559619965f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane. Gets Downtrack distance to AND copy of the closest object on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f">More...</a><br /></td></tr>
<tr class="separator:a5a13a3b4f0599ad702745e559619965f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9dbca253d5b1ac3d65c6f4c4d4e134"><td class="memItemLeft" align="right" valign="top">boost::posix_time::ptime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134">min_end_time_converter_minute_of_year</a> (boost::posix_time::ptime min_end_time, <a class="el" href="classbool.html">bool</a> moy_exists, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> moy=0, <a class="el" href="classbool.html">bool</a> is_simulation=false)</td></tr>
<tr class="memdesc:abf9dbca253d5b1ac3d65c6f4c4d4e134"><td class="mdescLeft">&#160;</td><td class="mdescRight">update minimum end time to account for minute of the year  <a href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134">More...</a><br /></td></tr>
<tr class="separator:abf9dbca253d5b1ac3d65c6f4c4d4e134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b8724211cdcce8e28ca16ca83e5ec92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a4b8724211cdcce8e28ca16ca83e5ec92">setConfigSpeedLimit</a> (double config_lim)</td></tr>
<tr class="separator:a4b8724211cdcce8e28ca16ca83e5ec92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ac7e19c2edeff50638ace0aedb94e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a43ac7e19c2edeff50638ace0aedb94e6">setVehicleParticipationType</a> (const std::string &amp;participant)</td></tr>
<tr class="memdesc:a43ac7e19c2edeff50638ace0aedb94e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set vehicle participation type.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a43ac7e19c2edeff50638ace0aedb94e6">More...</a><br /></td></tr>
<tr class="separator:a43ac7e19c2edeff50638ace0aedb94e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fbae2ed5d0dd0ad2fe8a69c9b65ba75"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a8fbae2ed5d0dd0ad2fe8a69c9b65ba75">getVehicleParticipationType</a> ()</td></tr>
<tr class="memdesc:a8fbae2ed5d0dd0ad2fe8a69c9b65ba75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get vehicle participation type.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a8fbae2ed5d0dd0ad2fe8a69c9b65ba75">More...</a><br /></td></tr>
<tr class="separator:a8fbae2ed5d0dd0ad2fe8a69c9b65ba75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d69105950322b5a8d09f1cefb099459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a7d69105950322b5a8d09f1cefb099459">setRouteEndPoint</a> (const lanelet::BasicPoint3d &amp;end_point)</td></tr>
<tr class="memdesc:a7d69105950322b5a8d09f1cefb099459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set endpoint of the route.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a7d69105950322b5a8d09f1cefb099459">More...</a><br /></td></tr>
<tr class="separator:a7d69105950322b5a8d09f1cefb099459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a790185986312133fea831ba82200ac65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a790185986312133fea831ba82200ac65">setRouteName</a> (const std::string &amp;route_name)</td></tr>
<tr class="memdesc:a790185986312133fea831ba82200ac65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the name of the route.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a790185986312133fea831ba82200ac65">More...</a><br /></td></tr>
<tr class="separator:a790185986312133fea831ba82200ac65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8f89b9bec31f780a7ad1b9b5f82b31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a9a8f89b9bec31f780a7ad1b9b5f82b31">setRos1Clock</a> (const rclcpp::Time &amp;time_now)</td></tr>
<tr class="memdesc:a9a8f89b9bec31f780a7ad1b9b5f82b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set current Ros1 clock (only used in simulation runs)  <a href="classcarma__wm_1_1CARMAWorldModel.html#a9a8f89b9bec31f780a7ad1b9b5f82b31">More...</a><br /></td></tr>
<tr class="separator:a9a8f89b9bec31f780a7ad1b9b5f82b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c64cfd0308ca0db427f6b2a63de0f6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a7c64cfd0308ca0db427f6b2a63de0f6b">setSimulationClock</a> (const rclcpp::Time &amp;time_now)</td></tr>
<tr class="memdesc:a7c64cfd0308ca0db427f6b2a63de0f6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set simulation clock clock (only used in simulation runs)  <a href="classcarma__wm_1_1CARMAWorldModel.html#a7c64cfd0308ca0db427f6b2a63de0f6b">More...</a><br /></td></tr>
<tr class="separator:a7c64cfd0308ca0db427f6b2a63de0f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3beafa813c6efd889c0e1eaabdf0a6f8"><td class="memItemLeft" align="right" valign="top">lanelet::Id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a3beafa813c6efd889c0e1eaabdf0a6f8">getTrafficSignalId</a> (<a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> intersection_id, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> signal_id)</td></tr>
<tr class="memdesc:a3beafa813c6efd889c0e1eaabdf0a6f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper for traffic signal Id  <a href="classcarma__wm_1_1CARMAWorldModel.html#a3beafa813c6efd889c0e1eaabdf0a6f8">More...</a><br /></td></tr>
<tr class="separator:a3beafa813c6efd889c0e1eaabdf0a6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65df34058ada8f5a64a7abd1a6e2afae"><td class="memItemLeft" align="right" valign="top">lanelet::CarmaTrafficSignalPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a65df34058ada8f5a64a7abd1a6e2afae">getTrafficSignal</a> (const lanelet::Id &amp;id) const</td></tr>
<tr class="memdesc:a65df34058ada8f5a64a7abd1a6e2afae"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper for getting traffic signal with given lanelet::Id  <a href="classcarma__wm_1_1CARMAWorldModel.html#a65df34058ada8f5a64a7abd1a6e2afae">More...</a><br /></td></tr>
<tr class="separator:a65df34058ada8f5a64a7abd1a6e2afae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d03a952aeaca737d7dbe9e046d5fb53"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::Lanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a2d03a952aeaca737d7dbe9e046d5fb53">getLaneletsFromPoint</a> (const lanelet::BasicPoint2d &amp;point, const unsigned <a class="el" href="classint.html">int</a> n)</td></tr>
<tr class="memdesc:a2d03a952aeaca737d7dbe9e046d5fb53"><td class="mdescLeft">&#160;</td><td class="mdescRight">(non-const version) Gets the underlying lanelet, given the cartesian point on the map  <a href="classcarma__wm_1_1CARMAWorldModel.html#a2d03a952aeaca737d7dbe9e046d5fb53">More...</a><br /></td></tr>
<tr class="separator:a2d03a952aeaca737d7dbe9e046d5fb53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab869be2415c15ec3b50f9070961434f6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::Lanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab869be2415c15ec3b50f9070961434f6">nonConnectedAdjacentLeft</a> (const lanelet::BasicPoint2d &amp;input_point, const unsigned <a class="el" href="classint.html">int</a> n=10)</td></tr>
<tr class="memdesc:ab869be2415c15ec3b50f9070961434f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">(non-const version) Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This function is intended to find "adjacentLeft lanelets" that doesn't share points between lanelets where adjacentLeft of lanelet library fails  <a href="classcarma__wm_1_1CARMAWorldModel.html#ab869be2415c15ec3b50f9070961434f6">More...</a><br /></td></tr>
<tr class="separator:ab869be2415c15ec3b50f9070961434f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e3077b7673f2f92fd71eeea955a597"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a> (const lanelet::ConstArea &amp;area) const override</td></tr>
<tr class="memdesc:a18e3077b7673f2f92fd71eeea955a597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pair of <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided area relative to the current route. The distance is based on the Area vertex with the smallest and largest downtrack distance This method overload is the most expensive of the routeTrackPos methods.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">More...</a><br /></td></tr>
<tr class="separator:a18e3077b7673f2f92fd71eeea955a597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fbaae6edda48602621a891d5e029e8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a9fbaae6edda48602621a891d5e029e8a">routeTrackPos</a> (const lanelet::ConstLanelet &amp;lanelet) const override</td></tr>
<tr class="memdesc:a9fbaae6edda48602621a891d5e029e8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided lanelet relative to the current route. The distance is based on the first point in the lanelet centerline.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a9fbaae6edda48602621a891d5e029e8a">More...</a><br /></td></tr>
<tr class="separator:a9fbaae6edda48602621a891d5e029e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561bd30d0274bb605a7b7dd54b16b037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a561bd30d0274bb605a7b7dd54b16b037">routeTrackPos</a> (const lanelet::BasicPoint2d &amp;point) const override</td></tr>
<tr class="memdesc:a561bd30d0274bb605a7b7dd54b16b037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided point relative to the current route.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a561bd30d0274bb605a7b7dd54b16b037">More...</a><br /></td></tr>
<tr class="separator:a561bd30d0274bb605a7b7dd54b16b037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ed05d036943a7bf86d002f8d9ece0b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a94ed05d036943a7bf86d002f8d9ece0b">getLaneletsBetween</a> (double start, double end, <a class="el" href="classbool.html">bool</a> shortest_path_only=false, <a class="el" href="classbool.html">bool</a> bounds_inclusive=true) const override</td></tr>
<tr class="memdesc:a94ed05d036943a7bf86d002f8d9ece0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of lanelets which are part of the route and whose downtrack bounds exist within the provided start and end distances.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a94ed05d036943a7bf86d002f8d9ece0b">More...</a><br /></td></tr>
<tr class="separator:a94ed05d036943a7bf86d002f8d9ece0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af091e77668f082aaafea367836118dc9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::BasicPoint2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#af091e77668f082aaafea367836118dc9">sampleRoutePoints</a> (double start_downtrack, double end_downtrack, double step_size) const override</td></tr>
<tr class="memdesc:af091e77668f082aaafea367836118dc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples the route centerline between the provided downtracks with the provided step size. At lane changes the points should exhibit a discontinuous jump at the end of the initial lanelet to the end of the lane change lanelet as expected by the route definition. Returned points are always inclusive of provided bounds, so the last step might be less than step_size.  <a href="classcarma__wm_1_1CARMAWorldModel.html#af091e77668f082aaafea367836118dc9">More...</a><br /></td></tr>
<tr class="separator:af091e77668f082aaafea367836118dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7bf1856cd6cd7dbf1e262d378c6087"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; lanelet::BasicPoint2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">pointFromRouteTrackPos</a> (const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;route_pos) const override</td></tr>
<tr class="memdesc:a1e7bf1856cd6cd7dbf1e262d378c6087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a route track position into a map frame cartesian point.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">More...</a><br /></td></tr>
<tr class="separator:a1e7bf1856cd6cd7dbf1e262d378c6087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a40e4c8b3107914d61fb8f8064c842d"><td class="memItemLeft" align="right" valign="top">lanelet::LaneletMapConstPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d">getMap</a> () const override</td></tr>
<tr class="memdesc:a5a40e4c8b3107914d61fb8f8064c842d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the current map. If the underlying map has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d">More...</a><br /></td></tr>
<tr class="separator:a5a40e4c8b3107914d61fb8f8064c842d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66c85b8e37dbce1a90e88cc59bd302a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecarma__wm.html#a5fd066f918b870bd4c2d19a4acbd6247">LaneletRouteConstPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a66c85b8e37dbce1a90e88cc59bd302a3">getRoute</a> () const override</td></tr>
<tr class="memdesc:a66c85b8e37dbce1a90e88cc59bd302a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the current route. If the underlying route has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a66c85b8e37dbce1a90e88cc59bd302a3">More...</a><br /></td></tr>
<tr class="separator:a66c85b8e37dbce1a90e88cc59bd302a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9d046bb42aa65aef6acc32734faff8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#afd9d046bb42aa65aef6acc32734faff8">getRouteName</a> () const override</td></tr>
<tr class="memdesc:afd9d046bb42aa65aef6acc32734faff8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current route name.  <a href="classcarma__wm_1_1CARMAWorldModel.html#afd9d046bb42aa65aef6acc32734faff8">More...</a><br /></td></tr>
<tr class="separator:afd9d046bb42aa65aef6acc32734faff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4df78110aa7dd6644ecbe3e5a69eb29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">getRouteEndTrackPos</a> () const override</td></tr>
<tr class="memdesc:ab4df78110aa7dd6644ecbe3e5a69eb29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get trackpos of the end of route point relative to the route.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">More...</a><br /></td></tr>
<tr class="separator:ab4df78110aa7dd6644ecbe3e5a69eb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ab77fa0c1aed586c8ba0a68335e6c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecarma__wm.html#adf411948c7e36aa0fb3071195e103015">LaneletRoutingGraphConstPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ad5ab77fa0c1aed586c8ba0a68335e6c6">getMapRoutingGraph</a> () const override</td></tr>
<tr class="memdesc:ad5ab77fa0c1aed586c8ba0a68335e6c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the routing graph for the current map. If the underlying map has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ad5ab77fa0c1aed586c8ba0a68335e6c6">More...</a><br /></td></tr>
<tr class="separator:ad5ab77fa0c1aed586c8ba0a68335e6c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613afbb59e383290e001276decdd9836"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a613afbb59e383290e001276decdd9836">getTrafficRules</a> (const std::string &amp;participant) const override</td></tr>
<tr class="memdesc:a613afbb59e383290e001276decdd9836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the traffic rules object used internally by the world model and considered the carma system default.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a613afbb59e383290e001276decdd9836">More...</a><br /></td></tr>
<tr class="separator:a613afbb59e383290e001276decdd9836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d75cb8cde721072cc7f69edd0ececb6"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">getTrafficRules</a> () const override</td></tr>
<tr class="memdesc:a6d75cb8cde721072cc7f69edd0ececb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Traffic Rules object.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">More...</a><br /></td></tr>
<tr class="separator:a6d75cb8cde721072cc7f69edd0ececb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55700e04e2eb0fef627e965c972913f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ae55700e04e2eb0fef627e965c972913f">getRoadwayObjects</a> () const override</td></tr>
<tr class="memdesc:ae55700e04e2eb0fef627e965c972913f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get most recent roadway objects - all objects on the road detected by perception stack.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ae55700e04e2eb0fef627e965c972913f">More...</a><br /></td></tr>
<tr class="separator:ae55700e04e2eb0fef627e965c972913f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b8c922c7524c769f96a57b91f6a6bd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd">getInLaneObjects</a> (const lanelet::ConstLanelet &amp;lanelet, const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;section=<a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>) const override</td></tr>
<tr class="memdesc:a19b8c922c7524c769f96a57b91f6a6bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all roadway objects currently in the same lane as the given lanelet.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd">More...</a><br /></td></tr>
<tr class="separator:a19b8c922c7524c769f96a57b91f6a6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347bdceaab5df16ff4a676a733c32808"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; lanelet::Lanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808">getIntersectingLanelet</a> (const carma_perception_msgs::msg::ExternalObject &amp;object) const override</td></tr>
<tr class="memdesc:a347bdceaab5df16ff4a676a733c32808"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the a lanelet the object is currently on determined by its position on the semantic map. If it's across multiple lanelets, get the closest one.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808">More...</a><br /></td></tr>
<tr class="separator:a347bdceaab5df16ff4a676a733c32808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef70965ad3260671c52a1985bb2e6ce1"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1">toRoadwayObstacle</a> (const carma_perception_msgs::msg::ExternalObject &amp;object) const override</td></tr>
<tr class="memdesc:aef70965ad3260671c52a1985bb2e6ce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map. Can also be used to determine if the object is on the roadway.  <a href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1">More...</a><br /></td></tr>
<tr class="separator:aef70965ad3260671c52a1985bb2e6ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a131c9d5adca779c9efd7601f1dcfef5b"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a131c9d5adca779c9efd7601f1dcfef5b">distToNearestObjInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const override</td></tr>
<tr class="memdesc:a131c9d5adca779c9efd7601f1dcfef5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Cartesian distance to the closest object on the same lane as the given point.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a131c9d5adca779c9efd7601f1dcfef5b">More...</a><br /></td></tr>
<tr class="separator:a131c9d5adca779c9efd7601f1dcfef5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbee9dff34ee62ac507d5fc39bcb2e10"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10">nearestObjectAheadInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const override</td></tr>
<tr class="memdesc:afbee9dff34ee62ac507d5fc39bcb2e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane.  <a href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10">More...</a><br /></td></tr>
<tr class="separator:afbee9dff34ee62ac507d5fc39bcb2e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa291cd8ca71835c0720dc853031be300"><td class="memItemLeft" align="right" valign="top">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300">nearestObjectBehindInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const override</td></tr>
<tr class="memdesc:aa291cd8ca71835c0720dc853031be300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane.  <a href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300">More...</a><br /></td></tr>
<tr class="separator:aa291cd8ca71835c0720dc853031be300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869b918893af283afe09b1adb52c69a7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7">getLane</a> (const lanelet::ConstLanelet &amp;lanelet, const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;section=<a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>) const override</td></tr>
<tr class="memdesc:a869b918893af283afe09b1adb52c69a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the specified lane section achievable without lane change, sorted from the start, that includes the given lanelet.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7">More...</a><br /></td></tr>
<tr class="separator:a869b918893af283afe09b1adb52c69a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad92f6809a910fbea75fed45b2c606d04"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ad92f6809a910fbea75fed45b2c606d04">getMapVersion</a> () const override</td></tr>
<tr class="memdesc:ad92f6809a910fbea75fed45b2c606d04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a monotonically increasing version number which represents the version stamp of the map geometry data It is possible for the non-geometric aspects of the map to change without this value increasing.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ad92f6809a910fbea75fed45b2c606d04">More...</a><br /></td></tr>
<tr class="separator:ad92f6809a910fbea75fed45b2c606d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4906974d4b81497534e01b50c2edaef2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a4906974d4b81497534e01b50c2edaef2">getLaneletsFromPoint</a> (const lanelet::BasicPoint2d &amp;point, const unsigned <a class="el" href="classint.html">int</a> n=10) const override</td></tr>
<tr class="memdesc:a4906974d4b81497534e01b50c2edaef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the underlying lanelet, given the cartesian point on the map.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a4906974d4b81497534e01b50c2edaef2">More...</a><br /></td></tr>
<tr class="separator:a4906974d4b81497534e01b50c2edaef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3760e63d093f5422dcf3a5a7b3b2e7ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a3760e63d093f5422dcf3a5a7b3b2e7ae">nonConnectedAdjacentLeft</a> (const lanelet::BasicPoint2d &amp;input_point, const unsigned <a class="el" href="classint.html">int</a> n=10) const override</td></tr>
<tr class="memdesc:a3760e63d093f5422dcf3a5a7b3b2e7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This function is intended to find "adjacentLeft lanelets" that doesn't share points between lanelets where adjacentLeft of lanelet library fails.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a3760e63d093f5422dcf3a5a7b3b2e7ae">More...</a><br /></td></tr>
<tr class="separator:a3760e63d093f5422dcf3a5a7b3b2e7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc595705809b40e5eff0355bc296a3ad"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#adc595705809b40e5eff0355bc296a3ad">getSignalsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const override</td></tr>
<tr class="memdesc:adc595705809b40e5eff0355bc296a3ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of traffic lights/intersections along the current route. <br  />
 The traffic lights along a route and the next traffic light ahead of us on the route specifically, so a sorted list (by downtrack distance) of traffic lights on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1CARMAWorldModel.html#adc595705809b40e5eff0355bc296a3ad">More...</a><br /></td></tr>
<tr class="separator:adc595705809b40e5eff0355bc296a3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39dfa00a1066900c54ddae987d19b2d8"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::BusStopRulePtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a39dfa00a1066900c54ddae987d19b2d8">getBusStopsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const override</td></tr>
<tr class="memdesc:a39dfa00a1066900c54ddae987d19b2d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of bus stop along the current route. <br  />
 The bus stop along a route and the next bus stop ahead of us on the route specifically, so a sorted list (by downtrack distance) of bus stop on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a39dfa00a1066900c54ddae987d19b2d8">More...</a><br /></td></tr>
<tr class="separator:a39dfa00a1066900c54ddae987d19b2d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c46116ef711d1e03298f9efd57f2bdd"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; std::pair&lt; lanelet::ConstLanelet, lanelet::ConstLanelet &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a2c46116ef711d1e03298f9efd57f2bdd">getEntryExitOfSignalAlongRoute</a> (const lanelet::CarmaTrafficSignalPtr &amp;traffic_signal) const override</td></tr>
<tr class="memdesc:a2c46116ef711d1e03298f9efd57f2bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the entry and exit lanelet of the signal along the SHORTEST PATH of route. This is useful if traffic_signal controls both directions in an intersection for example.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a2c46116ef711d1e03298f9efd57f2bdd">More...</a><br /></td></tr>
<tr class="separator:a2c46116ef711d1e03298f9efd57f2bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3b3d0bac4477eeff7672868a582398c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::shared_ptr&lt; lanelet::AllWayStop &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ac3b3d0bac4477eeff7672868a582398c">getIntersectionsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const override</td></tr>
<tr class="memdesc:ac3b3d0bac4477eeff7672868a582398c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of all way stop intersections along the current route. <br  />
 The tall way stop intersections along a route and the next all way stop intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of all way stop intersections on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1CARMAWorldModel.html#ac3b3d0bac4477eeff7672868a582398c">More...</a><br /></td></tr>
<tr class="separator:ac3b3d0bac4477eeff7672868a582398c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75fa37311df1df558e148cdfa914eff"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::SignalizedIntersectionPtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#af75fa37311df1df558e148cdfa914eff">getSignalizedIntersectionsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const</td></tr>
<tr class="memdesc:af75fa37311df1df558e148cdfa914eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of signalized intersections along the current route. <br  />
 The signalized intersections along a route and the next signalized intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of signalized intersections on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1CARMAWorldModel.html#af75fa37311df1df558e148cdfa914eff">More...</a><br /></td></tr>
<tr class="separator:af75fa37311df1df558e148cdfa914eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classcarma__wm_1_1WorldModel"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classcarma__wm_1_1WorldModel')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classcarma__wm_1_1WorldModel.html">carma_wm::WorldModel</a></td></tr>
<tr class="memitem:a9566138254e9c7d7a94c197b677c5bb7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a9566138254e9c7d7a94c197b677c5bb7">~WorldModel</a> ()</td></tr>
<tr class="memdesc:a9566138254e9c7d7a94c197b677c5bb7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor to ensure delete safety for pointers to implementing classes.  <a href="classcarma__wm_1_1WorldModel.html#a9566138254e9c7d7a94c197b677c5bb7">More...</a><br /></td></tr>
<tr class="separator:a9566138254e9c7d7a94c197b677c5bb7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936ea0fab63aaa5e1e9f423ff7454bd2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::pair&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a936ea0fab63aaa5e1e9f423ff7454bd2">routeTrackPos</a> (const lanelet::ConstArea &amp;area) const =0</td></tr>
<tr class="memdesc:a936ea0fab63aaa5e1e9f423ff7454bd2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pair of <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided area relative to the current route. The distance is based on the Area vertex with the smallest and largest downtrack distance This method overload is the most expensive of the routeTrackPos methods.  <a href="classcarma__wm_1_1WorldModel.html#a936ea0fab63aaa5e1e9f423ff7454bd2">More...</a><br /></td></tr>
<tr class="separator:a936ea0fab63aaa5e1e9f423ff7454bd2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657b2863beca38f639067767089ee5d9 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a657b2863beca38f639067767089ee5d9">routeTrackPos</a> (const lanelet::ConstLanelet &amp;lanelet) const =0</td></tr>
<tr class="memdesc:a657b2863beca38f639067767089ee5d9 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided lanelet relative to the current route. The distance is based on the first point in the lanelet centerline.  <a href="classcarma__wm_1_1WorldModel.html#a657b2863beca38f639067767089ee5d9">More...</a><br /></td></tr>
<tr class="separator:a657b2863beca38f639067767089ee5d9 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396b4e2d343c40b8a0ffe804a6427c82 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a396b4e2d343c40b8a0ffe804a6427c82">routeTrackPos</a> (const lanelet::BasicPoint2d &amp;point) const =0</td></tr>
<tr class="memdesc:a396b4e2d343c40b8a0ffe804a6427c82 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided point relative to the current route.  <a href="classcarma__wm_1_1WorldModel.html#a396b4e2d343c40b8a0ffe804a6427c82">More...</a><br /></td></tr>
<tr class="separator:a396b4e2d343c40b8a0ffe804a6427c82 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab367c1592ad5e351eae540f87c16ca8d inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#ab367c1592ad5e351eae540f87c16ca8d">getLaneletsBetween</a> (double start, double end, <a class="el" href="classbool.html">bool</a> shortest_path_only=false, <a class="el" href="classbool.html">bool</a> bounds_inclusive=true) const =0</td></tr>
<tr class="memdesc:ab367c1592ad5e351eae540f87c16ca8d inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of lanelets which are part of the route and whose downtrack bounds exist within the provided start and end distances.  <a href="classcarma__wm_1_1WorldModel.html#ab367c1592ad5e351eae540f87c16ca8d">More...</a><br /></td></tr>
<tr class="separator:ab367c1592ad5e351eae540f87c16ca8d inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b59bf3f00a536d03113db348f10b3e6 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::BasicPoint2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a2b59bf3f00a536d03113db348f10b3e6">sampleRoutePoints</a> (double start_downtrack, double end_downtrack, double step_size) const =0</td></tr>
<tr class="memdesc:a2b59bf3f00a536d03113db348f10b3e6 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples the route centerline between the provided downtracks with the provided step size. At lane changes the points should exhibit a discontinuous jump at the end of the initial lanelet to the end of the lane change lanelet as expected by the route definition. Returned points are always inclusive of provided bounds, so the last step might be less than step_size.  <a href="classcarma__wm_1_1WorldModel.html#a2b59bf3f00a536d03113db348f10b3e6">More...</a><br /></td></tr>
<tr class="separator:a2b59bf3f00a536d03113db348f10b3e6 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9276d80f070d7d179cf2298a540f892 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual boost::optional&lt; lanelet::BasicPoint2d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#aa9276d80f070d7d179cf2298a540f892">pointFromRouteTrackPos</a> (const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;route_pos) const =0</td></tr>
<tr class="memdesc:aa9276d80f070d7d179cf2298a540f892 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a route track position into a map frame cartesian point.  <a href="classcarma__wm_1_1WorldModel.html#aa9276d80f070d7d179cf2298a540f892">More...</a><br /></td></tr>
<tr class="separator:aa9276d80f070d7d179cf2298a540f892 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58032e48c2812e5b2f9f07a603e58275 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::LaneletMapConstPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a58032e48c2812e5b2f9f07a603e58275">getMap</a> () const =0</td></tr>
<tr class="memdesc:a58032e48c2812e5b2f9f07a603e58275 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the current map. If the underlying map has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1WorldModel.html#a58032e48c2812e5b2f9f07a603e58275">More...</a><br /></td></tr>
<tr class="separator:a58032e48c2812e5b2f9f07a603e58275 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd26daaa181f1ed988f458e48bd00410 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacecarma__wm.html#a5fd066f918b870bd4c2d19a4acbd6247">LaneletRouteConstPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#afd26daaa181f1ed988f458e48bd00410">getRoute</a> () const =0</td></tr>
<tr class="memdesc:afd26daaa181f1ed988f458e48bd00410 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the current route. If the underlying route has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1WorldModel.html#afd26daaa181f1ed988f458e48bd00410">More...</a><br /></td></tr>
<tr class="separator:afd26daaa181f1ed988f458e48bd00410 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae469629371b4ba89ea5dfaa805cedcbb inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#ae469629371b4ba89ea5dfaa805cedcbb">getRouteName</a> () const =0</td></tr>
<tr class="memdesc:ae469629371b4ba89ea5dfaa805cedcbb inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current route name.  <a href="classcarma__wm_1_1WorldModel.html#ae469629371b4ba89ea5dfaa805cedcbb">More...</a><br /></td></tr>
<tr class="separator:ae469629371b4ba89ea5dfaa805cedcbb inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed4840920c0304929febbac3f58a703 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a4ed4840920c0304929febbac3f58a703">getRouteEndTrackPos</a> () const =0</td></tr>
<tr class="memdesc:a4ed4840920c0304929febbac3f58a703 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get trackpos of the end of route point relative to the route.  <a href="classcarma__wm_1_1WorldModel.html#a4ed4840920c0304929febbac3f58a703">More...</a><br /></td></tr>
<tr class="separator:a4ed4840920c0304929febbac3f58a703 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60083f6644af47bbec532fa48d1773e1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacecarma__wm.html#adf411948c7e36aa0fb3071195e103015">LaneletRoutingGraphConstPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a60083f6644af47bbec532fa48d1773e1">getMapRoutingGraph</a> () const =0</td></tr>
<tr class="memdesc:a60083f6644af47bbec532fa48d1773e1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the routing graph for the current map. If the underlying map has changed the pointer will also need to be reacquired.  <a href="classcarma__wm_1_1WorldModel.html#a60083f6644af47bbec532fa48d1773e1">More...</a><br /></td></tr>
<tr class="separator:a60083f6644af47bbec532fa48d1773e1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef29e9f714ae84de6e1c561d35242c2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#aaef29e9f714ae84de6e1c561d35242c2">getRoadwayObjects</a> () const =0</td></tr>
<tr class="memdesc:aaef29e9f714ae84de6e1c561d35242c2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get most recent roadway objects - all objects on the road detected by perception stack.  <a href="classcarma__wm_1_1WorldModel.html#aaef29e9f714ae84de6e1c561d35242c2">More...</a><br /></td></tr>
<tr class="separator:aaef29e9f714ae84de6e1c561d35242c2 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32c582eb5b2c0b3931f5de474897caa inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#af32c582eb5b2c0b3931f5de474897caa">getTrafficRules</a> (const std::string &amp;participant) const =0</td></tr>
<tr class="memdesc:af32c582eb5b2c0b3931f5de474897caa inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the traffic rules object used internally by the world model and considered the carma system default.  <a href="classcarma__wm_1_1WorldModel.html#af32c582eb5b2c0b3931f5de474897caa">More...</a><br /></td></tr>
<tr class="separator:af32c582eb5b2c0b3931f5de474897caa inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e611ab5478ca1c5f1e1c2b367aa4e58 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a8e611ab5478ca1c5f1e1c2b367aa4e58">getTrafficRules</a> () const =0</td></tr>
<tr class="memdesc:a8e611ab5478ca1c5f1e1c2b367aa4e58 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Traffic Rules object.  <a href="classcarma__wm_1_1WorldModel.html#a8e611ab5478ca1c5f1e1c2b367aa4e58">More...</a><br /></td></tr>
<tr class="separator:a8e611ab5478ca1c5f1e1c2b367aa4e58 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a6fed1df2234ba9a9f274a6583c1d1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#aa6a6fed1df2234ba9a9f274a6583c1d1">toRoadwayObstacle</a> (const carma_perception_msgs::msg::ExternalObject &amp;object) const =0</td></tr>
<tr class="memdesc:aa6a6fed1df2234ba9a9f274a6583c1d1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map. Can also be used to determine if the object is on the roadway.  <a href="classcarma__wm_1_1WorldModel.html#aa6a6fed1df2234ba9a9f274a6583c1d1">More...</a><br /></td></tr>
<tr class="separator:aa6a6fed1df2234ba9a9f274a6583c1d1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3239fded8c5085c5e533c928512c4099 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; lanelet::Lanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a3239fded8c5085c5e533c928512c4099">getIntersectingLanelet</a> (const carma_perception_msgs::msg::ExternalObject &amp;object) const =0</td></tr>
<tr class="memdesc:a3239fded8c5085c5e533c928512c4099 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the a lanelet the object is currently on determined by its position on the semantic map. If it's across multiple lanelets, get the closest one.  <a href="classcarma__wm_1_1WorldModel.html#a3239fded8c5085c5e533c928512c4099">More...</a><br /></td></tr>
<tr class="separator:a3239fded8c5085c5e533c928512c4099 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f4c2be71fca378db3a09483c829959 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::BusStopRulePtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#af7f4c2be71fca378db3a09483c829959">getBusStopsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const =0</td></tr>
<tr class="memdesc:af7f4c2be71fca378db3a09483c829959 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of bus stop along the current route. <br  />
 The bus stop along a route and the next bus stop ahead of us on the route specifically, so a sorted list (by downtrack distance) of bus stop on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1WorldModel.html#af7f4c2be71fca378db3a09483c829959">More...</a><br /></td></tr>
<tr class="separator:af7f4c2be71fca378db3a09483c829959 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fcc52a19e42a4a1b63bb96add8ad028 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a8fcc52a19e42a4a1b63bb96add8ad028">getInLaneObjects</a> (const lanelet::ConstLanelet &amp;lanelet, const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;section=<a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>) const =0</td></tr>
<tr class="memdesc:a8fcc52a19e42a4a1b63bb96add8ad028 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all roadway objects currently in the same lane as the given lanelet.  <a href="classcarma__wm_1_1WorldModel.html#a8fcc52a19e42a4a1b63bb96add8ad028">More...</a><br /></td></tr>
<tr class="separator:a8fcc52a19e42a4a1b63bb96add8ad028 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab43abbec54bfaff13206ef3d63b3e526 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#ab43abbec54bfaff13206ef3d63b3e526">distToNearestObjInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const =0</td></tr>
<tr class="memdesc:ab43abbec54bfaff13206ef3d63b3e526 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Cartesian distance to the closest object on the same lane as the given point.  <a href="classcarma__wm_1_1WorldModel.html#ab43abbec54bfaff13206ef3d63b3e526">More...</a><br /></td></tr>
<tr class="separator:ab43abbec54bfaff13206ef3d63b3e526 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925171b9970243e2d996236d768e373f inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a925171b9970243e2d996236d768e373f">nearestObjectAheadInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const =0</td></tr>
<tr class="memdesc:a925171b9970243e2d996236d768e373f inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane.  <a href="classcarma__wm_1_1WorldModel.html#a925171b9970243e2d996236d768e373f">More...</a><br /></td></tr>
<tr class="separator:a925171b9970243e2d996236d768e373f inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4304ca2d37c2975643176dca7f439b inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a7c4304ca2d37c2975643176dca7f439b">nearestObjectBehindInLane</a> (const lanelet::BasicPoint2d &amp;object_center) const =0</td></tr>
<tr class="memdesc:a7c4304ca2d37c2975643176dca7f439b inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane.  <a href="classcarma__wm_1_1WorldModel.html#a7c4304ca2d37c2975643176dca7f439b">More...</a><br /></td></tr>
<tr class="separator:a7c4304ca2d37c2975643176dca7f439b inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f1e49fc1b4b6c26349ef8f81049dd7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a68f1e49fc1b4b6c26349ef8f81049dd7">getLane</a> (const lanelet::ConstLanelet &amp;lanelet, const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;section=<a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>) const =0</td></tr>
<tr class="memdesc:a68f1e49fc1b4b6c26349ef8f81049dd7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the specified lane section achievable without lane change, sorted from the start, that includes the given lanelet.  <a href="classcarma__wm_1_1WorldModel.html#a68f1e49fc1b4b6c26349ef8f81049dd7">More...</a><br /></td></tr>
<tr class="separator:a68f1e49fc1b4b6c26349ef8f81049dd7 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71ece013a582fe39495528030be68a7e inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a71ece013a582fe39495528030be68a7e">getMapVersion</a> () const =0</td></tr>
<tr class="memdesc:a71ece013a582fe39495528030be68a7e inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a monotonically increasing version number which represents the version stamp of the map geometry data It is possible for the non-geometric aspects of the map to change without this value increasing.  <a href="classcarma__wm_1_1WorldModel.html#a71ece013a582fe39495528030be68a7e">More...</a><br /></td></tr>
<tr class="separator:a71ece013a582fe39495528030be68a7e inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25572b44084a22d28b4052815ccfd76 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#ac25572b44084a22d28b4052815ccfd76">getLaneletsFromPoint</a> (const lanelet::BasicPoint2d &amp;point, const unsigned <a class="el" href="classint.html">int</a> n=10) const =0</td></tr>
<tr class="memdesc:ac25572b44084a22d28b4052815ccfd76 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the underlying lanelet, given the cartesian point on the map.  <a href="classcarma__wm_1_1WorldModel.html#ac25572b44084a22d28b4052815ccfd76">More...</a><br /></td></tr>
<tr class="separator:ac25572b44084a22d28b4052815ccfd76 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290dab5247a5ce7b9c65a43e6c576d96 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a290dab5247a5ce7b9c65a43e6c576d96">getSignalsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const =0</td></tr>
<tr class="memdesc:a290dab5247a5ce7b9c65a43e6c576d96 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of traffic lights/intersections along the current route. <br  />
 The traffic lights along a route and the next traffic light ahead of us on the route specifically, so a sorted list (by downtrack distance) of traffic lights on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1WorldModel.html#a290dab5247a5ce7b9c65a43e6c576d96">More...</a><br /></td></tr>
<tr class="separator:a290dab5247a5ce7b9c65a43e6c576d96 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b4d370140cce9e56f00f624e545dae inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual boost::optional&lt; std::pair&lt; lanelet::ConstLanelet, lanelet::ConstLanelet &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a20b4d370140cce9e56f00f624e545dae">getEntryExitOfSignalAlongRoute</a> (const lanelet::CarmaTrafficSignalPtr &amp;traffic_signal) const =0</td></tr>
<tr class="memdesc:a20b4d370140cce9e56f00f624e545dae inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the entry and exit lanelet of the signal along the SHORTEST PATH of route. This is useful if traffic_signal controls both directions in an intersection for example.  <a href="classcarma__wm_1_1WorldModel.html#a20b4d370140cce9e56f00f624e545dae">More...</a><br /></td></tr>
<tr class="separator:a20b4d370140cce9e56f00f624e545dae inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bf672c96bfd542e35f77e9de09ee0a inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::shared_ptr&lt; lanelet::AllWayStop &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#af0bf672c96bfd542e35f77e9de09ee0a">getIntersectionsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const =0</td></tr>
<tr class="memdesc:af0bf672c96bfd542e35f77e9de09ee0a inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of all way stop intersections along the current route. <br  />
 The tall way stop intersections along a route and the next all way stop intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of all way stop intersections on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1WorldModel.html#af0bf672c96bfd542e35f77e9de09ee0a">More...</a><br /></td></tr>
<tr class="separator:af0bf672c96bfd542e35f77e9de09ee0a inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f33d4dcec5dbbe140ce381c1844602 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::SignalizedIntersectionPtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a40f33d4dcec5dbbe140ce381c1844602">getSignalizedIntersectionsAlongRoute</a> (const lanelet::BasicPoint2d &amp;loc) const =0</td></tr>
<tr class="memdesc:a40f33d4dcec5dbbe140ce381c1844602 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of signalized intersections along the current route. <br  />
 The signalized intersections along a route and the next signalized intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of signalized intersections on the route ahead of us thus eliminating those behind the vehicle.  <a href="classcarma__wm_1_1WorldModel.html#a40f33d4dcec5dbbe140ce381c1844602">More...</a><br /></td></tr>
<tr class="separator:a40f33d4dcec5dbbe140ce381c1844602 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d51eda1757ddd29fb18e65f531db7c1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; lanelet::ConstLanelet &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1WorldModel.html#a4d51eda1757ddd29fb18e65f531db7c1">nonConnectedAdjacentLeft</a> (const lanelet::BasicPoint2d &amp;input_point, const unsigned <a class="el" href="classint.html">int</a> n=10) const =0</td></tr>
<tr class="memdesc:a4d51eda1757ddd29fb18e65f531db7c1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This function is intended to find "adjacentLeft lanelets" that doesn't share points between lanelets where adjacentLeft of lanelet library fails.  <a href="classcarma__wm_1_1WorldModel.html#a4d51eda1757ddd29fb18e65f531db7c1">More...</a><br /></td></tr>
<tr class="separator:a4d51eda1757ddd29fb18e65f531db7c1 inherit pub_methods_classcarma__wm_1_1WorldModel"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a787c5285a6c73566c11a09e108eeb1be"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, lanelet::Id &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a787c5285a6c73566c11a09e108eeb1be">traffic_light_ids_</a></td></tr>
<tr class="separator:a787c5285a6c73566c11a09e108eeb1be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26aab58d8e779dd198396c111c29eb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">carma_wm::SignalizedIntersectionManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a></td></tr>
<tr class="separator:ab26aab58d8e779dd198396c111c29eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6f924aa42ade5d323045fdad9b7ca3a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8">computeDowntrackReferenceLine</a> ()</td></tr>
<tr class="memdesc:a6f924aa42ade5d323045fdad9b7ca3a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to compute the geometry of the route downtrack/crosstrack reference line This function should generally only be called from inside the setRoute function as it uses member variables set in that function.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8">More...</a><br /></td></tr>
<tr class="separator:a6f924aa42ade5d323045fdad9b7ca3a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f25006ada239cea8226b7f36afc267e"><td class="memItemLeft" align="right" valign="top">lanelet::LineString3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e">copyConstructLineString</a> (const lanelet::ConstLineString3d &amp;line) const</td></tr>
<tr class="memdesc:a1f25006ada239cea8226b7f36afc267e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to perform a deep copy of a LineString and assign new ids to all the elements. Used during route centerline construction.  <a href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e">More...</a><br /></td></tr>
<tr class="separator:a1f25006ada239cea8226b7f36afc267e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa559413794368641911d969bd40daac4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#aa559413794368641911d969bd40daac4">config_speed_limit_</a></td></tr>
<tr class="separator:aa559413794368641911d969bd40daac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fec9f047a6a79e5271dc3547769c9ab"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a> = lanelet::Participants::Vehicle</td></tr>
<tr class="separator:a3fec9f047a6a79e5271dc3547769c9ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255353f016ca62c487b554b4ffcfbf40"><td class="memItemLeft" align="right" valign="top">std::optional&lt; rclcpp::Time &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a255353f016ca62c487b554b4ffcfbf40">ros1_clock_</a> = std::nullopt</td></tr>
<tr class="separator:a255353f016ca62c487b554b4ffcfbf40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768977187d806491ba0fc8f267f73a15"><td class="memItemLeft" align="right" valign="top">std::optional&lt; rclcpp::Time &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a768977187d806491ba0fc8f267f73a15">simulation_clock_</a> = std::nullopt</td></tr>
<tr class="separator:a768977187d806491ba0fc8f267f73a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52c727f61495307cf42a8c07af24555"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; lanelet::LaneletMap &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a></td></tr>
<tr class="separator:ac52c727f61495307cf42a8c07af24555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a690740a182ab45ac2232da7d1b5edff8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecarma__wm.html#ae21cba9eaf353a58738fc2c1773c5ffa">LaneletRoutePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a></td></tr>
<tr class="separator:a690740a182ab45ac2232da7d1b5edff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7602bf876d9e8defb3b47239789b34b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecarma__wm.html#a23411d3d299da623ec379efbc1a5b14a">LaneletRoutingGraphPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a></td></tr>
<tr class="separator:a7602bf876d9e8defb3b47239789b34b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f380415bf80871a93e50f91a63c1e55"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a6f380415bf80871a93e50f91a63c1e55">route_length_</a> = 0</td></tr>
<tr class="separator:a6f380415bf80871a93e50f91a63c1e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a638d41483eda68460147b65bf43d119c"><td class="memItemLeft" align="right" valign="top">lanelet::LaneletSubmapConstUPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a638d41483eda68460147b65bf43d119c">shortest_path_view_</a></td></tr>
<tr class="separator:a638d41483eda68460147b65bf43d119c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb594ec0caff8ca61fe84cbf7a0eee80"><td class="memItemLeft" align="right" valign="top">std::vector&lt; lanelet::LineString3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a></td></tr>
<tr class="separator:adb594ec0caff8ca61fe84cbf7a0eee80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02750a7d4960c730331976f6c75df7a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcarma__wm_1_1IndexedDistanceMap.html">IndexedDistanceMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a></td></tr>
<tr class="separator:a02750a7d4960c730331976f6c75df7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6"><td class="memItemLeft" align="right" valign="top">lanelet::LaneletMapUPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">shortest_path_filtered_centerline_view_</a></td></tr>
<tr class="separator:ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03335a60875a9cfe30efa4ca983f54ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a></td></tr>
<tr class="separator:a03335a60875a9cfe30efa4ca983f54ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa43a960c21ca5a8b82d4bb74a5377fd"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#aaa43a960c21ca5a8b82d4bb74a5377fd">map_version_</a> = 0</td></tr>
<tr class="separator:aaa43a960c21ca5a8b82d4bb74a5377fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c61e95776f7c1d84517fa83c725129"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ae7c61e95776f7c1d84517fa83c725129">route_name_</a></td></tr>
<tr class="separator:ae7c61e95776f7c1d84517fa83c725129"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:afa590ef709e46e6b569030ea71cb74f4"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#afa590ef709e46e6b569030ea71cb74f4">RED_LIGHT_DURATION</a> = 20.0</td></tr>
<tr class="separator:afa590ef709e46e6b569030ea71cb74f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ccc3564961689a86c66886aaf3de05"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a78ccc3564961689a86c66886aaf3de05">YELLOW_LIGHT_DURATION</a> = 3.0</td></tr>
<tr class="separator:a78ccc3564961689a86c66886aaf3de05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b998c568ec82bd1d522f1e13911d0b"><td class="memItemLeft" align="right" valign="top">static constexpr double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a54b998c568ec82bd1d522f1e13911d0b">GREEN_LIGHT_DURATION</a> = 20.0</td></tr>
<tr class="separator:a54b998c568ec82bd1d522f1e13911d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class which implements the <a class="el" href="classcarma__wm_1_1WorldModel.html" title="An interface which provides read access to the semantic map and route. This class is not thread safe....">WorldModel</a> interface. In addition this class provides write access to the world model. Write access is achieved through setters for the Map and Route and <a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#ab2440a153a52460b92cff4017407dcbb" title="Get a mutable version of the current map.">getMutableMap()</a>. NOTE: This class should NOT be used in runtime code by users and is exposed solely for use in unit tests where the <a class="el" href="classcarma__wm_1_1WMListener.html" title="Class which provies automated subscription and threading support for the world model.">WMListener</a> class cannot be instantiated. </p>
<p >Proper usage of this class dictates that the Map and Route object be kept in sync. For this reason normal <a class="el" href="classcarma__wm_1_1WorldModel.html" title="An interface which provides read access to the semantic map and route. This class is not thread safe....">WorldModel</a> users should not try to construct this class directly unless in unit tests.</p>
<p >NOTE: This class uses the CarmaUSTrafficRules class internally to interpret routes. So routes which are set on this model should use the <a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a613afbb59e383290e001276decdd9836" title="Get a pointer to the traffic rules object used internally by the world model and considered the carma...">getTrafficRules()</a> method to build using the correct rule set </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00048">48</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abf28fe02756871081ceea8b8aa40a449" name="abf28fe02756871081ceea8b8aa40a449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf28fe02756871081ceea8b8aa40a449">&#9670;&nbsp;</a></span>CARMAWorldModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::CARMAWorldModel::CARMAWorldModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<a id="a4c325594d148d834fe5d7e11eaa23d7b" name="a4c325594d148d834fe5d7e11eaa23d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c325594d148d834fe5d7e11eaa23d7b">&#9670;&nbsp;</a></span>~CARMAWorldModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">carma_wm::CARMAWorldModel::~CARMAWorldModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor as required by interface. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6f924aa42ade5d323045fdad9b7ca3a8" name="a6f924aa42ade5d323045fdad9b7ca3a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f924aa42ade5d323045fdad9b7ca3a8">&#9670;&nbsp;</a></span>computeDowntrackReferenceLine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::computeDowntrackReferenceLine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to compute the geometry of the route downtrack/crosstrack reference line This function should generally only be called from inside the setRoute function as it uses member variables set in that function. </p>
<p >Sets the shortest_path_centerlines_, shortest_path_centerlines_lengths_, and shortest_path_filtered_centerline_view_ member variables </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">675</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  676</span>  {</div>
<div class="line"><span class="lineno">  677</span>    IndexedDistanceMap distance_map;</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>    lanelet::routing::LaneletPath shortest_path = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath();</div>
<div class="line"><span class="lineno">  680</span>    <span class="comment">// Build shortest path routing graph</span></div>
<div class="line"><span class="lineno">  681</span>    <a class="code hl_typedef" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> traffic_rules = *(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">getTrafficRules</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a> ));</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  683</span>    lanelet::routing::RoutingGraphUPtr shortest_path_graph =</div>
<div class="line"><span class="lineno">  684</span>        lanelet::routing::RoutingGraph::build(*<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a638d41483eda68460147b65bf43d119c">shortest_path_view_</a>, *traffic_rules);</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>    std::vector&lt;lanelet::LineString3d&gt; lineStrings;  <span class="comment">// List of continuos line strings representing segments of the route</span></div>
<div class="line"><span class="lineno">  687</span>                                                    <span class="comment">// reference line</span></div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>    <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  690</span>    <span class="keywordtype">size_t</span> next_index = 0;</div>
<div class="line"><span class="lineno">  691</span>    <span class="comment">// Iterate over each lanelet in the shortest path this loop works by looking one lanelet ahead to detect lane changes</span></div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordflow">for</span> (lanelet::ConstLanelet ll : shortest_path)</div>
<div class="line"><span class="lineno">  693</span>    {</div>
<div class="line"><span class="lineno">  694</span>      next_index++;</div>
<div class="line"><span class="lineno">  695</span>      <span class="keywordflow">if</span> (first)</div>
<div class="line"><span class="lineno">  696</span>      {  <span class="comment">// For the first lanelet store its centerline and length</span></div>
<div class="line"><span class="lineno">  697</span>        lineStrings.push_back(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e">copyConstructLineString</a>(ll.centerline()));</div>
<div class="line"><span class="lineno">  698</span>        first = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  699</span>      }</div>
<div class="line"><span class="lineno">  700</span>      <span class="keywordflow">if</span> (next_index &lt; shortest_path.size())</div>
<div class="line"><span class="lineno">  701</span>      {  <span class="comment">// Check for remaining lanelets</span></div>
<div class="line"><span class="lineno">  702</span>        <span class="keyword">auto</span> nextLanelet = shortest_path[next_index];</div>
<div class="line"><span class="lineno">  703</span>        lanelet::LineString3d nextCenterline = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e">copyConstructLineString</a>(nextLanelet.centerline());</div>
<div class="line"><span class="lineno">  704</span>        <span class="keywordtype">size_t</span> connectionCount = shortest_path_graph-&gt;possiblePaths(ll, (<a class="code hl_typedef" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)2, <span class="keyword">false</span>).size();</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>        <span class="keywordflow">if</span> (connectionCount == 1)</div>
<div class="line"><span class="lineno">  707</span>        {  <span class="comment">// Get list of connected lanelets without lanechanges. On the shortest path this should only return 1 or 0</span></div>
<div class="line"><span class="lineno">  708</span>          <span class="comment">// No lane change</span></div>
<div class="line"><span class="lineno">  709</span>          <span class="comment">// Append distance to current centerline</span></div>
<div class="line"><span class="lineno">  710</span>          <span class="keywordtype">size_t</span> offset =</div>
<div class="line"><span class="lineno">  711</span>              lineStrings.size() == 0 || lineStrings.back().size() == 0 ?</div>
<div class="line"><span class="lineno">  712</span>                0 :</div>
<div class="line"><span class="lineno">  713</span>                1;  <span class="comment">// Prevent duplicate points when concatenating. Not clear if causes an issue at lane changes</span></div>
<div class="line"><span class="lineno">  714</span>          <span class="keywordflow">if</span> ((nextCenterline.size() &lt;= 1) || (nextCenterline.size() &lt;= 2 &amp;&amp; offset == 1))</div>
<div class="line"><span class="lineno">  715</span>          {</div>
<div class="line"><span class="lineno">  716</span>            <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Cannot process route with lanelet containing very short centerline&quot;</span>);</div>
<div class="line"><span class="lineno">  717</span>          }</div>
<div class="line"><span class="lineno">  718</span>          lineStrings.back().insert(lineStrings.back().end(), nextCenterline.begin() + offset, nextCenterline.end());</div>
<div class="line"><span class="lineno">  719</span>        }</div>
<div class="line"><span class="lineno">  720</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (connectionCount == 0)</div>
<div class="line"><span class="lineno">  721</span>        {</div>
<div class="line"><span class="lineno">  722</span>          <span class="comment">// Lane change required</span></div>
<div class="line"><span class="lineno">  723</span>          <span class="comment">// Break the point chain when a lanechange occurs</span></div>
<div class="line"><span class="lineno">  724</span>          <span class="keywordflow">if</span> (lineStrings.back().size() == 0)</div>
<div class="line"><span class="lineno">  725</span>            <span class="keywordflow">continue</span>;  <span class="comment">// we don&#39;t have to create empty_linestring if we already have one</span></div>
<div class="line"><span class="lineno">  726</span>                      <span class="comment">// occurs when route is changing lanes multiple times in sequence</span></div>
<div class="line"><span class="lineno">  727</span>          lanelet::LineString3d empty_linestring;</div>
<div class="line"><span class="lineno">  728</span>          empty_linestring.setId(lanelet::utils::getId());</div>
<div class="line"><span class="lineno">  729</span>          distance_map.pushBack(lanelet::utils::to2D(lineStrings.back()));</div>
<div class="line"><span class="lineno">  730</span>          lineStrings.push_back(empty_linestring);</div>
<div class="line"><span class="lineno">  731</span>        }</div>
<div class="line"><span class="lineno">  732</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  733</span>        {</div>
<div class="line"><span class="lineno">  734</span>          assert(<span class="keyword">false</span>);  <span class="comment">// It should not be possable to reach this point. Doing so demonstrates a bug</span></div>
<div class="line"><span class="lineno">  735</span>        }</div>
<div class="line"><span class="lineno">  736</span>      }</div>
<div class="line"><span class="lineno">  737</span>    }</div>
<div class="line"><span class="lineno">  738</span>    <span class="comment">// Copy values to member variables</span></div>
<div class="line"><span class="lineno">  739</span>    <span class="keywordflow">while</span> (lineStrings.back().size() == 0)</div>
<div class="line"><span class="lineno">  740</span>      lineStrings.pop_back();  <span class="comment">// clear empty linestrings that was never used in the end</span></div>
<div class="line"><span class="lineno">  741</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a> = lineStrings;</div>
<div class="line"><span class="lineno">  742</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a> = distance_map;</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>    <span class="comment">// Add length of final sections</span></div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>.size() &gt; <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#ab863677638f19d38483e63ba0e763da5">size</a>())</div>
<div class="line"><span class="lineno">  746</span>    {</div>
<div class="line"><span class="lineno">  747</span>      <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a669e41545be3e1ee49512a56c57b7196">pushBack</a>(lanelet::utils::to2D(lineStrings.back()));  <span class="comment">// Record length of last continuous</span></div>
<div class="line"><span class="lineno">  748</span>                                                                                      <span class="comment">// segment</span></div>
<div class="line"><span class="lineno">  749</span>    }</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>    <span class="comment">// Since our copy constructed linestrings do not contain references to lanelets they can be added to a full map</span></div>
<div class="line"><span class="lineno">  752</span>    <span class="comment">// instead of a submap</span></div>
<div class="line"><span class="lineno">  753</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">shortest_path_filtered_centerline_view_</a> = lanelet::utils::createMap(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>);</div>
<div class="line"><span class="lineno">  754</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a02750a7d4960c730331976f6c75df7a7"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">carma_wm::CARMAWorldModel::shortest_path_distance_map_</a></div><div class="ttdeci">IndexedDistanceMap shortest_path_distance_map_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00307">CARMAWorldModel.hpp:307</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a1f25006ada239cea8226b7f36afc267e"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e">carma_wm::CARMAWorldModel::copyConstructLineString</a></div><div class="ttdeci">lanelet::LineString3d copyConstructLineString(const lanelet::ConstLineString3d &amp;line) const</div><div class="ttdoc">Helper function to perform a deep copy of a LineString and assign new ids to all the elements....</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00662">CARMAWorldModel.cpp:662</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a3fec9f047a6a79e5271dc3547769c9ab"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">carma_wm::CARMAWorldModel::participant_type_</a></div><div class="ttdeci">std::string participant_type_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00276">CARMAWorldModel.hpp:276</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a638d41483eda68460147b65bf43d119c"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a638d41483eda68460147b65bf43d119c">carma_wm::CARMAWorldModel::shortest_path_view_</a></div><div class="ttdeci">lanelet::LaneletSubmapConstUPtr shortest_path_view_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00303">CARMAWorldModel.hpp:303</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a690740a182ab45ac2232da7d1b5edff8"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">carma_wm::CARMAWorldModel::route_</a></div><div class="ttdeci">LaneletRoutePtr route_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00300">CARMAWorldModel.hpp:300</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a6d75cb8cde721072cc7f69edd0ececb6"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">carma_wm::CARMAWorldModel::getTrafficRules</a></div><div class="ttdeci">lanelet::Optional&lt; TrafficRulesConstPtr &gt; getTrafficRules() const override</div><div class="ttdoc">Get the Traffic Rules object.</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00787">CARMAWorldModel.cpp:787</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">carma_wm::CARMAWorldModel::shortest_path_filtered_centerline_view_</a></div><div class="ttdeci">lanelet::LaneletMapUPtr shortest_path_filtered_centerline_view_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00308">CARMAWorldModel.hpp:308</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_adb594ec0caff8ca61fe84cbf7a0eee80"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">carma_wm::CARMAWorldModel::shortest_path_centerlines_</a></div><div class="ttdeci">std::vector&lt; lanelet::LineString3d &gt; shortest_path_centerlines_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00305">CARMAWorldModel.hpp:305</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_a669e41545be3e1ee49512a56c57b7196"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#a669e41545be3e1ee49512a56c57b7196">carma_wm::IndexedDistanceMap::pushBack</a></div><div class="ttdeci">void pushBack(const lanelet::LineString2d &amp;ls)</div><div class="ttdoc">Add a linestring to this structure. This function will iterate over the line string to compute distan...</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00021">IndexedDistanceMap.cpp:21</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_ab863677638f19d38483e63ba0e763da5"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#ab863677638f19d38483e63ba0e763da5">carma_wm::IndexedDistanceMap::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">Returns number of linestrings in this structure.</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00114">IndexedDistanceMap.cpp:114</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_a509eecc524933da5a1bb5369542888a9"><div class="ttname"><a href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">carma_wm::TrafficRulesConstPtr</a></div><div class="ttdeci">std::shared_ptr&lt; const lanelet::traffic_rules::TrafficRules &gt; TrafficRulesConstPtr</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00055">WorldModel.hpp:55</a></div></div>
<div class="ttc" id="astdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00126">stdint.h:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00662">copyConstructLineString()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">getTrafficRules()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">participant_type_</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00021">carma_wm::IndexedDistanceMap::pushBack()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00305">shortest_path_centerlines_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00307">shortest_path_distance_map_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00308">shortest_path_filtered_centerline_view_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00303">shortest_path_view_</a>, and <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00114">carma_wm::IndexedDistanceMap::size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">setRoute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_cgraph">
<area shape="rect" title="Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio..." alt="" coords="5,128,229,169"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e" title="Helper function to perform a deep copy of a LineString and assign new ids to all the elements...." alt="" coords="277,5,484,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6" title="Get the Traffic Rules object." alt="" coords="277,95,484,136"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a669e41545be3e1ee49512a56c57b7196" title="Add a linestring to this structure. This function will iterate over the line string to compute distan..." alt="" coords="287,160,475,201"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#ab863677638f19d38483e63ba0e763da5" title="Returns number of linestrings in this structure." alt="" coords="287,225,475,267"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a984999e739e3b5f2971da657da6d6adb" title="Returns the total along&#45;line length of this structure." alt="" coords="532,160,720,201"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d" title="Get the distance to the start of the linestring at the specified index." alt="" coords="768,127,956,168"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a7bd91613ee531f0bb715d9e89a1285f1" title="Get the length of the linestring located at the provided index." alt="" coords="768,192,956,233"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a6f924aa42ade5d323045fdad9b7ca3a8_icgraph">
<area shape="rect" title="Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio..." alt="" coords="260,5,484,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69" title="Set the current route. This route must match the current map for this class to function properly." alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="a1f25006ada239cea8226b7f36afc267e" name="a1f25006ada239cea8226b7f36afc267e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f25006ada239cea8226b7f36afc267e">&#9670;&nbsp;</a></span>copyConstructLineString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::LineString3d carma_wm::CARMAWorldModel::copyConstructLineString </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstLineString3d &amp;&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to perform a deep copy of a LineString and assign new ids to all the elements. Used during route centerline construction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>The linestring to be coppied</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new linestring containing unique ids for all points and the linestring itself </dd></dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00662">662</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  663</span>  {</div>
<div class="line"><span class="lineno">  664</span>    std::vector&lt;lanelet::Point3d&gt; coppied_points;</div>
<div class="line"><span class="lineno">  665</span>    coppied_points.reserve(line.size());</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> basic_p : line.basicLineString())</div>
<div class="line"><span class="lineno">  668</span>    {</div>
<div class="line"><span class="lineno">  669</span>      coppied_points.push_back(lanelet::Point3d(lanelet::utils::getId(), basic_p));</div>
<div class="line"><span class="lineno">  670</span>    }</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>    <span class="keywordflow">return</span> lanelet::LineString3d(lanelet::utils::getId(), coppied_points);</div>
<div class="line"><span class="lineno">  673</span>  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a1f25006ada239cea8226b7f36afc267e_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a1f25006ada239cea8226b7f36afc267e_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a1f25006ada239cea8226b7f36afc267e_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a1f25006ada239cea8226b7f36afc267e_icgraph">
<area shape="rect" title="Helper function to perform a deep copy of a LineString and assign new ids to all the elements...." alt="" coords="532,5,739,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8" title="Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio..." alt="" coords="260,5,484,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69" title="Set the current route. This route must match the current map for this class to function properly." alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="a131c9d5adca779c9efd7601f1dcfef5b" name="a131c9d5adca779c9efd7601f1dcfef5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a131c9d5adca779c9efd7601f1dcfef5b">&#9670;&nbsp;</a></span>distToNearestObjInLane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; double &gt; carma_wm::CARMAWorldModel::distToNearestObjInLane </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>object_center</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets Cartesian distance to the closest object on the same lane as the given point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_center</td><td>the point to measure the distance from</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or the given point is not on the current semantic map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional Cartesian distance in double to the closest in lane object. Return empty if there is no objects on current lane or the road </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#ab43abbec54bfaff13206ef3d63b3e526">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00950">950</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  951</span>  {</div>
<div class="line"><span class="lineno">  952</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno">  953</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.size() == 0)</div>
<div class="line"><span class="lineno">  954</span>    {</div>
<div class="line"><span class="lineno">  955</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno">  956</span>    }</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>    <span class="comment">// return empty if there is no object nearby</span></div>
<div class="line"><span class="lineno">  959</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>.size() == 0)</div>
<div class="line"><span class="lineno">  960</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>    <span class="comment">// Get the lanelet of this point</span></div>
<div class="line"><span class="lineno">  963</span>    <span class="keyword">auto</span> curr_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.nearest(object_center, 1)[0];</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>    <span class="comment">// Check if this point at least is actually within this lanelet; otherwise, it wouldn&#39;t be &quot;in-lane&quot;</span></div>
<div class="line"><span class="lineno">  966</span>    <span class="keywordflow">if</span> (!boost::geometry::within(object_center, curr_lanelet.polygon2d().basicPolygon()))</div>
<div class="line"><span class="lineno">  967</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Given point is not within any lanelet&quot;</span>);</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>    std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; lane_objects = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd">getInLaneObjects</a>(curr_lanelet);</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>    <span class="comment">// return empty if there is no object in the lane</span></div>
<div class="line"><span class="lineno">  972</span>    <span class="keywordflow">if</span> (lane_objects.size() == 0)</div>
<div class="line"><span class="lineno">  973</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>    <span class="comment">// Record the closest distance out of all polygons, 4 points each</span></div>
<div class="line"><span class="lineno">  976</span>    <span class="keywordtype">double</span> min_dist = INFINITY;</div>
<div class="line"><span class="lineno">  977</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> obj : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>)</div>
<div class="line"><span class="lineno">  978</span>    {</div>
<div class="line"><span class="lineno">  979</span>      lanelet::BasicPolygon2d object_polygon = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">geometry::objectToMapPolygon</a>(obj.object.pose.pose, obj.object.size);</div>
<div class="line"><span class="lineno">  980</span> </div>
<div class="line"><span class="lineno">  981</span>      <span class="comment">// Point to closest edge on polygon distance by boost library</span></div>
<div class="line"><span class="lineno">  982</span>      <span class="keywordtype">double</span> curr_dist = lanelet::geometry::distance(object_center, object_polygon);</div>
<div class="line"><span class="lineno">  983</span>      <span class="keywordflow">if</span> (min_dist &gt; curr_dist)</div>
<div class="line"><span class="lineno">  984</span>        min_dist = curr_dist;</div>
<div class="line"><span class="lineno">  985</span>    }</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>    <span class="comment">// Return the closest distance out of all polygons</span></div>
<div class="line"><span class="lineno">  988</span>    <span class="keywordflow">return</span> min_dist;</div>
<div class="line"><span class="lineno">  989</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a03335a60875a9cfe30efa4ca983f54ae"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">carma_wm::CARMAWorldModel::roadway_objects_</a></div><div class="ttdeci">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; roadway_objects_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00310">CARMAWorldModel.hpp:310</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a19b8c922c7524c769f96a57b91f6a6bd"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd">carma_wm::CARMAWorldModel::getInLaneObjects</a></div><div class="ttdeci">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; getInLaneObjects(const lanelet::ConstLanelet &amp;lanelet, const LaneSection &amp;section=LANE_AHEAD) const override</div><div class="ttdoc">Gets all roadway objects currently in the same lane as the given lanelet.</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00856">CARMAWorldModel.cpp:856</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_ac52c727f61495307cf42a8c07af24555"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">carma_wm::CARMAWorldModel::semantic_map_</a></div><div class="ttdeci">std::shared_ptr&lt; lanelet::LaneletMap &gt; semantic_map_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00299">CARMAWorldModel.hpp:299</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a1f7db96beb74c526d4b502265e7c1e82"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">carma_wm::geometry::objectToMapPolygon</a></div><div class="ttdeci">lanelet::BasicPolygon2d objectToMapPolygon(const geometry_msgs::msg::Pose &amp;pose, const geometry_msgs::msg::Vector3 &amp;size)</div><div class="ttdoc">Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00289">Geometry.cpp:289</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">getInLaneObjects()</a>, <a class="el" href="Geometry_8cpp_source.html#l00289">carma_wm::geometry::objectToMapPolygon()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">roadway_objects_</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a131c9d5adca779c9efd7601f1dcfef5b_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a131c9d5adca779c9efd7601f1dcfef5b_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a131c9d5adca779c9efd7601f1dcfef5b_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a131c9d5adca779c9efd7601f1dcfef5b_cgraph">
<area shape="rect" title="Gets Cartesian distance to the closest object on the same lane as the given point." alt="" coords="5,41,212,83"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="260,12,467,53"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="543,71,693,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="515,5,721,47"/>
</map>
</div>

</div>
</div>
<a id="a39dfa00a1066900c54ddae987d19b2d8" name="a39dfa00a1066900c54ddae987d19b2d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39dfa00a1066900c54ddae987d19b2d8">&#9670;&nbsp;</a></span>getBusStopsAlongRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::BusStopRulePtr &gt; carma_wm::CARMAWorldModel::getBusStopsAlongRoute </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>loc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of bus stop along the current route. <br  />
 The bus stop along a route and the next bus stop ahead of us on the route specifically, so a sorted list (by downtrack distance) of bus stop on the route ahead of us thus eliminating those behind the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loc</td><td>location </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or route is not set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of bus stop along the current route </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#af7f4c2be71fca378db3a09483c829959">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00119">119</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>  {</div>
<div class="line"><span class="lineno">  121</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.empty())</div>
<div class="line"><span class="lineno">  123</span>    {</div>
<div class="line"><span class="lineno">  124</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno">  125</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  126</span>    }</div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  129</span>    {</div>
<div class="line"><span class="lineno">  130</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  132</span>    }</div>
<div class="line"><span class="lineno">  133</span>    std::vector&lt;lanelet::BusStopRulePtr&gt; bus_stop_list;</div>
<div class="line"><span class="lineno">  134</span>    <span class="keyword">auto</span> curr_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(loc).downtrack;</div>
<div class="line"><span class="lineno">  135</span>    <span class="comment">// shortpath is already sorted by distance</span></div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ll : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno">  138</span>    {</div>
<div class="line"><span class="lineno">  139</span>      <span class="keyword">auto</span> bus_stops = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.get(ll.id()).regulatoryElementsAs&lt;lanelet::BusStopRule&gt;();</div>
<div class="line"><span class="lineno">  140</span>      <span class="keywordflow">if</span> (bus_stops.empty())</div>
<div class="line"><span class="lineno">  141</span>      {</div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  143</span>      }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> bus_stop : bus_stops)</div>
<div class="line"><span class="lineno">  146</span>      {</div>
<div class="line"><span class="lineno">  147</span>        <span class="keyword">auto</span> stop_line = bus_stop-&gt;stopAndWaitLine();</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">if</span> (stop_line.empty())</div>
<div class="line"><span class="lineno">  149</span>        {</div>
<div class="line"><span class="lineno">  150</span>          RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;No stop line&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  154</span>        {</div>
<div class="line"><span class="lineno">  155</span>          <span class="keywordtype">double</span> bus_stop_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(stop_line.front().front().basicPoint2d()).downtrack;</div>
<div class="line"><span class="lineno">  156</span>          <span class="keywordtype">double</span> distance_remaining_to_bus_stop = bus_stop_downtrack - curr_downtrack;</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>          <span class="keywordflow">if</span> (distance_remaining_to_bus_stop &lt; 0)</div>
<div class="line"><span class="lineno">  159</span>          {</div>
<div class="line"><span class="lineno">  160</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  161</span>          }</div>
<div class="line"><span class="lineno">  162</span>          bus_stop_list.push_back(bus_stop);</div>
<div class="line"><span class="lineno">  163</span>        }</div>
<div class="line"><span class="lineno">  164</span>      }</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">return</span> bus_stop_list;</div>
<div class="line"><span class="lineno">  167</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a18e3077b7673f2f92fd71eeea955a597"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">carma_wm::CARMAWorldModel::routeTrackPos</a></div><div class="ttdeci">std::pair&lt; TrackPos, TrackPos &gt; routeTrackPos(const lanelet::ConstArea &amp;area) const override</div><div class="ttdoc">Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route....</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00040">CARMAWorldModel.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a39dfa00a1066900c54ddae987d19b2d8_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a39dfa00a1066900c54ddae987d19b2d8_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a39dfa00a1066900c54ddae987d19b2d8_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a39dfa00a1066900c54ddae987d19b2d8_cgraph">
<area shape="rect" title="Return a list of bus stop along the current route. &#160;&#160;The bus stop along a route and the next bus stop..." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="a2c46116ef711d1e03298f9efd57f2bdd" name="a2c46116ef711d1e03298f9efd57f2bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c46116ef711d1e03298f9efd57f2bdd">&#9670;&nbsp;</a></span>getEntryExitOfSignalAlongRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt; std::pair&lt; lanelet::ConstLanelet, lanelet::ConstLanelet &gt; &gt; carma_wm::CARMAWorldModel::getEntryExitOfSignalAlongRoute </td>
          <td>(</td>
          <td class="paramtype">const lanelet::CarmaTrafficSignalPtr &amp;&#160;</td>
          <td class="paramname"><em>traffic_signal</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the entry and exit lanelet of the signal along the SHORTEST PATH of route. This is useful if traffic_signal controls both directions in an intersection for example. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">traffic_signal</td><td>traffic signal of interest </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if nullptr is passed in traffic_signal</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pair of entry and exit lanelet of the signal along the route. boost::none if the given signal doesn't have both entry/exit pair along the shortest path route. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a20b4d370140cce9e56f00f624e545dae">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01268">1268</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1269</span>  {</div>
<div class="line"><span class="lineno"> 1270</span>    <span class="keywordflow">if</span> (!traffic_signal)</div>
<div class="line"><span class="lineno"> 1271</span>    {</div>
<div class="line"><span class="lineno"> 1272</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Empty traffic signal pointer has been passed!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1273</span>    }</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>    std::pair&lt;lanelet::ConstLanelet, lanelet::ConstLanelet&gt; entry_exit;</div>
<div class="line"><span class="lineno"> 1276</span>    <span class="keywordtype">bool</span> found_entry = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1277</span>    <span class="keywordtype">bool</span> found_exit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1278</span>    <span class="keyword">auto</span> entry_lanelets = traffic_signal-&gt;getControlStartLanelets();</div>
<div class="line"><span class="lineno"> 1279</span>    <span class="keyword">auto</span> exit_lanelets = traffic_signal-&gt;getControlEndLanelets();</div>
<div class="line"><span class="lineno"> 1280</span> </div>
<div class="line"><span class="lineno"> 1281</span>    <span class="comment">// get entry and exit lane along route for the nearest given signal</span></div>
<div class="line"><span class="lineno"> 1282</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll: <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno"> 1283</span>    {</div>
<div class="line"><span class="lineno"> 1284</span>      <span class="keywordflow">if</span> (!found_entry)</div>
<div class="line"><span class="lineno"> 1285</span>      {</div>
<div class="line"><span class="lineno"> 1286</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entry: entry_lanelets)</div>
<div class="line"><span class="lineno"> 1287</span>        {</div>
<div class="line"><span class="lineno"> 1288</span>          <span class="keywordflow">if</span> (ll.id() == entry.id())</div>
<div class="line"><span class="lineno"> 1289</span>          {</div>
<div class="line"><span class="lineno"> 1290</span>            entry_exit.first = entry;</div>
<div class="line"><span class="lineno"> 1291</span>            found_entry = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1292</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1293</span>          }</div>
<div class="line"><span class="lineno"> 1294</span>        }</div>
<div class="line"><span class="lineno"> 1295</span>      }</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>      <span class="keywordflow">if</span> (!found_exit)</div>
<div class="line"><span class="lineno"> 1298</span>      {</div>
<div class="line"><span class="lineno"> 1299</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; exit: exit_lanelets)</div>
<div class="line"><span class="lineno"> 1300</span>        {</div>
<div class="line"><span class="lineno"> 1301</span>          <span class="keywordflow">if</span> (ll.id() == exit.id())</div>
<div class="line"><span class="lineno"> 1302</span>          {</div>
<div class="line"><span class="lineno"> 1303</span>            entry_exit.second = exit;</div>
<div class="line"><span class="lineno"> 1304</span>            found_exit = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1305</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1306</span>          }</div>
<div class="line"><span class="lineno"> 1307</span>        }</div>
<div class="line"><span class="lineno"> 1308</span>      }</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>      <span class="keywordflow">if</span> (found_entry &amp;&amp; found_exit)</div>
<div class="line"><span class="lineno"> 1311</span>        <span class="keywordflow">return</span> entry_exit;</div>
<div class="line"><span class="lineno"> 1312</span>    }</div>
<div class="line"><span class="lineno"> 1313</span> </div>
<div class="line"><span class="lineno"> 1314</span>    <span class="comment">// was not able to find entry and exit for this signal along route</span></div>
<div class="line"><span class="lineno"> 1315</span>    <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno"> 1316</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>.</p>

</div>
</div>
<a id="a19b8c922c7524c769f96a57b91f6a6bd" name="a19b8c922c7524c769f96a57b91f6a6bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19b8c922c7524c769f96a57b91f6a6bd">&#9670;&nbsp;</a></span>getInLaneObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; carma_wm::CARMAWorldModel::getInLaneObjects </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstLanelet &amp;&#160;</td>
          <td class="paramname"><em>lanelet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;&#160;</td>
          <td class="paramname"><em>section</em> = <code><a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all roadway objects currently in the same lane as the given lanelet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lanelet</td><td>the lanelet that is part of the continuous lane </td></tr>
    <tr><td class="paramname">section</td><td>either of LANE_AHEAD, LANE_BEHIND, LANE_FULL each including the current lanelet</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or if the given lanelet is not on the current semantic map, or lane section input is not of the three</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of RoadwayObstacle objects that is on the current lane. Return empty vector if there is no objects on current lane or the road </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a8fcc52a19e42a4a1b63bb96add8ad028">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">856</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  858</span>  {</div>
<div class="line"><span class="lineno">  859</span>    <span class="comment">// Get all lanelets on current lane section</span></div>
<div class="line"><span class="lineno">  860</span>    std::vector&lt;lanelet::ConstLanelet&gt; lane = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7">getLane</a>(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, section);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="comment">// Check if any roadway object is registered</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>.size() == 0)</div>
<div class="line"><span class="lineno">  864</span>    {</div>
<div class="line"><span class="lineno">  865</span>      <span class="keywordflow">return</span> std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt;{};</div>
<div class="line"><span class="lineno">  866</span>    }</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>    <span class="comment">// Initialize useful variables</span></div>
<div class="line"><span class="lineno">  869</span>    std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; lane_objects, roadway_objects_copy = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>;</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  872</span><span class="comment">   * Get all in lane objects</span></div>
<div class="line"><span class="lineno">  873</span><span class="comment">   * For each lane, we check if each object is on it by matching lanelet_id</span></div>
<div class="line"><span class="lineno">  874</span><span class="comment">   * Complexity N*K, where N: num of lanelets, K: num of objects</span></div>
<div class="line"><span class="lineno">  875</span><span class="comment">   */</span></div>
<div class="line"><span class="lineno">  876</span>    <span class="keywordtype">int</span> curr_idx;</div>
<div class="line"><span class="lineno">  877</span>    std::queue&lt;int&gt; obj_idxs_queue;</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>    <span class="comment">// Create an index queue for roadway objects to quickly pop the idx if associated</span></div>
<div class="line"><span class="lineno">  880</span>    <span class="comment">// lanelet is found. This is to reduce number of objects to check as we check new lanelets</span></div>
<div class="line"><span class="lineno">  881</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; roadway_objects_copy.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><span class="lineno">  882</span>    {</div>
<div class="line"><span class="lineno">  883</span>      obj_idxs_queue.push((<span class="keywordtype">int</span>)<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>);</div>
<div class="line"><span class="lineno">  884</span>    }</div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>    <span class="comment">// check each lanelets</span></div>
<div class="line"><span class="lineno">  887</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : lane)</div>
<div class="line"><span class="lineno">  888</span>    {</div>
<div class="line"><span class="lineno">  889</span>      <span class="keywordtype">int</span> checked_queue_items = 0, to_check = obj_idxs_queue.size();</div>
<div class="line"><span class="lineno">  890</span>      <span class="comment">// check each objects</span></div>
<div class="line"><span class="lineno">  891</span>      <span class="keywordflow">while</span> (checked_queue_items &lt; to_check)</div>
<div class="line"><span class="lineno">  892</span>      {</div>
<div class="line"><span class="lineno">  893</span>        curr_idx = obj_idxs_queue.front();</div>
<div class="line"><span class="lineno">  894</span>        obj_idxs_queue.pop();</div>
<div class="line"><span class="lineno">  895</span>        checked_queue_items++;</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>        <span class="comment">// Check if the object is in the lanelet</span></div>
<div class="line"><span class="lineno">  898</span>        <span class="keyword">auto</span> curr_obj = roadway_objects_copy[curr_idx];</div>
<div class="line"><span class="lineno">  899</span>        <span class="keywordflow">if</span> (curr_obj.lanelet_id == llt.id())</div>
<div class="line"><span class="lineno">  900</span>        {</div>
<div class="line"><span class="lineno">  901</span>          <span class="comment">// found intersecting lanelet for this object</span></div>
<div class="line"><span class="lineno">  902</span>          lane_objects.push_back(curr_obj);</div>
<div class="line"><span class="lineno">  903</span>        }</div>
<div class="line"><span class="lineno">  904</span>        <span class="comment">// handle a case where an object might be lane-changing, so check adjacent ids</span></div>
<div class="line"><span class="lineno">  905</span>        <span class="comment">// a bit faster than checking intersection solely as &amp;&amp; is left-to-right evaluation</span></div>
<div class="line"><span class="lineno">  906</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;left(llt) &amp;&amp; curr_obj.lanelet_id == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;left(llt).get().id()) ||</div>
<div class="line"><span class="lineno">  907</span>                  (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;right(llt) &amp;&amp; curr_obj.lanelet_id == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;right(llt).get().id())) &amp;&amp;</div>
<div class="line"><span class="lineno">  908</span>                 boost::geometry::intersects(</div>
<div class="line"><span class="lineno">  909</span>                     llt.polygon2d().basicPolygon(),</div>
<div class="line"><span class="lineno">  910</span>                     <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">geometry::objectToMapPolygon</a>(curr_obj.object.pose.pose, curr_obj.object.size)))</div>
<div class="line"><span class="lineno">  911</span>        {</div>
<div class="line"><span class="lineno">  912</span>          <span class="comment">// found intersecting lanelet for this object</span></div>
<div class="line"><span class="lineno">  913</span>          lane_objects.push_back(curr_obj);</div>
<div class="line"><span class="lineno">  914</span>        }</div>
<div class="line"><span class="lineno">  915</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  916</span>        {</div>
<div class="line"><span class="lineno">  917</span>          <span class="comment">// did not find suitable lanelet, so it will be processed again for next lanelet</span></div>
<div class="line"><span class="lineno">  918</span>          obj_idxs_queue.push(curr_idx);</div>
<div class="line"><span class="lineno">  919</span>        }</div>
<div class="line"><span class="lineno">  920</span>      }</div>
<div class="line"><span class="lineno">  921</span>    }</div>
<div class="line"><span class="lineno">  922</span> </div>
<div class="line"><span class="lineno">  923</span>    <span class="keywordflow">return</span> lane_objects;</div>
<div class="line"><span class="lineno">  924</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a7602bf876d9e8defb3b47239789b34b3"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">carma_wm::CARMAWorldModel::map_routing_graph_</a></div><div class="ttdeci">LaneletRoutingGraphPtr map_routing_graph_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00301">CARMAWorldModel.hpp:301</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a869b918893af283afe09b1adb52c69a7"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7">carma_wm::CARMAWorldModel::getLane</a></div><div class="ttdeci">std::vector&lt; lanelet::ConstLanelet &gt; getLane(const lanelet::ConstLanelet &amp;lanelet, const LaneSection &amp;section=LANE_AHEAD) const override</div><div class="ttdoc">Gets the specified lane section achievable without lane change, sorted from the start,...</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l01116">CARMAWorldModel.cpp:1116</a></div></div>
<div class="ttc" id="anamespacelanelet_html"><div class="ttname"><a href="namespacelanelet.html">lanelet</a></div><div class="ttdef"><b>Definition:</b> <a href="MapConformer_8hpp_source.html#l00038">MapConformer.hpp:39</a></div></div>
<div class="ttc" id="anamespaceprocess__bag_html_af102a02c97622dd30b0dbf7bafb0d199"><div class="ttname"><a href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">process_bag.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="process__bag_8py_source.html#l00059">process_bag.py:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l01116">getLane()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>, <a class="el" href="Geometry_8cpp_source.html#l00289">carma_wm::geometry::objectToMapPolygon()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">roadway_objects_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00950">distToNearestObjInLane()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_cgraph">
<area shape="rect" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="5,39,212,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="260,5,467,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="289,71,438,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a19b8c922c7524c769f96a57b91f6a6bd_icgraph">
<area shape="rect" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="515,39,721,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a131c9d5adca779c9efd7601f1dcfef5b" title="Gets Cartesian distance to the closest object on the same lane as the given point." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,71,467,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="5,37,212,79"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="5,103,212,144"/>
</map>
</div>

</div>
</div>
<a id="a347bdceaab5df16ff4a676a733c32808" name="a347bdceaab5df16ff4a676a733c32808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a347bdceaab5df16ff4a676a733c32808">&#9670;&nbsp;</a></span>getIntersectingLanelet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; lanelet::Lanelet &gt; carma_wm::CARMAWorldModel::getIntersectingLanelet </td>
          <td>(</td>
          <td class="paramtype">const carma_perception_msgs::msg::ExternalObject &amp;&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the a lanelet the object is currently on determined by its position on the semantic map. If it's across multiple lanelets, get the closest one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>the external object to get the lanelet of</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set or contains no lanelets</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional lanelet primitive that is on the semantic map. If the external object is not on the roadway then the optional will be empty. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a3239fded8c5085c5e533c928512c4099">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00927">927</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  928</span>  {</div>
<div class="line"><span class="lineno">  929</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno">  930</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.size() == 0)</div>
<div class="line"><span class="lineno">  931</span>    {</div>
<div class="line"><span class="lineno">  932</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno">  933</span>    }</div>
<div class="line"><span class="lineno">  934</span> </div>
<div class="line"><span class="lineno">  935</span>    lanelet::BasicPoint2d object_center(<span class="keywordtype">object</span>.pose.pose.position.x, <span class="keywordtype">object</span>.pose.pose.position.y);</div>
<div class="line"><span class="lineno">  936</span>    lanelet::BasicPolygon2d object_polygon = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">geometry::objectToMapPolygon</a>(<span class="keywordtype">object</span>.pose.pose, <span class="keywordtype">object</span>.size);</div>
<div class="line"><span class="lineno">  937</span> </div>
<div class="line"><span class="lineno">  938</span>    <span class="keyword">auto</span> nearestLanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.nearest(</div>
<div class="line"><span class="lineno">  939</span>        object_center, 1)[0];  <span class="comment">// Since the map contains lanelets there should always be at least 1 element</span></div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span>    <span class="comment">// Check if the object is inside or intersecting this lanelet</span></div>
<div class="line"><span class="lineno">  942</span>    <span class="comment">// If no intersection then the object can be considered off the road and does not need to processed</span></div>
<div class="line"><span class="lineno">  943</span>    <span class="keywordflow">if</span> (!boost::geometry::intersects(nearestLanelet.polygon2d().basicPolygon(), object_polygon))</div>
<div class="line"><span class="lineno">  944</span>    {</div>
<div class="line"><span class="lineno">  945</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  946</span>    }</div>
<div class="line"><span class="lineno">  947</span>    <span class="keywordflow">return</span> nearestLanelet;</div>
<div class="line"><span class="lineno">  948</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="Geometry_8cpp_source.html#l00289">carma_wm::geometry::objectToMapPolygon()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00794">toRoadwayObstacle()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_cgraph">
<area shape="rect" title="Gets the a lanelet the object is currently on determined by its position on the semantic map...." alt="" coords="5,5,212,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="260,5,409,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a347bdceaab5df16ff4a676a733c32808_icgraph">
<area shape="rect" title="Gets the a lanelet the object is currently on determined by its position on the semantic map...." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aef70965ad3260671c52a1985bb2e6ce1" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="ac3b3d0bac4477eeff7672868a582398c" name="ac3b3d0bac4477eeff7672868a582398c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3b3d0bac4477eeff7672868a582398c">&#9670;&nbsp;</a></span>getIntersectionsAlongRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::shared_ptr&lt; lanelet::AllWayStop &gt; &gt; carma_wm::CARMAWorldModel::getIntersectionsAlongRoute </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>loc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of all way stop intersections along the current route. <br  />
 The tall way stop intersections along a route and the next all way stop intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of all way stop intersections on the route ahead of us thus eliminating those behind the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loc</td><td>location </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or route is not set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of all way stop intersections along the current route </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#af0bf672c96bfd542e35f77e9de09ee0a">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01318">1318</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1319</span>  {</div>
<div class="line"><span class="lineno"> 1320</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno"> 1321</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.empty())</div>
<div class="line"><span class="lineno"> 1322</span>    {</div>
<div class="line"><span class="lineno"> 1323</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno"> 1324</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1325</span>    }</div>
<div class="line"><span class="lineno"> 1326</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno"> 1327</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno"> 1328</span>    {</div>
<div class="line"><span class="lineno"> 1329</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno"> 1330</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1331</span>    }</div>
<div class="line"><span class="lineno"> 1332</span>    std::vector&lt;std::shared_ptr&lt;lanelet::AllWayStop&gt;&gt; intersection_list;</div>
<div class="line"><span class="lineno"> 1333</span>    <span class="keyword">auto</span> curr_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(loc).downtrack;</div>
<div class="line"><span class="lineno"> 1334</span>    <span class="comment">// shortpath is already sorted by distance</span></div>
<div class="line"><span class="lineno"> 1335</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ll : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno"> 1336</span>    {</div>
<div class="line"><span class="lineno"> 1337</span>      <span class="keyword">auto</span> intersections = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.get(ll.id()).regulatoryElementsAs&lt;lanelet::AllWayStop&gt;();</div>
<div class="line"><span class="lineno"> 1338</span>      <span class="keywordflow">if</span> (intersections.empty())</div>
<div class="line"><span class="lineno"> 1339</span>      {</div>
<div class="line"><span class="lineno"> 1340</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1341</span>      }</div>
<div class="line"><span class="lineno"> 1342</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> intersection : intersections)</div>
<div class="line"><span class="lineno"> 1343</span>      {</div>
<div class="line"><span class="lineno"> 1344</span>        <span class="keywordtype">double</span> intersection_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(intersection-&gt;stopLines().front().front().basicPoint2d()).downtrack;</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keywordflow">if</span> (intersection_downtrack &lt; curr_downtrack)</div>
<div class="line"><span class="lineno"> 1346</span>        {</div>
<div class="line"><span class="lineno"> 1347</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1348</span>        }</div>
<div class="line"><span class="lineno"> 1349</span>        intersection_list.push_back(intersection);</div>
<div class="line"><span class="lineno"> 1350</span>      }</div>
<div class="line"><span class="lineno"> 1351</span>    }</div>
<div class="line"><span class="lineno"> 1352</span>    <span class="keywordflow">return</span> intersection_list;</div>
<div class="line"><span class="lineno"> 1353</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_ac3b3d0bac4477eeff7672868a582398c_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_ac3b3d0bac4477eeff7672868a582398c_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_ac3b3d0bac4477eeff7672868a582398c_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_ac3b3d0bac4477eeff7672868a582398c_cgraph">
<area shape="rect" title="Return a list of all way stop intersections along the current route. &#160;&#160;The tall way stop intersection..." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="a869b918893af283afe09b1adb52c69a7" name="a869b918893af283afe09b1adb52c69a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a869b918893af283afe09b1adb52c69a7">&#9670;&nbsp;</a></span>getLane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::ConstLanelet &gt; carma_wm::CARMAWorldModel::getLane </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstLanelet &amp;&#160;</td>
          <td class="paramname"><em>lanelet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;&#160;</td>
          <td class="paramname"><em>section</em> = <code><a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the specified lane section achievable without lane change, sorted from the start, that includes the given lanelet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lanelet</td><td>the lanelet to get the full lane of </td></tr>
    <tr><td class="paramname">section</td><td>either of LANE_AHEAD, LANE_BEHIND, LANE_FULL each including the current lanelet</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or the given lanelet is not on the current semantic map, or lane section input is not of the three</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional vector of ConstLanalet. Returns at least the vector of given lanelet if no other is found </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a68f1e49fc1b4b6c26349ef8f81049dd7">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01116">1116</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1118</span>  {</div>
<div class="line"><span class="lineno"> 1119</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.size() == 0)</div>
<div class="line"><span class="lineno"> 1121</span>    {</div>
<div class="line"><span class="lineno"> 1122</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno"> 1123</span>    }</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>    <span class="comment">// Check if the lanelet is in map</span></div>
<div class="line"><span class="lineno"> 1126</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.find(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.id()) == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.end())</div>
<div class="line"><span class="lineno"> 1127</span>    {</div>
<div class="line"><span class="lineno"> 1128</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Lanelet is not on the map&quot;</span>);</div>
<div class="line"><span class="lineno"> 1129</span>    }</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>    <span class="comment">// Check if the lane section input is correct</span></div>
<div class="line"><span class="lineno"> 1132</span>    <span class="keywordflow">if</span> (section != <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827a691fa9ffda7df45ba0884770f2687926">LANE_FULL</a> &amp;&amp; section != <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ab59ef9ec33d15acbeb69a4a5d404d6a9">LANE_BEHIND</a> &amp;&amp; section != <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>)</div>
<div class="line"><span class="lineno"> 1133</span>    {</div>
<div class="line"><span class="lineno"> 1134</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Undefined lane section is requested&quot;</span>);</div>
<div class="line"><span class="lineno"> 1135</span>    }</div>
<div class="line"><span class="lineno"> 1136</span> </div>
<div class="line"><span class="lineno"> 1137</span>    std::vector&lt;lanelet::ConstLanelet&gt; following_lane = {<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>};</div>
<div class="line"><span class="lineno"> 1138</span>    std::stack&lt;lanelet::ConstLanelet&gt; prev_lane_helper;</div>
<div class="line"><span class="lineno"> 1139</span>    std::vector&lt;lanelet::ConstLanelet&gt; prev_lane;</div>
<div class="line"><span class="lineno"> 1140</span>    std::vector&lt;lanelet::ConstLanelet&gt; connecting_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;following(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1141</span> </div>
<div class="line"><span class="lineno"> 1142</span>    <span class="comment">// if only interested in following lanelets, as it is the most case</span></div>
<div class="line"><span class="lineno"> 1143</span>    <span class="keywordflow">while</span> (connecting_lanelet.size() != 0)</div>
<div class="line"><span class="lineno"> 1144</span>    {</div>
<div class="line"><span class="lineno"> 1145</span>      following_lane.push_back(connecting_lanelet[0]);</div>
<div class="line"><span class="lineno"> 1146</span>      connecting_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;following(connecting_lanelet[0], <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1147</span>    }</div>
<div class="line"><span class="lineno"> 1148</span>    <span class="keywordflow">if</span> (section == <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>)</div>
<div class="line"><span class="lineno"> 1149</span>      <span class="keywordflow">return</span> following_lane;</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>    <span class="comment">// if interested in lanelets behind</span></div>
<div class="line"><span class="lineno"> 1152</span>    connecting_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;previous(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1153</span>    <span class="keywordflow">while</span> (connecting_lanelet.size() != 0)</div>
<div class="line"><span class="lineno"> 1154</span>    {</div>
<div class="line"><span class="lineno"> 1155</span>      prev_lane_helper.push(connecting_lanelet[0]);</div>
<div class="line"><span class="lineno"> 1156</span>      connecting_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;previous(connecting_lanelet[0], <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1157</span>    }</div>
<div class="line"><span class="lineno"> 1158</span> </div>
<div class="line"><span class="lineno"> 1159</span>    <span class="comment">// gather all lanelets with correct start order</span></div>
<div class="line"><span class="lineno"> 1160</span>    <span class="keywordflow">while</span> (prev_lane_helper.size() != 0)</div>
<div class="line"><span class="lineno"> 1161</span>    {</div>
<div class="line"><span class="lineno"> 1162</span>      prev_lane.push_back(prev_lane_helper.top());</div>
<div class="line"><span class="lineno"> 1163</span>      prev_lane_helper.pop();</div>
<div class="line"><span class="lineno"> 1164</span>    }</div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span>    <span class="comment">// if only interested in lane behind</span></div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordflow">if</span> (section == <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ab59ef9ec33d15acbeb69a4a5d404d6a9">LANE_BEHIND</a>)</div>
<div class="line"><span class="lineno"> 1168</span>    {</div>
<div class="line"><span class="lineno"> 1169</span>      prev_lane.push_back(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>);</div>
<div class="line"><span class="lineno"> 1170</span>      <span class="keywordflow">return</span> prev_lane;</div>
<div class="line"><span class="lineno"> 1171</span>    }</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>    <span class="comment">// if interested in full lane</span></div>
<div class="line"><span class="lineno"> 1174</span>    prev_lane.insert(prev_lane.end(), following_lane.begin(), following_lane.end());</div>
<div class="line"><span class="lineno"> 1175</span>    <span class="keywordflow">return</span> prev_lane;</div>
<div class="line"><span class="lineno"> 1176</span>  }</div>
<div class="ttc" id="anamespacecarma__wm_html_a4d1f40e90b83192f3f9de7cc2bba1827a691fa9ffda7df45ba0884770f2687926"><div class="ttname"><a href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827a691fa9ffda7df45ba0884770f2687926">carma_wm::LANE_FULL</a></div><div class="ttdeci">@ LANE_FULL</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00064">WorldModel.hpp:63</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_a4d1f40e90b83192f3f9de7cc2bba1827ab59ef9ec33d15acbeb69a4a5d404d6a9"><div class="ttname"><a href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ab59ef9ec33d15acbeb69a4a5d404d6a9">carma_wm::LANE_BEHIND</a></div><div class="ttdeci">@ LANE_BEHIND</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00062">WorldModel.hpp:62</a></div></div>
<div class="ttc" id="anamespacecarma__wm_html_a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5"><div class="ttname"><a href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">carma_wm::LANE_AHEAD</a></div><div class="ttdeci">@ LANE_AHEAD</div><div class="ttdef"><b>Definition:</b> <a href="WorldModel_8hpp_source.html#l00061">WorldModel.hpp:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="WorldModel_8hpp_source.html#l00061">carma_wm::LANE_AHEAD</a>, <a class="el" href="WorldModel_8hpp_source.html#l00062">carma_wm::LANE_BEHIND</a>, <a class="el" href="WorldModel_8hpp_source.html#l00063">carma_wm::LANE_FULL</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">getInLaneObjects()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a869b918893af283afe09b1adb52c69a7_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a869b918893af283afe09b1adb52c69a7_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a869b918893af283afe09b1adb52c69a7_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a869b918893af283afe09b1adb52c69a7_icgraph">
<area shape="rect" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="769,41,976,83"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="515,12,721,53"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,71,467,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a131c9d5adca779c9efd7601f1dcfef5b" title="Gets Cartesian distance to the closest object on the same lane as the given point." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="5,37,212,79"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="5,103,212,144"/>
</map>
</div>

</div>
</div>
<a id="a94ed05d036943a7bf86d002f8d9ece0b" name="a94ed05d036943a7bf86d002f8d9ece0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ed05d036943a7bf86d002f8d9ece0b">&#9670;&nbsp;</a></span>getLaneletsBetween()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::ConstLanelet &gt; carma_wm::CARMAWorldModel::getLaneletsBetween </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>shortest_path_only</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>bounds_inclusive</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a list of lanelets which are part of the route and whose downtrack bounds exist within the provided start and end distances. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>The starting downtrack for the query </td></tr>
    <tr><td class="paramname">end</td><td>The ending downtrack for the query. </td></tr>
    <tr><td class="paramname">shortest_path_only</td><td>If true the lanelets returned will be part of the route shortest path param bounds_inclusive If true, the bounds are included so areas which end exactly at start or start exactly at end are included. NOTE: Non-inclusive behavior toggled by !bounds_inclusive is not equivalent to a != check as it merely shrinks bounds by 0.00001 to get new start and end distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If the route is not yet loaded or if start &gt; end</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of lanelets which contain regions that lie between start and end along the route. This function will not return lanelets which are not part of the route </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#ab367c1592ad5e351eae540f87c16ca8d">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00305">305</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  307</span>  {</div>
<div class="line"><span class="lineno">  308</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  310</span>    {</div>
<div class="line"><span class="lineno">  311</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>    }</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">if</span> (start &gt; end)</div>
<div class="line"><span class="lineno">  314</span>    {</div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Start distance is greater than end distance&quot;</span>);</div>
<div class="line"><span class="lineno">  316</span>    }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    std::vector&lt;lanelet::ConstLanelet&gt; output;</div>
<div class="line"><span class="lineno">  319</span>    std::priority_queue&lt;LaneletDowntrackPair, std::vector&lt;LaneletDowntrackPair&gt;, std::greater&lt;LaneletDowntrackPair&gt;&gt;</div>
<div class="line"><span class="lineno">  320</span>        prioritized_lanelets;</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="keyword">auto</span> lanelet_map = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;laneletMap();</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">for</span> (lanelet::ConstLanelet <a class="code hl_namespace" href="namespacelanelet.html">lanelet</a> : lanelet_map-&gt;laneletLayer)</div>
<div class="line"><span class="lineno">  324</span>    {</div>
<div class="line"><span class="lineno">  325</span>      <span class="keywordflow">if</span> (shortest_path_only &amp;&amp; !<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a638d41483eda68460147b65bf43d119c">shortest_path_view_</a>-&gt;laneletLayer.exists(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.id()))</div>
<div class="line"><span class="lineno">  326</span>      {</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">continue</span>;  <span class="comment">// Continue if we are only evaluating the shortest path and this lanelet is not part of it</span></div>
<div class="line"><span class="lineno">  328</span>      }</div>
<div class="line"><span class="lineno">  329</span>      lanelet::ConstLineString2d centerline = lanelet::utils::to2D(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.centerline());</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>      <span class="keyword">auto</span> front = centerline.front();</div>
<div class="line"><span class="lineno">  332</span>      <span class="keyword">auto</span> back = centerline.back();</div>
<div class="line"><span class="lineno">  333</span>      TrackPos min = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(front);</div>
<div class="line"><span class="lineno">  334</span>      TrackPos max = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(back);</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>      <span class="keywordflow">if</span> (!bounds_inclusive) <span class="comment">// reduce bounds slightly to avoid including exact bounds</span></div>
<div class="line"><span class="lineno">  337</span>      {</div>
<div class="line"><span class="lineno">  338</span>        <span class="keywordflow">if</span> (std::max(min.downtrack, start + 0.00001) &gt; std::min(max.downtrack, end - 0.00001)</div>
<div class="line"><span class="lineno">  339</span>          || (start == end &amp;&amp; (min.downtrack &gt;= start || max.downtrack &lt;= end)))</div>
<div class="line"><span class="lineno">  340</span>        {  <span class="comment">// Check for 1d intersection</span></div>
<div class="line"><span class="lineno">  341</span>          <span class="comment">// No intersection so continue</span></div>
<div class="line"><span class="lineno">  342</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  343</span>        }</div>
<div class="line"><span class="lineno">  344</span>      }</div>
<div class="line"><span class="lineno">  345</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  346</span>      {</div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">if</span> (std::max(min.downtrack, start) &gt; std::min(max.downtrack, end)</div>
<div class="line"><span class="lineno">  348</span>          || (start == end &amp;&amp; (min.downtrack &gt; start || max.downtrack &lt; end)))</div>
<div class="line"><span class="lineno">  349</span>        {  <span class="comment">// Check for 1d intersection</span></div>
<div class="line"><span class="lineno">  350</span>          <span class="comment">// No intersection so continue</span></div>
<div class="line"><span class="lineno">  351</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  352</span>        }</div>
<div class="line"><span class="lineno">  353</span>      }</div>
<div class="line"><span class="lineno">  354</span>      <span class="comment">// Intersection has occurred so add lanelet to list</span></div>
<div class="line"><span class="lineno">  355</span>      LaneletDowntrackPair pair(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>, min.downtrack);</div>
<div class="line"><span class="lineno">  356</span>      prioritized_lanelets.push(pair);</div>
<div class="line"><span class="lineno">  357</span>    }</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    output.reserve(prioritized_lanelets.size());</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">while</span> (!prioritized_lanelets.empty())</div>
<div class="line"><span class="lineno">  361</span>    {</div>
<div class="line"><span class="lineno">  362</span>      <span class="keyword">auto</span> pair = prioritized_lanelets.top();</div>
<div class="line"><span class="lineno">  363</span>      prioritized_lanelets.pop();</div>
<div class="line"><span class="lineno">  364</span>      output.push_back(pair.lanelet_);</div>
<div class="line"><span class="lineno">  365</span>    }</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">if</span> (!shortest_path_only)</div>
<div class="line"><span class="lineno">  368</span>    {</div>
<div class="line"><span class="lineno">  369</span>      <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  370</span>    }</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">//Sort lanelets according to shortest path if using shortest path</span></div>
<div class="line"><span class="lineno">  373</span>    std::vector&lt;lanelet::ConstLanelet&gt; sorted_output;</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno">  375</span>    {</div>
<div class="line"><span class="lineno">  376</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; output.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><span class="lineno">  377</span>      {</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">if</span> (llt.id() == output[<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>].id())</div>
<div class="line"><span class="lineno">  379</span>        {</div>
<div class="line"><span class="lineno">  380</span>          sorted_output.push_back(llt);</div>
<div class="line"><span class="lineno">  381</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  382</span>        }</div>
<div class="line"><span class="lineno">  383</span>      }</div>
<div class="line"><span class="lineno">  384</span>    }</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <span class="keywordflow">return</span> sorted_output;</div>
<div class="line"><span class="lineno">  387</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00303">shortest_path_view_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a94ed05d036943a7bf86d002f8d9ece0b_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a94ed05d036943a7bf86d002f8d9ece0b_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a94ed05d036943a7bf86d002f8d9ece0b_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a94ed05d036943a7bf86d002f8d9ece0b_cgraph">
<area shape="rect" title="Returns a list of lanelets which are part of the route and whose downtrack bounds exist within the pr..." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="a2d03a952aeaca737d7dbe9e046d5fb53" name="a2d03a952aeaca737d7dbe9e046d5fb53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d03a952aeaca737d7dbe9e046d5fb53">&#9670;&nbsp;</a></span>getLaneletsFromPoint() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::Lanelet &gt; carma_wm::CARMAWorldModel::getLaneletsFromPoint </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned <a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(non-const version) Gets the underlying lanelet, given the cartesian point on the map </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>Cartesian point to check the corressponding lanelet </td></tr>
    <tr><td class="paramname">n</td><td>Number of lanelets to return. Default is 10. As there could be many lanelets overlapping. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector of underlying lanelet, empty vector if it is not part of any lanelet </dd></dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01198">1198</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1199</span>  {</div>
<div class="line"><span class="lineno"> 1200</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2">carma_wm::query::getLaneletsFromPoint</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, n);</div>
<div class="line"><span class="lineno"> 1201</span>  }</div>
<div class="ttc" id="anamespacecarma__wm_1_1query_html_a8933b74d652e02d07be1170b787d87a2"><div class="ttname"><a href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2">carma_wm::query::getLaneletsFromPoint</a></div><div class="ttdeci">std::vector&lt; lanelet::ConstLanelet &gt; getLaneletsFromPoint(const lanelet::LaneletMapConstPtr &amp;semantic_map, const lanelet::BasicPoint2d &amp;point, const unsigned int n=10)</div><div class="ttdoc">carma_wm::query namespace contains implementations for query functions (input and output read or writ...</div><div class="ttdef"><b>Definition:</b> <a href="WorldModelUtils_8cpp_source.html#l00024">WorldModelUtils.cpp:24</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_ab81a05c3d1d100117b6781d7dedf8a29"><div class="ttname"><a href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">process_traj_logs.point</a></div><div class="ttdeci">point</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00126">process_traj_logs.py:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="WorldModelUtils_8cpp_source.html#l00024">carma_wm::query::getLaneletsFromPoint()</a>, <a class="el" href="process__traj__logs_8py_source.html#l00126">process_traj_logs::point</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a2d03a952aeaca737d7dbe9e046d5fb53_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a2d03a952aeaca737d7dbe9e046d5fb53_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a2d03a952aeaca737d7dbe9e046d5fb53_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a2d03a952aeaca737d7dbe9e046d5fb53_cgraph">
<area shape="rect" title="(non&#45;const version) Gets the underlying lanelet, given the cartesian point on the map" alt="" coords="5,5,212,47"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2" title="carma_wm::query namespace contains implementations for query functions (input and output read or writ..." alt="" coords="260,5,457,47"/>
</map>
</div>

</div>
</div>
<a id="a4906974d4b81497534e01b50c2edaef2" name="a4906974d4b81497534e01b50c2edaef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4906974d4b81497534e01b50c2edaef2">&#9670;&nbsp;</a></span>getLaneletsFromPoint() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::ConstLanelet &gt; carma_wm::CARMAWorldModel::getLaneletsFromPoint </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned <a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>n</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the underlying lanelet, given the cartesian point on the map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>Cartesian point to check the corressponding lanelet </td></tr>
    <tr><td class="paramname">n</td><td>Number of lanelets to return. Default is 10. As there could be many lanelets overlapping. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector of underlying lanelet, empty vector if it is not part of any lanelet </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#ac25572b44084a22d28b4052815ccfd76">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01203">1203</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1204</span>  {</div>
<div class="line"><span class="lineno"> 1205</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2">carma_wm::query::getLaneletsFromPoint</a>(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d">getMap</a>(), <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, n);</div>
<div class="line"><span class="lineno"> 1206</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a5a40e4c8b3107914d61fb8f8064c842d"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d">carma_wm::CARMAWorldModel::getMap</a></div><div class="ttdeci">lanelet::LaneletMapConstPtr getMap() const override</div><div class="ttdoc">Get a pointer to the current map. If the underlying map has changed the pointer will also need to be ...</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00547">CARMAWorldModel.cpp:547</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="WorldModelUtils_8cpp_source.html#l00024">carma_wm::query::getLaneletsFromPoint()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00547">getMap()</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00126">process_traj_logs::point</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a4906974d4b81497534e01b50c2edaef2_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a4906974d4b81497534e01b50c2edaef2_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a4906974d4b81497534e01b50c2edaef2_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a4906974d4b81497534e01b50c2edaef2_cgraph">
<area shape="rect" title="Gets the underlying lanelet, given the cartesian point on the map." alt="" coords="5,39,212,80"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2" title="carma_wm::query namespace contains implementations for query functions (input and output read or writ..." alt="" coords="265,5,462,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d" title="Get a pointer to the current map. If the underlying map has changed the pointer will also need to be ..." alt="" coords="260,71,467,112"/>
</map>
</div>

</div>
</div>
<a id="a5a40e4c8b3107914d61fb8f8064c842d" name="a5a40e4c8b3107914d61fb8f8064c842d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a40e4c8b3107914d61fb8f8064c842d">&#9670;&nbsp;</a></span>getMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::LaneletMapConstPtr carma_wm::CARMAWorldModel::getMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer to the current map. If the underlying map has changed the pointer will also need to be reacquired. </p>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to underlying lanelet map. Pointer will return false on boolean check if no map is loaded </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a58032e48c2812e5b2f9f07a603e58275">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00547">547</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  548</span>  {</div>
<div class="line"><span class="lineno">  549</span>    <span class="keywordflow">return</span> std::static_pointer_cast&lt;lanelet::LaneletMap const&gt;(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>);  <span class="comment">// Cast pointer to const variant</span></div>
<div class="line"><span class="lineno">  550</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01203">getLaneletsFromPoint()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l01213">nonConnectedAdjacentLeft()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a5a40e4c8b3107914d61fb8f8064c842d_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a5a40e4c8b3107914d61fb8f8064c842d_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a5a40e4c8b3107914d61fb8f8064c842d_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a5a40e4c8b3107914d61fb8f8064c842d_icgraph">
<area shape="rect" title="Get a pointer to the current map. If the underlying map has changed the pointer will also need to be ..." alt="" coords="260,39,467,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a4906974d4b81497534e01b50c2edaef2" title="Gets the underlying lanelet, given the cartesian point on the map." alt="" coords="5,5,212,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a3760e63d093f5422dcf3a5a7b3b2e7ae" title="Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This fu..." alt="" coords="5,71,212,112"/>
</map>
</div>

</div>
</div>
<a id="ad5ab77fa0c1aed586c8ba0a68335e6c6" name="ad5ab77fa0c1aed586c8ba0a68335e6c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ab77fa0c1aed586c8ba0a68335e6c6">&#9670;&nbsp;</a></span>getMapRoutingGraph()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecarma__wm.html#adf411948c7e36aa0fb3071195e103015">LaneletRoutingGraphConstPtr</a> carma_wm::CARMAWorldModel::getMapRoutingGraph </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer to the routing graph for the current map. If the underlying map has changed the pointer will also need to be reacquired. </p>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to underlying lanelet route graph. Pointer will return false on boolean check if no map is loaded </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a60083f6644af47bbec532fa48d1773e1">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00756">756</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  757</span>  {</div>
<div class="line"><span class="lineno">  758</span>    <span class="keywordflow">return</span> std::static_pointer_cast&lt;const lanelet::routing::RoutingGraph&gt;(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>);  <span class="comment">// Cast pointer to const</span></div>
<div class="line"><span class="lineno">  759</span>                                                                                               <span class="comment">// variant</span></div>
<div class="line"><span class="lineno">  760</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>.</p>

</div>
</div>
<a id="ad92f6809a910fbea75fed45b2c606d04" name="ad92f6809a910fbea75fed45b2c606d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad92f6809a910fbea75fed45b2c606d04">&#9670;&nbsp;</a></span>getMapVersion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t carma_wm::CARMAWorldModel::getMapVersion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a monotonically increasing version number which represents the version stamp of the map geometry data It is possible for the non-geometric aspects of the map to change without this value increasing. </p>
<dl class="section return"><dt>Returns</dt><dd>map version </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a71ece013a582fe39495528030be68a7e">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00606">606</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  607</span>  {</div>
<div class="line"><span class="lineno">  608</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#aaa43a960c21ca5a8b82d4bb74a5377fd">map_version_</a>;</div>
<div class="line"><span class="lineno">  609</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_aaa43a960c21ca5a8b82d4bb74a5377fd"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#aaa43a960c21ca5a8b82d4bb74a5377fd">carma_wm::CARMAWorldModel::map_version_</a></div><div class="ttdeci">size_t map_version_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00312">CARMAWorldModel.hpp:312</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00312">map_version_</a>.</p>

</div>
</div>
<a id="ab2440a153a52460b92cff4017407dcbb" name="ab2440a153a52460b92cff4017407dcbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2440a153a52460b92cff4017407dcbb">&#9670;&nbsp;</a></span>getMutableMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::LaneletMapPtr carma_wm::CARMAWorldModel::getMutableMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a mutable version of the current map. </p>
<p >NOTE: the user must make sure to <a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a5fe3b961294db12603fe8eb5e7d2ea70" title="Set the current map.">setMap()</a> after any edit to the map and to set a valid route </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00611">611</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  612</span>  {</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>;</div>
<div class="line"><span class="lineno">  614</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>

</div>
</div>
<a id="a5a13a3b4f0599ad702745e559619965f" name="a5a13a3b4f0599ad702745e559619965f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a13a3b4f0599ad702745e559619965f">&#9670;&nbsp;</a></span>getNearestObjInLane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt; carma_wm::CARMAWorldModel::getNearestObjInLane </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>object_center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827">LaneSection</a> &amp;&#160;</td>
          <td class="paramname"><em>section</em> = <code><a class="el" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane. Gets Downtrack distance to AND copy of the closest object on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_center</td><td>the point to measure the distance from </td></tr>
    <tr><td class="paramname">section</td><td>either of LANE_AHEAD, LANE_BEHIND, LANE_FULL each including the current lanelet</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or the given point is not on the current semantic map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional tuple of &lt;<a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle&gt; to the closest in lane object. Return empty if there is no objects on current lane or the road </dd></dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">992</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  993</span>  {</div>
<div class="line"><span class="lineno">  994</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno">  995</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.size() == 0)</div>
<div class="line"><span class="lineno">  996</span>    {</div>
<div class="line"><span class="lineno">  997</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno">  998</span>    }</div>
<div class="line"><span class="lineno">  999</span> </div>
<div class="line"><span class="lineno"> 1000</span>    <span class="comment">// return empty if there is no object nearby</span></div>
<div class="line"><span class="lineno"> 1001</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>.size() == 0)</div>
<div class="line"><span class="lineno"> 1002</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>    <span class="comment">// Get the lanelet of this point</span></div>
<div class="line"><span class="lineno"> 1005</span>    <span class="keyword">auto</span> curr_lanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.nearest(object_center, 1)[0];</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>    <span class="comment">// Check if this point at least is actually within this lanelet; otherwise, it wouldn&#39;t be &quot;in-lane&quot;</span></div>
<div class="line"><span class="lineno"> 1008</span>    <span class="keywordflow">if</span> (!boost::geometry::within(object_center, curr_lanelet.polygon2d().basicPolygon()))</div>
<div class="line"><span class="lineno"> 1009</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Given point is not within any lanelet&quot;</span>);</div>
<div class="line"><span class="lineno"> 1010</span> </div>
<div class="line"><span class="lineno"> 1011</span>    <span class="comment">// Get objects that are in the lane</span></div>
<div class="line"><span class="lineno"> 1012</span>    std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; lane_objects = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd">getInLaneObjects</a>(curr_lanelet, section);</div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>    <span class="comment">// return empty if there is no object in the lane</span></div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">if</span> (lane_objects.size() == 0)</div>
<div class="line"><span class="lineno"> 1016</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>    <span class="comment">// Get the lane that is including this lanelet</span></div>
<div class="line"><span class="lineno"> 1019</span>    std::vector&lt;lanelet::ConstLanelet&gt; lane_section = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7">getLane</a>(curr_lanelet, section);</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>    std::vector&lt;double&gt; object_downtracks, object_crosstracks;</div>
<div class="line"><span class="lineno"> 1022</span>    std::vector&lt;int&gt; object_idxs;</div>
<div class="line"><span class="lineno"> 1023</span>    std::queue&lt;int&gt; obj_idxs_queue;</div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keywordtype">double</span> base_downtrack = 0;</div>
<div class="line"><span class="lineno"> 1025</span>    <span class="keywordtype">double</span> input_obj_downtrack = 0;</div>
<div class="line"><span class="lineno"> 1026</span>    <span class="keywordtype">int</span> curr_idx = 0;</div>
<div class="line"><span class="lineno"> 1027</span> </div>
<div class="line"><span class="lineno"> 1028</span>    <span class="comment">// Create an index queue for in lane objects to quickly pop the idx if associated</span></div>
<div class="line"><span class="lineno"> 1029</span>    <span class="comment">// lanelet is found. This is to reduce number of objects to check as we check new lanelets</span></div>
<div class="line"><span class="lineno"> 1030</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> = 0; <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a> &lt; lane_objects.size(); <a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>++)</div>
<div class="line"><span class="lineno"> 1031</span>    {</div>
<div class="line"><span class="lineno"> 1032</span>      obj_idxs_queue.push((<span class="keywordtype">int</span>)<a class="code hl_variable" href="namespaceprocess__bag.html#af102a02c97622dd30b0dbf7bafb0d199">i</a>);</div>
<div class="line"><span class="lineno"> 1033</span>    }</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>    <span class="comment">// For each lanelet, check if each object is inside it. if so, calculate downtrack</span></div>
<div class="line"><span class="lineno"> 1036</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> llt : lane_section)</div>
<div class="line"><span class="lineno"> 1037</span>    {</div>
<div class="line"><span class="lineno"> 1038</span>      <span class="keywordtype">int</span> checked_queue_items = 0, to_check = obj_idxs_queue.size();</div>
<div class="line"><span class="lineno"> 1039</span> </div>
<div class="line"><span class="lineno"> 1040</span>      <span class="comment">// check each remaining objects</span></div>
<div class="line"><span class="lineno"> 1041</span>      <span class="keywordflow">while</span> (checked_queue_items &lt; to_check)</div>
<div class="line"><span class="lineno"> 1042</span>      {</div>
<div class="line"><span class="lineno"> 1043</span>        curr_idx = obj_idxs_queue.front();</div>
<div class="line"><span class="lineno"> 1044</span>        obj_idxs_queue.pop();</div>
<div class="line"><span class="lineno"> 1045</span>        checked_queue_items++;</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>        <span class="comment">// if the object is on it, store its total downtrack distance</span></div>
<div class="line"><span class="lineno"> 1048</span>        <span class="keywordflow">if</span> (lane_objects[curr_idx].lanelet_id == llt.id())</div>
<div class="line"><span class="lineno"> 1049</span>        {</div>
<div class="line"><span class="lineno"> 1050</span>          object_downtracks.push_back(base_downtrack + lane_objects[curr_idx].down_track);</div>
<div class="line"><span class="lineno"> 1051</span>          object_crosstracks.push_back(lane_objects[curr_idx].cross_track);</div>
<div class="line"><span class="lineno"> 1052</span>          object_idxs.push_back(curr_idx);</div>
<div class="line"><span class="lineno"> 1053</span>        }</div>
<div class="line"><span class="lineno"> 1054</span>        <span class="comment">// if it&#39;s not on it, try adjacent lanelets because the object could be lane changing</span></div>
<div class="line"><span class="lineno"> 1055</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;left(llt) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1056</span>                  lane_objects[curr_idx].lanelet_id == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;left(llt).get().id()) ||</div>
<div class="line"><span class="lineno"> 1057</span>                 (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;right(llt) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1058</span>                  lane_objects[curr_idx].lanelet_id == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a>-&gt;right(llt).get().id()))</div>
<div class="line"><span class="lineno"> 1059</span>        {</div>
<div class="line"><span class="lineno"> 1060</span>          <span class="comment">// no need to check intersection as the objects are guaranteed to be intersecting this lane</span></div>
<div class="line"><span class="lineno"> 1061</span>          lanelet::BasicPoint2d obj_center(lane_objects[curr_idx].<span class="keywordtype">object</span>.pose.pose.position.x,</div>
<div class="line"><span class="lineno"> 1062</span>                                           lane_objects[curr_idx].object.pose.pose.position.y);</div>
<div class="line"><span class="lineno"> 1063</span>          TrackPos new_tp = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(llt, obj_center);</div>
<div class="line"><span class="lineno"> 1064</span>          object_downtracks.push_back(base_downtrack + new_tp.downtrack);</div>
<div class="line"><span class="lineno"> 1065</span>          object_crosstracks.push_back(lane_objects[curr_idx].cross_track);</div>
<div class="line"><span class="lineno"> 1066</span>          object_idxs.push_back(curr_idx);</div>
<div class="line"><span class="lineno"> 1067</span>        }</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1069</span>        {</div>
<div class="line"><span class="lineno"> 1070</span>          <span class="comment">// the object is not in the lanelet if above conditions do not meet</span></div>
<div class="line"><span class="lineno"> 1071</span>          obj_idxs_queue.push(curr_idx);</div>
<div class="line"><span class="lineno"> 1072</span>        }</div>
<div class="line"><span class="lineno"> 1073</span>      }</div>
<div class="line"><span class="lineno"> 1074</span>      <span class="comment">// try to update object_center&#39;s downtrack</span></div>
<div class="line"><span class="lineno"> 1075</span>      <span class="keywordflow">if</span> (curr_lanelet.id() == llt.id())</div>
<div class="line"><span class="lineno"> 1076</span>        input_obj_downtrack = base_downtrack + <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(llt, object_center).<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>      <span class="comment">// this lanelet&#39;s entire centerline as downtrack</span></div>
<div class="line"><span class="lineno"> 1079</span>      base_downtrack +=</div>
<div class="line"><span class="lineno"> 1080</span>          <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(llt.centerline().back().basicPoint2d(), llt.centerline().front().basicPoint2d(),</div>
<div class="line"><span class="lineno"> 1081</span>                             llt.centerline().back().basicPoint2d())</div>
<div class="line"><span class="lineno"> 1082</span>              .<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><span class="lineno"> 1083</span>    }</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>    <span class="comment">// compare with input&#39;s downtrack and return the min_dist</span></div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordtype">size_t</span> min_idx = 0;</div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keywordtype">double</span> min_dist = INFINITY;</div>
<div class="line"><span class="lineno"> 1088</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx = 0; idx &lt; object_downtracks.size(); idx++)</div>
<div class="line"><span class="lineno"> 1089</span>    {</div>
<div class="line"><span class="lineno"> 1090</span>      <span class="keywordflow">if</span> (min_dist &gt; std::fabs(object_downtracks[idx] - input_obj_downtrack))</div>
<div class="line"><span class="lineno"> 1091</span>      {</div>
<div class="line"><span class="lineno"> 1092</span>        min_dist = std::fabs(object_downtracks[idx] - input_obj_downtrack);</div>
<div class="line"><span class="lineno"> 1093</span>        min_idx = idx;</div>
<div class="line"><span class="lineno"> 1094</span>      }</div>
<div class="line"><span class="lineno"> 1095</span>    }</div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span>    <span class="comment">// if before the parallel line with the start of the llt that crosses given object_center, neg downtrack.</span></div>
<div class="line"><span class="lineno"> 1098</span>    <span class="comment">// if left to the parallel line with the centerline of the llt that crosses given object_center, pos crosstrack</span></div>
<div class="line"><span class="lineno"> 1099</span>    <span class="keywordflow">return</span> std::tuple&lt;TrackPos, carma_perception_msgs::msg::RoadwayObstacle&gt;(</div>
<div class="line"><span class="lineno"> 1100</span>        TrackPos(object_downtracks[min_idx] - input_obj_downtrack,</div>
<div class="line"><span class="lineno"> 1101</span>                 object_crosstracks[min_idx] - <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(curr_lanelet, object_center).crosstrack),</div>
<div class="line"><span class="lineno"> 1102</span>        lane_objects[object_idxs[min_idx]]);</div>
<div class="line"><span class="lineno"> 1103</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a6ea99bbb9c6a75685ceaaf370d58ea24"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">carma_wm::TrackPos::downtrack</a></div><div class="ttdeci">double downtrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00037">TrackPos.hpp:37</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_aebce986f21c117983313292d5e82b50a"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">carma_wm::geometry::trackPos</a></div><div class="ttdeci">TrackPos trackPos(const lanelet::ConstLanelet &amp;lanelet, const lanelet::BasicPoint2d &amp;point)</div><div class="ttdoc">Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00120">Geometry.cpp:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">getInLaneObjects()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01116">getLane()</a>, <a class="el" href="process__bag_8py_source.html#l00059">process_bag::i</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">roadway_objects_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>, and <a class="el" href="Geometry_8cpp_source.html#l00120">carma_wm::geometry::trackPos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01106">nearestObjectAheadInLane()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l01112">nearestObjectBehindInLane()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_cgraph">
<area shape="rect" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="5,68,212,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="260,68,467,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="515,5,721,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="291,136,436,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="543,71,693,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="545,136,691,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="769,136,915,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a5a13a3b4f0599ad702745e559619965f_icgraph">
<area shape="rect" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,39,467,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#afbee9dff34ee62ac507d5fc39bcb2e10" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="5,5,212,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#aa291cd8ca71835c0720dc853031be300" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="5,71,212,112"/>
</map>
</div>

</div>
</div>
<a id="ae55700e04e2eb0fef627e965c972913f" name="ae55700e04e2eb0fef627e965c972913f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55700e04e2eb0fef627e965c972913f">&#9670;&nbsp;</a></span>getRoadwayObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; carma_wm::CARMAWorldModel::getRoadwayObjects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get most recent roadway objects - all objects on the road detected by perception stack. </p>
<dl class="section return"><dt>Returns</dt><dd>Vector list of RoadwayObstacle which are lanelet compatible. Empty vector if no object found. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#aaef29e9f714ae84de6e1c561d35242c2">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00851">851</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  852</span>  {</div>
<div class="line"><span class="lineno">  853</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a>;</div>
<div class="line"><span class="lineno">  854</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">roadway_objects_</a>.</p>

</div>
</div>
<a id="a66c85b8e37dbce1a90e88cc59bd302a3" name="a66c85b8e37dbce1a90e88cc59bd302a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66c85b8e37dbce1a90e88cc59bd302a3">&#9670;&nbsp;</a></span>getRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecarma__wm.html#a5fd066f918b870bd4c2d19a4acbd6247">LaneletRouteConstPtr</a> carma_wm::CARMAWorldModel::getRoute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer to the current route. If the underlying route has changed the pointer will also need to be reacquired. </p>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to underlying lanelet route. Pointer will return false on boolean check if no route or map is loaded </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#afd26daaa181f1ed988f458e48bd00410">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00552">552</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  553</span>  {</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">return</span> std::static_pointer_cast&lt;const lanelet::routing::Route&gt;(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>);  <span class="comment">// Cast pointer to const variant</span></div>
<div class="line"><span class="lineno">  555</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>.</p>

</div>
</div>
<a id="ab4df78110aa7dd6644ecbe3e5a69eb29" name="ab4df78110aa7dd6644ecbe3e5a69eb29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4df78110aa7dd6644ecbe3e5a69eb29">&#9670;&nbsp;</a></span>getRouteEndTrackPos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> carma_wm::CARMAWorldModel::getRouteEndTrackPos </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get trackpos of the end of route point relative to the route. </p>
<dl class="section return"><dt>Returns</dt><dd>Trackpos </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a4ed4840920c0304929febbac3f58a703">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00557">557</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  558</span>  {</div>
<div class="line"><span class="lineno">  559</span>    TrackPos p(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a6f380415bf80871a93e50f91a63c1e55">route_length_</a>, 0);</div>
<div class="line"><span class="lineno">  560</span>    <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">  561</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a6f380415bf80871a93e50f91a63c1e55"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a6f380415bf80871a93e50f91a63c1e55">carma_wm::CARMAWorldModel::route_length_</a></div><div class="ttdeci">double route_length_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00302">CARMAWorldModel.hpp:302</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00302">route_length_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">pointFromRouteTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00389">sampleRoutePoints()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_ab4df78110aa7dd6644ecbe3e5a69eb29_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_ab4df78110aa7dd6644ecbe3e5a69eb29_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_ab4df78110aa7dd6644ecbe3e5a69eb29_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_ab4df78110aa7dd6644ecbe3e5a69eb29_icgraph">
<area shape="rect" title="Get trackpos of the end of route point relative to the route." alt="" coords="515,35,721,76"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087" title="Converts a route track position into a map frame cartesian point." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#af091e77668f082aaafea367836118dc9" title="Samples the route centerline between the provided downtracks with the provided step size...." alt="" coords="5,35,212,76"/>
</map>
</div>

</div>
</div>
<a id="afd9d046bb42aa65aef6acc32734faff8" name="afd9d046bb42aa65aef6acc32734faff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9d046bb42aa65aef6acc32734faff8">&#9670;&nbsp;</a></span>getRouteName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string carma_wm::CARMAWorldModel::getRouteName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current route name. </p>
<dl class="section return"><dt>Returns</dt><dd>A string that matches the name of the current route. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#ae469629371b4ba89ea5dfaa805cedcbb">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00657">657</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  658</span>  {</div>
<div class="line"><span class="lineno">  659</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ae7c61e95776f7c1d84517fa83c725129">route_name_</a>;</div>
<div class="line"><span class="lineno">  660</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_ae7c61e95776f7c1d84517fa83c725129"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#ae7c61e95776f7c1d84517fa83c725129">carma_wm::CARMAWorldModel::route_name_</a></div><div class="ttdeci">std::string route_name_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00314">CARMAWorldModel.hpp:314</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00314">route_name_</a>.</p>

</div>
</div>
<a id="af75fa37311df1df558e148cdfa914eff" name="af75fa37311df1df558e148cdfa914eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af75fa37311df1df558e148cdfa914eff">&#9670;&nbsp;</a></span>getSignalizedIntersectionsAlongRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::SignalizedIntersectionPtr &gt; carma_wm::CARMAWorldModel::getSignalizedIntersectionsAlongRoute </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>loc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of signalized intersections along the current route. <br  />
 The signalized intersections along a route and the next signalized intersections ahead of us on the route specifically, so a sorted list (by downtrack distance) of signalized intersections on the route ahead of us thus eliminating those behind the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loc</td><td>location </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or route is not set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of signalized intersections along the current route </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a40f33d4dcec5dbbe140ce381c1844602">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01355">1355</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1356</span>  {</div>
<div class="line"><span class="lineno"> 1357</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno"> 1358</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.empty())</div>
<div class="line"><span class="lineno"> 1359</span>    {</div>
<div class="line"><span class="lineno"> 1360</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno"> 1361</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1362</span>    }</div>
<div class="line"><span class="lineno"> 1363</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno"> 1365</span>    {</div>
<div class="line"><span class="lineno"> 1366</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno"> 1367</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1368</span>    }</div>
<div class="line"><span class="lineno"> 1369</span>    std::vector&lt;lanelet::SignalizedIntersectionPtr&gt; intersection_list;</div>
<div class="line"><span class="lineno"> 1370</span>    <span class="keyword">auto</span> curr_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(loc).downtrack;</div>
<div class="line"><span class="lineno"> 1371</span>    <span class="comment">// shortpath is already sorted by distance</span></div>
<div class="line"><span class="lineno"> 1372</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ll : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno"> 1373</span>    {</div>
<div class="line"><span class="lineno"> 1374</span>      <span class="keyword">auto</span> intersections = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.get(ll.id()).regulatoryElementsAs&lt;lanelet::SignalizedIntersection&gt;();</div>
<div class="line"><span class="lineno"> 1375</span>      <span class="keywordflow">if</span> (intersections.empty())</div>
<div class="line"><span class="lineno"> 1376</span>      {</div>
<div class="line"><span class="lineno"> 1377</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1378</span>      }</div>
<div class="line"><span class="lineno"> 1379</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> intersection : intersections)</div>
<div class="line"><span class="lineno"> 1380</span>      {</div>
<div class="line"><span class="lineno"> 1381</span>        <span class="keywordtype">double</span> intersection_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(ll.centerline().back().basicPoint2d()).downtrack;</div>
<div class="line"><span class="lineno"> 1382</span>        <span class="keywordflow">if</span> (intersection_downtrack &lt; curr_downtrack)</div>
<div class="line"><span class="lineno"> 1383</span>        {</div>
<div class="line"><span class="lineno"> 1384</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1385</span>        }</div>
<div class="line"><span class="lineno"> 1386</span>        intersection_list.push_back(intersection);</div>
<div class="line"><span class="lineno"> 1387</span>      }</div>
<div class="line"><span class="lineno"> 1388</span>    }</div>
<div class="line"><span class="lineno"> 1389</span>    <span class="keywordflow">return</span> intersection_list;</div>
<div class="line"><span class="lineno"> 1390</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_af75fa37311df1df558e148cdfa914eff_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_af75fa37311df1df558e148cdfa914eff_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_af75fa37311df1df558e148cdfa914eff_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_af75fa37311df1df558e148cdfa914eff_cgraph">
<area shape="rect" title="Return a list of signalized intersections along the current route. &#160;&#160;The signalized intersections alo..." alt="" coords="5,29,252,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="300,29,507,71"/>
</map>
</div>

</div>
</div>
<a id="adc595705809b40e5eff0355bc296a3ad" name="adc595705809b40e5eff0355bc296a3ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc595705809b40e5eff0355bc296a3ad">&#9670;&nbsp;</a></span>getSignalsAlongRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::CarmaTrafficSignalPtr &gt; carma_wm::CARMAWorldModel::getSignalsAlongRoute </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>loc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of traffic lights/intersections along the current route. <br  />
 The traffic lights along a route and the next traffic light ahead of us on the route specifically, so a sorted list (by downtrack distance) of traffic lights on the route ahead of us thus eliminating those behind the vehicle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loc</td><td>location </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or route is not set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of traffic lights along the current route </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a290dab5247a5ce7b9c65a43e6c576d96">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01218">1218</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1219</span>  {</div>
<div class="line"><span class="lineno"> 1220</span>    <span class="comment">// Check if the map is loaded yet</span></div>
<div class="line"><span class="lineno"> 1221</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.empty())</div>
<div class="line"><span class="lineno"> 1222</span>    {</div>
<div class="line"><span class="lineno"> 1223</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno"> 1224</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1225</span>    }</div>
<div class="line"><span class="lineno"> 1226</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno"> 1228</span>    {</div>
<div class="line"><span class="lineno"> 1229</span>      RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno"> 1230</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno"> 1231</span>    }</div>
<div class="line"><span class="lineno"> 1232</span>    std::vector&lt;lanelet::CarmaTrafficSignalPtr&gt; light_list;</div>
<div class="line"><span class="lineno"> 1233</span>    <span class="keyword">auto</span> curr_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(loc).downtrack;</div>
<div class="line"><span class="lineno"> 1234</span>    <span class="comment">// shortpath is already sorted by distance</span></div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ll : <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath())</div>
<div class="line"><span class="lineno"> 1237</span>    {</div>
<div class="line"><span class="lineno"> 1238</span>      <span class="keyword">auto</span> lights = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.get(ll.id()).regulatoryElementsAs&lt;lanelet::CarmaTrafficSignal&gt;();</div>
<div class="line"><span class="lineno"> 1239</span>      <span class="keywordflow">if</span> (lights.empty())</div>
<div class="line"><span class="lineno"> 1240</span>      {</div>
<div class="line"><span class="lineno"> 1241</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1242</span>      }</div>
<div class="line"><span class="lineno"> 1243</span> </div>
<div class="line"><span class="lineno"> 1244</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> light : lights)</div>
<div class="line"><span class="lineno"> 1245</span>      {</div>
<div class="line"><span class="lineno"> 1246</span>        <span class="keyword">auto</span> stop_line = light-&gt;getStopLine(ll);</div>
<div class="line"><span class="lineno"> 1247</span>        <span class="keywordflow">if</span> (!stop_line)</div>
<div class="line"><span class="lineno"> 1248</span>        {</div>
<div class="line"><span class="lineno"> 1249</span>          RCLCPP_ERROR_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;No stop line&quot;</span>);</div>
<div class="line"><span class="lineno"> 1250</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1251</span>        }</div>
<div class="line"><span class="lineno"> 1252</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1253</span>        {</div>
<div class="line"><span class="lineno"> 1254</span>          <span class="keywordtype">double</span> light_downtrack = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(stop_line.get().front().basicPoint2d()).downtrack;</div>
<div class="line"><span class="lineno"> 1255</span>          <span class="keywordtype">double</span> distance_remaining_to_traffic_light = light_downtrack - curr_downtrack;</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>          <span class="keywordflow">if</span> (distance_remaining_to_traffic_light &lt; 0)</div>
<div class="line"><span class="lineno"> 1258</span>          {</div>
<div class="line"><span class="lineno"> 1259</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1260</span>          }</div>
<div class="line"><span class="lineno"> 1261</span>          light_list.push_back(light);</div>
<div class="line"><span class="lineno"> 1262</span>        }</div>
<div class="line"><span class="lineno"> 1263</span>      }</div>
<div class="line"><span class="lineno"> 1264</span>    }</div>
<div class="line"><span class="lineno"> 1265</span>    <span class="keywordflow">return</span> light_list;</div>
<div class="line"><span class="lineno"> 1266</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_adc595705809b40e5eff0355bc296a3ad_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_adc595705809b40e5eff0355bc296a3ad_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_adc595705809b40e5eff0355bc296a3ad_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_adc595705809b40e5eff0355bc296a3ad_cgraph">
<area shape="rect" title="Return a list of traffic lights/intersections along the current route. &#160;&#160;The traffic lights along a r..." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="a6d75cb8cde721072cc7f69edd0ececb6" name="a6d75cb8cde721072cc7f69edd0ececb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d75cb8cde721072cc7f69edd0ececb6">&#9670;&nbsp;</a></span>getTrafficRules() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt; carma_wm::CARMAWorldModel::getTrafficRules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Traffic Rules object. </p>
<dl class="section return"><dt>Returns</dt><dd>Optional Shared pointer to an intialized traffic rules object which is used by carma. A default participant value will be used in case setVehicleParticipationType is not called. Acceptable participants are Vehicle, VehicleCar, and VehicleTruck </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a8e611ab5478ca1c5f1e1c2b367aa4e58">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">787</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  788</span>  {</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">getTrafficRules</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a>);</div>
<div class="line"><span class="lineno">  791</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">getTrafficRules()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">participant_type_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">getTrafficRules()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">setMap()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_cgraph">
<area shape="rect" title="Get the Traffic Rules object." alt="" coords="5,29,212,71"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a6d75cb8cde721072cc7f69edd0ececb6_icgraph">
<area shape="rect" title="Get the Traffic Rules object." alt="" coords="532,39,739,80"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8" title="Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio..." alt="" coords="260,5,484,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5fe3b961294db12603fe8eb5e7d2ea70" title="Set the current map." alt="" coords="269,71,475,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69" title="Set the current route. This route must match the current map for this class to function properly." alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="a613afbb59e383290e001276decdd9836" name="a613afbb59e383290e001276decdd9836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a613afbb59e383290e001276decdd9836">&#9670;&nbsp;</a></span>getTrafficRules() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; <a class="el" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> &gt; carma_wm::CARMAWorldModel::getTrafficRules </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>participant</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer to the traffic rules object used internally by the world model and considered the carma system default. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">participant</td><td>The lanelet participant to return the traffic rules object for. Defaults to a generic vehicle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Optional Shared pointer to an intialized traffic rules object which is used by carma. Optional is false if no rule set is available for the requested participant. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#af32c582eb5b2c0b3931f5de474897caa">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00762">762</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  763</span>  {</div>
<div class="line"><span class="lineno">  764</span>    lanelet::Optional&lt;TrafficRulesConstPtr&gt; optional_ptr;</div>
<div class="line"><span class="lineno">  765</span>    <span class="comment">// Create carma traffic rules object</span></div>
<div class="line"><span class="lineno">  766</span>    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  767</span>    {</div>
<div class="line"><span class="lineno">  768</span>      lanelet::traffic_rules::TrafficRulesUPtr traffic_rules = lanelet::traffic_rules::TrafficRulesFactory::create(</div>
<div class="line"><span class="lineno">  769</span>          lanelet::traffic_rules::CarmaUSTrafficRules::Location, participant);</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>      <span class="keyword">auto</span> carma_traffic_rules = std::make_shared&lt;lanelet::traffic_rules::CarmaUSTrafficRules&gt;();</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>      carma_traffic_rules = std::static_pointer_cast&lt;lanelet::traffic_rules::CarmaUSTrafficRules&gt;(</div>
<div class="line"><span class="lineno">  774</span>          lanelet::traffic_rules::TrafficRulesPtr(std::move(traffic_rules)));</div>
<div class="line"><span class="lineno">  775</span>      carma_traffic_rules-&gt;setConfigSpeedLimit(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#aa559413794368641911d969bd40daac4">config_speed_limit_</a>);</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>      optional_ptr = std::static_pointer_cast&lt;const lanelet::traffic_rules::CarmaUSTrafficRules&gt;(carma_traffic_rules);</div>
<div class="line"><span class="lineno">  778</span>    }</div>
<div class="line"><span class="lineno">  779</span>    <span class="keywordflow">catch</span> (<span class="keyword">const</span> lanelet::InvalidInputError&amp; e)</div>
<div class="line"><span class="lineno">  780</span>    {</div>
<div class="line"><span class="lineno">  781</span>      <span class="keywordflow">return</span> optional_ptr;</div>
<div class="line"><span class="lineno">  782</span>    }</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>    <span class="keywordflow">return</span> optional_ptr;</div>
<div class="line"><span class="lineno">  785</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_aa559413794368641911d969bd40daac4"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#aa559413794368641911d969bd40daac4">carma_wm::CARMAWorldModel::config_speed_limit_</a></div><div class="ttdeci">double config_speed_limit_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00274">CARMAWorldModel.hpp:274</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00274">config_speed_limit_</a>.</p>

</div>
</div>
<a id="a65df34058ada8f5a64a7abd1a6e2afae" name="a65df34058ada8f5a64a7abd1a6e2afae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65df34058ada8f5a64a7abd1a6e2afae">&#9670;&nbsp;</a></span>getTrafficSignal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::CarmaTrafficSignalPtr carma_wm::CARMAWorldModel::getTrafficSignal </td>
          <td>(</td>
          <td class="paramtype">const lanelet::Id &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>helper for getting traffic signal with given lanelet::Id </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01392">1392</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1393</span>  {</div>
<div class="line"><span class="lineno"> 1394</span>    <span class="keyword">auto</span> general_regem = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;regulatoryElementLayer.get(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1395</span> </div>
<div class="line"><span class="lineno"> 1396</span>    <span class="keyword">auto</span> lanelets_general = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.findUsages(general_regem);</div>
<div class="line"><span class="lineno"> 1397</span>    <span class="keywordflow">if</span> (lanelets_general.empty())</div>
<div class="line"><span class="lineno"> 1398</span>    {</div>
<div class="line"><span class="lineno"> 1399</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;There was an error querying lanelet for traffic light with id: &quot;</span> &lt;&lt; <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1400</span>    }</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keyword">auto</span> curr_light_list = lanelets_general[0].regulatoryElementsAs&lt;lanelet::CarmaTrafficSignal&gt;();</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>    <span class="keywordflow">if</span> (curr_light_list.empty())</div>
<div class="line"><span class="lineno"> 1405</span>    {</div>
<div class="line"><span class="lineno"> 1406</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;There was an error querying traffic light with id: &quot;</span> &lt;&lt; <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1407</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1408</span>    }</div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>    lanelet::CarmaTrafficSignalPtr curr_light;</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> signal : lanelets_general[0].regulatoryElementsAs&lt;lanelet::CarmaTrafficSignal&gt;())</div>
<div class="line"><span class="lineno"> 1413</span>    {</div>
<div class="line"><span class="lineno"> 1414</span>      <span class="keywordflow">if</span> (signal-&gt;id() == <span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno"> 1415</span>      {</div>
<div class="line"><span class="lineno"> 1416</span>        curr_light = signal;</div>
<div class="line"><span class="lineno"> 1417</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1418</span>      }</div>
<div class="line"><span class="lineno"> 1419</span>    }</div>
<div class="line"><span class="lineno"> 1420</span> </div>
<div class="line"><span class="lineno"> 1421</span>    <span class="keywordflow">if</span> (!curr_light)</div>
<div class="line"><span class="lineno"> 1422</span>    {</div>
<div class="line"><span class="lineno"> 1423</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Was not able to find traffic signal with id: &quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;, ignoring...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1424</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1425</span>    }</div>
<div class="line"><span class="lineno"> 1426</span> </div>
<div class="line"><span class="lineno"> 1427</span>    <span class="keywordflow">return</span> curr_light;</div>
<div class="line"><span class="lineno"> 1428</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">processSpatFromMsg()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a65df34058ada8f5a64a7abd1a6e2afae_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a65df34058ada8f5a64a7abd1a6e2afae_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a65df34058ada8f5a64a7abd1a6e2afae_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a65df34058ada8f5a64a7abd1a6e2afae_icgraph">
<area shape="rect" title="helper for getting traffic signal with given lanelet::Id" alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#abee7c99de43cbc55ecc6d5fb7a6ac8c4" title="processSpatFromMsg update map&#39;s traffic light states with SPAT msg" alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="a3beafa813c6efd889c0e1eaabdf0a6f8" name="a3beafa813c6efd889c0e1eaabdf0a6f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3beafa813c6efd889c0e1eaabdf0a6f8">&#9670;&nbsp;</a></span>getTrafficSignalId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Id carma_wm::CARMAWorldModel::getTrafficSignalId </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>intersection_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>signal_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>helper for traffic signal Id </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00084">84</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>  {</div>
<div class="line"><span class="lineno">   86</span>    lanelet::Id inter_id = lanelet::InvalId;</div>
<div class="line"><span class="lineno">   87</span>    lanelet::Id signal_id = lanelet::InvalId;</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a561c5f21f1c07c80e13bdc3c29fa70fe">intersection_id_to_regem_id_</a>.find(intersection_id) != <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a561c5f21f1c07c80e13bdc3c29fa70fe">intersection_id_to_regem_id_</a>.end())</div>
<div class="line"><span class="lineno">   90</span>    {</div>
<div class="line"><span class="lineno">   91</span>      inter_id = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a561c5f21f1c07c80e13bdc3c29fa70fe">intersection_id_to_regem_id_</a>[intersection_id];</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (inter_id != lanelet::InvalId &amp;&amp; <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ac6d373cd4a78ed384153d43836031b03">signal_group_to_traffic_light_id_</a>.find(signal_group_id) != <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ac6d373cd4a78ed384153d43836031b03">signal_group_to_traffic_light_id_</a>.end())</div>
<div class="line"><span class="lineno">   95</span>    {</div>
<div class="line"><span class="lineno">   96</span>      signal_id = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ac6d373cd4a78ed384153d43836031b03">signal_group_to_traffic_light_id_</a>[signal_group_id];</div>
<div class="line"><span class="lineno">   97</span>    }</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">return</span> signal_id;</div>
<div class="line"><span class="lineno">  100</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_ab26aab58d8e779dd198396c111c29eb8"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">carma_wm::CARMAWorldModel::sim_</a></div><div class="ttdeci">carma_wm::SignalizedIntersectionManager sim_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00270">CARMAWorldModel.hpp:270</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a561c5f21f1c07c80e13bdc3c29fa70fe"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a561c5f21f1c07c80e13bdc3c29fa70fe">carma_wm::SignalizedIntersectionManager::intersection_id_to_regem_id_</a></div><div class="ttdeci">std::unordered_map&lt; uint16_t, lanelet::Id &gt; intersection_id_to_regem_id_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8hpp_source.html#l00151">SignalizedIntersectionManager.hpp:151</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_ac6d373cd4a78ed384153d43836031b03"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ac6d373cd4a78ed384153d43836031b03">carma_wm::SignalizedIntersectionManager::signal_group_to_traffic_light_id_</a></div><div class="ttdeci">std::unordered_map&lt; uint8_t, lanelet::Id &gt; signal_group_to_traffic_light_id_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8hpp_source.html#l00154">SignalizedIntersectionManager.hpp:154</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="SignalizedIntersectionManager_8hpp_source.html#l00151">carma_wm::SignalizedIntersectionManager::intersection_id_to_regem_id_</a>, <a class="el" href="SignalizedIntersectionManager_8hpp_source.html#l00154">carma_wm::SignalizedIntersectionManager::signal_group_to_traffic_light_id_</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00270">sim_</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">processSpatFromMsg()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a3beafa813c6efd889c0e1eaabdf0a6f8_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a3beafa813c6efd889c0e1eaabdf0a6f8_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a3beafa813c6efd889c0e1eaabdf0a6f8_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a3beafa813c6efd889c0e1eaabdf0a6f8_icgraph">
<area shape="rect" title="helper for traffic signal Id" alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#abee7c99de43cbc55ecc6d5fb7a6ac8c4" title="processSpatFromMsg update map&#39;s traffic light states with SPAT msg" alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="a8fbae2ed5d0dd0ad2fe8a69c9b65ba75" name="a8fbae2ed5d0dd0ad2fe8a69c9b65ba75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fbae2ed5d0dd0ad2fe8a69c9b65ba75">&#9670;&nbsp;</a></span>getVehicleParticipationType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string carma_wm::CARMAWorldModel::getVehicleParticipationType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get vehicle participation type. </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01193">1193</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1194</span>  {</div>
<div class="line"><span class="lineno"> 1195</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a>;</div>
<div class="line"><span class="lineno"> 1196</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">participant_type_</a>.</p>

</div>
</div>
<a id="abf9dbca253d5b1ac3d65c6f4c4d4e134" name="abf9dbca253d5b1ac3d65c6f4c4d4e134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf9dbca253d5b1ac3d65c6f4c4d4e134">&#9670;&nbsp;</a></span>min_end_time_converter_minute_of_year()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::posix_time::ptime carma_wm::CARMAWorldModel::min_end_time_converter_minute_of_year </td>
          <td>(</td>
          <td class="paramtype">boost::posix_time::ptime&#160;</td>
          <td class="paramname"><em>min_end_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>moy_exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>moy</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>is_simulation</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>update minimum end time to account for minute of the year </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min_end_time</td><td>minimum end time of the spat movement event list </td></tr>
    <tr><td class="paramname">moy_exists</td><td>tells weather minute of the year exist or not </td></tr>
    <tr><td class="paramname">moy</td><td>value of the minute of the year </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01430">1430</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1431</span>  {</div>
<div class="line"><span class="lineno"> 1432</span>    <span class="keywordtype">double</span> simulation_time_difference_in_seconds = 0.0;</div>
<div class="line"><span class="lineno"> 1433</span> </div>
<div class="line"><span class="lineno"> 1434</span>    <span class="comment">// NOTE: In simulation, ROS1 clock (often coming from CARLA) can have a large time ahead.</span></div>
<div class="line"><span class="lineno"> 1435</span>    <span class="comment">// the timing calculated here is in Simulation time, which is behind. Therefore, the world model adds the offset to make it meaningful to carma-platform:</span></div>
<div class="line"><span class="lineno"> 1436</span>    <span class="comment">// https://github.com/usdot-fhwa-stol/carma-platform/issues/2217</span></div>
<div class="line"><span class="lineno"> 1437</span>    <span class="keywordflow">if</span> (is_simulation &amp;&amp; <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a255353f016ca62c487b554b4ffcfbf40">ros1_clock_</a> &amp;&amp; <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a768977187d806491ba0fc8f267f73a15">simulation_clock_</a>)</div>
<div class="line"><span class="lineno"> 1438</span>    {</div>
<div class="line"><span class="lineno"> 1439</span>      simulation_time_difference_in_seconds = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a255353f016ca62c487b554b4ffcfbf40">ros1_clock_</a>.value().seconds() - <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a768977187d806491ba0fc8f267f73a15">simulation_clock_</a>.value().seconds();</div>
<div class="line"><span class="lineno"> 1440</span>    }</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>    min_end_time += lanelet::time::durationFromSec(simulation_time_difference_in_seconds);</div>
<div class="line"><span class="lineno"> 1443</span> </div>
<div class="line"><span class="lineno"> 1444</span>    <span class="keywordflow">if</span> (moy_exists) <span class="comment">//account for minute of the year</span></div>
<div class="line"><span class="lineno"> 1445</span>    {</div>
<div class="line"><span class="lineno"> 1446</span>      <span class="keyword">auto</span> inception_boost(boost::posix_time::time_from_string(<span class="stringliteral">&quot;1970-01-01 00:00:00.000&quot;</span>)); <span class="comment">// inception of epoch</span></div>
<div class="line"><span class="lineno"> 1447</span>      <span class="keyword">auto</span> duration_since_inception(lanelet::time::durationFromSec(std::chrono::duration&lt;double&gt;(std::chrono::system_clock::now().time_since_epoch()).count()));</div>
<div class="line"><span class="lineno"> 1448</span>      <span class="keyword">auto</span> curr_time_boost = inception_boost + duration_since_inception;</div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span>      <span class="keywordtype">int</span> curr_year = curr_time_boost.date().year();</div>
<div class="line"><span class="lineno"> 1451</span> </div>
<div class="line"><span class="lineno"> 1452</span>      <span class="comment">// Force the current year to start of epoch if it is simulation</span></div>
<div class="line"><span class="lineno"> 1453</span>      <span class="keywordflow">if</span> (is_simulation)</div>
<div class="line"><span class="lineno"> 1454</span>        curr_year = 1970;</div>
<div class="line"><span class="lineno"> 1455</span> </div>
<div class="line"><span class="lineno"> 1456</span>      <span class="keyword">auto</span> curr_year_start_boost(boost::posix_time::time_from_string(<a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(curr_year)+ <span class="stringliteral">&quot;-01-01 00:00:00.000&quot;</span>));</div>
<div class="line"><span class="lineno"> 1457</span> </div>
<div class="line"><span class="lineno"> 1458</span>      <span class="keyword">auto</span> curr_minute_stamp_boost = curr_year_start_boost + boost::posix_time::minutes((<span class="keywordtype">int</span>)moy);</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>      <span class="keywordtype">int</span> hours_of_day = curr_minute_stamp_boost.time_of_day().hours();</div>
<div class="line"><span class="lineno"> 1461</span>      <span class="keywordtype">int</span> curr_month = curr_minute_stamp_boost.date().month();</div>
<div class="line"><span class="lineno"> 1462</span>      <span class="keywordtype">int</span> curr_day = curr_minute_stamp_boost.date().day();</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span>      <span class="keyword">auto</span> curr_day_boost(boost::posix_time::time_from_string(<a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(curr_year) + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(curr_month) + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(curr_day) +<span class="stringliteral">&quot; 00:00:00.000&quot;</span>)); <span class="comment">// GMT is the standard</span></div>
<div class="line"><span class="lineno"> 1465</span>      <span class="keyword">auto</span> curr_hour_boost = curr_day_boost + boost::posix_time::hours(hours_of_day);</div>
<div class="line"><span class="lineno"> 1466</span> </div>
<div class="line"><span class="lineno"> 1467</span>      min_end_time += lanelet::time::durationFromSec(lanelet::time::toSec(curr_hour_boost));</div>
<div class="line"><span class="lineno"> 1468</span>      <span class="keywordflow">return</span> min_end_time;</div>
<div class="line"><span class="lineno"> 1469</span>    }</div>
<div class="line"><span class="lineno"> 1470</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1471</span>    {</div>
<div class="line"><span class="lineno"> 1472</span>      <span class="keywordflow">return</span> min_end_time; <span class="comment">// return unchanged</span></div>
<div class="line"><span class="lineno"> 1473</span>    }</div>
<div class="line"><span class="lineno"> 1474</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a255353f016ca62c487b554b4ffcfbf40"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a255353f016ca62c487b554b4ffcfbf40">carma_wm::CARMAWorldModel::ros1_clock_</a></div><div class="ttdeci">std::optional&lt; rclcpp::Time &gt; ros1_clock_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00296">CARMAWorldModel.hpp:296</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a768977187d806491ba0fc8f267f73a15"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a768977187d806491ba0fc8f267f73a15">carma_wm::CARMAWorldModel::simulation_clock_</a></div><div class="ttdeci">std::optional&lt; rclcpp::Time &gt; simulation_clock_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00297">CARMAWorldModel.hpp:297</a></div></div>
<div class="ttc" id="anamespacecarma__cooperative__perception_html_a64b708654c8aecb09122d39577df31b5"><div class="ttname"><a href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">carma_cooperative_perception::to_string</a></div><div class="ttdeci">auto to_string(const UtmZone &amp;zone) -&gt; std::string</div><div class="ttdef"><b>Definition:</b> <a href="utm__zone_8cpp_source.html#l00021">utm_zone.cpp:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00296">ros1_clock_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00297">simulation_clock_</a>, and <a class="el" href="utm__zone_8cpp_source.html#l00021">carma_cooperative_perception::to_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">processSpatFromMsg()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_cgraph">
<area shape="rect" title="update minimum end time to account for minute of the year" alt="" coords="5,22,212,78"/>
<area shape="rect" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5" title=" " alt="" coords="260,29,459,71"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_abf9dbca253d5b1ac3d65c6f4c4d4e134_icgraph">
<area shape="rect" title="update minimum end time to account for minute of the year" alt="" coords="260,5,467,61"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#abee7c99de43cbc55ecc6d5fb7a6ac8c4" title="processSpatFromMsg update map&#39;s traffic light states with SPAT msg" alt="" coords="5,13,212,54"/>
</map>
</div>

</div>
</div>
<a id="afbee9dff34ee62ac507d5fc39bcb2e10" name="afbee9dff34ee62ac507d5fc39bcb2e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbee9dff34ee62ac507d5fc39bcb2e10">&#9670;&nbsp;</a></span>nearestObjectAheadInLane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt; carma_wm::CARMAWorldModel::nearestObjectAheadInLane </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>object_center</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_center</td><td>the point to measure the distance from</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or the given point is not on the current semantic map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional tuple of &lt;<a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle&gt; to the closest in lane object AHEAD. Return empty if there is no objects on current lane or the road </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a925171b9970243e2d996236d768e373f">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01106">1106</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1107</span>  {</div>
<div class="line"><span class="lineno"> 1108</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f">getNearestObjInLane</a>(object_center, <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ac70bc5e488128f3e0389f5ba4eae8cf5">LANE_AHEAD</a>);</div>
<div class="line"><span class="lineno"> 1109</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a5a13a3b4f0599ad702745e559619965f"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f">carma_wm::CARMAWorldModel::getNearestObjInLane</a></div><div class="ttdeci">lanelet::Optional&lt; std::tuple&lt; TrackPos, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt; getNearestObjInLane(const lanelet::BasicPoint2d &amp;object_center, const LaneSection &amp;section=LANE_AHEAD) const</div><div class="ttdoc">This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane....</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00992">CARMAWorldModel.cpp:992</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>, and <a class="el" href="WorldModel_8hpp_source.html#l00061">carma_wm::LANE_AHEAD</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_afbee9dff34ee62ac507d5fc39bcb2e10_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_afbee9dff34ee62ac507d5fc39bcb2e10_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_afbee9dff34ee62ac507d5fc39bcb2e10_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_afbee9dff34ee62ac507d5fc39bcb2e10_cgraph">
<area shape="rect" title="Gets Downtrack distance to AND copy of the closest object AHEAD on the same lane as the given point...." alt="" coords="5,68,212,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,68,467,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="515,68,721,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="769,5,976,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="545,136,691,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="798,71,947,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="800,136,945,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="1024,136,1169,177"/>
</map>
</div>

</div>
</div>
<a id="aa291cd8ca71835c0720dc853031be300" name="aa291cd8ca71835c0720dc853031be300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa291cd8ca71835c0720dc853031be300">&#9670;&nbsp;</a></span>nearestObjectBehindInLane()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; std::tuple&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle &gt; &gt; carma_wm::CARMAWorldModel::nearestObjectBehindInLane </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>object_center</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point. Also returns crosstrack distance relative to that object. Plus downtrack if the object is ahead along the lane, and also plus crosstrack if the object is to the right relative to the reference line that crosses given object_center and is parallel to the centerline of the lane. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_center</td><td>the point to measure the distance from</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or the given point is not on the current semantic map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional tuple of &lt;<a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, carma_perception_msgs::msg::RoadwayObstacle&gt; to the closest in lane object BEHIND. Return empty if there is no objects on current lane or the road </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a7c4304ca2d37c2975643176dca7f439b">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01112">1112</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1113</span>  {</div>
<div class="line"><span class="lineno"> 1114</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f">getNearestObjInLane</a>(object_center, <a class="code hl_enumvalue" href="namespacecarma__wm.html#a4d1f40e90b83192f3f9de7cc2bba1827ab59ef9ec33d15acbeb69a4a5d404d6a9">LANE_BEHIND</a>);</div>
<div class="line"><span class="lineno"> 1115</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>, and <a class="el" href="WorldModel_8hpp_source.html#l00062">carma_wm::LANE_BEHIND</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_aa291cd8ca71835c0720dc853031be300_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_aa291cd8ca71835c0720dc853031be300_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_aa291cd8ca71835c0720dc853031be300_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_aa291cd8ca71835c0720dc853031be300_cgraph">
<area shape="rect" title="Gets Downtrack distance to AND copy of the closest object BEHIND on the same lane as the given point...." alt="" coords="5,68,212,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a13a3b4f0599ad702745e559619965f" title="This function is called by distanceToObjectBehindInLane or distanceToObjectAheadInLane...." alt="" coords="260,68,467,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a19b8c922c7524c769f96a57b91f6a6bd" title="Gets all roadway objects currently in the same lane as the given lanelet." alt="" coords="515,68,721,109"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a869b918893af283afe09b1adb52c69a7" title="Gets the specified lane section achievable without lane change, sorted from the start,..." alt="" coords="769,5,976,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="545,136,691,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="798,71,947,112"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="800,136,945,177"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="1024,136,1169,177"/>
</map>
</div>

</div>
</div>
<a id="ab869be2415c15ec3b50f9070961434f6" name="ab869be2415c15ec3b50f9070961434f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab869be2415c15ec3b50f9070961434f6">&#9670;&nbsp;</a></span>nonConnectedAdjacentLeft() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::Lanelet &gt; carma_wm::CARMAWorldModel::nonConnectedAdjacentLeft </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>input_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned <a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>n</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(non-const version) Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This function is intended to find "adjacentLeft lanelets" that doesn't share points between lanelets where adjacentLeft of lanelet library fails </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>Cartesian point to check the corressponding lanelet </td></tr>
    <tr><td class="paramname">n</td><td>Number of lanelets to return. Default is 10. As there could be many lanelets overlapping.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or if adjacent lanelet is not opposite direction NOTE: Only to be used on 2 lane, opposite direction road. Number of points in all linestrings are assumed to be roughly the same. The point is assumed to be on roughly similar shape of overlapping lanelets if any </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector of underlying lanelet, empty vector if it is not part of any lanelet </dd></dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01208">1208</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1209</span>  {</div>
<div class="line"><span class="lineno"> 1210</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2">carma_wm::query::getLaneletsFromPoint</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>, input_point, n);</div>
<div class="line"><span class="lineno"> 1211</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="WorldModelUtils_8cpp_source.html#l00024">carma_wm::query::getLaneletsFromPoint()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_ab869be2415c15ec3b50f9070961434f6_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_ab869be2415c15ec3b50f9070961434f6_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_ab869be2415c15ec3b50f9070961434f6_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_ab869be2415c15ec3b50f9070961434f6_cgraph">
<area shape="rect" title="(non&#45;const version) Given the cartesian point on the map, tries to get the opposite direction lanelet..." alt="" coords="5,5,212,47"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2" title="carma_wm::query namespace contains implementations for query functions (input and output read or writ..." alt="" coords="260,5,457,47"/>
</map>
</div>

</div>
</div>
<a id="a3760e63d093f5422dcf3a5a7b3b2e7ae" name="a3760e63d093f5422dcf3a5a7b3b2e7ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3760e63d093f5422dcf3a5a7b3b2e7ae">&#9670;&nbsp;</a></span>nonConnectedAdjacentLeft() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::ConstLanelet &gt; carma_wm::CARMAWorldModel::nonConnectedAdjacentLeft </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>input_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned <a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>n</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This function is intended to find "adjacentLeft lanelets" that doesn't share points between lanelets where adjacentLeft of lanelet library fails. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">semantic_map</td><td>Lanelet Map Ptr </td></tr>
    <tr><td class="paramname">point</td><td>Cartesian point to check the corressponding lanelet </td></tr>
    <tr><td class="paramname">n</td><td>Number of lanelets to return. Default is 10. As there could be many lanelets overlapping.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set, contains no lanelets, or if adjacent lanelet is not opposite direction NOTE: Only to be used on 2 lane, opposite direction road. Number of points in all linestrings are assumed to be roughly the same. The point is assumed to be on roughly similar shape of overlapping lanelets if any </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector of underlying lanelet, empty vector if it is not part of any lanelet </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a4d51eda1757ddd29fb18e65f531db7c1">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01213">1213</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1214</span>  {</div>
<div class="line"><span class="lineno"> 1215</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2">carma_wm::query::getLaneletsFromPoint</a>(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d">getMap</a>(), input_point, n);</div>
<div class="line"><span class="lineno"> 1216</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="WorldModelUtils_8cpp_source.html#l00024">carma_wm::query::getLaneletsFromPoint()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00547">getMap()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a3760e63d093f5422dcf3a5a7b3b2e7ae_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a3760e63d093f5422dcf3a5a7b3b2e7ae_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a3760e63d093f5422dcf3a5a7b3b2e7ae_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a3760e63d093f5422dcf3a5a7b3b2e7ae_cgraph">
<area shape="rect" title="Given the cartesian point on the map, tries to get the opposite direction lanelet on the left This fu..." alt="" coords="5,39,212,80"/>
<area shape="rect" href="namespacecarma__wm_1_1query.html#a8933b74d652e02d07be1170b787d87a2" title="carma_wm::query namespace contains implementations for query functions (input and output read or writ..." alt="" coords="265,5,462,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a5a40e4c8b3107914d61fb8f8064c842d" title="Get a pointer to the current map. If the underlying map has changed the pointer will also need to be ..." alt="" coords="260,71,467,112"/>
</map>
</div>

</div>
</div>
<a id="a1e7bf1856cd6cd7dbf1e262d378c6087" name="a1e7bf1856cd6cd7dbf1e262d378c6087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e7bf1856cd6cd7dbf1e262d378c6087">&#9670;&nbsp;</a></span>pointFromRouteTrackPos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt; lanelet::BasicPoint2d &gt; carma_wm::CARMAWorldModel::pointFromRouteTrackPos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &amp;&#160;</td>
          <td class="paramname"><em>route_pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a route track position into a map frame cartesian point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">route_pos</td><td>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> to convert to and x,y point. This position should be relative to the route</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the provided downtrack position is not within the route bounds or the route is not set then boost::none is returned. Otherwise the point is converted to x,y.</dd></dl>
<p>NOTE: This method will run faster if the crosstrack is unset or set to 0. The default implementation lookup has complexity O(log n) where n is the number of lane changes is a route + 1 </p>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#aa9276d80f070d7d179cf2298a540f892">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">430</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  431</span>  {</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordtype">double</span> downtrack = route_pos.downtrack;</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordtype">double</span> crosstrack = route_pos.crosstrack;</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  436</span>    {</div>
<div class="line"><span class="lineno">  437</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  439</span>    }</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordflow">if</span> (downtrack &lt; 0 || downtrack &gt; <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">getRouteEndTrackPos</a>().downtrack)</div>
<div class="line"><span class="lineno">  442</span>    {</div>
<div class="line"><span class="lineno">  443</span>      RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Tried to convert a downtrack of: &quot;</span> &lt;&lt; downtrack</div>
<div class="line"><span class="lineno">  444</span>                                                           &lt;&lt; <span class="stringliteral">&quot; to map point, but it did not fit in route bounds of &quot;</span></div>
<div class="line"><span class="lineno">  445</span>                                                           &lt;&lt; <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">getRouteEndTrackPos</a>().downtrack);</div>
<div class="line"><span class="lineno">  446</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  447</span>    }</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    <span class="comment">// Use fast lookup to identify the points before and after the provided downtrack on the route</span></div>
<div class="line"><span class="lineno">  450</span>    <span class="keyword">auto</span> indices = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a8a56236ca7587395b6a5cd84c08ec811">getElementIndexByDistance</a>(downtrack, <span class="keyword">true</span>); <span class="comment">// Get the linestring matching the provided downtrack</span></div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordtype">size_t</span> ls_i = std::get&lt;0&gt;(indices);</div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordtype">size_t</span> pt_i = std::get&lt;1&gt;(indices);</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <span class="keyword">auto</span> linestring = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>[ls_i];</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>    <span class="keywordflow">if</span> (pt_i &gt;= linestring.size())</div>
<div class="line"><span class="lineno">  457</span>    {</div>
<div class="line"><span class="lineno">  458</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Impossible index: pt: &quot;</span> + <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(pt_i) + <span class="stringliteral">&quot; linestring: &quot;</span> + <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(ls_i));</div>
<div class="line"><span class="lineno">  459</span>    }</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    <span class="keywordtype">double</span> ls_downtrack = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d">distanceToElement</a>(ls_i);</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordtype">double</span> relative_downtrack = downtrack - ls_downtrack;</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordtype">size_t</span> centerline_size = linestring.size();</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordtype">size_t</span> prior_idx = std::min(pt_i, centerline_size - 1);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>    <span class="keywordtype">size_t</span> next_idx = std::min(pt_i + 1, centerline_size - 1);</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>    <span class="comment">// This if block handles the edge case where the downtrack distance has landed exactly on an existing point</span></div>
<div class="line"><span class="lineno">  472</span>    <span class="keywordflow">if</span> (prior_idx == next_idx)</div>
<div class="line"><span class="lineno">  473</span>    {  <span class="comment">// If both indexes are the same we are on the point</span></div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>      <span class="keywordflow">if</span> (crosstrack == 0)</div>
<div class="line"><span class="lineno">  476</span>      {  <span class="comment">// Crosstrack not provided so we can return the point directly</span></div>
<div class="line"><span class="lineno">  477</span>        <span class="keyword">auto</span> prior_point = linestring[prior_idx];</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">return</span> lanelet::BasicPoint2d(prior_point.x(), prior_point.y());</div>
<div class="line"><span class="lineno">  480</span>      }</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>      lanelet::BasicPoint2d prior_point, next_point;</div>
<div class="line"><span class="lineno">  483</span>      <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>;</div>
<div class="line"><span class="lineno">  484</span>      <span class="keywordflow">if</span> (prior_idx &lt; centerline_size - 1)</div>
<div class="line"><span class="lineno">  485</span>      {  <span class="comment">// If this is not the end point compute the crosstrack based on the next point</span></div>
<div class="line"><span class="lineno">  486</span>        prior_point = linestring[prior_idx].basicPoint2d();</div>
<div class="line"><span class="lineno">  487</span>        next_point = linestring[prior_idx + 1].basicPoint2d(); <span class="comment">// No need to check bounds as this class will reject routes with fewer than 2 points in a centerline</span></div>
<div class="line"><span class="lineno">  488</span>        <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = prior_point.x();</div>
<div class="line"><span class="lineno">  489</span>        <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> = prior_point.y();</div>
<div class="line"><span class="lineno">  490</span>      }</div>
<div class="line"><span class="lineno">  491</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  492</span>      {  <span class="comment">// If this is the end point compute the crosstrack based on previous point</span></div>
<div class="line"><span class="lineno">  493</span>        prior_point = linestring[prior_idx - 1].basicPoint2d();</div>
<div class="line"><span class="lineno">  494</span>        next_point = linestring[prior_idx].basicPoint2d();</div>
<div class="line"><span class="lineno">  495</span>        <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = next_point.x();</div>
<div class="line"><span class="lineno">  496</span>        <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> = next_point.y();</div>
<div class="line"><span class="lineno">  497</span>      }</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>      <span class="comment">// Compute the crosstrack</span></div>
<div class="line"><span class="lineno">  500</span>      <span class="keywordtype">double</span> sigma = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">geometry::point_to_point_yaw</a>(prior_point, next_point); <span class="comment">// Angle between route segment and x-axis</span></div>
<div class="line"><span class="lineno">  501</span>      <span class="keywordtype">double</span> theta = sigma + M_PI_2;                                        <span class="comment">// M_PI_2 is 90 deg. Theta is the angle to the vector from the route projected point</span></div>
<div class="line"><span class="lineno">  502</span>                                                                            <span class="comment">// to the target point</span></div>
<div class="line"><span class="lineno">  503</span>      <span class="keywordtype">double</span> delta_x = cos(theta) * -crosstrack;</div>
<div class="line"><span class="lineno">  504</span>      <span class="keywordtype">double</span> delta_y = sin(theta) * -crosstrack;</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>      <span class="keywordflow">return</span> lanelet::BasicPoint2d(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> + delta_x, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> + delta_y);</div>
<div class="line"><span class="lineno">  507</span>    }</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordtype">double</span> prior_downtrack = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">distanceToPointAlongElement</a>(ls_i, prior_idx);</div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordtype">double</span> next_downtrack = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">distanceToPointAlongElement</a>(ls_i, next_idx);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordtype">double</span> prior_to_next_dist = next_downtrack - prior_downtrack;</div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordtype">double</span> prior_to_target_dist = relative_downtrack - prior_downtrack;</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordtype">double</span> interpolation_percentage = 0;</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">if</span> (prior_to_next_dist &lt; 0.000001)</div>
<div class="line"><span class="lineno">  517</span>    {</div>
<div class="line"><span class="lineno">  518</span>      interpolation_percentage = 0;</div>
<div class="line"><span class="lineno">  519</span>    }</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  521</span>    {</div>
<div class="line"><span class="lineno">  522</span>      interpolation_percentage = prior_to_target_dist / prior_to_next_dist; <span class="comment">// Use the percentage progress between both points to compute the downtrack point</span></div>
<div class="line"><span class="lineno">  523</span>    }</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>    <span class="keyword">auto</span> prior_point = linestring[prior_idx].basicPoint2d();</div>
<div class="line"><span class="lineno">  526</span>    <span class="keyword">auto</span> next_point = linestring[next_idx].basicPoint2d();</div>
<div class="line"><span class="lineno">  527</span>    <span class="keyword">auto</span> delta_vec = next_point - prior_point;</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> = prior_point.x() + interpolation_percentage * delta_vec.x();</div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> = prior_point.y() + interpolation_percentage * delta_vec.y();</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">if</span> (crosstrack != 0) <span class="comment">// If the crosstrack is not set no need to do the costly computation.</span></div>
<div class="line"><span class="lineno">  533</span>    {</div>
<div class="line"><span class="lineno">  534</span>      <span class="keywordtype">double</span> sigma = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">geometry::point_to_point_yaw</a>(prior_point, next_point); <span class="comment">// Angle between route segment and x-axis</span></div>
<div class="line"><span class="lineno">  535</span>      <span class="keywordtype">double</span> theta = sigma + M_PI_2;                                        <span class="comment">// M_PI_2 is 90 deg. Theta is the angle to the vector from the route projected point</span></div>
<div class="line"><span class="lineno">  536</span>                                                                            <span class="comment">// to the target point</span></div>
<div class="line"><span class="lineno">  537</span>      <span class="keywordtype">double</span> delta_x = cos(theta) * -crosstrack;</div>
<div class="line"><span class="lineno">  538</span>      <span class="keywordtype">double</span> delta_y = sin(theta) * -crosstrack;</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>      <a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a> += delta_x; <span class="comment">// Adjust x and y of target point to account for crosstrack</span></div>
<div class="line"><span class="lineno">  541</span>      <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a> += delta_y;</div>
<div class="line"><span class="lineno">  542</span>    }</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    <span class="keywordflow">return</span> lanelet::BasicPoint2d(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">x</a>, <a class="code hl_variable" href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">y</a>);</div>
<div class="line"><span class="lineno">  545</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_ab4df78110aa7dd6644ecbe3e5a69eb29"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">carma_wm::CARMAWorldModel::getRouteEndTrackPos</a></div><div class="ttdeci">TrackPos getRouteEndTrackPos() const override</div><div class="ttdoc">Get trackpos of the end of route point relative to the route.</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00557">CARMAWorldModel.cpp:557</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_a8a56236ca7587395b6a5cd84c08ec811"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#a8a56236ca7587395b6a5cd84c08ec811">carma_wm::IndexedDistanceMap::getElementIndexByDistance</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; getElementIndexByDistance(double distance, bool get_point=true) const</div><div class="ttdoc">Returns index of the linestring which the provided distance is within. NOTE: Unlike the rest of this ...</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00044">IndexedDistanceMap.cpp:44</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_a972f18c7b178a350cfdb85719eb10323"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">carma_wm::IndexedDistanceMap::distanceToPointAlongElement</a></div><div class="ttdeci">double distanceToPointAlongElement(size_t index, size_t point_index) const</div><div class="ttdoc">Get the along-line distance to the point on the provided linestring.</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00095">IndexedDistanceMap.cpp:95</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_aaf9700fe30cc2819ca4423a2acffa27d"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d">carma_wm::IndexedDistanceMap::distanceToElement</a></div><div class="ttdeci">double distanceToElement(size_t index) const</div><div class="ttdoc">Get the distance to the start of the linestring at the specified index.</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00085">IndexedDistanceMap.cpp:85</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_a6f156f9d93ac8bd84fa6663b1efa5db4"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4">carma_wm::geometry::point_to_point_yaw</a></div><div class="ttdeci">double point_to_point_yaw(const lanelet::BasicPoint2d &amp;cur_point, const lanelet::BasicPoint2d &amp;next_point)</div><div class="ttdoc">Computes the 2d orientation of the vector from the provided start point to end point.</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00588">Geometry.cpp:588</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_a05bdb238bfbf3836fb0aa69c5aa1bb48"><div class="ttname"><a href="namespaceprocess__traj__logs.html#a05bdb238bfbf3836fb0aa69c5aa1bb48">process_traj_logs.y</a></div><div class="ttdeci">y</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00129">process_traj_logs.py:129</a></div></div>
<div class="ttc" id="anamespaceprocess__traj__logs_html_af3ba6144a2d35a4990f1a8d04632a052"><div class="ttname"><a href="namespaceprocess__traj__logs.html#af3ba6144a2d35a4990f1a8d04632a052">process_traj_logs.x</a></div><div class="ttdeci">x</div><div class="ttdef"><b>Definition:</b> <a href="process__traj__logs_8py_source.html#l00128">process_traj_logs.py:128</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00038">carma_wm::TrackPos::crosstrack</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00085">carma_wm::IndexedDistanceMap::distanceToElement()</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00095">carma_wm::IndexedDistanceMap::distanceToPointAlongElement()</a>, <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00044">carma_wm::IndexedDistanceMap::getElementIndexByDistance()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00557">getRouteEndTrackPos()</a>, <a class="el" href="Geometry_8cpp_source.html#l00588">carma_wm::geometry::point_to_point_yaw()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00305">shortest_path_centerlines_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00307">shortest_path_distance_map_</a>, <a class="el" href="utm__zone_8cpp_source.html#l00021">carma_cooperative_perception::to_string()</a>, <a class="el" href="process__traj__logs_8py_source.html#l00128">process_traj_logs::x</a>, and <a class="el" href="process__traj__logs_8py_source.html#l00129">process_traj_logs::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00389">sampleRoutePoints()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_cgraph">
<area shape="rect" title="Converts a route track position into a map frame cartesian point." alt="" coords="5,150,212,191"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d" title="Get the distance to the start of the linestring at the specified index." alt="" coords="781,44,969,86"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323" title="Get the along&#45;line distance to the point on the provided linestring." alt="" coords="260,55,487,96"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a8a56236ca7587395b6a5cd84c08ec811" title="Returns index of the linestring which the provided distance is within. NOTE: Unlike the rest of this ..." alt="" coords="266,120,481,162"/>
<area shape="rect" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5" title=" " alt="" coords="535,195,733,236"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29" title="Get trackpos of the end of route point relative to the route." alt="" coords="270,238,477,279"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4" title="Computes the 2d orientation of the vector from the provided start point to end point." alt="" coords="301,303,446,344"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a984999e739e3b5f2971da657da6d6adb" title="Returns the total along&#45;line length of this structure." alt="" coords="540,106,728,147"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a7bd91613ee531f0bb715d9e89a1285f1" title="Get the length of the linestring located at the provided index." alt="" coords="781,110,969,151"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a1e7bf1856cd6cd7dbf1e262d378c6087_icgraph">
<area shape="rect" title="Converts a route track position into a map frame cartesian point." alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#af091e77668f082aaafea367836118dc9" title="Samples the route centerline between the provided downtracks with the provided step size...." alt="" coords="5,5,212,47"/>
</map>
</div>

</div>
</div>
<a id="abee7c99de43cbc55ecc6d5fb7a6ac8c4" name="abee7c99de43cbc55ecc6d5fb7a6ac8c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee7c99de43cbc55ecc6d5fb7a6ac8c4">&#9670;&nbsp;</a></span>processSpatFromMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::processSpatFromMsg </td>
          <td>(</td>
          <td class="paramtype">const carma_v2x_msgs::msg::SPAT &amp;&#160;</td>
          <td class="paramname"><em>spat_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_sim_time</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>processSpatFromMsg update map's traffic light states with SPAT msg </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spat_msg</td><td>Msg to update with </td></tr>
    <tr><td class="paramname">use_sim_time</td><td>Boolean to indicate if it is currently simulation or not </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">1476</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1477</span>  {</div>
<div class="line"><span class="lineno"> 1478</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>)</div>
<div class="line"><span class="lineno"> 1479</span>    {</div>
<div class="line"><span class="lineno"> 1480</span>      RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Map is not set yet.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1481</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1482</span>    }</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>    <span class="keywordflow">if</span> (spat_msg.intersection_state_list.empty())</div>
<div class="line"><span class="lineno"> 1485</span>    {</div>
<div class="line"><span class="lineno"> 1486</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;No intersection_state_list in the newly received SPAT msg. Returning...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1487</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1488</span>    }</div>
<div class="line"><span class="lineno"> 1489</span> </div>
<div class="line"><span class="lineno"> 1490</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; curr_intersection : spat_msg.intersection_state_list)</div>
<div class="line"><span class="lineno"> 1491</span>    {</div>
<div class="line"><span class="lineno"> 1492</span> </div>
<div class="line"><span class="lineno"> 1493</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; current_movement_state : curr_intersection.movement_list)</div>
<div class="line"><span class="lineno"> 1494</span>      {</div>
<div class="line"><span class="lineno"> 1495</span>        lanelet::Id curr_light_id = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a3beafa813c6efd889c0e1eaabdf0a6f8">getTrafficSignalId</a>(curr_intersection.id.id, current_movement_state.signal_group);</div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>        <span class="keywordflow">if</span> (curr_light_id == lanelet::InvalId)</div>
<div class="line"><span class="lineno"> 1498</span>        {</div>
<div class="line"><span class="lineno"> 1499</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1500</span>        }</div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span>        lanelet::CarmaTrafficSignalPtr curr_light = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a65df34058ada8f5a64a7abd1a6e2afae">getTrafficSignal</a>(curr_light_id);</div>
<div class="line"><span class="lineno"> 1503</span> </div>
<div class="line"><span class="lineno"> 1504</span>        <span class="keywordflow">if</span> (curr_light == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1505</span>        {</div>
<div class="line"><span class="lineno"> 1506</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1507</span>        }</div>
<div class="line"><span class="lineno"> 1508</span> </div>
<div class="line"><span class="lineno"> 1509</span>        <span class="comment">// reset states if the intersection&#39;s geometry changed</span></div>
<div class="line"><span class="lineno"> 1510</span>        <span class="keywordflow">if</span> (curr_light-&gt;revision_ != curr_intersection.revision)</div>
<div class="line"><span class="lineno"> 1511</span>        {</div>
<div class="line"><span class="lineno"> 1512</span>          RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Received a new intersection geometry. intersection_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)curr_intersection.id.id &lt;&lt; <span class="stringliteral">&quot;, and signal_group_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)current_movement_state.signal_group);</div>
<div class="line"><span class="lineno"> 1513</span>          <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a6e678b2acdd60b34035053d02e203d11">traffic_signal_start_times_</a>[curr_intersection.id.id][current_movement_state.signal_group].clear();</div>
<div class="line"><span class="lineno"> 1514</span>          <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ab6edbe8b6abcc5862c8e887c19807771">traffic_signal_states_</a>[curr_intersection.id.id][current_movement_state.signal_group].clear();</div>
<div class="line"><span class="lineno"> 1515</span>        }</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span>        <span class="comment">// all maneuver types in same signal group is currently expected to share signal timing, so only 0th index is used when setting states</span></div>
<div class="line"><span class="lineno"> 1518</span>        <span class="keywordflow">if</span> (current_movement_state.movement_event_list.empty())</div>
<div class="line"><span class="lineno"> 1519</span>        {</div>
<div class="line"><span class="lineno"> 1520</span>          RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Movement_event_list is empty . intersection_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)curr_intersection.id.id &lt;&lt; <span class="stringliteral">&quot;, and signal_group_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)current_movement_state.signal_group);</div>
<div class="line"><span class="lineno"> 1521</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1522</span>        }</div>
<div class="line"><span class="lineno"> 1523</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1524</span>        {</div>
<div class="line"><span class="lineno"> 1525</span>          RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Movement_event_list size: &quot;</span> &lt;&lt; current_movement_state.movement_event_list.size() &lt;&lt; <span class="stringliteral">&quot; . intersection_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)curr_intersection.id.id &lt;&lt; <span class="stringliteral">&quot;, and signal_group_id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)current_movement_state.signal_group);</div>
<div class="line"><span class="lineno"> 1526</span>        }</div>
<div class="line"><span class="lineno"> 1527</span> </div>
<div class="line"><span class="lineno"> 1528</span>        curr_light-&gt;revision_ = curr_intersection.revision; <span class="comment">// valid SPAT msg</span></div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>        <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ab6edbe8b6abcc5862c8e887c19807771">traffic_signal_states_</a>[curr_intersection.id.id][current_movement_state.signal_group]={};</div>
<div class="line"><span class="lineno"> 1531</span>        <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a6e678b2acdd60b34035053d02e203d11">traffic_signal_start_times_</a>[curr_intersection.id.id][current_movement_state.signal_group]={};</div>
<div class="line"><span class="lineno"> 1532</span> </div>
<div class="line"><span class="lineno"> 1533</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> current_movement_event:current_movement_state.movement_event_list)</div>
<div class="line"><span class="lineno"> 1534</span>        {</div>
<div class="line"><span class="lineno"> 1535</span>          <span class="comment">// raw min_end_time in seconds measured from the most recent full hour</span></div>
<div class="line"><span class="lineno"> 1536</span>          boost::posix_time::ptime min_end_time_dynamic = lanelet::time::timeFromSec(current_movement_event.timing.min_end_time);</div>
<div class="line"><span class="lineno"> 1537</span>          boost::posix_time::ptime start_time_dynamic = lanelet::time::timeFromSec(current_movement_event.timing.start_time);</div>
<div class="line"><span class="lineno"> 1538</span> </div>
<div class="line"><span class="lineno"> 1539</span>          min_end_time_dynamic=<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134">min_end_time_converter_minute_of_year</a>(min_end_time_dynamic,curr_intersection.moy_exists,curr_intersection.moy, use_sim_time); <span class="comment">// Accounting minute of the year</span></div>
<div class="line"><span class="lineno"> 1540</span>          start_time_dynamic=<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134">min_end_time_converter_minute_of_year</a>(start_time_dynamic,curr_intersection.moy_exists,curr_intersection.moy, use_sim_time); <span class="comment">// Accounting minute of the year</span></div>
<div class="line"><span class="lineno"> 1541</span> </div>
<div class="line"><span class="lineno"> 1542</span>          <span class="keyword">auto</span> received_state_dynamic = <span class="keyword">static_cast&lt;</span>lanelet::CarmaTrafficSignalState<span class="keyword">&gt;</span>(current_movement_event.event_state.movement_phase_state);</div>
<div class="line"><span class="lineno"> 1543</span> </div>
<div class="line"><span class="lineno"> 1544</span>          <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ab6edbe8b6abcc5862c8e887c19807771">traffic_signal_states_</a>[curr_intersection.id.id][current_movement_state.signal_group].push_back(std::make_pair(min_end_time_dynamic, received_state_dynamic));</div>
<div class="line"><span class="lineno"> 1545</span>          <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a6e678b2acdd60b34035053d02e203d11">traffic_signal_start_times_</a>[curr_intersection.id.id][current_movement_state.signal_group].push_back(</div>
<div class="line"><span class="lineno"> 1546</span>                              start_time_dynamic);</div>
<div class="line"><span class="lineno"> 1547</span> </div>
<div class="line"><span class="lineno"> 1548</span>          RCLCPP_DEBUG_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;intersection id: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)curr_intersection.id.id &lt;&lt; <span class="stringliteral">&quot;, signal: &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)current_movement_state.signal_group</div>
<div class="line"><span class="lineno"> 1549</span>            &lt;&lt; <span class="stringliteral">&quot;, start_time: &quot;</span> &lt;&lt; <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(lanelet::time::toSec(start_time_dynamic))</div>
<div class="line"><span class="lineno"> 1550</span>            &lt;&lt; <span class="stringliteral">&quot;, end_time: &quot;</span> &lt;&lt; <a class="code hl_function" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5">std::to_string</a>(lanelet::time::toSec(min_end_time_dynamic))</div>
<div class="line"><span class="lineno"> 1551</span>            &lt;&lt; <span class="stringliteral">&quot;, state: &quot;</span> &lt;&lt; received_state_dynamic);</div>
<div class="line"><span class="lineno"> 1552</span>        }</div>
<div class="line"><span class="lineno"> 1553</span>        curr_light-&gt;recorded_time_stamps = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#ab6edbe8b6abcc5862c8e887c19807771">traffic_signal_states_</a>[curr_intersection.id.id][current_movement_state.signal_group];</div>
<div class="line"><span class="lineno"> 1554</span>        curr_light-&gt;recorded_start_time_stamps  = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ab26aab58d8e779dd198396c111c29eb8">sim_</a>.<a class="code hl_variable" href="classcarma__wm_1_1SignalizedIntersectionManager.html#a6e678b2acdd60b34035053d02e203d11">traffic_signal_start_times_</a>[curr_intersection.id.id][current_movement_state.signal_group];</div>
<div class="line"><span class="lineno"> 1555</span>      }</div>
<div class="line"><span class="lineno"> 1556</span>    }</div>
<div class="line"><span class="lineno"> 1557</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a3beafa813c6efd889c0e1eaabdf0a6f8"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a3beafa813c6efd889c0e1eaabdf0a6f8">carma_wm::CARMAWorldModel::getTrafficSignalId</a></div><div class="ttdeci">lanelet::Id getTrafficSignalId(uint16_t intersection_id, uint8_t signal_id)</div><div class="ttdoc">helper for traffic signal Id</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00084">CARMAWorldModel.cpp:84</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a65df34058ada8f5a64a7abd1a6e2afae"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a65df34058ada8f5a64a7abd1a6e2afae">carma_wm::CARMAWorldModel::getTrafficSignal</a></div><div class="ttdeci">lanelet::CarmaTrafficSignalPtr getTrafficSignal(const lanelet::Id &amp;id) const</div><div class="ttdoc">helper for getting traffic signal with given lanelet::Id</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l01392">CARMAWorldModel.cpp:1392</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_abf9dbca253d5b1ac3d65c6f4c4d4e134"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134">carma_wm::CARMAWorldModel::min_end_time_converter_minute_of_year</a></div><div class="ttdeci">boost::posix_time::ptime min_end_time_converter_minute_of_year(boost::posix_time::ptime min_end_time, bool moy_exists, uint32_t moy=0, bool is_simulation=false)</div><div class="ttdoc">update minimum end time to account for minute of the year</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l01430">CARMAWorldModel.cpp:1430</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_a6e678b2acdd60b34035053d02e203d11"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#a6e678b2acdd60b34035053d02e203d11">carma_wm::SignalizedIntersectionManager::traffic_signal_start_times_</a></div><div class="ttdeci">std::unordered_map&lt; uint16_t, std::unordered_map&lt; uint8_t, std::vector&lt; boost::posix_time::ptime &gt; &gt; &gt; traffic_signal_start_times_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8hpp_source.html#l00166">SignalizedIntersectionManager.hpp:166</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1SignalizedIntersectionManager_html_ab6edbe8b6abcc5862c8e887c19807771"><div class="ttname"><a href="classcarma__wm_1_1SignalizedIntersectionManager.html#ab6edbe8b6abcc5862c8e887c19807771">carma_wm::SignalizedIntersectionManager::traffic_signal_states_</a></div><div class="ttdeci">std::unordered_map&lt; uint16_t, std::unordered_map&lt; uint8_t, std::vector&lt; std::pair&lt; boost::posix_time::ptime, lanelet::CarmaTrafficSignalState &gt; &gt; &gt; &gt; traffic_signal_states_</div><div class="ttdef"><b>Definition:</b> <a href="SignalizedIntersectionManager_8hpp_source.html#l00163">SignalizedIntersectionManager.hpp:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l01392">getTrafficSignal()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00084">getTrafficSignalId()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01430">min_end_time_converter_minute_of_year()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00270">sim_</a>, <a class="el" href="utm__zone_8cpp_source.html#l00021">carma_cooperative_perception::to_string()</a>, <a class="el" href="SignalizedIntersectionManager_8hpp_source.html#l00166">carma_wm::SignalizedIntersectionManager::traffic_signal_start_times_</a>, and <a class="el" href="SignalizedIntersectionManager_8hpp_source.html#l00163">carma_wm::SignalizedIntersectionManager::traffic_signal_states_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_abee7c99de43cbc55ecc6d5fb7a6ac8c4_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_abee7c99de43cbc55ecc6d5fb7a6ac8c4_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_abee7c99de43cbc55ecc6d5fb7a6ac8c4_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_abee7c99de43cbc55ecc6d5fb7a6ac8c4_cgraph">
<area shape="rect" title="processSpatFromMsg update map&#39;s traffic light states with SPAT msg" alt="" coords="5,107,212,148"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a65df34058ada8f5a64a7abd1a6e2afae" title="helper for getting traffic signal with given lanelet::Id" alt="" coords="260,5,467,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a3beafa813c6efd889c0e1eaabdf0a6f8" title="helper for traffic signal Id" alt="" coords="260,71,467,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#abf9dbca253d5b1ac3d65c6f4c4d4e134" title="update minimum end time to account for minute of the year" alt="" coords="260,135,467,191"/>
<area shape="rect" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5" title=" " alt="" coords="515,176,713,217"/>
</map>
</div>

</div>
</div>
<a id="a561bd30d0274bb605a7b7dd54b16b037" name="a561bd30d0274bb605a7b7dd54b16b037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561bd30d0274bb605a7b7dd54b16b037">&#9670;&nbsp;</a></span>routeTrackPos() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> carma_wm::CARMAWorldModel::routeTrackPos </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint2d &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided point relative to the current route. </p>
<p >NOTE: The route definition used in this class contains discontinuities in the reference line at lane changes. It is important to consider that when using route related functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>The lanelet2 point which will have its distance computed</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If the route is not yet loaded</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> of the point </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a396b4e2d343c40b8a0ffe804a6427c82">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">169</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>  {</div>
<div class="line"><span class="lineno">  171</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  173</span>    {</div>
<div class="line"><span class="lineno">  174</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>    }</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="comment">// Find the nearest continuos shortest path centerline segment using fast map nearest search</span></div>
<div class="line"><span class="lineno">  178</span>    lanelet::Points3d near_points =</div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">shortest_path_filtered_centerline_view_</a>-&gt;pointLayer.nearest(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, 1);  <span class="comment">// Find the nearest points</span></div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <span class="comment">// Match point with linestring using fast map lookup</span></div>
<div class="line"><span class="lineno">  182</span>    <span class="keyword">auto</span> lineString_1 =</div>
<div class="line"><span class="lineno">  183</span>        lanelet::utils::to2D(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">shortest_path_filtered_centerline_view_</a>-&gt;lineStringLayer.findUsages(near_points[0])</div>
<div class="line"><span class="lineno">  184</span>                                 .front());  <span class="comment">// Only need the first index due to nature of route centerline</span></div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span> (lineString_1.size() == 0)</div>
<div class="line"><span class="lineno">  187</span>    {</div>
<div class="line"><span class="lineno">  188</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Invalid route loaded. Shortest path does not have proper references&quot;</span>);</div>
<div class="line"><span class="lineno">  189</span>    }</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <span class="comment">// New approach</span></div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">// 1. Find nearest point</span></div>
<div class="line"><span class="lineno">  193</span>    <span class="comment">// 2. Find linestring associated with nearest point</span></div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">// 3. If the nearest point is the first point on the linestring then we need to check the downtrack value</span></div>
<div class="line"><span class="lineno">  195</span>    <span class="comment">// 4. -- If donwtrack is negative then iterate over route segments to find preceeding segment</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">// 5. -- If downtrack is positive then we are on the correct segment</span></div>
<div class="line"><span class="lineno">  197</span>    <span class="comment">// 6. If the nearest point is the last point on the linestring then we need to check downtrack value</span></div>
<div class="line"><span class="lineno">  198</span>    <span class="comment">// 7. -- If downtrack is less then seg length then we are on the correct segment</span></div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">// 8. -- If downtrack is greater then seg length then iterate over route segments to find succeeding segment</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="comment">// 9. With correct segment identified compute segment downtrack distance</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="comment">// 10. Accumulate previos segment distances if needed.</span></div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="comment">// Find best route segment</span></div>
<div class="line"><span class="lineno">  204</span>    lanelet::Id bestRouteSegId;</div>
<div class="line"><span class="lineno">  205</span>    TrackPos tp(0, 0);</div>
<div class="line"><span class="lineno">  206</span>    <span class="comment">// Check for end cases</span></div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>    <span class="keyword">auto</span> indexes = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a2ae2fda2b50db3558644bc36b1338388">getIndexFromId</a>(near_points[0].<span class="keywordtype">id</span>());</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordtype">size_t</span> ls_i = indexes.first;</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordtype">size_t</span> p_i = indexes.second;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">if</span> (near_points[0].<span class="keywordtype">id</span>() == lineString_1.front().id())</div>
<div class="line"><span class="lineno">  213</span>    {  <span class="comment">// Nearest point is at the start of a line string</span></div>
<div class="line"><span class="lineno">  214</span>      <span class="comment">// Get start point of cur segment and add 1</span></div>
<div class="line"><span class="lineno">  215</span>      <span class="keyword">auto</span> next_point = lineString_1[1];</div>
<div class="line"><span class="lineno">  216</span>      TrackPos tp_next = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, lineString_1.front().basicPoint(), next_point.basicPoint());</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>      <span class="keywordflow">if</span> (tp_next.downtrack &gt;= 0 || ls_i == 0)</div>
<div class="line"><span class="lineno">  219</span>      {</div>
<div class="line"><span class="lineno">  220</span>        bestRouteSegId = lineString_1.id();</div>
<div class="line"><span class="lineno">  221</span>        tp = tp_next;</div>
<div class="line"><span class="lineno">  222</span>        <span class="comment">// If downtrack is positive then we are on the correct segment</span></div>
<div class="line"><span class="lineno">  223</span>      }</div>
<div class="line"><span class="lineno">  224</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  225</span>      {</div>
<div class="line"><span class="lineno">  226</span>        <span class="comment">// If downtrack is negative then iterate over route segments to find preceeding segment</span></div>
<div class="line"><span class="lineno">  227</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> prev_ls_i = ls_i - 1;</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>        <span class="keyword">auto</span> prev_centerline = lanelet::utils::to2D(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>[prev_ls_i]);  <span class="comment">// Get prev centerline</span></div>
<div class="line"><span class="lineno">  230</span>        tp = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, prev_centerline[prev_centerline.size() - 2].basicPoint(),</div>
<div class="line"><span class="lineno">  231</span>                                prev_centerline[prev_centerline.size() - 1].basicPoint());</div>
<div class="line"><span class="lineno">  232</span>        tp.downtrack += <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">distanceToPointAlongElement</a>(prev_ls_i, prev_centerline.size() - 2);</div>
<div class="line"><span class="lineno">  233</span>        bestRouteSegId = prev_centerline.id();</div>
<div class="line"><span class="lineno">  234</span>      }</div>
<div class="line"><span class="lineno">  235</span>    }</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (near_points[0].<span class="keywordtype">id</span>() == lineString_1.back().id())</div>
<div class="line"><span class="lineno">  237</span>    {  <span class="comment">// Nearest point is the end of a line string</span></div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>      <span class="comment">// Get end point of cur segment and subtract 1</span></div>
<div class="line"><span class="lineno">  240</span>      <span class="keyword">auto</span> prev_prev_point = lineString_1[lineString_1.size() - 2];</div>
<div class="line"><span class="lineno">  241</span>      <span class="keyword">auto</span> prev_point = lineString_1[lineString_1.size() - 1];</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>      TrackPos tp_prev = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, prev_prev_point.basicPoint(), prev_point.basicPoint());</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>      <span class="keywordtype">double</span> last_seg_length =</div>
<div class="line"><span class="lineno">  246</span>          <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#ab89af3367270704b5467c46a7cdf3987">distanceBetween</a>(ls_i, lineString_1.size() - 2, lineString_1.size() - 1);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>      <span class="keywordflow">if</span> (tp_prev.downtrack &lt; last_seg_length || ls_i == <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>.size() - 1)</div>
<div class="line"><span class="lineno">  249</span>      {</div>
<div class="line"><span class="lineno">  250</span>        <span class="comment">// If downtrack is less then seg length then we are on the correct segment</span></div>
<div class="line"><span class="lineno">  251</span>        bestRouteSegId = lineString_1.id();</div>
<div class="line"><span class="lineno">  252</span>        tp = tp_prev;</div>
<div class="line"><span class="lineno">  253</span>        tp.downtrack += <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">distanceToPointAlongElement</a>(ls_i, lineString_1.size() - 2);</div>
<div class="line"><span class="lineno">  254</span>      }</div>
<div class="line"><span class="lineno">  255</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  256</span>      {</div>
<div class="line"><span class="lineno">  257</span>        <span class="comment">// If downtrack is greater then seg length then we need to find the succeeding segment</span></div>
<div class="line"><span class="lineno">  258</span>        <span class="keyword">auto</span> next_centerline = lanelet::utils::to2D(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#adb594ec0caff8ca61fe84cbf7a0eee80">shortest_path_centerlines_</a>[ls_i + 1]);  <span class="comment">// Get prev centerline</span></div>
<div class="line"><span class="lineno">  259</span>        tp = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, next_centerline[0].basicPoint(), next_centerline[1].basicPoint());</div>
<div class="line"><span class="lineno">  260</span>        bestRouteSegId = next_centerline.id();</div>
<div class="line"><span class="lineno">  261</span>      }</div>
<div class="line"><span class="lineno">  262</span>    }</div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  264</span>    {  <span class="comment">// The nearest point is in the middle of a line string</span></div>
<div class="line"><span class="lineno">  265</span>      <span class="comment">// Graph the two bounding points on the line string and call matchSegment using a 3 element segment</span></div>
<div class="line"><span class="lineno">  266</span>      <span class="comment">// There is a guarantee from the earlier if statements that near_points[0] will always be located at an index within</span></div>
<div class="line"><span class="lineno">  267</span>      <span class="comment">// the exclusive range (0,lineString_1.size() - 1) so no need for range checks</span></div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>      lanelet::BasicLineString2d subSegment = lanelet::BasicLineString2d(</div>
<div class="line"><span class="lineno">  270</span>          { lineString_1[p_i - 1].basicPoint(), lineString_1[p_i].basicPoint(), lineString_1[p_i + 1].basicPoint() });</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>      tp = std::get&lt;0&gt;(<a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">geometry::matchSegment</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>, subSegment));  <span class="comment">// Get track pos along centerline</span></div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>      tp.downtrack += <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323">distanceToPointAlongElement</a>(ls_i, p_i - 1);</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>      bestRouteSegId = lineString_1.id();</div>
<div class="line"><span class="lineno">  277</span>    }</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>    <span class="comment">// Accumulate distance</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="keyword">auto</span> bestRouteSegIndex = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#a2ae2fda2b50db3558644bc36b1338388">getIndexFromId</a>(bestRouteSegId);</div>
<div class="line"><span class="lineno">  281</span>    tp.downtrack += <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a02750a7d4960c730331976f6c75df7a7">shortest_path_distance_map_</a>.<a class="code hl_function" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d">distanceToElement</a>(bestRouteSegIndex.first);</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">return</span> tp;</div>
<div class="line"><span class="lineno">  284</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_a2ae2fda2b50db3558644bc36b1338388"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#a2ae2fda2b50db3558644bc36b1338388">carma_wm::IndexedDistanceMap::getIndexFromId</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; getIndexFromId(const lanelet::Id &amp;id) const</div><div class="ttdoc">Returns the indexes of the element identified by the provided Id NOTE: It is up to the user to know i...</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00109">IndexedDistanceMap.cpp:109</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1IndexedDistanceMap_html_ab89af3367270704b5467c46a7cdf3987"><div class="ttname"><a href="classcarma__wm_1_1IndexedDistanceMap.html#ab89af3367270704b5467c46a7cdf3987">carma_wm::IndexedDistanceMap::distanceBetween</a></div><div class="ttdeci">double distanceBetween(size_t index, size_t p1_index, size_t p2_index) const</div><div class="ttdoc">Get the distance between two points on the same linestring.</div><div class="ttdef"><b>Definition:</b> <a href="IndexedDistanceMap_8cpp_source.html#l00090">IndexedDistanceMap.cpp:90</a></div></div>
<div class="ttc" id="anamespacecarma__wm_1_1geometry_html_ab675b2b8862a2ba9c139a8b5b353b846"><div class="ttname"><a href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846">carma_wm::geometry::matchSegment</a></div><div class="ttdeci">std::tuple&lt; TrackPos, lanelet::BasicSegment2d &gt; matchSegment(const lanelet::BasicPoint2d &amp;p, const lanelet::BasicLineString2d &amp;line_string)</div><div class="ttdoc">Get the TrackPos of the provided point along the linestring and the segment of the line string which ...</div><div class="ttdef"><b>Definition:</b> <a href="Geometry_8cpp_source.html#l00187">Geometry.cpp:187</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00090">carma_wm::IndexedDistanceMap::distanceBetween()</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00085">carma_wm::IndexedDistanceMap::distanceToElement()</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00095">carma_wm::IndexedDistanceMap::distanceToPointAlongElement()</a>, <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="IndexedDistanceMap_8cpp_source.html#l00109">carma_wm::IndexedDistanceMap::getIndexFromId()</a>, <a class="el" href="Geometry_8cpp_source.html#l00187">carma_wm::geometry::matchSegment()</a>, <a class="el" href="process__traj__logs_8py_source.html#l00126">process_traj_logs::point</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00305">shortest_path_centerlines_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00307">shortest_path_distance_map_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00308">shortest_path_filtered_centerline_view_</a>, and <a class="el" href="Geometry_8cpp_source.html#l00120">carma_wm::geometry::trackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a561bd30d0274bb605a7b7dd54b16b037_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a561bd30d0274bb605a7b7dd54b16b037_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a561bd30d0274bb605a7b7dd54b16b037_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a561bd30d0274bb605a7b7dd54b16b037_cgraph">
<area shape="rect" title="Returns the TrackPos, computed in 2d, of the provided point relative to the current route." alt="" coords="5,156,212,197"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#ab89af3367270704b5467c46a7cdf3987" title="Get the distance between two points on the same linestring." alt="" coords="260,5,448,47"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323" title="Get the along&#45;line distance to the point on the provided linestring." alt="" coords="496,35,723,76"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d" title="Get the distance to the start of the linestring at the specified index." alt="" coords="260,123,448,164"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a2ae2fda2b50db3558644bc36b1338388" title="Returns the indexes of the element identified by the provided Id NOTE: It is up to the user to know i..." alt="" coords="260,188,448,229"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="281,253,427,295"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="537,283,682,324"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="537,217,682,259"/>
</map>
</div>

</div>
</div>
<a id="a18e3077b7673f2f92fd71eeea955a597" name="a18e3077b7673f2f92fd71eeea955a597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e3077b7673f2f92fd71eeea955a597">&#9670;&nbsp;</a></span>routeTrackPos() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a>, <a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> &gt; carma_wm::CARMAWorldModel::routeTrackPos </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstArea &amp;&#160;</td>
          <td class="paramname"><em>area</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a pair of <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided area relative to the current route. The distance is based on the Area vertex with the smallest and largest downtrack distance This method overload is the most expensive of the routeTrackPos methods. </p>
<p >NOTE: The route definition used in this class contains discontinuities in the reference line at lane changes. It is important to consider that when using route related functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">area</td><td>The lanelet2 area which will have its distance computed</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If the route is not yet loaded or the area does not contain vertices</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pair where the first element contains the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> area's earliest downtrack vertex and the second element contains the area's latest downtrack point </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a936ea0fab63aaa5e1e9f423ff7454bd2">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">40</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>  {</div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">   44</span>    {</div>
<div class="line"><span class="lineno">   45</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">   46</span>    }</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    lanelet::ConstLineStrings3d outer_bound = area.outerBound();</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">if</span> (outer_bound.empty())</div>
<div class="line"><span class="lineno">   51</span>    {</div>
<div class="line"><span class="lineno">   52</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided area outer bound is invalid as it contains no points&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>    }</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>    TrackPos minPos(0, 0);</div>
<div class="line"><span class="lineno">   56</span>    TrackPos maxPos(0, 0);</div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">for</span> (lanelet::ConstLineString3d sub_bound3d : outer_bound)</div>
<div class="line"><span class="lineno">   59</span>    {</div>
<div class="line"><span class="lineno">   60</span>      <span class="keyword">auto</span> sub_bound = lanelet::utils::to2D(sub_bound3d);</div>
<div class="line"><span class="lineno">   61</span>      <span class="keywordflow">for</span> (lanelet::ConstPoint2d <a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a> : sub_bound)</div>
<div class="line"><span class="lineno">   62</span>      {</div>
<div class="line"><span class="lineno">   63</span>        TrackPos tp = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(<a class="code hl_variable" href="namespaceprocess__traj__logs.html#ab81a05c3d1d100117b6781d7dedf8a29">point</a>);</div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordflow">if</span> (first)</div>
<div class="line"><span class="lineno">   65</span>        {</div>
<div class="line"><span class="lineno">   66</span>          minPos = maxPos = tp;</div>
<div class="line"><span class="lineno">   67</span>          first = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   68</span>        }</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tp.downtrack &lt; minPos.downtrack)</div>
<div class="line"><span class="lineno">   70</span>        {</div>
<div class="line"><span class="lineno">   71</span>          minPos.downtrack = tp.downtrack;</div>
<div class="line"><span class="lineno">   72</span>          minPos.crosstrack = tp.crosstrack;</div>
<div class="line"><span class="lineno">   73</span>        }</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tp.downtrack &gt; maxPos.downtrack)</div>
<div class="line"><span class="lineno">   75</span>        {</div>
<div class="line"><span class="lineno">   76</span>          maxPos.downtrack = tp.downtrack;</div>
<div class="line"><span class="lineno">   77</span>          maxPos.crosstrack = tp.crosstrack;</div>
<div class="line"><span class="lineno">   78</span>        }</div>
<div class="line"><span class="lineno">   79</span>      }</div>
<div class="line"><span class="lineno">   80</span>    }</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">return</span> std::make_pair(minPos, maxPos);</div>
<div class="line"><span class="lineno">   82</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00038">carma_wm::TrackPos::crosstrack</a>, <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="process__traj__logs_8py_source.html#l00126">process_traj_logs::point</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00119">getBusStopsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01318">getIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00305">getLaneletsBetween()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01355">getSignalizedIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01218">getSignalsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">setRoute()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00637">setRouteEndPoint()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_cgraph">
<area shape="rect" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="5,29,212,71"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_icgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_icgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_icgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a18e3077b7673f2f92fd71eeea955a597_icgraph">
<area shape="rect" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="300,201,507,243"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a39dfa00a1066900c54ddae987d19b2d8" title="Return a list of bus stop along the current route. &#160;&#160;The bus stop along a route and the next bus stop..." alt="" coords="25,5,232,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ac3b3d0bac4477eeff7672868a582398c" title="Return a list of all way stop intersections along the current route. &#160;&#160;The tall way stop intersection..." alt="" coords="25,71,232,112"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a94ed05d036943a7bf86d002f8d9ece0b" title="Returns a list of lanelets which are part of the route and whose downtrack bounds exist within the pr..." alt="" coords="25,136,232,177"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#af75fa37311df1df558e148cdfa914eff" title="Return a list of signalized intersections along the current route. &#160;&#160;The signalized intersections alo..." alt="" coords="5,201,252,243"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#adc595705809b40e5eff0355bc296a3ad" title="Return a list of traffic lights/intersections along the current route. &#160;&#160;The traffic lights along a r..." alt="" coords="25,267,232,308"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ad4d9510c892eb9f19f462e0576317a69" title="Set the current route. This route must match the current map for this class to function properly." alt="" coords="25,332,232,373"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a7d69105950322b5a8d09f1cefb099459" title="Set endpoint of the route." alt="" coords="25,397,232,439"/>
</map>
</div>

</div>
</div>
<a id="a9fbaae6edda48602621a891d5e029e8a" name="a9fbaae6edda48602621a891d5e029e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fbaae6edda48602621a891d5e029e8a">&#9670;&nbsp;</a></span>routeTrackPos() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1TrackPos.html">TrackPos</a> carma_wm::CARMAWorldModel::routeTrackPos </td>
          <td>(</td>
          <td class="paramtype">const lanelet::ConstLanelet &amp;&#160;</td>
          <td class="paramname"><em>lanelet</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a>, computed in 2d, of the provided lanelet relative to the current route. The distance is based on the first point in the lanelet centerline. </p>
<p >NOTE: The route definition used in this class contains discontinuities in the reference line at lane changes. It is important to consider that when using route related functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lanelet</td><td>The lanelet2 lanelet which will have its distance computed</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>If the route is not yet loaded or the lanelet centerline cannot be found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classcarma__wm_1_1TrackPos.html" title="Position in a track based coordinate system where the axis are downtrack and crosstrack....">TrackPos</a> containing the downtrack and crosstrack location of the lanelet's first centerline point </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a657b2863beca38f639067767089ee5d9">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00102">102</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  103</span>  {</div>
<div class="line"><span class="lineno">  104</span>    <span class="comment">// Check if the route was loaded yet</span></div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  106</span>    {</div>
<div class="line"><span class="lineno">  107</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>    }</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    lanelet::ConstLineString2d centerline = lanelet::utils::to2D(<a class="code hl_namespace" href="namespacelanelet.html">lanelet</a>.centerline());</div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">if</span> (centerline.empty())</div>
<div class="line"><span class="lineno">  112</span>    {</div>
<div class="line"><span class="lineno">  113</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Provided lanelet has invalid centerline containing no points&quot;</span>);</div>
<div class="line"><span class="lineno">  114</span>    }</div>
<div class="line"><span class="lineno">  115</span>    <span class="keyword">auto</span> front = centerline.front();</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(front);</div>
<div class="line"><span class="lineno">  117</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a9fbaae6edda48602621a891d5e029e8a_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a9fbaae6edda48602621a891d5e029e8a_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a9fbaae6edda48602621a891d5e029e8a_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a9fbaae6edda48602621a891d5e029e8a_cgraph">
<area shape="rect" title="Returns the TrackPos, computed in 2d, of the provided lanelet relative to the current route...." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="af091e77668f082aaafea367836118dc9" name="af091e77668f082aaafea367836118dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af091e77668f082aaafea367836118dc9">&#9670;&nbsp;</a></span>sampleRoutePoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; lanelet::BasicPoint2d &gt; carma_wm::CARMAWorldModel::sampleRoutePoints </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>start_downtrack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>end_downtrack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>step_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Samples the route centerline between the provided downtracks with the provided step size. At lane changes the points should exhibit a discontinuous jump at the end of the initial lanelet to the end of the lane change lanelet as expected by the route definition. Returned points are always inclusive of provided bounds, so the last step might be less than step_size. </p>
<p >NOTE: If start_downtrack == end_downtrack a single point is returned. If the route is not set or the bounds lie outside the route an empty vector is returned.</p>
<p >In the default implementation, this method has m * O(log n) complexity where n is the number of lane changes in the route + 1 and m is the number of sampled points which is nominally 1 + ((start_downtrack - end_downtrack) / step_size). Since the route is fixed for the duration of method execution this can generally be thought of as a linear complexity call dominated by m.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start_downtrack</td><td>The starting route downtrack to sample from in meters </td></tr>
    <tr><td class="paramname">end_downtrack</td><td>The ending downtrack to stop sampling at in meters </td></tr>
    <tr><td class="paramname">step_size</td><td>The sampling step size in meters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The sampled x,y points</dd></dl>
<p>NOTE: This method really needs clarification of behavior for lane changes. </p>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#a2b59bf3f00a536d03113db348f10b3e6">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00389">389</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  391</span>  {</div>
<div class="line"><span class="lineno">  392</span>    std::vector&lt;lanelet::BasicPoint2d&gt; output;</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  394</span>    {</div>
<div class="line"><span class="lineno">  395</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Route has not yet been loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  396</span>      <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  397</span>    }</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordtype">double</span> route_end = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29">getRouteEndTrackPos</a>().<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">if</span> (start_downtrack &lt; 0 || start_downtrack &gt; route_end || end_downtrack &lt; 0 || end_downtrack &gt; route_end ||</div>
<div class="line"><span class="lineno">  402</span>        start_downtrack &gt; end_downtrack)</div>
<div class="line"><span class="lineno">  403</span>    {</div>
<div class="line"><span class="lineno">  404</span>      RCLCPP_WARN_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Invalid input downtracks&quot;</span>);</div>
<div class="line"><span class="lineno">  405</span>      <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    TrackPos route_pos(start_downtrack, 0);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">if</span> (end_downtrack == start_downtrack)</div>
<div class="line"><span class="lineno">  411</span>    {</div>
<div class="line"><span class="lineno">  412</span>      output.emplace_back(*(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">pointFromRouteTrackPos</a>(route_pos)));  <span class="comment">// If a single point was provided return that point</span></div>
<div class="line"><span class="lineno">  413</span>      <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  414</span>    }</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>    output.reserve(2 + (end_downtrack - start_downtrack) / step_size);</div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordtype">double</span> downtrack = start_downtrack;</div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">while</span> (downtrack &lt; end_downtrack)</div>
<div class="line"><span class="lineno">  419</span>    {</div>
<div class="line"><span class="lineno">  420</span>      route_pos.downtrack = downtrack;</div>
<div class="line"><span class="lineno">  421</span>      output.emplace_back(*(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">pointFromRouteTrackPos</a>(route_pos)));</div>
<div class="line"><span class="lineno">  422</span>      downtrack += step_size;</div>
<div class="line"><span class="lineno">  423</span>    }</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    route_pos.downtrack = end_downtrack;</div>
<div class="line"><span class="lineno">  426</span>    output.emplace_back(*(<a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">pointFromRouteTrackPos</a>(route_pos)));</div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordflow">return</span> output;</div>
<div class="line"><span class="lineno">  428</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a1e7bf1856cd6cd7dbf1e262d378c6087"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087">carma_wm::CARMAWorldModel::pointFromRouteTrackPos</a></div><div class="ttdeci">boost::optional&lt; lanelet::BasicPoint2d &gt; pointFromRouteTrackPos(const TrackPos &amp;route_pos) const override</div><div class="ttdoc">Converts a route track position into a map frame cartesian point.</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00430">CARMAWorldModel.cpp:430</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00557">getRouteEndTrackPos()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">pointFromRouteTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_af091e77668f082aaafea367836118dc9_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_af091e77668f082aaafea367836118dc9_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_af091e77668f082aaafea367836118dc9_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_af091e77668f082aaafea367836118dc9_cgraph">
<area shape="rect" title="Samples the route centerline between the provided downtracks with the provided step size...." alt="" coords="5,93,212,135"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#ab4df78110aa7dd6644ecbe3e5a69eb29" title="Get trackpos of the end of route point relative to the route." alt="" coords="525,5,731,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a1e7bf1856cd6cd7dbf1e262d378c6087" title="Converts a route track position into a map frame cartesian point." alt="" coords="260,123,467,164"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d" title="Get the distance to the start of the linestring at the specified index." alt="" coords="1036,112,1224,153"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a972f18c7b178a350cfdb85719eb10323" title="Get the along&#45;line distance to the point on the provided linestring." alt="" coords="515,123,741,164"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a8a56236ca7587395b6a5cd84c08ec811" title="Returns index of the linestring which the provided distance is within. NOTE: Unlike the rest of this ..." alt="" coords="521,188,735,229"/>
<area shape="rect" href="namespacecarma__cooperative__perception.html#a64b708654c8aecb09122d39577df31b5" title=" " alt="" coords="789,263,988,304"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a6f156f9d93ac8bd84fa6663b1efa5db4" title="Computes the 2d orientation of the vector from the provided start point to end point." alt="" coords="555,305,701,347"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a984999e739e3b5f2971da657da6d6adb" title="Returns the total along&#45;line length of this structure." alt="" coords="795,173,983,215"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a7bd91613ee531f0bb715d9e89a1285f1" title="Get the length of the linestring located at the provided index." alt="" coords="1036,177,1224,219"/>
</map>
</div>

</div>
</div>
<a id="a4b8724211cdcce8e28ca16ca83e5ec92" name="a4b8724211cdcce8e28ca16ca83e5ec92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b8724211cdcce8e28ca16ca83e5ec92">&#9670;&nbsp;</a></span>setConfigSpeedLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setConfigSpeedLimit </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>config_lim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config_lim</td><td>the configurable speed limit value populated from <a class="el" href="classcarma__wm_1_1WMListener.html" title="Class which provies automated subscription and threading support for the world model.">WMListener</a> using the config_speed_limit parameter in VehicleConfigParams.yaml </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01183">1183</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1184</span>  {</div>
<div class="line"><span class="lineno"> 1185</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#aa559413794368641911d969bd40daac4">config_speed_limit_</a> = config_lim;</div>
<div class="line"><span class="lineno"> 1186</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00274">config_speed_limit_</a>.</p>

</div>
</div>
<a id="a5fe3b961294db12603fe8eb5e7d2ea70" name="a5fe3b961294db12603fe8eb5e7d2ea70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe3b961294db12603fe8eb5e7d2ea70">&#9670;&nbsp;</a></span>setMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setMap </td>
          <td>(</td>
          <td class="paramtype">lanelet::LaneletMapPtr&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>map_version</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>recompute_routing_graph</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>A shared pointer to the map which will share ownership to this object </td></tr>
    <tr><td class="paramname">map_version</td><td>Optional field to set the map version. While this is technically optional its uses is highly advised to manage synchronization. </td></tr>
    <tr><td class="paramname">recompute_routing_graph</td><td>Optional field which if true will result in the routing graph being recomputed. NOTE: If this map is the first map set the graph will always be recomputed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">563</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  564</span>  {</div>
<div class="line"><span class="lineno">  565</span>    <span class="comment">// If this is the first time the map has been set, then recompute the routing graph</span></div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>)</div>
<div class="line"><span class="lineno">  567</span>    {</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>      RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;First time map is set in carma_wm. Routing graph will be recomputed reguardless of method inputs.&quot;</span>);</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>      recompute_routing_graph = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  572</span>    }</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> = map;</div>
<div class="line"><span class="lineno">  575</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#aaa43a960c21ca5a8b82d4bb74a5377fd">map_version_</a> = map_version;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="comment">// If the routing graph should be updated then recompute it</span></div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (recompute_routing_graph)</div>
<div class="line"><span class="lineno">  579</span>    {</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>      RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Building routing graph&quot;</span>);</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>      <span class="keyword">auto</span> tr = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6">getTrafficRules</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a>);</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>      <span class="keywordflow">if</span> (!tr)</div>
<div class="line"><span class="lineno">  586</span>      {</div>
<div class="line"><span class="lineno">  587</span>        <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Could not construct traffic rules for participant&quot;</span>);</div>
<div class="line"><span class="lineno">  588</span>      }</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>      <a class="code hl_typedef" href="namespacecarma__wm.html#a509eecc524933da5a1bb5369542888a9">TrafficRulesConstPtr</a> traffic_rules = *tr;</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>      lanelet::routing::RoutingGraphUPtr map_graph = lanelet::routing::RoutingGraph::build(*<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>, *traffic_rules);</div>
<div class="line"><span class="lineno">  593</span>      <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a> = std::move(map_graph);</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>      RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Done building routing graph&quot;</span>);</div>
<div class="line"><span class="lineno">  596</span>    }</div>
<div class="line"><span class="lineno">  597</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">getTrafficRules()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00312">map_version_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">participant_type_</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a5fe3b961294db12603fe8eb5e7d2ea70_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a5fe3b961294db12603fe8eb5e7d2ea70_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a5fe3b961294db12603fe8eb5e7d2ea70_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a5fe3b961294db12603fe8eb5e7d2ea70_cgraph">
<area shape="rect" title="Set the current map." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6" title="Get the Traffic Rules object." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="ad9d136b72adf2a85ffd8c2698711673e" name="ad9d136b72adf2a85ffd8c2698711673e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d136b72adf2a85ffd8c2698711673e">&#9670;&nbsp;</a></span>setRoadwayObjects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRoadwayObjects </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; &amp;&#160;</td>
          <td class="paramname"><em>rw_objs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update internal records of roadway objects. These objects MUST be guaranteed to be on the road. </p>
<p >These are detected by the sensor fusion node and are passed as objects compatible with lanelet </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00846">846</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  847</span>  {</div>
<div class="line"><span class="lineno">  848</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a03335a60875a9cfe30efa4ca983f54ae">roadway_objects_</a> = rw_objs;</div>
<div class="line"><span class="lineno">  849</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">roadway_objects_</a>.</p>

</div>
</div>
<a id="a9a8f89b9bec31f780a7ad1b9b5f82b31" name="a9a8f89b9bec31f780a7ad1b9b5f82b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a8f89b9bec31f780a7ad1b9b5f82b31">&#9670;&nbsp;</a></span>setRos1Clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRos1Clock </td>
          <td>(</td>
          <td class="paramtype">const rclcpp::Time &amp;&#160;</td>
          <td class="paramname"><em>time_now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set current Ros1 clock (only used in simulation runs) </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00616">616</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  617</span>  {</div>
<div class="line"><span class="lineno">  618</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a255353f016ca62c487b554b4ffcfbf40">ros1_clock_</a> = time_now;</div>
<div class="line"><span class="lineno">  619</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00296">ros1_clock_</a>.</p>

</div>
</div>
<a id="ad4d9510c892eb9f19f462e0576317a69" name="ad4d9510c892eb9f19f462e0576317a69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d9510c892eb9f19f462e0576317a69">&#9670;&nbsp;</a></span>setRoute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecarma__wm.html#ae21cba9eaf353a58738fc2c1773c5ffa">LaneletRoutePtr</a>&#160;</td>
          <td class="paramname"><em>route</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current route. This route must match the current map for this class to function properly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">route</td><td>A shared pointer to the route which will share ownership to this object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">626</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  627</span>  {</div>
<div class="line"><span class="lineno">  628</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a> = <a class="code hl_namespace" href="namespaceroute.html">route</a>;</div>
<div class="line"><span class="lineno">  629</span>    lanelet::ConstLanelets path_lanelets(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath().begin(), <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;shortestPath().end());</div>
<div class="line"><span class="lineno">  630</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a638d41483eda68460147b65bf43d119c">shortest_path_view_</a> = lanelet::utils::createConstSubmap(path_lanelets, {});</div>
<div class="line"><span class="lineno">  631</span>    <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8">computeDowntrackReferenceLine</a>();</div>
<div class="line"><span class="lineno">  632</span>    <span class="comment">// NOTE: Setting the route_length_ field here will likely result in the final lanelets final point being used. Call setRouteEndPoint to use the destination point value</span></div>
<div class="line"><span class="lineno">  633</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a6f380415bf80871a93e50f91a63c1e55">route_length_</a> = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;getEndPoint().basicPoint2d()).downtrack;  <span class="comment">// Cache the route length with</span></div>
<div class="line"><span class="lineno">  634</span>                                                                                   <span class="comment">// consideration for endpoint</span></div>
<div class="line"><span class="lineno">  635</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a6f924aa42ade5d323045fdad9b7ca3a8"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8">carma_wm::CARMAWorldModel::computeDowntrackReferenceLine</a></div><div class="ttdeci">void computeDowntrackReferenceLine()</div><div class="ttdoc">Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio...</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00675">CARMAWorldModel.cpp:675</a></div></div>
<div class="ttc" id="anamespaceroute_html"><div class="ttname"><a href="namespaceroute.html">route</a></div><div class="ttdef"><b>Definition:</b> <a href="route__config_8hpp_source.html#l00022">route_config.hpp:23</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00302">route_length_</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8hpp_source.html#l00303">shortest_path_view_</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_ad4d9510c892eb9f19f462e0576317a69_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_ad4d9510c892eb9f19f462e0576317a69_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_ad4d9510c892eb9f19f462e0576317a69_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_ad4d9510c892eb9f19f462e0576317a69_cgraph">
<area shape="rect" title="Set the current route. This route must match the current map for this class to function properly." alt="" coords="5,173,212,215"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6f924aa42ade5d323045fdad9b7ca3a8" title="Helper function to compute the geometry of the route downtrack/crosstrack reference line This functio..." alt="" coords="260,128,484,169"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="269,217,475,259"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a1f25006ada239cea8226b7f36afc267e" title="Helper function to perform a deep copy of a LineString and assign new ids to all the elements...." alt="" coords="532,5,739,47"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a6d75cb8cde721072cc7f69edd0ececb6" title="Get the Traffic Rules object." alt="" coords="532,95,739,136"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a669e41545be3e1ee49512a56c57b7196" title="Add a linestring to this structure. This function will iterate over the line string to compute distan..." alt="" coords="541,160,729,201"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#ab863677638f19d38483e63ba0e763da5" title="Returns number of linestrings in this structure." alt="" coords="541,225,729,267"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a984999e739e3b5f2971da657da6d6adb" title="Returns the total along&#45;line length of this structure." alt="" coords="787,160,975,201"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#aaf9700fe30cc2819ca4423a2acffa27d" title="Get the distance to the start of the linestring at the specified index." alt="" coords="1023,127,1211,168"/>
<area shape="rect" href="classcarma__wm_1_1IndexedDistanceMap.html#a7bd91613ee531f0bb715d9e89a1285f1" title="Get the length of the linestring located at the provided index." alt="" coords="1023,192,1211,233"/>
</map>
</div>

</div>
</div>
<a id="a7d69105950322b5a8d09f1cefb099459" name="a7d69105950322b5a8d09f1cefb099459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d69105950322b5a8d09f1cefb099459">&#9670;&nbsp;</a></span>setRouteEndPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRouteEndPoint </td>
          <td>(</td>
          <td class="paramtype">const lanelet::BasicPoint3d &amp;&#160;</td>
          <td class="paramname"><em>end_point</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set endpoint of the route. </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00637">637</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  638</span>  {</div>
<div class="line"><span class="lineno">  639</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>)</div>
<div class="line"><span class="lineno">  640</span>    {</div>
<div class="line"><span class="lineno">  641</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Route endpoint set before route was available.&quot;</span>);</div>
<div class="line"><span class="lineno">  642</span>    }</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>    lanelet::ConstPoint3d const_end_point{ lanelet::utils::getId(), end_point.x(), end_point.y(), end_point.z() };</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;setEndPoint(const_end_point);</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a6f380415bf80871a93e50f91a63c1e55">route_length_</a> = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597">routeTrackPos</a>(<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a690740a182ab45ac2232da7d1b5edff8">route_</a>-&gt;getEndPoint().basicPoint2d()).downtrack;  <span class="comment">// Cache the route length with</span></div>
<div class="line"><span class="lineno">  649</span>                                                                                   <span class="comment">// consideration for endpoint</span></div>
<div class="line"><span class="lineno">  650</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">route_</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00302">route_length_</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_a7d69105950322b5a8d09f1cefb099459_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_a7d69105950322b5a8d09f1cefb099459_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_a7d69105950322b5a8d09f1cefb099459_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_a7d69105950322b5a8d09f1cefb099459_cgraph">
<area shape="rect" title="Set endpoint of the route." alt="" coords="5,29,212,71"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a18e3077b7673f2f92fd71eeea955a597" title="Returns a pair of TrackPos, computed in 2d, of the provided area relative to the current route...." alt="" coords="260,29,467,71"/>
</map>
</div>

</div>
</div>
<a id="a790185986312133fea831ba82200ac65" name="a790185986312133fea831ba82200ac65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a790185986312133fea831ba82200ac65">&#9670;&nbsp;</a></span>setRouteName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRouteName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>route_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the name of the route. </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00652">652</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  653</span>  {</div>
<div class="line"><span class="lineno">  654</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ae7c61e95776f7c1d84517fa83c725129">route_name_</a> = route_name;</div>
<div class="line"><span class="lineno">  655</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00314">route_name_</a>.</p>

</div>
</div>
<a id="a6c42204d5a7de0cbd8e713ce49aded7f" name="a6c42204d5a7de0cbd8e713ce49aded7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c42204d5a7de0cbd8e713ce49aded7f">&#9670;&nbsp;</a></span>setRoutingGraph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setRoutingGraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecarma__wm.html#a23411d3d299da623ec379efbc1a5b14a">LaneletRoutingGraphPtr</a>&#160;</td>
          <td class="paramname"><em>graph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the routing graph for the participant type. This function may serve as an optimization to recomputing the routing graph when it is already available. </p>
<p >NOTE: The set graph will be overwritten if setMap(recompute_routing_graph=true) is called. It will not, be overwritten if the map is set with recompute_routing_graph=false</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>The graph to set. NOTE: This graph must be for the participant type specified <a class="el" href="classcarma__wm_1_1CARMAWorldModel.html#a8fbae2ed5d0dd0ad2fe8a69c9b65ba75" title="Get vehicle participation type.">getVehicleParticipationType()</a>. There is no way to validate this from the object so the user must ensure consistency. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00599">599</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  599</span>                                                                    {</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>    RCLCPP_INFO_STREAM(rclcpp::get_logger(<span class="stringliteral">&quot;carma_wm&quot;</span>), <span class="stringliteral">&quot;Setting the routing graph with user or listener provided graph&quot;</span>);</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a7602bf876d9e8defb3b47239789b34b3">map_routing_graph_</a> = graph;</div>
<div class="line"><span class="lineno">  604</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">map_routing_graph_</a>.</p>

</div>
</div>
<a id="a7c64cfd0308ca0db427f6b2a63de0f6b" name="a7c64cfd0308ca0db427f6b2a63de0f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c64cfd0308ca0db427f6b2a63de0f6b">&#9670;&nbsp;</a></span>setSimulationClock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setSimulationClock </td>
          <td>(</td>
          <td class="paramtype">const rclcpp::Time &amp;&#160;</td>
          <td class="paramname"><em>time_now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set simulation clock clock (only used in simulation runs) </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00621">621</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>  {</div>
<div class="line"><span class="lineno">  623</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a768977187d806491ba0fc8f267f73a15">simulation_clock_</a> = time_now;</div>
<div class="line"><span class="lineno">  624</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00297">simulation_clock_</a>.</p>

</div>
</div>
<a id="a0707c34b5e4278d809a2a5a53fe456bb" name="a0707c34b5e4278d809a2a5a53fe456bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0707c34b5e4278d809a2a5a53fe456bb">&#9670;&nbsp;</a></span>setTrafficLightIds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setTrafficLightIds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lanelet::Id&#160;</td>
          <td class="paramname"><em>lanelet_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the id mapping between intersection/signal group and lanelet::Id for traffic lights in the map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>intersection_id (16bit) and signal_group_id (8bit) concatenated in that order and saved in 32bit </td></tr>
    <tr><td class="paramname">lanelet_id</td><td>lanelet_id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01178">1178</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1179</span>  {</div>
<div class="line"><span class="lineno"> 1180</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a787c5285a6c73566c11a09e108eeb1be">traffic_light_ids_</a>[id] = lanelet_id;</div>
<div class="line"><span class="lineno"> 1181</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a787c5285a6c73566c11a09e108eeb1be"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a787c5285a6c73566c11a09e108eeb1be">carma_wm::CARMAWorldModel::traffic_light_ids_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, lanelet::Id &gt; traffic_light_ids_</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8hpp_source.html#l00268">CARMAWorldModel.hpp:268</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00268">traffic_light_ids_</a>.</p>

</div>
</div>
<a id="a43ac7e19c2edeff50638ace0aedb94e6" name="a43ac7e19c2edeff50638ace0aedb94e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ac7e19c2edeff50638ace0aedb94e6">&#9670;&nbsp;</a></span>setVehicleParticipationType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void carma_wm::CARMAWorldModel::setVehicleParticipationType </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>participant</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set vehicle participation type. </p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l01188">1188</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1189</span>  {</div>
<div class="line"><span class="lineno"> 1190</span>    <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#a3fec9f047a6a79e5271dc3547769c9ab">participant_type_</a> = participant;</div>
<div class="line"><span class="lineno"> 1191</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">participant_type_</a>.</p>

</div>
</div>
<a id="aef70965ad3260671c52a1985bb2e6ce1" name="aef70965ad3260671c52a1985bb2e6ce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef70965ad3260671c52a1985bb2e6ce1">&#9670;&nbsp;</a></span>toRoadwayObstacle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::Optional&lt; carma_perception_msgs::msg::RoadwayObstacle &gt; carma_wm::CARMAWorldModel::toRoadwayObstacle </td>
          <td>(</td>
          <td class="paramtype">const carma_perception_msgs::msg::ExternalObject &amp;&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map. Can also be used to determine if the object is on the roadway. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>the external object to convert</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if the map is not set or contains no lanelets</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An optional RoadwayObstacle message created from the provided object. If the external object is not on the roadway then the optional will be empty. </dd></dl>

<p>Implements <a class="el" href="classcarma__wm_1_1WorldModel.html#aa6a6fed1df2234ba9a9f274a6583c1d1">carma_wm::WorldModel</a>.</p>

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8cpp_source.html#l00794">794</a> of file <a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  795</span>  {</div>
<div class="line"><span class="lineno">  796</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a> || <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.size() == 0)</div>
<div class="line"><span class="lineno">  797</span>    {</div>
<div class="line"><span class="lineno">  798</span>      <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Map is not set or does not contain lanelets&quot;</span>);</div>
<div class="line"><span class="lineno">  799</span>    }</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>    lanelet::BasicPoint2d object_center(<span class="keywordtype">object</span>.pose.pose.position.x, <span class="keywordtype">object</span>.pose.pose.position.y);</div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>    <span class="keyword">auto</span> nearestLaneletBoost = <a class="code hl_function" href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808">getIntersectingLanelet</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><span class="lineno">  804</span> </div>
<div class="line"><span class="lineno">  805</span>    <span class="keywordflow">if</span> (!nearestLaneletBoost)</div>
<div class="line"><span class="lineno">  806</span>      <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>    lanelet::Lanelet nearestLanelet = nearestLaneletBoost.get();</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    carma_perception_msgs::msg::RoadwayObstacle obs;</div>
<div class="line"><span class="lineno">  811</span>    obs.object = <a class="code hl_namespace" href="namespaceobject.html">object</a>;</div>
<div class="line"><span class="lineno">  812</span>    obs.connected_vehicle_type.type =</div>
<div class="line"><span class="lineno">  813</span>        carma_perception_msgs::msg::ConnectedVehicleType::NOT_CONNECTED;  <span class="comment">// TODO No clear way to determine automation state at this time</span></div>
<div class="line"><span class="lineno">  814</span>    obs.lanelet_id = nearestLanelet.id();</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>    <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a> obj_track_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(nearestLanelet, object_center);</div>
<div class="line"><span class="lineno">  817</span>    obs.down_track = obj_track_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>;</div>
<div class="line"><span class="lineno">  818</span>    obs.cross_track = obj_track_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>;</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> prediction : <span class="keywordtype">object</span>.predictions)</div>
<div class="line"><span class="lineno">  821</span>    {</div>
<div class="line"><span class="lineno">  822</span>      <span class="comment">// Compute prediction polygon</span></div>
<div class="line"><span class="lineno">  823</span>      lanelet::BasicPolygon2d prediction_polygon =</div>
<div class="line"><span class="lineno">  824</span>          <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82">geometry::objectToMapPolygon</a>(prediction.predicted_position, <span class="keywordtype">object</span>.size);</div>
<div class="line"><span class="lineno">  825</span>      lanelet::BasicPoint2d prediction_center(prediction.predicted_position.position.x,</div>
<div class="line"><span class="lineno">  826</span>                                              prediction.predicted_position.position.y);</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>      <span class="keyword">auto</span> predNearestLanelet = <a class="code hl_variable" href="classcarma__wm_1_1CARMAWorldModel.html#ac52c727f61495307cf42a8c07af24555">semantic_map_</a>-&gt;laneletLayer.nearest(prediction_center, 1)[0];</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>      <a class="code hl_class" href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a> pred_track_pos = <a class="code hl_function" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a">geometry::trackPos</a>(predNearestLanelet, prediction_center);</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>      obs.predicted_lanelet_ids.emplace_back(predNearestLanelet.id());</div>
<div class="line"><span class="lineno">  833</span>      obs.predicted_cross_tracks.emplace_back(pred_track_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">crosstrack</a>);</div>
<div class="line"><span class="lineno">  834</span>      obs.predicted_down_tracks.emplace_back(pred_track_pos.<a class="code hl_variable" href="classcarma__wm_1_1TrackPos.html#a6ea99bbb9c6a75685ceaaf370d58ea24">downtrack</a>);</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>      <span class="comment">// Since the predictions are having their lanelet ids matched based on the nearest nounding box search rather than</span></div>
<div class="line"><span class="lineno">  837</span>      <span class="comment">// checking for intersection The id confidence will be set to 90% of the position confidence</span></div>
<div class="line"><span class="lineno">  838</span>      obs.predicted_lanelet_id_confidences.emplace_back(0.9 * prediction.predicted_position_confidence);</div>
<div class="line"><span class="lineno">  839</span>      obs.predicted_cross_track_confidences.emplace_back(0.9 * prediction.predicted_position_confidence);</div>
<div class="line"><span class="lineno">  840</span>      obs.predicted_down_track_confidences.emplace_back(0.9 * prediction.predicted_position_confidence);</div>
<div class="line"><span class="lineno">  841</span>    }</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>    <span class="keywordflow">return</span> obs;</div>
<div class="line"><span class="lineno">  844</span>  }</div>
<div class="ttc" id="aclasscarma__wm_1_1CARMAWorldModel_html_a347bdceaab5df16ff4a676a733c32808"><div class="ttname"><a href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808">carma_wm::CARMAWorldModel::getIntersectingLanelet</a></div><div class="ttdeci">lanelet::Optional&lt; lanelet::Lanelet &gt; getIntersectingLanelet(const carma_perception_msgs::msg::ExternalObject &amp;object) const override</div><div class="ttdoc">Gets the a lanelet the object is currently on determined by its position on the semantic map....</div><div class="ttdef"><b>Definition:</b> <a href="CARMAWorldModel_8cpp_source.html#l00927">CARMAWorldModel.cpp:927</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html">carma_wm::TrackPos</a></div><div class="ttdoc">Position in a track based coordinate system where the axis are downtrack and crosstrack....</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00034">TrackPos.hpp:35</a></div></div>
<div class="ttc" id="aclasscarma__wm_1_1TrackPos_html_a60c766fa11f68e1d8832d79cd2d292c2"><div class="ttname"><a href="classcarma__wm_1_1TrackPos.html#a60c766fa11f68e1d8832d79cd2d292c2">carma_wm::TrackPos::crosstrack</a></div><div class="ttdeci">double crosstrack</div><div class="ttdef"><b>Definition:</b> <a href="TrackPos_8hpp_source.html#l00038">TrackPos.hpp:38</a></div></div>
<div class="ttc" id="anamespaceobject_html"><div class="ttname"><a href="namespaceobject.html">object</a></div><div class="ttdef"><b>Definition:</b> <a href="object__detection__tracking__node_8h_source.html#l00029">object_detection_tracking_node.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="TrackPos_8hpp_source.html#l00038">carma_wm::TrackPos::crosstrack</a>, <a class="el" href="TrackPos_8hpp_source.html#l00037">carma_wm::TrackPos::downtrack</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00927">getIntersectingLanelet()</a>, <a class="el" href="Geometry_8cpp_source.html#l00289">carma_wm::geometry::objectToMapPolygon()</a>, <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">semantic_map_</a>, and <a class="el" href="Geometry_8cpp_source.html#l00120">carma_wm::geometry::trackPos()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcarma__wm_1_1CARMAWorldModel_aef70965ad3260671c52a1985bb2e6ce1_cgraph.png" border="0" usemap="#aclasscarma__wm_1_1CARMAWorldModel_aef70965ad3260671c52a1985bb2e6ce1_cgraph" alt=""/></div>
<map name="aclasscarma__wm_1_1CARMAWorldModel_aef70965ad3260671c52a1985bb2e6ce1_cgraph" id="aclasscarma__wm_1_1CARMAWorldModel_aef70965ad3260671c52a1985bb2e6ce1_cgraph">
<area shape="rect" title="Converts an ExternalObject in a RoadwayObstacle by mapping its position onto the semantic map...." alt="" coords="5,64,212,105"/>
<area shape="rect" href="classcarma__wm_1_1CARMAWorldModel.html#a347bdceaab5df16ff4a676a733c32808" title="Gets the a lanelet the object is currently on determined by its position on the semantic map...." alt="" coords="260,5,467,47"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#a1f7db96beb74c526d4b502265e7c1e82" title="Uses the provided pose and size vector of an ExternalObject to compute what the polygon would be of t..." alt="" coords="515,32,664,73"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#aebce986f21c117983313292d5e82b50a" title="Returns the TrackPos, computed in 2d, of the provided point relative to the centerline of the provide..." alt="" coords="291,123,436,164"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ab675b2b8862a2ba9c139a8b5b353b846" title="Get the TrackPos of the provided point along the linestring and the segment of the line string which ..." alt="" coords="517,123,662,164"/>
<area shape="rect" href="namespacecarma__wm_1_1geometry.html#ae0a06818149f7430fee80e295ef04548" title="Helper function to identify whether to select the preceeding or succeeding segment of a linstring poi..." alt="" coords="712,123,857,164"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa559413794368641911d969bd40daac4" name="aa559413794368641911d969bd40daac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa559413794368641911d969bd40daac4">&#9670;&nbsp;</a></span>config_speed_limit_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::CARMAWorldModel::config_speed_limit_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00274">274</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00762">getTrafficRules()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l01183">setConfigSpeedLimit()</a>.</p>

</div>
</div>
<a id="a54b998c568ec82bd1d522f1e13911d0b" name="a54b998c568ec82bd1d522f1e13911d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54b998c568ec82bd1d522f1e13911d0b">&#9670;&nbsp;</a></span>GREEN_LIGHT_DURATION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double carma_wm::CARMAWorldModel::GREEN_LIGHT_DURATION = 20.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00321">321</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

</div>
</div>
<a id="a7602bf876d9e8defb3b47239789b34b3" name="a7602bf876d9e8defb3b47239789b34b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7602bf876d9e8defb3b47239789b34b3">&#9670;&nbsp;</a></span>map_routing_graph_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecarma__wm.html#a23411d3d299da623ec379efbc1a5b14a">LaneletRoutingGraphPtr</a> carma_wm::CARMAWorldModel::map_routing_graph_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00301">301</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">getInLaneObjects()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01116">getLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00756">getMapRoutingGraph()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">setMap()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00599">setRoutingGraph()</a>.</p>

</div>
</div>
<a id="aaa43a960c21ca5a8b82d4bb74a5377fd" name="aaa43a960c21ca5a8b82d4bb74a5377fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa43a960c21ca5a8b82d4bb74a5377fd">&#9670;&nbsp;</a></span>map_version_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t carma_wm::CARMAWorldModel::map_version_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00312">312</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00606">getMapVersion()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">setMap()</a>.</p>

</div>
</div>
<a id="a3fec9f047a6a79e5271dc3547769c9ab" name="a3fec9f047a6a79e5271dc3547769c9ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fec9f047a6a79e5271dc3547769c9ab">&#9670;&nbsp;</a></span>participant_type_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string carma_wm::CARMAWorldModel::participant_type_ = lanelet::Participants::Vehicle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00276">276</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00787">getTrafficRules()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01193">getVehicleParticipationType()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">setMap()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l01188">setVehicleParticipationType()</a>.</p>

</div>
</div>
<a id="afa590ef709e46e6b569030ea71cb74f4" name="afa590ef709e46e6b569030ea71cb74f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa590ef709e46e6b569030ea71cb74f4">&#9670;&nbsp;</a></span>RED_LIGHT_DURATION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double carma_wm::CARMAWorldModel::RED_LIGHT_DURATION = 20.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00319">319</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

</div>
</div>
<a id="a03335a60875a9cfe30efa4ca983f54ae" name="a03335a60875a9cfe30efa4ca983f54ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03335a60875a9cfe30efa4ca983f54ae">&#9670;&nbsp;</a></span>roadway_objects_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;carma_perception_msgs::msg::RoadwayObstacle&gt; carma_wm::CARMAWorldModel::roadway_objects_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00310">310</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00950">distToNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00856">getInLaneObjects()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00851">getRoadwayObjects()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00846">setRoadwayObjects()</a>.</p>

</div>
</div>
<a id="a255353f016ca62c487b554b4ffcfbf40" name="a255353f016ca62c487b554b4ffcfbf40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255353f016ca62c487b554b4ffcfbf40">&#9670;&nbsp;</a></span>ros1_clock_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;rclcpp::Time&gt; carma_wm::CARMAWorldModel::ros1_clock_ = std::nullopt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00296">296</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01430">min_end_time_converter_minute_of_year()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00616">setRos1Clock()</a>.</p>

</div>
</div>
<a id="a690740a182ab45ac2232da7d1b5edff8" name="a690740a182ab45ac2232da7d1b5edff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a690740a182ab45ac2232da7d1b5edff8">&#9670;&nbsp;</a></span>route_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecarma__wm.html#ae21cba9eaf353a58738fc2c1773c5ffa">LaneletRoutePtr</a> carma_wm::CARMAWorldModel::route_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00300">300</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00119">getBusStopsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01268">getEntryExitOfSignalAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01318">getIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00305">getLaneletsBetween()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00552">getRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01355">getSignalizedIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01218">getSignalsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">pointFromRouteTrackPos()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00040">routeTrackPos()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00389">sampleRoutePoints()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">setRoute()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00637">setRouteEndPoint()</a>.</p>

</div>
</div>
<a id="a6f380415bf80871a93e50f91a63c1e55" name="a6f380415bf80871a93e50f91a63c1e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f380415bf80871a93e50f91a63c1e55">&#9670;&nbsp;</a></span>route_length_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double carma_wm::CARMAWorldModel::route_length_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00302">302</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00557">getRouteEndTrackPos()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">setRoute()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00637">setRouteEndPoint()</a>.</p>

</div>
</div>
<a id="ae7c61e95776f7c1d84517fa83c725129" name="ae7c61e95776f7c1d84517fa83c725129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c61e95776f7c1d84517fa83c725129">&#9670;&nbsp;</a></span>route_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string carma_wm::CARMAWorldModel::route_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00314">314</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00657">getRouteName()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00652">setRouteName()</a>.</p>

</div>
</div>
<a id="ac52c727f61495307cf42a8c07af24555" name="ac52c727f61495307cf42a8c07af24555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52c727f61495307cf42a8c07af24555">&#9670;&nbsp;</a></span>semantic_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;lanelet::LaneletMap&gt; carma_wm::CARMAWorldModel::semantic_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00299">299</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00950">distToNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00119">getBusStopsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00927">getIntersectingLanelet()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01318">getIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01116">getLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01198">getLaneletsFromPoint()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00547">getMap()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00611">getMutableMap()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00992">getNearestObjInLane()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01355">getSignalizedIntersectionsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01218">getSignalsAlongRoute()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01392">getTrafficSignal()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01208">nonConnectedAdjacentLeft()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">processSpatFromMsg()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00563">setMap()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00794">toRoadwayObstacle()</a>.</p>

</div>
</div>
<a id="adb594ec0caff8ca61fe84cbf7a0eee80" name="adb594ec0caff8ca61fe84cbf7a0eee80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb594ec0caff8ca61fe84cbf7a0eee80">&#9670;&nbsp;</a></span>shortest_path_centerlines_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;lanelet::LineString3d&gt; carma_wm::CARMAWorldModel::shortest_path_centerlines_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00305">305</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">pointFromRouteTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">routeTrackPos()</a>.</p>

</div>
</div>
<a id="a02750a7d4960c730331976f6c75df7a7" name="a02750a7d4960c730331976f6c75df7a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02750a7d4960c730331976f6c75df7a7">&#9670;&nbsp;</a></span>shortest_path_distance_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1IndexedDistanceMap.html">IndexedDistanceMap</a> carma_wm::CARMAWorldModel::shortest_path_distance_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00307">307</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00430">pointFromRouteTrackPos()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">routeTrackPos()</a>.</p>

</div>
</div>
<a id="ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6" name="ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0cbb7d3d6ae82f6d3ce39b6dcb1bcf6">&#9670;&nbsp;</a></span>shortest_path_filtered_centerline_view_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::LaneletMapUPtr carma_wm::CARMAWorldModel::shortest_path_filtered_centerline_view_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00308">308</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00169">routeTrackPos()</a>.</p>

</div>
</div>
<a id="a638d41483eda68460147b65bf43d119c" name="a638d41483eda68460147b65bf43d119c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a638d41483eda68460147b65bf43d119c">&#9670;&nbsp;</a></span>shortest_path_view_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lanelet::LaneletSubmapConstUPtr carma_wm::CARMAWorldModel::shortest_path_view_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00303">303</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00675">computeDowntrackReferenceLine()</a>, <a class="el" href="CARMAWorldModel_8cpp_source.html#l00305">getLaneletsBetween()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00626">setRoute()</a>.</p>

</div>
</div>
<a id="ab26aab58d8e779dd198396c111c29eb8" name="ab26aab58d8e779dd198396c111c29eb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26aab58d8e779dd198396c111c29eb8">&#9670;&nbsp;</a></span>sim_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcarma__wm_1_1SignalizedIntersectionManager.html">carma_wm::SignalizedIntersectionManager</a> carma_wm::CARMAWorldModel::sim_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00270">270</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l00084">getTrafficSignalId()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l01476">processSpatFromMsg()</a>.</p>

</div>
</div>
<a id="a768977187d806491ba0fc8f267f73a15" name="a768977187d806491ba0fc8f267f73a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768977187d806491ba0fc8f267f73a15">&#9670;&nbsp;</a></span>simulation_clock_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;rclcpp::Time&gt; carma_wm::CARMAWorldModel::simulation_clock_ = std::nullopt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00297">297</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01430">min_end_time_converter_minute_of_year()</a>, and <a class="el" href="CARMAWorldModel_8cpp_source.html#l00621">setSimulationClock()</a>.</p>

</div>
</div>
<a id="a787c5285a6c73566c11a09e108eeb1be" name="a787c5285a6c73566c11a09e108eeb1be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a787c5285a6c73566c11a09e108eeb1be">&#9670;&nbsp;</a></span>traffic_light_ids_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>, lanelet::Id&gt; carma_wm::CARMAWorldModel::traffic_light_ids_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00268">268</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="CARMAWorldModel_8cpp_source.html#l01178">setTrafficLightIds()</a>.</p>

</div>
</div>
<a id="a78ccc3564961689a86c66886aaf3de05" name="a78ccc3564961689a86c66886aaf3de05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ccc3564961689a86c66886aaf3de05">&#9670;&nbsp;</a></span>YELLOW_LIGHT_DURATION</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr double carma_wm::CARMAWorldModel::YELLOW_LIGHT_DURATION = 3.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="CARMAWorldModel_8hpp_source.html#l00320">320</a> of file <a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>carma_wm/include/carma_wm/<a class="el" href="CARMAWorldModel_8hpp_source.html">CARMAWorldModel.hpp</a></li>
<li>carma_wm/src/<a class="el" href="CARMAWorldModel_8cpp_source.html">CARMAWorldModel.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecarma__wm.html">carma_wm</a></li><li class="navelem"><a class="el" href="classcarma__wm_1_1CARMAWorldModel.html">CARMAWorldModel</a></li>
    <li class="footer">Generated on Fri Apr 19 2024 14:27:59 for Carma-platform by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
